(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function e(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=e(a);fetch(a.href,r)}})();var Ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function FO(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var a=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:function(){return n[i]}})}),e}var Nx={exports:{}},Kp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE;function GO(){if(AE)return Kp;AE=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,r){var u=null;if(r!==void 0&&(u=""+r),a.key!==void 0&&(u=""+a.key),"key"in a){r={};for(var f in a)f!=="key"&&(r[f]=a[f])}else r=a;return a=r.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:r}}return Kp.Fragment=t,Kp.jsx=e,Kp.jsxs=e,Kp}var RE;function qO(){return RE||(RE=1,Nx.exports=GO()),Nx.exports}var oe=qO(),Lx={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function XO(){if(wE)return Ze;wE=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function _(F){return F===null||typeof F!="object"?null:(F=v&&F[v]||F["@@iterator"],typeof F=="function"?F:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,R={};function T(F,$,mt){this.props=F,this.context=$,this.refs=R,this.updater=mt||b}T.prototype.isReactComponent={},T.prototype.setState=function(F,$){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,$,"setState")},T.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function M(){}M.prototype=T.prototype;function C(F,$,mt){this.props=F,this.context=$,this.refs=R,this.updater=mt||b}var D=C.prototype=new M;D.constructor=C,E(D,T.prototype),D.isPureReactComponent=!0;var O=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function H(F,$,mt,Tt,st,Et){return mt=Et.ref,{$$typeof:n,type:F,key:$,ref:mt!==void 0?mt:null,props:Et}}function G(F,$){return H(F.type,$,void 0,void 0,void 0,F.props)}function B(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function z(F){var $={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(mt){return $[mt]})}var j=/\/+/g;function at(F,$){return typeof F=="object"&&F!==null&&F.key!=null?z(""+F.key):$.toString(36)}function nt(){}function Q(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(nt,nt):(F.status="pending",F.then(function($){F.status==="pending"&&(F.status="fulfilled",F.value=$)},function($){F.status==="pending"&&(F.status="rejected",F.reason=$)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function rt(F,$,mt,Tt,st){var Et=typeof F;(Et==="undefined"||Et==="boolean")&&(F=null);var Bt=!1;if(F===null)Bt=!0;else switch(Et){case"bigint":case"string":case"number":Bt=!0;break;case"object":switch(F.$$typeof){case n:case t:Bt=!0;break;case y:return Bt=F._init,rt(Bt(F._payload),$,mt,Tt,st)}}if(Bt)return st=st(F),Bt=Tt===""?"."+at(F,0):Tt,O(st)?(mt="",Bt!=null&&(mt=Bt.replace(j,"$&/")+"/"),rt(st,$,mt,"",function(Me){return Me})):st!=null&&(B(st)&&(st=G(st,mt+(st.key==null||F&&F.key===st.key?"":(""+st.key).replace(j,"$&/")+"/")+Bt)),$.push(st)),1;Bt=0;var Xt=Tt===""?".":Tt+":";if(O(F))for(var Zt=0;Zt<F.length;Zt++)Tt=F[Zt],Et=Xt+at(Tt,Zt),Bt+=rt(Tt,$,mt,Et,st);else if(Zt=_(F),typeof Zt=="function")for(F=Zt.call(F),Zt=0;!(Tt=F.next()).done;)Tt=Tt.value,Et=Xt+at(Tt,Zt++),Bt+=rt(Tt,$,mt,Et,st);else if(Et==="object"){if(typeof F.then=="function")return rt(Q(F),$,mt,Tt,st);throw $=String(F),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Bt}function I(F,$,mt){if(F==null)return F;var Tt=[],st=0;return rt(F,Tt,"","",function(Et){return $.call(mt,Et,st++)}),Tt}function Z(F){if(F._status===-1){var $=F._result;$=$(),$.then(function(mt){(F._status===0||F._status===-1)&&(F._status=1,F._result=mt)},function(mt){(F._status===0||F._status===-1)&&(F._status=2,F._result=mt)}),F._status===-1&&(F._status=0,F._result=$)}if(F._status===1)return F._result.default;throw F._result}var W=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function J(){}return Ze.Children={map:I,forEach:function(F,$,mt){I(F,function(){$.apply(this,arguments)},mt)},count:function(F){var $=0;return I(F,function(){$++}),$},toArray:function(F){return I(F,function($){return $})||[]},only:function(F){if(!B(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Ze.Component=T,Ze.Fragment=e,Ze.Profiler=a,Ze.PureComponent=C,Ze.StrictMode=i,Ze.Suspense=d,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ze.__COMPILER_RUNTIME={__proto__:null,c:function(F){return N.H.useMemoCache(F)}},Ze.cache=function(F){return function(){return F.apply(null,arguments)}},Ze.cloneElement=function(F,$,mt){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Tt=E({},F.props),st=F.key,Et=void 0;if($!=null)for(Bt in $.ref!==void 0&&(Et=void 0),$.key!==void 0&&(st=""+$.key),$)!L.call($,Bt)||Bt==="key"||Bt==="__self"||Bt==="__source"||Bt==="ref"&&$.ref===void 0||(Tt[Bt]=$[Bt]);var Bt=arguments.length-2;if(Bt===1)Tt.children=mt;else if(1<Bt){for(var Xt=Array(Bt),Zt=0;Zt<Bt;Zt++)Xt[Zt]=arguments[Zt+2];Tt.children=Xt}return H(F.type,st,void 0,void 0,Et,Tt)},Ze.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:r,_context:F},F},Ze.createElement=function(F,$,mt){var Tt,st={},Et=null;if($!=null)for(Tt in $.key!==void 0&&(Et=""+$.key),$)L.call($,Tt)&&Tt!=="key"&&Tt!=="__self"&&Tt!=="__source"&&(st[Tt]=$[Tt]);var Bt=arguments.length-2;if(Bt===1)st.children=mt;else if(1<Bt){for(var Xt=Array(Bt),Zt=0;Zt<Bt;Zt++)Xt[Zt]=arguments[Zt+2];st.children=Xt}if(F&&F.defaultProps)for(Tt in Bt=F.defaultProps,Bt)st[Tt]===void 0&&(st[Tt]=Bt[Tt]);return H(F,Et,void 0,void 0,null,st)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(F){return{$$typeof:f,render:F}},Ze.isValidElement=B,Ze.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:Z}},Ze.memo=function(F,$){return{$$typeof:p,type:F,compare:$===void 0?null:$}},Ze.startTransition=function(F){var $=N.T,mt={};N.T=mt;try{var Tt=F(),st=N.S;st!==null&&st(mt,Tt),typeof Tt=="object"&&Tt!==null&&typeof Tt.then=="function"&&Tt.then(J,W)}catch(Et){W(Et)}finally{N.T=$}},Ze.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ze.use=function(F){return N.H.use(F)},Ze.useActionState=function(F,$,mt){return N.H.useActionState(F,$,mt)},Ze.useCallback=function(F,$){return N.H.useCallback(F,$)},Ze.useContext=function(F){return N.H.useContext(F)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(F,$){return N.H.useDeferredValue(F,$)},Ze.useEffect=function(F,$,mt){var Tt=N.H;if(typeof mt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Tt.useEffect(F,$)},Ze.useId=function(){return N.H.useId()},Ze.useImperativeHandle=function(F,$,mt){return N.H.useImperativeHandle(F,$,mt)},Ze.useInsertionEffect=function(F,$){return N.H.useInsertionEffect(F,$)},Ze.useLayoutEffect=function(F,$){return N.H.useLayoutEffect(F,$)},Ze.useMemo=function(F,$){return N.H.useMemo(F,$)},Ze.useOptimistic=function(F,$){return N.H.useOptimistic(F,$)},Ze.useReducer=function(F,$,mt){return N.H.useReducer(F,$,mt)},Ze.useRef=function(F){return N.H.useRef(F)},Ze.useState=function(F){return N.H.useState(F)},Ze.useSyncExternalStore=function(F,$,mt){return N.H.useSyncExternalStore(F,$,mt)},Ze.useTransition=function(){return N.H.useTransition()},Ze.version="19.1.0",Ze}var CE;function Fl(){return CE||(CE=1,Lx.exports=XO()),Lx.exports}var At=Fl();const ww=rg(At);var Px={exports:{}},Qp={},zx={exports:{}},Bx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function kO(){return DE||(DE=1,function(n){function t(I,Z){var W=I.length;I.push(Z);t:for(;0<W;){var J=W-1>>>1,F=I[J];if(0<a(F,Z))I[J]=Z,I[W]=F,W=J;else break t}}function e(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var Z=I[0],W=I.pop();if(W!==Z){I[0]=W;t:for(var J=0,F=I.length,$=F>>>1;J<$;){var mt=2*(J+1)-1,Tt=I[mt],st=mt+1,Et=I[st];if(0>a(Tt,W))st<F&&0>a(Et,Tt)?(I[J]=Et,I[st]=W,J=st):(I[J]=Tt,I[mt]=W,J=mt);else if(st<F&&0>a(Et,W))I[J]=Et,I[st]=W,J=st;else break t}}return Z}function a(I,Z){var W=I.sortIndex-Z.sortIndex;return W!==0?W:I.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var d=[],p=[],y=1,v=null,_=3,b=!1,E=!1,R=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function O(I){for(var Z=e(p);Z!==null;){if(Z.callback===null)i(p);else if(Z.startTime<=I)i(p),Z.sortIndex=Z.expirationTime,t(d,Z);else break;Z=e(p)}}function N(I){if(R=!1,O(I),!E)if(e(d)!==null)E=!0,L||(L=!0,at());else{var Z=e(p);Z!==null&&rt(N,Z.startTime-I)}}var L=!1,H=-1,G=5,B=-1;function z(){return T?!0:!(n.unstable_now()-B<G)}function j(){if(T=!1,L){var I=n.unstable_now();B=I;var Z=!0;try{t:{E=!1,R&&(R=!1,C(H),H=-1),b=!0;var W=_;try{e:{for(O(I),v=e(d);v!==null&&!(v.expirationTime>I&&z());){var J=v.callback;if(typeof J=="function"){v.callback=null,_=v.priorityLevel;var F=J(v.expirationTime<=I);if(I=n.unstable_now(),typeof F=="function"){v.callback=F,O(I),Z=!0;break e}v===e(d)&&i(d),O(I)}else i(d);v=e(d)}if(v!==null)Z=!0;else{var $=e(p);$!==null&&rt(N,$.startTime-I),Z=!1}}break t}finally{v=null,_=W,b=!1}Z=void 0}}finally{Z?at():L=!1}}}var at;if(typeof D=="function")at=function(){D(j)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,Q=nt.port2;nt.port1.onmessage=j,at=function(){Q.postMessage(null)}}else at=function(){M(j,0)};function rt(I,Z){H=M(function(){I(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(I){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var W=_;_=Z;try{return I()}finally{_=W}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(I,Z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var W=_;_=I;try{return Z()}finally{_=W}},n.unstable_scheduleCallback=function(I,Z,W){var J=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,I){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=W+F,I={id:y++,callback:Z,priorityLevel:I,startTime:W,expirationTime:F,sortIndex:-1},W>J?(I.sortIndex=W,t(p,I),e(d)===null&&I===e(p)&&(R?(C(H),H=-1):R=!0,rt(N,W-J))):(I.sortIndex=F,t(d,I),E||b||(E=!0,L||(L=!0,at()))),I},n.unstable_shouldYield=z,n.unstable_wrapCallback=function(I){var Z=_;return function(){var W=_;_=Z;try{return I.apply(this,arguments)}finally{_=W}}}}(Bx)),Bx}var OE;function jO(){return OE||(OE=1,zx.exports=kO()),zx.exports}var Ix={exports:{}},wa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function YO(){if(UE)return wa;UE=1;var n=Fl();function t(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function r(d,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:d,containerInfo:p,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return wa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,wa.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return r(d,p,null,y)},wa.flushSync=function(d){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,d)return d()}finally{u.T=p,i.p=y,i.d.f()}},wa.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},wa.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},wa.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:b}):y==="script"&&i.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},wa.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},wa.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin);i.d.L(d,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},wa.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=f(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},wa.requestFormReset=function(d){i.d.r(d)},wa.unstable_batchedUpdates=function(d,p){return d(p)},wa.useFormState=function(d,p,y){return u.H.useFormState(d,p,y)},wa.useFormStatus=function(){return u.H.useHostTransitionStatus()},wa.version="19.1.0",wa}var NE;function WO(){if(NE)return Ix.exports;NE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ix.exports=YO(),Ix.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function ZO(){if(LE)return Qp;LE=1;var n=jO(),t=Fl(),e=WO();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function r(s){var o=s,h=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(h=o.return),s=o.return;while(s)}return o.tag===3?h:null}function u(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(r(s)!==s)throw Error(i(188))}function d(s){var o=s.alternate;if(!o){if(o=r(s),o===null)throw Error(i(188));return o!==s?null:s}for(var h=s,m=o;;){var x=h.return;if(x===null)break;var A=x.alternate;if(A===null){if(m=x.return,m!==null){h=m;continue}break}if(x.child===A.child){for(A=x.child;A;){if(A===h)return f(x),s;if(A===m)return f(x),o;A=A.sibling}throw Error(i(188))}if(h.return!==m.return)h=x,m=A;else{for(var P=!1,q=x.child;q;){if(q===h){P=!0,h=x,m=A;break}if(q===m){P=!0,m=x,h=A;break}q=q.sibling}if(!P){for(q=A.child;q;){if(q===h){P=!0,h=A,m=x;break}if(q===m){P=!0,m=A,h=x;break}q=q.sibling}if(!P)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?s:o}function p(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=p(s),o!==null)return o;s=s.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),D=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function at(s){return s===null||typeof s!="object"?null:(s=j&&s[j]||s["@@iterator"],typeof s=="function"?s:null)}var nt=Symbol.for("react.client.reference");function Q(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===nt?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case T:return"Profiler";case R:return"StrictMode";case N:return"Suspense";case L:return"SuspenseList";case B:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case D:return(s.displayName||"Context")+".Provider";case C:return(s._context.displayName||"Context")+".Consumer";case O:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case H:return o=s.displayName||null,o!==null?o:Q(s.type)||"Memo";case G:o=s._payload,s=s._init;try{return Q(s(o))}catch{}}return null}var rt=Array.isArray,I=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},J=[],F=-1;function $(s){return{current:s}}function mt(s){0>F||(s.current=J[F],J[F]=null,F--)}function Tt(s,o){F++,J[F]=s.current,s.current=o}var st=$(null),Et=$(null),Bt=$(null),Xt=$(null);function Zt(s,o){switch(Tt(Bt,o),Tt(Et,s),Tt(st,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?tE(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=tE(o),s=eE(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}mt(st),Tt(st,s)}function Me(){mt(st),mt(Et),mt(Bt)}function ge(s){s.memoizedState!==null&&Tt(Xt,s);var o=st.current,h=eE(o,s.type);o!==h&&(Tt(Et,s),Tt(st,h))}function ke(s){Et.current===s&&(mt(st),mt(Et)),Xt.current===s&&(mt(Xt),kp._currentValue=W)}var an=Object.prototype.hasOwnProperty,ze=n.unstable_scheduleCallback,it=n.unstable_cancelCallback,Un=n.unstable_shouldYield,Vt=n.unstable_requestPaint,Ut=n.unstable_now,Nt=n.unstable_getCurrentPriorityLevel,Kt=n.unstable_ImmediatePriority,Ot=n.unstable_UserBlockingPriority,Y=n.unstable_NormalPriority,V=n.unstable_LowPriority,ft=n.unstable_IdlePriority,wt=n.log,Lt=n.unstable_setDisableYieldValue,Ct=null,$t=null;function Yt(s){if(typeof wt=="function"&&Lt(s),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Ct,s)}catch{}}var Qt=Math.clz32?Math.clz32:ue,Je=Math.log,kt=Math.LN2;function ue(s){return s>>>=0,s===0?32:31-(Je(s)/kt|0)|0}var de=256,pe=4194304;function te(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ge(s,o,h){var m=s.pendingLanes;if(m===0)return 0;var x=0,A=s.suspendedLanes,P=s.pingedLanes;s=s.warmLanes;var q=m&134217727;return q!==0?(m=q&~A,m!==0?x=te(m):(P&=q,P!==0?x=te(P):h||(h=q&~s,h!==0&&(x=te(h))))):(q=m&~A,q!==0?x=te(q):P!==0?x=te(P):h||(h=m&~s,h!==0&&(x=te(h)))),x===0?0:o!==0&&o!==x&&(o&A)===0&&(A=x&-x,h=o&-o,A>=h||A===32&&(h&4194048)!==0)?o:x}function Te(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function gn(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ct(){var s=de;return de<<=1,(de&4194048)===0&&(de=256),s}function ne(){var s=pe;return pe<<=1,(pe&62914560)===0&&(pe=4194304),s}function Rt(s){for(var o=[],h=0;31>h;h++)o.push(s);return o}function Ht(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function ae(s,o,h,m,x,A){var P=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var q=s.entanglements,tt=s.expirationTimes,yt=s.hiddenUpdates;for(h=P&~h;0<h;){var zt=31-Qt(h),Ft=1<<zt;q[zt]=0,tt[zt]=-1;var _t=yt[zt];if(_t!==null)for(yt[zt]=null,zt=0;zt<_t.length;zt++){var bt=_t[zt];bt!==null&&(bt.lane&=-536870913)}h&=~Ft}m!==0&&ie(s,m,0),A!==0&&x===0&&s.tag!==0&&(s.suspendedLanes|=A&~(P&~o))}function ie(s,o,h){s.pendingLanes|=o,s.suspendedLanes&=~o;var m=31-Qt(o);s.entangledLanes|=o,s.entanglements[m]=s.entanglements[m]|1073741824|h&4194090}function Pe(s,o){var h=s.entangledLanes|=o;for(s=s.entanglements;h;){var m=31-Qt(h),x=1<<m;x&o|s[m]&o&&(s[m]|=o),h&=~x}}function An(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function jn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ln(){var s=Z.p;return s!==0?s:(s=window.event,s===void 0?32:xE(s.type))}function va(s,o){var h=Z.p;try{return Z.p=s,o()}finally{Z.p=h}}var Si=Math.random().toString(36).slice(2),fi="__reactFiber$"+Si,bi="__reactProps$"+Si,Qi="__reactContainer$"+Si,_a="__reactEvents$"+Si,ic="__reactListeners$"+Si,Cs="__reactHandles$"+Si,sa="__reactResources$"+Si,Ds="__reactMarker$"+Si;function wn(s){delete s[fi],delete s[bi],delete s[_a],delete s[ic],delete s[Cs]}function Os(s){var o=s[fi];if(o)return o;for(var h=s.parentNode;h;){if(o=h[Qi]||h[fi]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(s=sE(s);s!==null;){if(h=s[fi])return h;s=sE(s)}return o}s=h,h=s.parentNode}return null}function Us(s){if(s=s[fi]||s[Qi]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function ro(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function Er(s){var o=s[sa];return o||(o=s[sa]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function hi(s){s[Ds]=!0}var Gl=new Set,ql={};function Ns(s,o){X(s,o),X(s+"Capture",o)}function X(s,o){for(ql[s]=o,s=0;s<o.length;s++)Gl.add(o[s])}var ut=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xt={},St={};function dt(s){return an.call(St,s)?!0:an.call(xt,s)?!1:ut.test(s)?St[s]=!0:(xt[s]=!0,!1)}function qt(s,o,h){if(dt(o))if(h===null)s.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+h)}}function Jt(s,o,h){if(h===null)s.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+h)}}function ee(s,o,h,m){if(m===null)s.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(o,h,""+m)}}var ce,Re;function xe(s){if(ce===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);ce=o&&o[1]||"",Re=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+s+Re}var ye=!1;function $e(s,o){if(!s||ye)return"";ye=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var Ft=function(){throw Error()};if(Object.defineProperty(Ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ft,[])}catch(bt){var _t=bt}Reflect.construct(s,[],Ft)}else{try{Ft.call()}catch(bt){_t=bt}s.call(Ft.prototype)}}else{try{throw Error()}catch(bt){_t=bt}(Ft=s())&&typeof Ft.catch=="function"&&Ft.catch(function(){})}}catch(bt){if(bt&&_t&&typeof bt.stack=="string")return[bt.stack,_t.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=m.DetermineComponentFrameRoot(),P=A[0],q=A[1];if(P&&q){var tt=P.split(`
`),yt=q.split(`
`);for(x=m=0;m<tt.length&&!tt[m].includes("DetermineComponentFrameRoot");)m++;for(;x<yt.length&&!yt[x].includes("DetermineComponentFrameRoot");)x++;if(m===tt.length||x===yt.length)for(m=tt.length-1,x=yt.length-1;1<=m&&0<=x&&tt[m]!==yt[x];)x--;for(;1<=m&&0<=x;m--,x--)if(tt[m]!==yt[x]){if(m!==1||x!==1)do if(m--,x--,0>x||tt[m]!==yt[x]){var zt=`
`+tt[m].replace(" at new "," at ");return s.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",s.displayName)),zt}while(1<=m&&0<=x);break}}}finally{ye=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?xe(h):""}function hn(s){switch(s.tag){case 26:case 27:case 5:return xe(s.type);case 16:return xe("Lazy");case 13:return xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return $e(s.type,!1);case 11:return $e(s.type.render,!1);case 1:return $e(s.type,!0);case 31:return xe("Activity");default:return""}}function Yn(s){try{var o="";do o+=hn(s),s=s.return;while(s);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function en(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function sn(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Se(s){var o=sn(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),m=""+s[o];if(!s.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var x=h.get,A=h.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return x.call(this)},set:function(P){m=""+P,A.call(this,P)}}),Object.defineProperty(s,o,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(P){m=""+P},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Kn(s){s._valueTracker||(s._valueTracker=Se(s))}function cn(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var h=o.getValue(),m="";return s&&(m=sn(s)?s.checked?"true":"false":s.value),s=m,s!==h?(o.setValue(s),!0):!1}function Ii(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Js=/[\n"\\]/g;function Nn(s){return s.replace(Js,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function $s(s,o,h,m,x,A,P,q){s.name="",P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?s.type=P:s.removeAttribute("type"),o!=null?P==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+en(o)):s.value!==""+en(o)&&(s.value=""+en(o)):P!=="submit"&&P!=="reset"||s.removeAttribute("value"),o!=null?Vi(s,P,en(o)):h!=null?Vi(s,P,en(h)):m!=null&&s.removeAttribute("value"),x==null&&A!=null&&(s.defaultChecked=!!A),x!=null&&(s.checked=x&&typeof x!="function"&&typeof x!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?s.name=""+en(q):s.removeAttribute("name")}function Cn(s,o,h,m,x,A,P,q){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.type=A),o!=null||h!=null){if(!(A!=="submit"&&A!=="reset"||o!=null))return;h=h!=null?""+en(h):"",o=o!=null?""+en(o):h,q||o===s.value||(s.value=o),s.defaultValue=o}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=q?s.checked:!!m,s.defaultChecked=!!m,P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(s.name=P)}function Vi(s,o,h){o==="number"&&Ii(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function di(s,o,h,m){if(s=s.options,o){o={};for(var x=0;x<h.length;x++)o["$"+h[x]]=!0;for(h=0;h<s.length;h++)x=o.hasOwnProperty("$"+s[h].value),s[h].selected!==x&&(s[h].selected=x),x&&m&&(s[h].defaultSelected=!0)}else{for(h=""+en(h),o=null,x=0;x<s.length;x++){if(s[x].value===h){s[x].selected=!0,m&&(s[x].defaultSelected=!0);return}o!==null||s[x].disabled||(o=s[x])}o!==null&&(o.selected=!0)}}function Ci(s,o,h){if(o!=null&&(o=""+en(o),o!==s.value&&(s.value=o),h==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=h!=null?""+en(h):""}function Di(s,o,h,m){if(o==null){if(m!=null){if(h!=null)throw Error(i(92));if(rt(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),o=h}h=en(o),s.defaultValue=h,m=s.textContent,m===h&&m!==""&&m!==null&&(s.value=m)}function ra(s,o){if(o){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=o;return}}s.textContent=o}var tr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ac(s,o,h){var m=o.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":m?s.setProperty(o,h):typeof h!="number"||h===0||tr.has(o)?o==="float"?s.cssFloat=h:s[o]=(""+h).trim():s[o]=h+"px"}function sc(s,o,h){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var x in o)m=o[x],o.hasOwnProperty(x)&&h[x]!==m&&ac(s,x,m)}else for(var A in o)o.hasOwnProperty(A)&&ac(s,A,o[A])}function Pf(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ag=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rc(s){return Ag.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var zf=null;function Bf(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var oo=null,tl=null;function Id(s){var o=Us(s);if(o&&(s=o.stateNode)){var h=s[bi]||null;t:switch(s=o.stateNode,o.type){case"input":if($s(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),o=h.name,h.type==="radio"&&o!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Nn(""+o)+'"][type="radio"]'),o=0;o<h.length;o++){var m=h[o];if(m!==s&&m.form===s.form){var x=m[bi]||null;if(!x)throw Error(i(90));$s(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(o=0;o<h.length;o++)m=h[o],m.form===s.form&&cn(m)}break t;case"textarea":Ci(s,h.value,h.defaultValue);break t;case"select":o=h.value,o!=null&&di(s,!!h.multiple,o,!1)}}}var oc=!1;function Vd(s,o,h){if(oc)return s(o,h);oc=!0;try{var m=s(o);return m}finally{if(oc=!1,(oo!==null||tl!==null)&&(gr(),oo&&(o=oo,s=tl,tl=oo=null,Id(o),s)))for(o=0;o<s.length;o++)Id(s[o])}}function Xl(s,o){var h=s.stateNode;if(h===null)return null;var m=h[bi]||null;if(m===null)return null;h=m[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break t;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(i(231,o,typeof h));return h}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lc=!1;if(er)try{var kl={};Object.defineProperty(kl,"passive",{get:function(){lc=!0}}),window.addEventListener("test",kl,kl),window.removeEventListener("test",kl,kl)}catch{lc=!1}var Tr=null,Hd=null,If=null;function Fd(){if(If)return If;var s,o=Hd,h=o.length,m,x="value"in Tr?Tr.value:Tr.textContent,A=x.length;for(s=0;s<h&&o[s]===x[s];s++);var P=h-s;for(m=1;m<=P&&o[h-m]===x[A-m];m++);return If=x.slice(s,1<m?1-m:void 0)}function lo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function jl(){return!0}function uc(){return!1}function oa(s){function o(h,m,x,A,P){this._reactName=h,this._targetInst=x,this.type=m,this.nativeEvent=A,this.target=P,this.currentTarget=null;for(var q in s)s.hasOwnProperty(q)&&(h=s[q],this[q]=h?h(A):A[q]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?jl:uc,this.isPropagationStopped=uc,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=jl)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=jl)},persist:function(){},isPersistent:jl}),o}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yl=oa(uo),Wl=y({},uo,{view:0,detail:0}),Rg=oa(Wl),Ar,Zl,Kl,Ql=y({},Wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fc,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Kl&&(Kl&&s.type==="mousemove"?(Ar=s.screenX-Kl.screenX,Zl=s.screenY-Kl.screenY):Zl=Ar=0,Kl=s),Ar)},movementY:function(s){return"movementY"in s?s.movementY:Zl}}),Gd=oa(Ql),wg=y({},Ql,{dataTransfer:0}),K_=oa(wg),Hi=y({},Wl,{relatedTarget:0}),Vf=oa(Hi),Cg=y({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),Dg=oa(Cg),Og=y({},uo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ug=oa(Og),cc=y({},uo,{data:0}),Hf=oa(cc),Ng={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qd(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Pg[s])?!!o[s]:!1}function fc(){return qd}var zg=y({},Wl,{key:function(s){if(s.key){var o=Ng[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=lo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Lg[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fc,charCode:function(s){return s.type==="keypress"?lo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?lo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Xd=oa(zg),kd=y({},Ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ff=oa(kd),Bg=y({},Wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fc}),jd=oa(Bg),Ig=y({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rr=oa(Ig),Yd=y({},Ql,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Q_=oa(Yd),Vg=y({},uo,{newState:0,oldState:0}),co=oa(Vg),wr=[9,13,27,32],hc=er&&"CompositionEvent"in window,el=null;er&&"documentMode"in document&&(el=document.documentMode);var dc=er&&"TextEvent"in window&&!el,pc=er&&(!hc||el&&8<el&&11>=el),fo=" ",Fi=!1;function mc(s,o){switch(s){case"keyup":return wr.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wd(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ho=!1;function gc(s,o){switch(s){case"compositionend":return Wd(o);case"keypress":return o.which!==32?null:(Fi=!0,fo);case"textInput":return s=o.data,s===fo&&Fi?null:s;default:return null}}function Zd(s,o){if(ho)return s==="compositionend"||!hc&&mc(s,o)?(s=Fd(),If=Hd=Tr=null,ho=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return pc&&o.locale!=="ko"?null:o.data;default:return null}}var Gf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kd(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Gf[s.type]:o==="textarea"}function xa(s,o,h,m){oo?tl?tl.push(m):tl=[m]:oo=m,o=Iy(o,"onChange"),0<o.length&&(h=new Yl("onChange","change",null,h,m),s.push({event:h,listeners:o}))}var Jl=null,nl=null;function Hg(s){Z1(s,0)}function yc(s){var o=ro(s);if(cn(o))return s}function qf(s,o){if(s==="change")return o}var Xf=!1;if(er){var kf;if(er){var $l="oninput"in document;if(!$l){var tu=document.createElement("div");tu.setAttribute("oninput","return;"),$l=typeof tu.oninput=="function"}kf=$l}else kf=!1;Xf=kf&&(!document.documentMode||9<document.documentMode)}function Wn(){Jl&&(Jl.detachEvent("onpropertychange",Fg),nl=Jl=null)}function Fg(s){if(s.propertyName==="value"&&yc(nl)){var o=[];xa(o,nl,s,Bf(s)),Vd(Hg,o)}}function J_(s,o,h){s==="focusin"?(Wn(),Jl=o,nl=h,Jl.attachEvent("onpropertychange",Fg)):s==="focusout"&&Wn()}function Gg(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return yc(nl)}function vc(s,o){if(s==="click")return yc(o)}function po(s,o){if(s==="input"||s==="change")return yc(o)}function qg(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Sa=typeof Object.is=="function"?Object.is:qg;function Ls(s,o){if(Sa(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var h=Object.keys(s),m=Object.keys(o);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var x=h[m];if(!an.call(o,x)||!Sa(s[x],o[x]))return!1}return!0}function ba(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Qd(s,o){var h=ba(s);s=0;for(var m;h;){if(h.nodeType===3){if(m=s+h.textContent.length,s<=o&&m>=o)return{node:h,offset:o-s};s=m}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=ba(h)}}function Jd(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Jd(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function $d(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Ii(s.document);o instanceof s.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)s=o.contentWindow;else break;o=Ii(s.document)}return o}function _c(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var tp=er&&"documentMode"in document&&11>=document.documentMode,Cr=null,jf=null,xc=null,Yf=!1;function ep(s,o,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Yf||Cr==null||Cr!==Ii(m)||(m=Cr,"selectionStart"in m&&_c(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),xc&&Ls(xc,m)||(xc=m,m=Iy(jf,"onSelect"),0<m.length&&(o=new Yl("onSelect","select",null,o,h),s.push({event:o,listeners:m}),o.target=Cr)))}function Gi(s,o){var h={};return h[s.toLowerCase()]=o.toLowerCase(),h["Webkit"+s]="webkit"+o,h["Moz"+s]="moz"+o,h}var mo={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionrun:Gi("Transition","TransitionRun"),transitionstart:Gi("Transition","TransitionStart"),transitioncancel:Gi("Transition","TransitionCancel"),transitionend:Gi("Transition","TransitionEnd")},Wf={},Xg={};er&&(Xg=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function Dr(s){if(Wf[s])return Wf[s];if(!mo[s])return s;var o=mo[s],h;for(h in o)if(o.hasOwnProperty(h)&&h in Xg)return Wf[s]=o[h];return s}var la=Dr("animationend"),np=Dr("animationiteration"),Ma=Dr("animationstart"),kg=Dr("transitionrun"),Or=Dr("transitionstart"),eu=Dr("transitioncancel"),Ur=Dr("transitionend"),Zf=new Map,Sc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sc.push("scrollEnd");function Oi(s,o){Zf.set(s,o),Ns(o,[s])}var ip=new WeakMap;function qi(s,o){if(typeof s=="object"&&s!==null){var h=ip.get(s);return h!==void 0?h:(o={value:s,source:o,stack:Yn(o)},ip.set(s,o),o)}return{value:s,source:o,stack:Yn(o)}}var Ji=[],ls=0,Kf=0;function bc(){for(var s=ls,o=Kf=ls=0;o<s;){var h=Ji[o];Ji[o++]=null;var m=Ji[o];Ji[o++]=null;var x=Ji[o];Ji[o++]=null;var A=Ji[o];if(Ji[o++]=null,m!==null&&x!==null){var P=m.pending;P===null?x.next=x:(x.next=P.next,P.next=x),m.pending=x}A!==0&&ap(h,x,A)}}function go(s,o,h,m){Ji[ls++]=s,Ji[ls++]=o,Ji[ls++]=h,Ji[ls++]=m,Kf|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function Qf(s,o,h,m){return go(s,o,h,m),nu(s)}function Nr(s,o){return go(s,null,null,o),nu(s)}function ap(s,o,h){s.lanes|=h;var m=s.alternate;m!==null&&(m.lanes|=h);for(var x=!1,A=s.return;A!==null;)A.childLanes|=h,m=A.alternate,m!==null&&(m.childLanes|=h),A.tag===22&&(s=A.stateNode,s===null||s._visibility&1||(x=!0)),s=A,A=A.return;return s.tag===3?(A=s.stateNode,x&&o!==null&&(x=31-Qt(h),s=A.hiddenUpdates,m=s[x],m===null?s[x]=[o]:m.push(o),o.lane=h|536870912),A):null}function nu(s){if(50<mr)throw mr=0,xl=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var yo={};function sp(s,o,h,m){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(s,o,h,m){return new sp(s,o,h,m)}function Mc(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ii(s,o){var h=s.alternate;return h===null?(h=Ea(s.tag,o,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=o,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&65011712,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,o=s.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function rp(s,o){s.flags&=65011714;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,o=h.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Ui(s,o,h,m,x,A){var P=0;if(m=s,typeof s=="function")Mc(s)&&(P=1);else if(typeof s=="string")P=wO(s,h,st.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case B:return s=Ea(31,h,o,x),s.elementType=B,s.lanes=A,s;case E:return vo(h.children,x,A,o);case R:P=8,x|=24;break;case T:return s=Ea(12,h,o,x|2),s.elementType=T,s.lanes=A,s;case N:return s=Ea(13,h,o,x),s.elementType=N,s.lanes=A,s;case L:return s=Ea(19,h,o,x),s.elementType=L,s.lanes=A,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case M:case D:P=10;break t;case C:P=9;break t;case O:P=11;break t;case H:P=14;break t;case G:P=16,m=null;break t}P=29,h=Error(i(130,s===null?"null":typeof s,"")),m=null}return o=Ea(P,h,o,x),o.elementType=s,o.type=m,o.lanes=A,o}function vo(s,o,h,m){return s=Ea(7,s,m,o),s.lanes=h,s}function Ec(s,o,h){return s=Ea(6,s,null,o),s.lanes=h,s}function Jf(s,o,h){return o=Ea(4,s.children!==null?s.children:[],s.key,o),o.lanes=h,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var iu=[],Ta=0,Tc=null,au=0,Xi=[],Va=0,_o=null,nr=1,ir="";function Lr(s,o){iu[Ta++]=au,iu[Ta++]=Tc,Tc=s,au=o}function $f(s,o,h){Xi[Va++]=nr,Xi[Va++]=ir,Xi[Va++]=_o,_o=s;var m=nr;s=ir;var x=32-Qt(m)-1;m&=~(1<<x),h+=1;var A=32-Qt(o)+x;if(30<A){var P=x-x%5;A=(m&(1<<P)-1).toString(32),m>>=P,x-=P,nr=1<<32-Qt(o)+x|h<<x|m,ir=A+s}else nr=1<<A|h<<x|m,ir=s}function op(s){s.return!==null&&(Lr(s,1),$f(s,1,0))}function lp(s){for(;s===Tc;)Tc=iu[--Ta],iu[Ta]=null,au=iu[--Ta],iu[Ta]=null;for(;s===_o;)_o=Xi[--Va],Xi[Va]=null,ir=Xi[--Va],Xi[Va]=null,nr=Xi[--Va],Xi[Va]=null}var ua=null,Qn=null,yn=!1,us=null,Ha=!1,th=Error(i(519));function xo(s){var o=Error(i(418,""));throw il(qi(o,s)),th}function jg(s){var o=s.stateNode,h=s.type,m=s.memoizedProps;switch(o[fi]=s,o[bi]=m,h){case"dialog":un("cancel",o),un("close",o);break;case"iframe":case"object":case"embed":un("load",o);break;case"video":case"audio":for(h=0;h<Vp.length;h++)un(Vp[h],o);break;case"source":un("error",o);break;case"img":case"image":case"link":un("error",o),un("load",o);break;case"details":un("toggle",o);break;case"input":un("invalid",o),Cn(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Kn(o);break;case"select":un("invalid",o);break;case"textarea":un("invalid",o),Di(o,m.value,m.defaultValue,m.children),Kn(o)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||o.textContent===""+h||m.suppressHydrationWarning===!0||$1(o.textContent,h)?(m.popover!=null&&(un("beforetoggle",o),un("toggle",o)),m.onScroll!=null&&un("scroll",o),m.onScrollEnd!=null&&un("scrollend",o),m.onClick!=null&&(o.onclick=Vy),o=!0):o=!1,o||xo(s)}function up(s){for(ua=s.return;ua;)switch(ua.tag){case 5:case 13:Ha=!1;return;case 27:case 3:Ha=!0;return;default:ua=ua.return}}function Ps(s){if(s!==ua)return!1;if(!yn)return up(s),yn=!0,!1;var o=s.tag,h;if((h=o!==3&&o!==27)&&((h=o===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||vx(s.type,s.memoizedProps)),h=!h),h&&Qn&&xo(s),up(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));t:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(h=s.data,h==="/$"){if(o===0){Qn=Wr(s.nextSibling);break t}o--}else h!=="$"&&h!=="$!"&&h!=="$?"||o++;s=s.nextSibling}Qn=null}}else o===27?(o=Qn,Cu(s.type)?(s=bx,bx=null,Qn=s):Qn=o):Qn=ua?Wr(s.stateNode.nextSibling):null;return!0}function su(){Qn=ua=null,yn=!1}function bn(){var s=us;return s!==null&&(Ae===null?Ae=s:Ae.push.apply(Ae,s),us=null),s}function il(s){us===null?us=[s]:us.push(s)}var cp=$(null),So=null,Pr=null;function bo(s,o,h){Tt(cp,o._currentValue),o._currentValue=h}function zr(s){s._currentValue=cp.current,mt(cp)}function fp(s,o,h){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===h)break;s=s.return}}function Ac(s,o,h,m){var x=s.child;for(x!==null&&(x.return=s);x!==null;){var A=x.dependencies;if(A!==null){var P=x.child;A=A.firstContext;t:for(;A!==null;){var q=A;A=x;for(var tt=0;tt<o.length;tt++)if(q.context===o[tt]){A.lanes|=h,q=A.alternate,q!==null&&(q.lanes|=h),fp(A.return,h,s),m||(P=null);break t}A=q.next}}else if(x.tag===18){if(P=x.return,P===null)throw Error(i(341));P.lanes|=h,A=P.alternate,A!==null&&(A.lanes|=h),fp(P,h,s),P=null}else P=x.child;if(P!==null)P.return=x;else for(P=x;P!==null;){if(P===s){P=null;break}if(x=P.sibling,x!==null){x.return=P.return,P=x;break}P=P.return}x=P}}function cs(s,o,h,m){s=null;for(var x=o,A=!1;x!==null;){if(!A){if((x.flags&524288)!==0)A=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var P=x.alternate;if(P===null)throw Error(i(387));if(P=P.memoizedProps,P!==null){var q=x.type;Sa(x.pendingProps.value,P.value)||(s!==null?s.push(q):s=[q])}}else if(x===Xt.current){if(P=x.alternate,P===null)throw Error(i(387));P.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(s!==null?s.push(kp):s=[kp])}x=x.return}s!==null&&Ac(o,s,h,m),o.flags|=262144}function Rc(s){for(s=s.firstContext;s!==null;){if(!Sa(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ar(s){So=s,Pr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function $n(s){return eh(So,s)}function wc(s,o){return So===null&&ar(s),eh(s,o)}function eh(s,o){var h=o._currentValue;if(o={context:o,memoizedValue:h,next:null},Pr===null){if(s===null)throw Error(i(308));Pr=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Pr=Pr.next=o;return h}var hp=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(h,m){s.push(m)}};this.abort=function(){o.aborted=!0,s.forEach(function(h){return h()})}},$_=n.unstable_scheduleCallback,Yg=n.unstable_NormalPriority,pi={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nh(){return{controller:new hp,data:new Map,refCount:0}}function ru(s){s.refCount--,s.refCount===0&&$_(Yg,function(){s.controller.abort()})}var ou=null,Cc=0,Ve=0,lu=null;function Fa(s,o){if(ou===null){var h=ou=[];Cc=0,Ve=ux(),lu={status:"pending",value:void 0,then:function(m){h.push(m)}}}return Cc++,o.then(ih,ih),o}function ih(){if(--Cc===0&&ou!==null){lu!==null&&(lu.status="fulfilled");var s=ou;ou=null,Ve=0,lu=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function tx(s,o){var h=[],m={status:"pending",value:null,reason:null,then:function(x){h.push(x)}};return s.then(function(){m.status="fulfilled",m.value=o;for(var x=0;x<h.length;x++)(0,h[x])(o)},function(x){for(m.status="rejected",m.reason=x,x=0;x<h.length;x++)(0,h[x])(void 0)}),m}var Dc=I.S;I.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&Fa(s,o),Dc!==null&&Dc(s,o)};var fs=$(null);function Mo(){var s=fs.current;return s!==null?s:Be.pooledCache}function Oc(s,o){o===null?Tt(fs,fs.current):Tt(fs,o.pool)}function ah(){var s=Mo();return s===null?null:{parent:pi._currentValue,pool:s}}var Uc=Error(i(460)),dp=Error(i(474)),zs=Error(i(542)),Nc={then:function(){}};function sh(s){return s=s.status,s==="fulfilled"||s==="rejected"}function uu(){}function rh(s,o,h){switch(h=s[h],h===void 0?s.push(o):h!==o&&(o.then(uu,uu),o=h),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Wg(s),s;default:if(typeof o.status=="string")o.then(uu,uu);else{if(s=Be,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(m){if(o.status==="pending"){var x=o;x.status="fulfilled",x.value=m}},function(m){if(o.status==="pending"){var x=o;x.status="rejected",x.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Wg(s),s}throw hs=o,Uc}}var hs=null;function pp(){if(hs===null)throw Error(i(459));var s=hs;return hs=null,s}function Wg(s){if(s===Uc||s===zs)throw Error(i(483))}var Br=!1;function mp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oe(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function sr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ir(s,o,h){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Mn&2)!==0){var x=m.pending;return x===null?o.next=o:(o.next=x.next,x.next=o),m.pending=o,o=nu(s),ap(s,null,h),o}return go(s,m,o,h),nu(s)}function al(s,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194048)!==0)){var m=o.lanes;m&=s.pendingLanes,h|=m,o.lanes=h,Pe(s,h)}}function cu(s,o){var h=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var x=null,A=null;if(h=h.firstBaseUpdate,h!==null){do{var P={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};A===null?x=A=P:A=A.next=P,h=h.next}while(h!==null);A===null?x=A=o:A=A.next=o}else x=A=o;h={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:A,shared:m.shared,callbacks:m.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=o:s.next=o,h.lastBaseUpdate=o}var gp=!1;function Lc(){if(gp){var s=lu;if(s!==null)throw s}}function fu(s,o,h,m){gp=!1;var x=s.updateQueue;Br=!1;var A=x.firstBaseUpdate,P=x.lastBaseUpdate,q=x.shared.pending;if(q!==null){x.shared.pending=null;var tt=q,yt=tt.next;tt.next=null,P===null?A=yt:P.next=yt,P=tt;var zt=s.alternate;zt!==null&&(zt=zt.updateQueue,q=zt.lastBaseUpdate,q!==P&&(q===null?zt.firstBaseUpdate=yt:q.next=yt,zt.lastBaseUpdate=tt))}if(A!==null){var Ft=x.baseState;P=0,zt=yt=tt=null,q=A;do{var _t=q.lane&-536870913,bt=_t!==q.lane;if(bt?(be&_t)===_t:(m&_t)===_t){_t!==0&&_t===Ve&&(gp=!0),zt!==null&&(zt=zt.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});t:{var Ne=s,we=q;_t=o;var qn=h;switch(we.tag){case 1:if(Ne=we.payload,typeof Ne=="function"){Ft=Ne.call(qn,Ft,_t);break t}Ft=Ne;break t;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=we.payload,_t=typeof Ne=="function"?Ne.call(qn,Ft,_t):Ne,_t==null)break t;Ft=y({},Ft,_t);break t;case 2:Br=!0}}_t=q.callback,_t!==null&&(s.flags|=64,bt&&(s.flags|=8192),bt=x.callbacks,bt===null?x.callbacks=[_t]:bt.push(_t))}else bt={lane:_t,tag:q.tag,payload:q.payload,callback:q.callback,next:null},zt===null?(yt=zt=bt,tt=Ft):zt=zt.next=bt,P|=_t;if(q=q.next,q===null){if(q=x.shared.pending,q===null)break;bt=q,q=bt.next,bt.next=null,x.lastBaseUpdate=bt,x.shared.pending=null}}while(!0);zt===null&&(tt=Ft),x.baseState=tt,x.firstBaseUpdate=yt,x.lastBaseUpdate=zt,A===null&&(x.shared.lanes=0),Xs|=P,s.lanes=P,s.memoizedState=Ft}}function hu(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function Zg(s,o){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)hu(h[s],o)}var du=$(null),oh=$(0);function Kg(s,o){s=vs,Tt(oh,s),Tt(du,o),vs=s|o.baseLanes}function yp(){Tt(oh,vs),Tt(du,du.current)}function Pc(){vs=oh.current,mt(du),mt(oh)}var Vr=0,He=null,Rn=null,mi=null,lh=!1,Eo=!1,ca=!1,Mi=0,ds=0,ki=null,Qg=0;function ai(){throw Error(i(321))}function $i(s,o){if(o===null)return!1;for(var h=0;h<o.length&&h<s.length;h++)if(!Sa(s[h],o[h]))return!1;return!0}function Hr(s,o,h,m,x,A){return Vr=A,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,I.H=s===null||s.memoizedState===null?yh:Np,ca=!1,A=h(m,x),ca=!1,Eo&&(A=$g(o,h,m,x)),Jg(s),A}function Jg(s){I.H=Ic;var o=Rn!==null&&Rn.next!==null;if(Vr=0,mi=Rn=He=null,lh=!1,ds=0,ki=null,o)throw Error(i(300));s===null||Ni||(s=s.dependencies,s!==null&&Rc(s)&&(Ni=!0))}function $g(s,o,h,m){He=s;var x=0;do{if(Eo&&(ki=null),ds=0,Eo=!1,25<=x)throw Error(i(301));if(x+=1,mi=Rn=null,s.updateQueue!=null){var A=s.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}I.H=Ty,A=o(h,m)}while(Eo);return A}function ex(){var s=I.H,o=s.useState()[0];return o=typeof o.then=="function"?Bs(o):o,s=s.useState()[0],(Rn!==null?Rn.memoizedState:null)!==s&&(He.flags|=1024),o}function vp(){var s=Mi!==0;return Mi=0,s}function uh(s,o,h){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~h}function _p(s){if(lh){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}lh=!1}Vr=0,mi=Rn=He=null,Eo=!1,ds=Mi=0,ki=null}function fa(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mi===null?He.memoizedState=mi=s:mi=mi.next=s,mi}function gi(){if(Rn===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=Rn.next;var o=mi===null?He.memoizedState:mi.next;if(o!==null)mi=o,Rn=s;else{if(s===null)throw He.alternate===null?Error(i(467)):Error(i(310));Rn=s,s={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},mi===null?He.memoizedState=mi=s:mi=mi.next=s}return mi}function To(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bs(s){var o=ds;return ds+=1,ki===null&&(ki=[]),s=rh(ki,s,o),o=He,(mi===null?o.memoizedState:mi.next)===null&&(o=o.alternate,I.H=o===null||o.memoizedState===null?yh:Np),s}function ch(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Bs(s);if(s.$$typeof===D)return $n(s)}throw Error(i(438,String(s)))}function xp(s){var o=null,h=He.updateQueue;if(h!==null&&(o=h.memoCache),o==null){var m=He.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(x){return x.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),h===null&&(h=To(),He.updateQueue=h),h.memoCache=o,h=o.data[o.index],h===void 0)for(h=o.data[o.index]=Array(s),m=0;m<s;m++)h[m]=z;return o.index++,h}function Fr(s,o){return typeof o=="function"?o(s):o}function Ao(s){var o=gi();return Sp(o,Rn,s)}function Sp(s,o,h){var m=s.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var x=s.baseQueue,A=m.pending;if(A!==null){if(x!==null){var P=x.next;x.next=A.next,A.next=P}o.baseQueue=x=A,m.pending=null}if(A=s.baseState,x===null)s.memoizedState=A;else{o=x.next;var q=P=null,tt=null,yt=o,zt=!1;do{var Ft=yt.lane&-536870913;if(Ft!==yt.lane?(be&Ft)===Ft:(Vr&Ft)===Ft){var _t=yt.revertLane;if(_t===0)tt!==null&&(tt=tt.next={lane:0,revertLane:0,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null}),Ft===Ve&&(zt=!0);else if((Vr&_t)===_t){yt=yt.next,_t===Ve&&(zt=!0);continue}else Ft={lane:0,revertLane:yt.revertLane,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null},tt===null?(q=tt=Ft,P=A):tt=tt.next=Ft,He.lanes|=_t,Xs|=_t;Ft=yt.action,ca&&h(A,Ft),A=yt.hasEagerState?yt.eagerState:h(A,Ft)}else _t={lane:Ft,revertLane:yt.revertLane,action:yt.action,hasEagerState:yt.hasEagerState,eagerState:yt.eagerState,next:null},tt===null?(q=tt=_t,P=A):tt=tt.next=_t,He.lanes|=Ft,Xs|=Ft;yt=yt.next}while(yt!==null&&yt!==o);if(tt===null?P=A:tt.next=q,!Sa(A,s.memoizedState)&&(Ni=!0,zt&&(h=lu,h!==null)))throw h;s.memoizedState=A,s.baseState=P,s.baseQueue=tt,m.lastRenderedState=A}return x===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function bp(s){var o=gi(),h=o.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=s;var m=h.dispatch,x=h.pending,A=o.memoizedState;if(x!==null){h.pending=null;var P=x=x.next;do A=s(A,P.action),P=P.next;while(P!==x);Sa(A,o.memoizedState)||(Ni=!0),o.memoizedState=A,o.baseQueue===null&&(o.baseState=A),h.lastRenderedState=A}return[A,m]}function ty(s,o,h){var m=He,x=gi(),A=yn;if(A){if(h===void 0)throw Error(i(407));h=h()}else h=o();var P=!Sa((Rn||x).memoizedState,h);P&&(x.memoizedState=h,Ni=!0),x=x.queue;var q=ny.bind(null,m,x,s);if(gu(2048,8,q,[s]),x.getSnapshot!==o||P||mi!==null&&mi.memoizedState.tag&1){if(m.flags|=2048,mu(9,zc(),ey.bind(null,m,x,h,o),null),Be===null)throw Error(i(349));A||(Vr&124)!==0||pu(m,o,h)}return h}function pu(s,o,h){s.flags|=16384,s={getSnapshot:o,value:h},o=He.updateQueue,o===null?(o=To(),He.updateQueue=o,o.stores=[s]):(h=o.stores,h===null?o.stores=[s]:h.push(s))}function ey(s,o,h,m){o.value=h,o.getSnapshot=m,iy(o)&&ay(s)}function ny(s,o,h){return h(function(){iy(o)&&ay(s)})}function iy(s){var o=s.getSnapshot;s=s.value;try{var h=o();return!Sa(s,h)}catch{return!0}}function ay(s){var o=Nr(s,2);o!==null&&pa(o,s,2)}function Mp(s){var o=fa();if(typeof s=="function"){var h=s;if(s=h(),ca){Yt(!0);try{h()}finally{Yt(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fr,lastRenderedState:s},o}function sy(s,o,h,m){return s.baseState=h,Sp(s,Rn,typeof m=="function"?m:Fr)}function nx(s,o,h,m,x){if(gh(s))throw Error(i(485));if(s=o.action,s!==null){var A={payload:x,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(P){A.listeners.push(P)}};I.T!==null?h(!0):A.isTransition=!1,m(A),h=o.pending,h===null?(A.next=o.pending=A,ry(o,A)):(A.next=h.next,o.pending=h.next=A)}}function ry(s,o){var h=o.action,m=o.payload,x=s.state;if(o.isTransition){var A=I.T,P={};I.T=P;try{var q=h(x,m),tt=I.S;tt!==null&&tt(P,q),oy(s,o,q)}catch(yt){Ep(s,o,yt)}finally{I.T=A}}else try{A=h(x,m),oy(s,o,A)}catch(yt){Ep(s,o,yt)}}function oy(s,o,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){ly(s,o,m)},function(m){return Ep(s,o,m)}):ly(s,o,h)}function ly(s,o,h){o.status="fulfilled",o.value=h,uy(o),s.state=h,o=s.pending,o!==null&&(h=o.next,h===o?s.pending=null:(h=h.next,o.next=h,ry(s,h)))}function Ep(s,o,h){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=h,uy(o),o=o.next;while(o!==m)}s.action=null}function uy(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Tp(s,o){return o}function cy(s,o){if(yn){var h=Be.formState;if(h!==null){t:{var m=He;if(yn){if(Qn){e:{for(var x=Qn,A=Ha;x.nodeType!==8;){if(!A){x=null;break e}if(x=Wr(x.nextSibling),x===null){x=null;break e}}A=x.data,x=A==="F!"||A==="F"?x:null}if(x){Qn=Wr(x.nextSibling),m=x.data==="F!";break t}}xo(m)}m=!1}m&&(o=h[0])}}return h=fa(),h.memoizedState=h.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:o},h.queue=m,h=My.bind(null,He,m),m.dispatch=h,m=Mp(!1),A=mh.bind(null,He,!1,m.queue),m=fa(),x={state:o,dispatch:null,action:s,pending:null},m.queue=x,h=nx.bind(null,He,x,A,h),x.dispatch=h,m.memoizedState=s,[o,h,!1]}function fy(s){var o=gi();return hy(o,Rn,s)}function hy(s,o,h){if(o=Sp(s,o,Tp)[0],s=Ao(Fr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Bs(o)}catch(P){throw P===Uc?zs:P}else m=o;o=gi();var x=o.queue,A=x.dispatch;return h!==o.memoizedState&&(He.flags|=2048,mu(9,zc(),ix.bind(null,x,h),null)),[m,A,s]}function ix(s,o){s.action=o}function dy(s){var o=gi(),h=Rn;if(h!==null)return hy(o,h,s);gi(),o=o.memoizedState,h=gi();var m=h.queue.dispatch;return h.memoizedState=s,[o,m,!1]}function mu(s,o,h,m){return s={tag:s,create:h,deps:m,inst:o,next:null},o=He.updateQueue,o===null&&(o=To(),He.updateQueue=o),h=o.lastEffect,h===null?o.lastEffect=s.next=s:(m=h.next,h.next=s,s.next=m,o.lastEffect=s),s}function zc(){return{destroy:void 0,resource:void 0}}function Ap(){return gi().memoizedState}function fh(s,o,h,m){var x=fa();m=m===void 0?null:m,He.flags|=s,x.memoizedState=mu(1|o,zc(),h,m)}function gu(s,o,h,m){var x=gi();m=m===void 0?null:m;var A=x.memoizedState.inst;Rn!==null&&m!==null&&$i(m,Rn.memoizedState.deps)?x.memoizedState=mu(o,A,h,m):(He.flags|=s,x.memoizedState=mu(1|o,A,h,m))}function Rp(s,o){fh(8390656,8,s,o)}function wp(s,o){gu(2048,8,s,o)}function hh(s,o){return gu(4,2,s,o)}function dh(s,o){return gu(4,4,s,o)}function py(s,o){if(typeof o=="function"){s=s();var h=o(s);return function(){typeof h=="function"?h():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function my(s,o,h){h=h!=null?h.concat([s]):null,gu(4,4,py.bind(null,o,s),h)}function Cp(){}function gy(s,o){var h=gi();o=o===void 0?null:o;var m=h.memoizedState;return o!==null&&$i(o,m[1])?m[0]:(h.memoizedState=[s,o],s)}function Dp(s,o){var h=gi();o=o===void 0?null:o;var m=h.memoizedState;if(o!==null&&$i(o,m[1]))return m[0];if(m=s(),ca){Yt(!0);try{s()}finally{Yt(!1)}}return h.memoizedState=[m,o],m}function ph(s,o,h){return h===void 0||(Vr&1073741824)!==0?s.memoizedState=o:(s.memoizedState=h,s=wh(),He.lanes|=s,Xs|=s,h)}function yy(s,o,h,m){return Sa(h,o)?h:du.current!==null?(s=ph(s,h,m),Sa(s,o)||(Ni=!0),s):(Vr&42)===0?(Ni=!0,s.memoizedState=h):(s=wh(),He.lanes|=s,Xs|=s,o)}function vy(s,o,h,m,x){var A=Z.p;Z.p=A!==0&&8>A?A:8;var P=I.T,q={};I.T=q,mh(s,!1,o,h);try{var tt=x(),yt=I.S;if(yt!==null&&yt(q,tt),tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var zt=tx(tt,m);Bc(s,o,zt,ni(s))}else Bc(s,o,m,ni(s))}catch(Ft){Bc(s,o,{then:function(){},status:"rejected",reason:Ft},ni())}finally{Z.p=A,I.T=P}}function ax(){}function Op(s,o,h,m){if(s.tag!==5)throw Error(i(476));var x=_y(s).queue;vy(s,x,o,W,h===null?ax:function(){return xy(s),h(m)})}function _y(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fr,lastRenderedState:W},next:null};var h={};return o.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fr,lastRenderedState:h},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function xy(s){var o=_y(s).next.queue;Bc(s,o,{},ni())}function Up(){return $n(kp)}function Sy(){return gi().memoizedState}function by(){return gi().memoizedState}function sx(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var h=ni();s=sr(h);var m=Ir(o,s,h);m!==null&&(pa(m,o,h),al(m,o,h)),o={cache:nh()},s.payload=o;return}o=o.return}}function rx(s,o,h){var m=ni();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},gh(s)?Ey(o,h):(h=Qf(s,o,h,m),h!==null&&(pa(h,s,m),Ga(h,o,m)))}function My(s,o,h){var m=ni();Bc(s,o,h,m)}function Bc(s,o,h,m){var x={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(gh(s))Ey(o,x);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=o.lastRenderedReducer,A!==null))try{var P=o.lastRenderedState,q=A(P,h);if(x.hasEagerState=!0,x.eagerState=q,Sa(q,P))return go(s,o,x,0),Be===null&&bc(),!1}catch{}finally{}if(h=Qf(s,o,x,m),h!==null)return pa(h,s,m),Ga(h,o,m),!0}return!1}function mh(s,o,h,m){if(m={lane:2,revertLane:ux(),action:m,hasEagerState:!1,eagerState:null,next:null},gh(s)){if(o)throw Error(i(479))}else o=Qf(s,h,m,2),o!==null&&pa(o,s,2)}function gh(s){var o=s.alternate;return s===He||o!==null&&o===He}function Ey(s,o){Eo=lh=!0;var h=s.pending;h===null?o.next=o:(o.next=h.next,h.next=o),s.pending=o}function Ga(s,o,h){if((h&4194048)!==0){var m=o.lanes;m&=s.pendingLanes,h|=m,o.lanes=h,Pe(s,h)}}var Ic={readContext:$n,use:ch,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useLayoutEffect:ai,useInsertionEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useSyncExternalStore:ai,useId:ai,useHostTransitionStatus:ai,useFormState:ai,useActionState:ai,useOptimistic:ai,useMemoCache:ai,useCacheRefresh:ai},yh={readContext:$n,use:ch,useCallback:function(s,o){return fa().memoizedState=[s,o===void 0?null:o],s},useContext:$n,useEffect:Rp,useImperativeHandle:function(s,o,h){h=h!=null?h.concat([s]):null,fh(4194308,4,py.bind(null,o,s),h)},useLayoutEffect:function(s,o){return fh(4194308,4,s,o)},useInsertionEffect:function(s,o){fh(4,2,s,o)},useMemo:function(s,o){var h=fa();o=o===void 0?null:o;var m=s();if(ca){Yt(!0);try{s()}finally{Yt(!1)}}return h.memoizedState=[m,o],m},useReducer:function(s,o,h){var m=fa();if(h!==void 0){var x=h(o);if(ca){Yt(!0);try{h(o)}finally{Yt(!1)}}}else x=o;return m.memoizedState=m.baseState=x,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:x},m.queue=s,s=s.dispatch=rx.bind(null,He,s),[m.memoizedState,s]},useRef:function(s){var o=fa();return s={current:s},o.memoizedState=s},useState:function(s){s=Mp(s);var o=s.queue,h=My.bind(null,He,o);return o.dispatch=h,[s.memoizedState,h]},useDebugValue:Cp,useDeferredValue:function(s,o){var h=fa();return ph(h,s,o)},useTransition:function(){var s=Mp(!1);return s=vy.bind(null,He,s.queue,!0,!1),fa().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,h){var m=He,x=fa();if(yn){if(h===void 0)throw Error(i(407));h=h()}else{if(h=o(),Be===null)throw Error(i(349));(be&124)!==0||pu(m,o,h)}x.memoizedState=h;var A={value:h,getSnapshot:o};return x.queue=A,Rp(ny.bind(null,m,A,s),[s]),m.flags|=2048,mu(9,zc(),ey.bind(null,m,A,h,o),null),h},useId:function(){var s=fa(),o=Be.identifierPrefix;if(yn){var h=ir,m=nr;h=(m&~(1<<32-Qt(m)-1)).toString(32)+h,o="«"+o+"R"+h,h=Mi++,0<h&&(o+="H"+h.toString(32)),o+="»"}else h=Qg++,o="«"+o+"r"+h.toString(32)+"»";return s.memoizedState=o},useHostTransitionStatus:Up,useFormState:cy,useActionState:cy,useOptimistic:function(s){var o=fa();o.memoizedState=o.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=h,o=mh.bind(null,He,!0,h),h.dispatch=o,[s,o]},useMemoCache:xp,useCacheRefresh:function(){return fa().memoizedState=sx.bind(null,He)}},Np={readContext:$n,use:ch,useCallback:gy,useContext:$n,useEffect:wp,useImperativeHandle:my,useInsertionEffect:hh,useLayoutEffect:dh,useMemo:Dp,useReducer:Ao,useRef:Ap,useState:function(){return Ao(Fr)},useDebugValue:Cp,useDeferredValue:function(s,o){var h=gi();return yy(h,Rn.memoizedState,s,o)},useTransition:function(){var s=Ao(Fr)[0],o=gi().memoizedState;return[typeof s=="boolean"?s:Bs(s),o]},useSyncExternalStore:ty,useId:Sy,useHostTransitionStatus:Up,useFormState:fy,useActionState:fy,useOptimistic:function(s,o){var h=gi();return sy(h,Rn,s,o)},useMemoCache:xp,useCacheRefresh:by},Ty={readContext:$n,use:ch,useCallback:gy,useContext:$n,useEffect:wp,useImperativeHandle:my,useInsertionEffect:hh,useLayoutEffect:dh,useMemo:Dp,useReducer:bp,useRef:Ap,useState:function(){return bp(Fr)},useDebugValue:Cp,useDeferredValue:function(s,o){var h=gi();return Rn===null?ph(h,s,o):yy(h,Rn.memoizedState,s,o)},useTransition:function(){var s=bp(Fr)[0],o=gi().memoizedState;return[typeof s=="boolean"?s:Bs(s),o]},useSyncExternalStore:ty,useId:Sy,useHostTransitionStatus:Up,useFormState:dy,useActionState:dy,useOptimistic:function(s,o){var h=gi();return Rn!==null?sy(h,Rn,s,o):(h.baseState=s,[s,h.queue.dispatch])},useMemoCache:xp,useCacheRefresh:by},sl=null,Vc=0;function Hc(s){var o=Vc;return Vc+=1,sl===null&&(sl=[]),rh(sl,s,o)}function yu(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function vh(s,o){throw o.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function Ay(s){var o=s._init;return o(s._payload)}function Ry(s){function o(ht,lt){if(s){var gt=ht.deletions;gt===null?(ht.deletions=[lt],ht.flags|=16):gt.push(lt)}}function h(ht,lt){if(!s)return null;for(;lt!==null;)o(ht,lt),lt=lt.sibling;return null}function m(ht){for(var lt=new Map;ht!==null;)ht.key!==null?lt.set(ht.key,ht):lt.set(ht.index,ht),ht=ht.sibling;return lt}function x(ht,lt){return ht=ii(ht,lt),ht.index=0,ht.sibling=null,ht}function A(ht,lt,gt){return ht.index=gt,s?(gt=ht.alternate,gt!==null?(gt=gt.index,gt<lt?(ht.flags|=67108866,lt):gt):(ht.flags|=67108866,lt)):(ht.flags|=1048576,lt)}function P(ht){return s&&ht.alternate===null&&(ht.flags|=67108866),ht}function q(ht,lt,gt,It){return lt===null||lt.tag!==6?(lt=Ec(gt,ht.mode,It),lt.return=ht,lt):(lt=x(lt,gt),lt.return=ht,lt)}function tt(ht,lt,gt,It){var he=gt.type;return he===E?zt(ht,lt,gt.props.children,It,gt.key):lt!==null&&(lt.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===G&&Ay(he)===lt.type)?(lt=x(lt,gt.props),yu(lt,gt),lt.return=ht,lt):(lt=Ui(gt.type,gt.key,gt.props,null,ht.mode,It),yu(lt,gt),lt.return=ht,lt)}function yt(ht,lt,gt,It){return lt===null||lt.tag!==4||lt.stateNode.containerInfo!==gt.containerInfo||lt.stateNode.implementation!==gt.implementation?(lt=Jf(gt,ht.mode,It),lt.return=ht,lt):(lt=x(lt,gt.children||[]),lt.return=ht,lt)}function zt(ht,lt,gt,It,he){return lt===null||lt.tag!==7?(lt=vo(gt,ht.mode,It,he),lt.return=ht,lt):(lt=x(lt,gt),lt.return=ht,lt)}function Ft(ht,lt,gt){if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return lt=Ec(""+lt,ht.mode,gt),lt.return=ht,lt;if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case _:return gt=Ui(lt.type,lt.key,lt.props,null,ht.mode,gt),yu(gt,lt),gt.return=ht,gt;case b:return lt=Jf(lt,ht.mode,gt),lt.return=ht,lt;case G:var It=lt._init;return lt=It(lt._payload),Ft(ht,lt,gt)}if(rt(lt)||at(lt))return lt=vo(lt,ht.mode,gt,null),lt.return=ht,lt;if(typeof lt.then=="function")return Ft(ht,Hc(lt),gt);if(lt.$$typeof===D)return Ft(ht,wc(ht,lt),gt);vh(ht,lt)}return null}function _t(ht,lt,gt,It){var he=lt!==null?lt.key:null;if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return he!==null?null:q(ht,lt,""+gt,It);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case _:return gt.key===he?tt(ht,lt,gt,It):null;case b:return gt.key===he?yt(ht,lt,gt,It):null;case G:return he=gt._init,gt=he(gt._payload),_t(ht,lt,gt,It)}if(rt(gt)||at(gt))return he!==null?null:zt(ht,lt,gt,It,null);if(typeof gt.then=="function")return _t(ht,lt,Hc(gt),It);if(gt.$$typeof===D)return _t(ht,lt,wc(ht,gt),It);vh(ht,gt)}return null}function bt(ht,lt,gt,It,he){if(typeof It=="string"&&It!==""||typeof It=="number"||typeof It=="bigint")return ht=ht.get(gt)||null,q(lt,ht,""+It,he);if(typeof It=="object"&&It!==null){switch(It.$$typeof){case _:return ht=ht.get(It.key===null?gt:It.key)||null,tt(lt,ht,It,he);case b:return ht=ht.get(It.key===null?gt:It.key)||null,yt(lt,ht,It,he);case G:var on=It._init;return It=on(It._payload),bt(ht,lt,gt,It,he)}if(rt(It)||at(It))return ht=ht.get(gt)||null,zt(lt,ht,It,he,null);if(typeof It.then=="function")return bt(ht,lt,gt,Hc(It),he);if(It.$$typeof===D)return bt(ht,lt,gt,wc(lt,It),he);vh(lt,It)}return null}function Ne(ht,lt,gt,It){for(var he=null,on=null,_e=lt,Ce=lt=0,na=null;_e!==null&&Ce<gt.length;Ce++){_e.index>Ce?(na=_e,_e=null):na=_e.sibling;var Tn=_t(ht,_e,gt[Ce],It);if(Tn===null){_e===null&&(_e=na);break}s&&_e&&Tn.alternate===null&&o(ht,_e),lt=A(Tn,lt,Ce),on===null?he=Tn:on.sibling=Tn,on=Tn,_e=na}if(Ce===gt.length)return h(ht,_e),yn&&Lr(ht,Ce),he;if(_e===null){for(;Ce<gt.length;Ce++)_e=Ft(ht,gt[Ce],It),_e!==null&&(lt=A(_e,lt,Ce),on===null?he=_e:on.sibling=_e,on=_e);return yn&&Lr(ht,Ce),he}for(_e=m(_e);Ce<gt.length;Ce++)na=bt(_e,ht,Ce,gt[Ce],It),na!==null&&(s&&na.alternate!==null&&_e.delete(na.key===null?Ce:na.key),lt=A(na,lt,Ce),on===null?he=na:on.sibling=na,on=na);return s&&_e.forEach(function(Lu){return o(ht,Lu)}),yn&&Lr(ht,Ce),he}function we(ht,lt,gt,It){if(gt==null)throw Error(i(151));for(var he=null,on=null,_e=lt,Ce=lt=0,na=null,Tn=gt.next();_e!==null&&!Tn.done;Ce++,Tn=gt.next()){_e.index>Ce?(na=_e,_e=null):na=_e.sibling;var Lu=_t(ht,_e,Tn.value,It);if(Lu===null){_e===null&&(_e=na);break}s&&_e&&Lu.alternate===null&&o(ht,_e),lt=A(Lu,lt,Ce),on===null?he=Lu:on.sibling=Lu,on=Lu,_e=na}if(Tn.done)return h(ht,_e),yn&&Lr(ht,Ce),he;if(_e===null){for(;!Tn.done;Ce++,Tn=gt.next())Tn=Ft(ht,Tn.value,It),Tn!==null&&(lt=A(Tn,lt,Ce),on===null?he=Tn:on.sibling=Tn,on=Tn);return yn&&Lr(ht,Ce),he}for(_e=m(_e);!Tn.done;Ce++,Tn=gt.next())Tn=bt(_e,ht,Ce,Tn.value,It),Tn!==null&&(s&&Tn.alternate!==null&&_e.delete(Tn.key===null?Ce:Tn.key),lt=A(Tn,lt,Ce),on===null?he=Tn:on.sibling=Tn,on=Tn);return s&&_e.forEach(function(HO){return o(ht,HO)}),yn&&Lr(ht,Ce),he}function qn(ht,lt,gt,It){if(typeof gt=="object"&&gt!==null&&gt.type===E&&gt.key===null&&(gt=gt.props.children),typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case _:t:{for(var he=gt.key;lt!==null;){if(lt.key===he){if(he=gt.type,he===E){if(lt.tag===7){h(ht,lt.sibling),It=x(lt,gt.props.children),It.return=ht,ht=It;break t}}else if(lt.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===G&&Ay(he)===lt.type){h(ht,lt.sibling),It=x(lt,gt.props),yu(It,gt),It.return=ht,ht=It;break t}h(ht,lt);break}else o(ht,lt);lt=lt.sibling}gt.type===E?(It=vo(gt.props.children,ht.mode,It,gt.key),It.return=ht,ht=It):(It=Ui(gt.type,gt.key,gt.props,null,ht.mode,It),yu(It,gt),It.return=ht,ht=It)}return P(ht);case b:t:{for(he=gt.key;lt!==null;){if(lt.key===he)if(lt.tag===4&&lt.stateNode.containerInfo===gt.containerInfo&&lt.stateNode.implementation===gt.implementation){h(ht,lt.sibling),It=x(lt,gt.children||[]),It.return=ht,ht=It;break t}else{h(ht,lt);break}else o(ht,lt);lt=lt.sibling}It=Jf(gt,ht.mode,It),It.return=ht,ht=It}return P(ht);case G:return he=gt._init,gt=he(gt._payload),qn(ht,lt,gt,It)}if(rt(gt))return Ne(ht,lt,gt,It);if(at(gt)){if(he=at(gt),typeof he!="function")throw Error(i(150));return gt=he.call(gt),we(ht,lt,gt,It)}if(typeof gt.then=="function")return qn(ht,lt,Hc(gt),It);if(gt.$$typeof===D)return qn(ht,lt,wc(ht,gt),It);vh(ht,gt)}return typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint"?(gt=""+gt,lt!==null&&lt.tag===6?(h(ht,lt.sibling),It=x(lt,gt),It.return=ht,ht=It):(h(ht,lt),It=Ec(gt,ht.mode,It),It.return=ht,ht=It),P(ht)):h(ht,lt)}return function(ht,lt,gt,It){try{Vc=0;var he=qn(ht,lt,gt,It);return sl=null,he}catch(_e){if(_e===Uc||_e===zs)throw _e;var on=Ea(29,_e,null,ht.mode);return on.lanes=It,on.return=ht,on}finally{}}}var rl=Ry(!0),wy=Ry(!1),Ln=$(null),Is=null;function Ro(s){var o=s.alternate;Tt(si,si.current&1),Tt(Ln,s),Is===null&&(o===null||du.current!==null||o.memoizedState!==null)&&(Is=s)}function Cy(s){if(s.tag===22){if(Tt(si,si.current),Tt(Ln,s),Is===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Is=s)}}else wo()}function wo(){Tt(si,si.current),Tt(Ln,Ln.current)}function rr(s){mt(Ln),Is===s&&(Is=null),mt(si)}var si=$(0);function Gr(s){for(var o=s;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||Sx(h)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Co(s,o,h,m){o=s.memoizedState,h=h(m,o),h=h==null?o:y({},o,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var ha={enqueueSetState:function(s,o,h){s=s._reactInternals;var m=ni(),x=sr(m);x.payload=o,h!=null&&(x.callback=h),o=Ir(s,x,m),o!==null&&(pa(o,s,m),al(o,s,m))},enqueueReplaceState:function(s,o,h){s=s._reactInternals;var m=ni(),x=sr(m);x.tag=1,x.payload=o,h!=null&&(x.callback=h),o=Ir(s,x,m),o!==null&&(pa(o,s,m),al(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var h=ni(),m=sr(h);m.tag=2,o!=null&&(m.callback=o),o=Ir(s,m,h),o!==null&&(pa(o,s,h),al(o,s,h))}};function Dy(s,o,h,m,x,A,P){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,A,P):o.prototype&&o.prototype.isPureReactComponent?!Ls(h,m)||!Ls(x,A):!0}function Oy(s,o,h,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,m),o.state!==s&&ha.enqueueReplaceState(o,o.state,null)}function or(s,o){var h=o;if("ref"in o){h={};for(var m in o)m!=="ref"&&(h[m]=o[m])}if(s=s.defaultProps){h===o&&(h=y({},h));for(var x in s)h[x]===void 0&&(h[x]=s[x])}return h}var ol=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function Fc(s){ol(s)}function _h(s){console.error(s)}function Uy(s){ol(s)}function xh(s,o){try{var h=s.onUncaughtError;h(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function ps(s,o,h){try{var m=s.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Sh(s,o,h){return h=sr(h),h.tag=3,h.payload={element:null},h.callback=function(){xh(s,o)},h}function Ny(s){return s=sr(s),s.tag=3,s}function bh(s,o,h,m){var x=h.type.getDerivedStateFromError;if(typeof x=="function"){var A=m.value;s.payload=function(){return x(A)},s.callback=function(){ps(o,h,m)}}var P=h.stateNode;P!==null&&typeof P.componentDidCatch=="function"&&(s.callback=function(){ps(o,h,m),typeof x!="function"&&(Ka===null?Ka=new Set([this]):Ka.add(this));var q=m.stack;this.componentDidCatch(m.value,{componentStack:q!==null?q:""})})}function ox(s,o,h,m,x){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=h.alternate,o!==null&&cs(o,h,x,!0),h=Ln.current,h!==null){switch(h.tag){case 13:return Is===null?l():h.alternate===null&&Xn===0&&(Xn=3),h.flags&=-257,h.flags|=65536,h.lanes=x,m===Nc?h.flags|=16384:(o=h.updateQueue,o===null?h.updateQueue=new Set([m]):o.add(m),Mt(s,m,x)),!1;case 22:return h.flags|=65536,m===Nc?h.flags|=16384:(o=h.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=o):(h=o.retryQueue,h===null?o.retryQueue=new Set([m]):h.add(m)),Mt(s,m,x)),!1}throw Error(i(435,h.tag))}return Mt(s,m,x),l(),!1}if(yn)return o=Ln.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=x,m!==th&&(s=Error(i(422),{cause:m}),il(qi(s,h)))):(m!==th&&(o=Error(i(423),{cause:m}),il(qi(o,h))),s=s.current.alternate,s.flags|=65536,x&=-x,s.lanes|=x,m=qi(m,h),x=Sh(s.stateNode,m,x),cu(s,x),Xn!==4&&(Xn=2)),!1;var A=Error(i(520),{cause:m});if(A=qi(A,h),En===null?En=[A]:En.push(A),Xn!==4&&(Xn=2),o===null)return!0;m=qi(m,h),h=o;do{switch(h.tag){case 3:return h.flags|=65536,s=x&-x,h.lanes|=s,s=Sh(h.stateNode,m,s),cu(h,s),!1;case 1:if(o=h.type,A=h.stateNode,(h.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Ka===null||!Ka.has(A))))return h.flags|=65536,x&=-x,h.lanes|=x,x=Ny(x),bh(x,s,h,m),cu(h,x),!1}h=h.return}while(h!==null);return!1}var Ly=Error(i(461)),Ni=!1;function ri(s,o,h,m){o.child=s===null?wy(o,null,h,m):rl(o,s.child,h,m)}function Aa(s,o,h,m,x){h=h.render;var A=o.ref;if("ref"in m){var P={};for(var q in m)q!=="ref"&&(P[q]=m[q])}else P=m;return ar(o),m=Hr(s,o,h,P,A,x),q=vp(),s!==null&&!Ni?(uh(s,o,x),Li(s,o,x)):(yn&&q&&op(o),o.flags|=1,ri(s,o,m,x),o.child)}function Ra(s,o,h,m,x){if(s===null){var A=h.type;return typeof A=="function"&&!Mc(A)&&A.defaultProps===void 0&&h.compare===null?(o.tag=15,o.type=A,Lp(s,o,A,m,x)):(s=Ui(h.type,null,m,o,o.mode,x),s.ref=o.ref,s.return=o,o.child=s)}if(A=s.child,!Gc(s,x)){var P=A.memoizedProps;if(h=h.compare,h=h!==null?h:Ls,h(P,m)&&s.ref===o.ref)return Li(s,o,x)}return o.flags|=1,s=ii(A,m),s.ref=o.ref,s.return=o,o.child=s}function Lp(s,o,h,m,x){if(s!==null){var A=s.memoizedProps;if(Ls(A,m)&&s.ref===o.ref)if(Ni=!1,o.pendingProps=m=A,Gc(s,x))(s.flags&131072)!==0&&(Ni=!0);else return o.lanes=s.lanes,Li(s,o,x)}return vu(s,o,h,m,x)}function ll(s,o,h){var m=o.pendingProps,x=m.children,A=s!==null?s.memoizedState:null;if(m.mode==="hidden"){if((o.flags&128)!==0){if(m=A!==null?A.baseLanes|h:h,s!==null){for(x=o.child=s.child,A=0;x!==null;)A=A|x.lanes|x.childLanes,x=x.sibling;o.childLanes=A&~m}else o.childLanes=0,o.child=null;return ul(s,o,m,h)}if((h&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Oc(o,A!==null?A.cachePool:null),A!==null?Kg(o,A):yp(),Cy(o);else return o.lanes=o.childLanes=536870912,ul(s,o,A!==null?A.baseLanes|h:h,h)}else A!==null?(Oc(o,A.cachePool),Kg(o,A),wo(),o.memoizedState=null):(s!==null&&Oc(o,null),yp(),wo());return ri(s,o,x,h),o.child}function ul(s,o,h,m){var x=Mo();return x=x===null?null:{parent:pi._currentValue,pool:x},o.memoizedState={baseLanes:h,cachePool:x},s!==null&&Oc(o,null),yp(),Cy(o),s!==null&&cs(s,o,m,!0),null}function cl(s,o){var h=o.ref;if(h===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(s===null||s.ref!==h)&&(o.flags|=4194816)}}function vu(s,o,h,m,x){return ar(o),h=Hr(s,o,h,m,void 0,x),m=vp(),s!==null&&!Ni?(uh(s,o,x),Li(s,o,x)):(yn&&m&&op(o),o.flags|=1,ri(s,o,h,x),o.child)}function qa(s,o,h,m,x,A){return ar(o),o.updateQueue=null,h=$g(o,m,h,x),Jg(s),m=vp(),s!==null&&!Ni?(uh(s,o,A),Li(s,o,A)):(yn&&m&&op(o),o.flags|=1,ri(s,o,h,A),o.child)}function Xa(s,o,h,m,x){if(ar(o),o.stateNode===null){var A=yo,P=h.contextType;typeof P=="object"&&P!==null&&(A=$n(P)),A=new h(m,A),o.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=ha,o.stateNode=A,A._reactInternals=o,A=o.stateNode,A.props=m,A.state=o.memoizedState,A.refs={},mp(o),P=h.contextType,A.context=typeof P=="object"&&P!==null?$n(P):yo,A.state=o.memoizedState,P=h.getDerivedStateFromProps,typeof P=="function"&&(Co(o,h,P,m),A.state=o.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(P=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),P!==A.state&&ha.enqueueReplaceState(A,A.state,null),fu(o,m,A,x),Lc(),A.state=o.memoizedState),typeof A.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(s===null){A=o.stateNode;var q=o.memoizedProps,tt=or(h,q);A.props=tt;var yt=A.context,zt=h.contextType;P=yo,typeof zt=="object"&&zt!==null&&(P=$n(zt));var Ft=h.getDerivedStateFromProps;zt=typeof Ft=="function"||typeof A.getSnapshotBeforeUpdate=="function",q=o.pendingProps!==q,zt||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(q||yt!==P)&&Oy(o,A,m,P),Br=!1;var _t=o.memoizedState;A.state=_t,fu(o,m,A,x),Lc(),yt=o.memoizedState,q||_t!==yt||Br?(typeof Ft=="function"&&(Co(o,h,Ft,m),yt=o.memoizedState),(tt=Br||Dy(o,h,tt,m,_t,yt,P))?(zt||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(o.flags|=4194308)):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=yt),A.props=m,A.state=yt,A.context=P,m=tt):(typeof A.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{A=o.stateNode,Oe(s,o),P=o.memoizedProps,zt=or(h,P),A.props=zt,Ft=o.pendingProps,_t=A.context,yt=h.contextType,tt=yo,typeof yt=="object"&&yt!==null&&(tt=$n(yt)),q=h.getDerivedStateFromProps,(yt=typeof q=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(P!==Ft||_t!==tt)&&Oy(o,A,m,tt),Br=!1,_t=o.memoizedState,A.state=_t,fu(o,m,A,x),Lc();var bt=o.memoizedState;P!==Ft||_t!==bt||Br||s!==null&&s.dependencies!==null&&Rc(s.dependencies)?(typeof q=="function"&&(Co(o,h,q,m),bt=o.memoizedState),(zt=Br||Dy(o,h,zt,m,_t,bt,tt)||s!==null&&s.dependencies!==null&&Rc(s.dependencies))?(yt||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(m,bt,tt),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(m,bt,tt)),typeof A.componentDidUpdate=="function"&&(o.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof A.componentDidUpdate!="function"||P===s.memoizedProps&&_t===s.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&_t===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=bt),A.props=m,A.state=bt,A.context=tt,m=zt):(typeof A.componentDidUpdate!="function"||P===s.memoizedProps&&_t===s.memoizedState||(o.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||P===s.memoizedProps&&_t===s.memoizedState||(o.flags|=1024),m=!1)}return A=m,cl(s,o),m=(o.flags&128)!==0,A||m?(A=o.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:A.render(),o.flags|=1,s!==null&&m?(o.child=rl(o,s.child,null,x),o.child=rl(o,null,h,x)):ri(s,o,h,x),o.memoizedState=A.state,s=o.child):s=Li(s,o,x),s}function Do(s,o,h,m){return su(),o.flags|=256,ri(s,o,h,m),o.child}var Vs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hs(s){return{baseLanes:s,cachePool:ah()}}function Ei(s,o,h){return s=s!==null?s.childLanes&~h:0,o&&(s|=_s),s}function _u(s,o,h){var m=o.pendingProps,x=!1,A=(o.flags&128)!==0,P;if((P=A)||(P=s!==null&&s.memoizedState===null?!1:(si.current&2)!==0),P&&(x=!0,o.flags&=-129),P=(o.flags&32)!==0,o.flags&=-33,s===null){if(yn){if(x?Ro(o):wo(),yn){var q=Qn,tt;if(tt=q){t:{for(tt=q,q=Ha;tt.nodeType!==8;){if(!q){q=null;break t}if(tt=Wr(tt.nextSibling),tt===null){q=null;break t}}q=tt}q!==null?(o.memoizedState={dehydrated:q,treeContext:_o!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},tt=Ea(18,null,null,0),tt.stateNode=q,tt.return=o,o.child=tt,ua=o,Qn=null,tt=!0):tt=!1}tt||xo(o)}if(q=o.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return Sx(q)?o.lanes=32:o.lanes=536870912,null;rr(o)}return q=m.children,m=m.fallback,x?(wo(),x=o.mode,q=fl({mode:"hidden",children:q},x),m=vo(m,x,h,null),q.return=o,m.return=o,q.sibling=m,o.child=q,x=o.child,x.memoizedState=Hs(h),x.childLanes=Ei(s,P,h),o.memoizedState=Vs,m):(Ro(o),lr(o,q))}if(tt=s.memoizedState,tt!==null&&(q=tt.dehydrated,q!==null)){if(A)o.flags&256?(Ro(o),o.flags&=-257,o=ji(s,o,h)):o.memoizedState!==null?(wo(),o.child=s.child,o.flags|=128,o=null):(wo(),x=m.fallback,q=o.mode,m=fl({mode:"visible",children:m.children},q),x=vo(x,q,h,null),x.flags|=2,m.return=o,x.return=o,m.sibling=x,o.child=m,rl(o,s.child,null,h),m=o.child,m.memoizedState=Hs(h),m.childLanes=Ei(s,P,h),o.memoizedState=Vs,o=x);else if(Ro(o),Sx(q)){if(P=q.nextSibling&&q.nextSibling.dataset,P)var yt=P.dgst;P=yt,m=Error(i(419)),m.stack="",m.digest=P,il({value:m,source:null,stack:null}),o=ji(s,o,h)}else if(Ni||cs(s,o,h,!1),P=(h&s.childLanes)!==0,Ni||P){if(P=Be,P!==null&&(m=h&-h,m=(m&42)!==0?1:An(m),m=(m&(P.suspendedLanes|h))!==0?0:m,m!==0&&m!==tt.retryLane))throw tt.retryLane=m,Nr(s,m),pa(P,s,m),Ly;q.data==="$?"||l(),o=ji(s,o,h)}else q.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=tt.treeContext,Qn=Wr(q.nextSibling),ua=o,yn=!0,us=null,Ha=!1,s!==null&&(Xi[Va++]=nr,Xi[Va++]=ir,Xi[Va++]=_o,nr=s.id,ir=s.overflow,_o=o),o=lr(o,m.children),o.flags|=4096);return o}return x?(wo(),x=m.fallback,q=o.mode,tt=s.child,yt=tt.sibling,m=ii(tt,{mode:"hidden",children:m.children}),m.subtreeFlags=tt.subtreeFlags&65011712,yt!==null?x=ii(yt,x):(x=vo(x,q,h,null),x.flags|=2),x.return=o,m.return=o,m.sibling=x,o.child=m,m=x,x=o.child,q=s.child.memoizedState,q===null?q=Hs(h):(tt=q.cachePool,tt!==null?(yt=pi._currentValue,tt=tt.parent!==yt?{parent:yt,pool:yt}:tt):tt=ah(),q={baseLanes:q.baseLanes|h,cachePool:tt}),x.memoizedState=q,x.childLanes=Ei(s,P,h),o.memoizedState=Vs,m):(Ro(o),h=s.child,s=h.sibling,h=ii(h,{mode:"visible",children:m.children}),h.return=o,h.sibling=null,s!==null&&(P=o.deletions,P===null?(o.deletions=[s],o.flags|=16):P.push(s)),o.child=h,o.memoizedState=null,h)}function lr(s,o){return o=fl({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function fl(s,o){return s=Ea(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function ji(s,o,h){return rl(o,s.child,null,h),s=lr(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Yi(s,o,h){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),fp(s.return,o,h)}function fn(s,o,h,m,x){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:x}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=m,A.tail=h,A.tailMode=x)}function ms(s,o,h){var m=o.pendingProps,x=m.revealOrder,A=m.tail;if(ri(s,o,m.children,h),m=si.current,(m&2)!==0)m=m&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Yi(s,h,o);else if(s.tag===19)Yi(s,h,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break t;for(;s.sibling===null;){if(s.return===null||s.return===o)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch(Tt(si,m),x){case"forwards":for(h=o.child,x=null;h!==null;)s=h.alternate,s!==null&&Gr(s)===null&&(x=h),h=h.sibling;h=x,h===null?(x=o.child,o.child=null):(x=h.sibling,h.sibling=null),fn(o,!1,x,h,A);break;case"backwards":for(h=null,x=o.child,o.child=null;x!==null;){if(s=x.alternate,s!==null&&Gr(s)===null){o.child=x;break}s=x.sibling,x.sibling=h,h=x,x=s}fn(o,!0,h,null,A);break;case"together":fn(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Li(s,o,h){if(s!==null&&(o.dependencies=s.dependencies),Xs|=o.lanes,(h&o.childLanes)===0)if(s!==null){if(cs(s,o,h,!1),(h&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,h=ii(s,s.pendingProps),o.child=h,h.return=o;s.sibling!==null;)s=s.sibling,h=h.sibling=ii(s,s.pendingProps),h.return=o;h.sibling=null}return o.child}function Gc(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Rc(s)))}function gs(s,o,h){switch(o.tag){case 3:Zt(o,o.stateNode.containerInfo),bo(o,pi,s.memoizedState.cache),su();break;case 27:case 5:ge(o);break;case 4:Zt(o,o.stateNode.containerInfo);break;case 10:bo(o,o.type,o.memoizedProps.value);break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(Ro(o),o.flags|=128,null):(h&o.child.childLanes)!==0?_u(s,o,h):(Ro(o),s=Li(s,o,h),s!==null?s.sibling:null);Ro(o);break;case 19:var x=(s.flags&128)!==0;if(m=(h&o.childLanes)!==0,m||(cs(s,o,h,!1),m=(h&o.childLanes)!==0),x){if(m)return ms(s,o,h);o.flags|=128}if(x=o.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Tt(si,si.current),m)break;return null;case 22:case 23:return o.lanes=0,ll(s,o,h);case 24:bo(o,pi,s.memoizedState.cache)}return Li(s,o,h)}function hl(s,o,h){if(s!==null)if(s.memoizedProps!==o.pendingProps)Ni=!0;else{if(!Gc(s,h)&&(o.flags&128)===0)return Ni=!1,gs(s,o,h);Ni=(s.flags&131072)!==0}else Ni=!1,yn&&(o.flags&1048576)!==0&&$f(o,au,o.index);switch(o.lanes=0,o.tag){case 16:t:{s=o.pendingProps;var m=o.elementType,x=m._init;if(m=x(m._payload),o.type=m,typeof m=="function")Mc(m)?(s=or(m,s),o.tag=1,o=Xa(null,o,m,s,h)):(o.tag=0,o=vu(null,o,m,s,h));else{if(m!=null){if(x=m.$$typeof,x===O){o.tag=11,o=Aa(null,o,m,s,h);break t}else if(x===H){o.tag=14,o=Ra(null,o,m,s,h);break t}}throw o=Q(m)||m,Error(i(306,o,""))}}return o;case 0:return vu(s,o,o.type,o.pendingProps,h);case 1:return m=o.type,x=or(m,o.pendingProps),Xa(s,o,m,x,h);case 3:t:{if(Zt(o,o.stateNode.containerInfo),s===null)throw Error(i(387));m=o.pendingProps;var A=o.memoizedState;x=A.element,Oe(s,o),fu(o,m,null,h);var P=o.memoizedState;if(m=P.cache,bo(o,pi,m),m!==A.cache&&Ac(o,[pi],h,!0),Lc(),m=P.element,A.isDehydrated)if(A={element:m,isDehydrated:!1,cache:P.cache},o.updateQueue.baseState=A,o.memoizedState=A,o.flags&256){o=Do(s,o,m,h);break t}else if(m!==x){x=qi(Error(i(424)),o),il(x),o=Do(s,o,m,h);break t}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Qn=Wr(s.firstChild),ua=o,yn=!0,us=null,Ha=!0,h=wy(o,null,m,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(su(),m===x){o=Li(s,o,h);break t}ri(s,o,m,h)}o=o.child}return o;case 26:return cl(s,o),s===null?(h=uE(o.type,null,o.pendingProps,null))?o.memoizedState=h:yn||(h=o.type,s=o.pendingProps,m=Hy(Bt.current).createElement(h),m[fi]=o,m[bi]=s,ma(m,h,s),hi(m),o.stateNode=m):o.memoizedState=uE(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return ge(o),s===null&&yn&&(m=o.stateNode=rE(o.type,o.pendingProps,Bt.current),ua=o,Ha=!0,x=Qn,Cu(o.type)?(bx=x,Qn=Wr(m.firstChild)):Qn=x),ri(s,o,o.pendingProps.children,h),cl(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&yn&&((x=m=Qn)&&(m=mO(m,o.type,o.pendingProps,Ha),m!==null?(o.stateNode=m,ua=o,Qn=Wr(m.firstChild),Ha=!1,x=!0):x=!1),x||xo(o)),ge(o),x=o.type,A=o.pendingProps,P=s!==null?s.memoizedProps:null,m=A.children,vx(x,A)?m=null:P!==null&&vx(x,P)&&(o.flags|=32),o.memoizedState!==null&&(x=Hr(s,o,ex,null,null,h),kp._currentValue=x),cl(s,o),ri(s,o,m,h),o.child;case 6:return s===null&&yn&&((s=h=Qn)&&(h=gO(h,o.pendingProps,Ha),h!==null?(o.stateNode=h,ua=o,Qn=null,s=!0):s=!1),s||xo(o)),null;case 13:return _u(s,o,h);case 4:return Zt(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=rl(o,null,m,h):ri(s,o,m,h),o.child;case 11:return Aa(s,o,o.type,o.pendingProps,h);case 7:return ri(s,o,o.pendingProps,h),o.child;case 8:return ri(s,o,o.pendingProps.children,h),o.child;case 12:return ri(s,o,o.pendingProps.children,h),o.child;case 10:return m=o.pendingProps,bo(o,o.type,m.value),ri(s,o,m.children,h),o.child;case 9:return x=o.type._context,m=o.pendingProps.children,ar(o),x=$n(x),m=m(x),o.flags|=1,ri(s,o,m,h),o.child;case 14:return Ra(s,o,o.type,o.pendingProps,h);case 15:return Lp(s,o,o.type,o.pendingProps,h);case 19:return ms(s,o,h);case 31:return m=o.pendingProps,h=o.mode,m={mode:m.mode,children:m.children},s===null?(h=fl(m,h),h.ref=o.ref,o.child=h,h.return=o,o=h):(h=ii(s.child,m),h.ref=o.ref,o.child=h,h.return=o,o=h),o;case 22:return ll(s,o,h);case 24:return ar(o),m=$n(pi),s===null?(x=Mo(),x===null&&(x=Be,A=nh(),x.pooledCache=A,A.refCount++,A!==null&&(x.pooledCacheLanes|=h),x=A),o.memoizedState={parent:m,cache:x},mp(o),bo(o,pi,x)):((s.lanes&h)!==0&&(Oe(s,o),fu(o,null,null,h),Lc()),x=s.memoizedState,A=o.memoizedState,x.parent!==m?(x={parent:m,cache:m},o.memoizedState=x,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=x),bo(o,pi,m)):(m=A.cache,bo(o,pi,m),m!==x.cache&&Ac(o,[pi],h,!0))),ri(s,o,o.pendingProps.children,h),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Fs(s){s.flags|=4}function qc(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!pE(o)){if(o=Ln.current,o!==null&&((be&4194048)===be?Is!==null:(be&62914560)!==be&&(be&536870912)===0||o!==Is))throw hs=Nc,dp;s.flags|=8192}}function qr(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?ne():536870912,s.lanes|=o,pn|=o)}function dl(s,o){if(!yn)switch(s.tailMode){case"hidden":o=s.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Vn(s){var o=s.alternate!==null&&s.alternate.child===s.child,h=0,m=0;if(o)for(var x=s.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)h|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=m,s.childLanes=h,o}function Pp(s,o,h){var m=o.pendingProps;switch(lp(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(o),null;case 1:return Vn(o),null;case 3:return h=o.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),zr(pi),Me(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Ps(o)?Fs(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,bn())),Vn(o),null;case 26:return h=o.memoizedState,s===null?(Fs(o),h!==null?(Vn(o),qc(o,h)):(Vn(o),o.flags&=-16777217)):h?h!==s.memoizedState?(Fs(o),Vn(o),qc(o,h)):(Vn(o),o.flags&=-16777217):(s.memoizedProps!==m&&Fs(o),Vn(o),o.flags&=-16777217),null;case 27:ke(o),h=Bt.current;var x=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Fs(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return Vn(o),null}s=st.current,Ps(o)?jg(o):(s=rE(x,m,h),o.stateNode=s,Fs(o))}return Vn(o),null;case 5:if(ke(o),h=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Fs(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return Vn(o),null}if(s=st.current,Ps(o))jg(o);else{switch(x=Hy(Bt.current),s){case 1:s=x.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:s=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":s=x.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":s=x.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":s=x.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?x.createElement(h,{is:m.is}):x.createElement(h)}}s[fi]=o,s[bi]=m;t:for(x=o.child;x!==null;){if(x.tag===5||x.tag===6)s.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===o)break t;for(;x.sibling===null;){if(x.return===null||x.return===o)break t;x=x.return}x.sibling.return=x.return,x=x.sibling}o.stateNode=s;t:switch(ma(s,h,m),h){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&Fs(o)}}return Vn(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==m&&Fs(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(i(166));if(s=Bt.current,Ps(o)){if(s=o.stateNode,h=o.memoizedProps,m=null,x=ua,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}s[fi]=o,s=!!(s.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||$1(s.nodeValue,h)),s||xo(o)}else s=Hy(s).createTextNode(m),s[fi]=o,o.stateNode=s}return Vn(o),null;case 13:if(m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(x=Ps(o),m!==null&&m.dehydrated!==null){if(s===null){if(!x)throw Error(i(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[fi]=o}else su(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Vn(o),x=!1}else x=bn(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),x=!0;if(!x)return o.flags&256?(rr(o),o):(rr(o),null)}if(rr(o),(o.flags&128)!==0)return o.lanes=h,o;if(h=m!==null,s=s!==null&&s.memoizedState!==null,h){m=o.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool);var A=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==x&&(m.flags|=2048)}return h!==s&&h&&(o.child.flags|=8192),qr(o,o.updateQueue),Vn(o),null;case 4:return Me(),s===null&&dx(o.stateNode.containerInfo),Vn(o),null;case 10:return zr(o.type),Vn(o),null;case 19:if(mt(si),x=o.memoizedState,x===null)return Vn(o),null;if(m=(o.flags&128)!==0,A=x.rendering,A===null)if(m)dl(x,!1);else{if(Xn!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(A=Gr(s),A!==null){for(o.flags|=128,dl(x,!1),s=A.updateQueue,o.updateQueue=s,qr(o,s),o.subtreeFlags=0,s=h,h=o.child;h!==null;)rp(h,s),h=h.sibling;return Tt(si,si.current&1|2),o.child}s=s.sibling}x.tail!==null&&Ut()>ta&&(o.flags|=128,m=!0,dl(x,!1),o.lanes=4194304)}else{if(!m)if(s=Gr(A),s!==null){if(o.flags|=128,m=!0,s=s.updateQueue,o.updateQueue=s,qr(o,s),dl(x,!0),x.tail===null&&x.tailMode==="hidden"&&!A.alternate&&!yn)return Vn(o),null}else 2*Ut()-x.renderingStartTime>ta&&h!==536870912&&(o.flags|=128,m=!0,dl(x,!1),o.lanes=4194304);x.isBackwards?(A.sibling=o.child,o.child=A):(s=x.last,s!==null?s.sibling=A:o.child=A,x.last=A)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=Ut(),o.sibling=null,s=si.current,Tt(si,m?s&1|2:s&1),o):(Vn(o),null);case 22:case 23:return rr(o),Pc(),m=o.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(h&536870912)!==0&&(o.flags&128)===0&&(Vn(o),o.subtreeFlags&6&&(o.flags|=8192)):Vn(o),h=o.updateQueue,h!==null&&qr(o,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048),s!==null&&mt(fs),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),zr(pi),Vn(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function xu(s,o){switch(lp(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return zr(pi),Me(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return ke(o),null;case 13:if(rr(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));su()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return mt(si),null;case 4:return Me(),null;case 10:return zr(o.type),null;case 22:case 23:return rr(o),Pc(),s!==null&&mt(fs),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return zr(pi),null;case 25:return null;default:return null}}function Su(s,o){switch(lp(o),o.tag){case 3:zr(pi),Me();break;case 26:case 27:case 5:ke(o);break;case 4:Me();break;case 13:rr(o);break;case 19:mt(si);break;case 10:zr(o.type);break;case 22:case 23:rr(o),Pc(),s!==null&&mt(fs);break;case 24:zr(pi)}}function pl(s,o){try{var h=o.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var x=m.next;h=x;do{if((h.tag&s)===s){m=void 0;var A=h.create,P=h.inst;m=A(),P.destroy=m}h=h.next}while(h!==x)}}catch(q){ot(o,o.return,q)}}function ka(s,o,h){try{var m=o.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var A=x.next;m=A;do{if((m.tag&s)===s){var P=m.inst,q=P.destroy;if(q!==void 0){P.destroy=void 0,x=o;var tt=h,yt=q;try{yt()}catch(zt){ot(x,tt,zt)}}}m=m.next}while(m!==A)}}catch(zt){ot(o,o.return,zt)}}function ml(s){var o=s.updateQueue;if(o!==null){var h=s.stateNode;try{Zg(o,h)}catch(m){ot(s,s.return,m)}}}function Xr(s,o,h){h.props=or(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(m){ot(s,o,m)}}function gl(s,o){try{var h=s.ref;if(h!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof h=="function"?s.refCleanup=h(m):h.current=m}}catch(x){ot(s,o,x)}}function ur(s,o){var h=s.ref,m=s.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(x){ot(s,o,x)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(x){ot(s,o,x)}else h.current=null}function bu(s){var o=s.type,h=s.memoizedProps,m=s.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break t;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(x){ot(s,s.return,x)}}function Xc(s,o,h){try{var m=s.stateNode;cO(m,s.type,h,o),m[bi]=o}catch(x){ot(s,s.return,x)}}function kc(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Cu(s.type)||s.tag===4}function Oo(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||kc(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Cu(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Uo(s,o,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(s,o):(o=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,o.appendChild(s),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Vy));else if(m!==4&&(m===27&&Cu(s.type)&&(h=s.stateNode,o=null),s=s.child,s!==null))for(Uo(s,o,h),s=s.sibling;s!==null;)Uo(s,o,h),s=s.sibling}function No(s,o,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?h.insertBefore(s,o):h.appendChild(s);else if(m!==4&&(m===27&&Cu(s.type)&&(h=s.stateNode),s=s.child,s!==null))for(No(s,o,h),s=s.sibling;s!==null;)No(s,o,h),s=s.sibling}function Lo(s){var o=s.stateNode,h=s.memoizedProps;try{for(var m=s.type,x=o.attributes;x.length;)o.removeAttributeNode(x[0]);ma(o,m,h),o[fi]=s,o[bi]=h}catch(A){ot(s,s.return,A)}}var cr=!1,Hn=!1,Mu=!1,ja=typeof WeakSet=="function"?WeakSet:Set,Pn=null;function Ti(s,o){if(s=s.containerInfo,gx=jy,s=$d(s),_c(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else t:{h=(h=s.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var x=m.anchorOffset,A=m.focusNode;m=m.focusOffset;try{h.nodeType,A.nodeType}catch{h=null;break t}var P=0,q=-1,tt=-1,yt=0,zt=0,Ft=s,_t=null;e:for(;;){for(var bt;Ft!==h||x!==0&&Ft.nodeType!==3||(q=P+x),Ft!==A||m!==0&&Ft.nodeType!==3||(tt=P+m),Ft.nodeType===3&&(P+=Ft.nodeValue.length),(bt=Ft.firstChild)!==null;)_t=Ft,Ft=bt;for(;;){if(Ft===s)break e;if(_t===h&&++yt===x&&(q=P),_t===A&&++zt===m&&(tt=P),(bt=Ft.nextSibling)!==null)break;Ft=_t,_t=Ft.parentNode}Ft=bt}h=q===-1||tt===-1?null:{start:q,end:tt}}else h=null}h=h||{start:0,end:0}}else h=null;for(yx={focusedElem:s,selectionRange:h},jy=!1,Pn=o;Pn!==null;)if(o=Pn,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,Pn=s;else for(;Pn!==null;){switch(o=Pn,A=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&A!==null){s=void 0,h=o,x=A.memoizedProps,A=A.memoizedState,m=h.stateNode;try{var Ne=or(h.type,x,h.elementType===h.type);s=m.getSnapshotBeforeUpdate(Ne,A),m.__reactInternalSnapshotBeforeUpdate=s}catch(we){ot(h,h.return,we)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,h=s.nodeType,h===9)xx(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":xx(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Pn=s;break}Pn=o.return}}function kr(s,o,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:da(s,h),m&4&&pl(5,h);break;case 1:if(da(s,h),m&4)if(s=h.stateNode,o===null)try{s.componentDidMount()}catch(P){ot(h,h.return,P)}else{var x=or(h.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(x,o,s.__reactInternalSnapshotBeforeUpdate)}catch(P){ot(h,h.return,P)}}m&64&&ml(h),m&512&&gl(h,h.return);break;case 3:if(da(s,h),m&64&&(s=h.updateQueue,s!==null)){if(o=null,h.child!==null)switch(h.child.tag){case 27:case 5:o=h.child.stateNode;break;case 1:o=h.child.stateNode}try{Zg(s,o)}catch(P){ot(h,h.return,P)}}break;case 27:o===null&&m&4&&Lo(h);case 26:case 5:da(s,h),o===null&&m&4&&bu(h),m&512&&gl(h,h.return);break;case 12:da(s,h);break;case 13:da(s,h),m&4&&Po(s,h),m&64&&(s=h.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(h=kn.bind(null,h),yO(s,h))));break;case 22:if(m=h.memoizedState!==null||cr,!m){o=o!==null&&o.memoizedState!==null||Hn,x=cr;var A=Hn;cr=m,(Hn=o)&&!A?fr(s,h,(h.subtreeFlags&8772)!==0):da(s,h),cr=x,Hn=A}break;case 30:break;default:da(s,h)}}function je(s){var o=s.alternate;o!==null&&(s.alternate=null,je(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&wn(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ee=null,dn=!1;function ys(s,o,h){for(h=h.child;h!==null;)yl(s,o,h),h=h.sibling}function yl(s,o,h){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Ct,h)}catch{}switch(h.tag){case 26:Hn||ur(h,o),ys(s,o,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Hn||ur(h,o);var m=Ee,x=dn;Cu(h.type)&&(Ee=h.stateNode,dn=!1),ys(s,o,h),Fp(h.stateNode),Ee=m,dn=x;break;case 5:Hn||ur(h,o);case 6:if(m=Ee,x=dn,Ee=null,ys(s,o,h),Ee=m,dn=x,Ee!==null)if(dn)try{(Ee.nodeType===9?Ee.body:Ee.nodeName==="HTML"?Ee.ownerDocument.body:Ee).removeChild(h.stateNode)}catch(A){ot(h,o,A)}else try{Ee.removeChild(h.stateNode)}catch(A){ot(h,o,A)}break;case 18:Ee!==null&&(dn?(s=Ee,aE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,h.stateNode),Zp(s)):aE(Ee,h.stateNode));break;case 4:m=Ee,x=dn,Ee=h.stateNode.containerInfo,dn=!0,ys(s,o,h),Ee=m,dn=x;break;case 0:case 11:case 14:case 15:Hn||ka(2,h,o),Hn||ka(4,h,o),ys(s,o,h);break;case 1:Hn||(ur(h,o),m=h.stateNode,typeof m.componentWillUnmount=="function"&&Xr(h,o,m)),ys(s,o,h);break;case 21:ys(s,o,h);break;case 22:Hn=(m=Hn)||h.memoizedState!==null,ys(s,o,h),Hn=m;break;default:ys(s,o,h)}}function Po(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Zp(s)}catch(h){ot(o,o.return,h)}}function Mh(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new ja),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new ja),o;default:throw Error(i(435,s.tag))}}function vl(s,o){var h=Mh(s);o.forEach(function(m){var x=Ue.bind(null,s,m);h.has(m)||(h.add(m),m.then(x,x))})}function Pi(s,o){var h=o.deletions;if(h!==null)for(var m=0;m<h.length;m++){var x=h[m],A=s,P=o,q=P;t:for(;q!==null;){switch(q.tag){case 27:if(Cu(q.type)){Ee=q.stateNode,dn=!1;break t}break;case 5:Ee=q.stateNode,dn=!1;break t;case 3:case 4:Ee=q.stateNode.containerInfo,dn=!0;break t}q=q.return}if(Ee===null)throw Error(i(160));yl(A,P,x),Ee=null,dn=!1,A=x.alternate,A!==null&&(A.return=null),x.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)Eh(o,s),o=o.sibling}var Gs=null;function Eh(s,o){var h=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Pi(o,s),ti(s),m&4&&(ka(3,s,s.return),pl(3,s),ka(5,s,s.return));break;case 1:Pi(o,s),ti(s),m&512&&(Hn||h===null||ur(h,h.return)),m&64&&cr&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var x=Gs;if(Pi(o,s),ti(s),m&512&&(Hn||h===null||ur(h,h.return)),m&4){var A=h!==null?h.memoizedState:null;if(m=s.memoizedState,h===null)if(m===null)if(s.stateNode===null){t:{m=s.type,h=s.memoizedProps,x=x.ownerDocument||x;e:switch(m){case"title":A=x.getElementsByTagName("title")[0],(!A||A[Ds]||A[fi]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=x.createElement(m),x.head.insertBefore(A,x.querySelector("head > title"))),ma(A,m,h),A[fi]=s,hi(A),m=A;break t;case"link":var P=hE("link","href",x).get(m+(h.href||""));if(P){for(var q=0;q<P.length;q++)if(A=P[q],A.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&A.getAttribute("rel")===(h.rel==null?null:h.rel)&&A.getAttribute("title")===(h.title==null?null:h.title)&&A.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){P.splice(q,1);break e}}A=x.createElement(m),ma(A,m,h),x.head.appendChild(A);break;case"meta":if(P=hE("meta","content",x).get(m+(h.content||""))){for(q=0;q<P.length;q++)if(A=P[q],A.getAttribute("content")===(h.content==null?null:""+h.content)&&A.getAttribute("name")===(h.name==null?null:h.name)&&A.getAttribute("property")===(h.property==null?null:h.property)&&A.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&A.getAttribute("charset")===(h.charSet==null?null:h.charSet)){P.splice(q,1);break e}}A=x.createElement(m),ma(A,m,h),x.head.appendChild(A);break;default:throw Error(i(468,m))}A[fi]=s,hi(A),m=A}s.stateNode=m}else dE(x,s.type,s.stateNode);else s.stateNode=fE(x,m,s.memoizedProps);else A!==m?(A===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):A.count--,m===null?dE(x,s.type,s.stateNode):fE(x,m,s.memoizedProps)):m===null&&s.stateNode!==null&&Xc(s,s.memoizedProps,h.memoizedProps)}break;case 27:Pi(o,s),ti(s),m&512&&(Hn||h===null||ur(h,h.return)),h!==null&&m&4&&Xc(s,s.memoizedProps,h.memoizedProps);break;case 5:if(Pi(o,s),ti(s),m&512&&(Hn||h===null||ur(h,h.return)),s.flags&32){x=s.stateNode;try{ra(x,"")}catch(bt){ot(s,s.return,bt)}}m&4&&s.stateNode!=null&&(x=s.memoizedProps,Xc(s,x,h!==null?h.memoizedProps:x)),m&1024&&(Mu=!0);break;case 6:if(Pi(o,s),ti(s),m&4){if(s.stateNode===null)throw Error(i(162));m=s.memoizedProps,h=s.stateNode;try{h.nodeValue=m}catch(bt){ot(s,s.return,bt)}}break;case 3:if(qy=null,x=Gs,Gs=Fy(o.containerInfo),Pi(o,s),Gs=x,ti(s),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Zp(o.containerInfo)}catch(bt){ot(s,s.return,bt)}Mu&&(Mu=!1,zo(s));break;case 4:m=Gs,Gs=Fy(s.stateNode.containerInfo),Pi(o,s),ti(s),Gs=m;break;case 12:Pi(o,s),ti(s);break;case 13:Pi(o,s),ti(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Dn=Ut()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,vl(s,m)));break;case 22:x=s.memoizedState!==null;var tt=h!==null&&h.memoizedState!==null,yt=cr,zt=Hn;if(cr=yt||x,Hn=zt||tt,Pi(o,s),Hn=zt,cr=yt,ti(s),m&8192)t:for(o=s.stateNode,o._visibility=x?o._visibility&-2:o._visibility|1,x&&(h===null||tt||cr||Hn||Ya(s)),h=null,o=s;;){if(o.tag===5||o.tag===26){if(h===null){tt=h=o;try{if(A=tt.stateNode,x)P=A.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none";else{q=tt.stateNode;var Ft=tt.memoizedProps.style,_t=Ft!=null&&Ft.hasOwnProperty("display")?Ft.display:null;q.style.display=_t==null||typeof _t=="boolean"?"":(""+_t).trim()}}catch(bt){ot(tt,tt.return,bt)}}}else if(o.tag===6){if(h===null){tt=o;try{tt.stateNode.nodeValue=x?"":tt.memoizedProps}catch(bt){ot(tt,tt.return,bt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break t;for(;o.sibling===null;){if(o.return===null||o.return===s)break t;h===o&&(h=null),o=o.return}h===o&&(h=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=s.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,vl(s,h))));break;case 19:Pi(o,s),ti(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,vl(s,m)));break;case 30:break;case 21:break;default:Pi(o,s),ti(s)}}function ti(s){var o=s.flags;if(o&2){try{for(var h,m=s.return;m!==null;){if(kc(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var x=h.stateNode,A=Oo(s);No(s,A,x);break;case 5:var P=h.stateNode;h.flags&32&&(ra(P,""),h.flags&=-33);var q=Oo(s);No(s,q,P);break;case 3:case 4:var tt=h.stateNode.containerInfo,yt=Oo(s);Uo(s,yt,tt);break;default:throw Error(i(161))}}catch(zt){ot(s,s.return,zt)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function zo(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;zo(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function da(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)kr(s,o.alternate,o),o=o.sibling}function Ya(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:ka(4,o,o.return),Ya(o);break;case 1:ur(o,o.return);var h=o.stateNode;typeof h.componentWillUnmount=="function"&&Xr(o,o.return,h),Ya(o);break;case 27:Fp(o.stateNode);case 26:case 5:ur(o,o.return),Ya(o);break;case 22:o.memoizedState===null&&Ya(o);break;case 30:Ya(o);break;default:Ya(o)}s=s.sibling}}function fr(s,o,h){for(h=h&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,x=s,A=o,P=A.flags;switch(A.tag){case 0:case 11:case 15:fr(x,A,h),pl(4,A);break;case 1:if(fr(x,A,h),m=A,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(yt){ot(m,m.return,yt)}if(m=A,x=m.updateQueue,x!==null){var q=m.stateNode;try{var tt=x.shared.hiddenCallbacks;if(tt!==null)for(x.shared.hiddenCallbacks=null,x=0;x<tt.length;x++)hu(tt[x],q)}catch(yt){ot(m,m.return,yt)}}h&&P&64&&ml(A),gl(A,A.return);break;case 27:Lo(A);case 26:case 5:fr(x,A,h),h&&m===null&&P&4&&bu(A),gl(A,A.return);break;case 12:fr(x,A,h);break;case 13:fr(x,A,h),h&&P&4&&Po(x,A);break;case 22:A.memoizedState===null&&fr(x,A,h),gl(A,A.return);break;case 30:break;default:fr(x,A,h)}o=o.sibling}}function Th(s,o){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&ru(h))}function Ah(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ru(s))}function zn(s,o,h,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Rh(s,o,h,m),o=o.sibling}function Rh(s,o,h,m){var x=o.flags;switch(o.tag){case 0:case 11:case 15:zn(s,o,h,m),x&2048&&pl(9,o);break;case 1:zn(s,o,h,m);break;case 3:zn(s,o,h,m),x&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ru(s)));break;case 12:if(x&2048){zn(s,o,h,m),s=o.stateNode;try{var A=o.memoizedProps,P=A.id,q=A.onPostCommit;typeof q=="function"&&q(P,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(tt){ot(o,o.return,tt)}}else zn(s,o,h,m);break;case 13:zn(s,o,h,m);break;case 23:break;case 22:A=o.stateNode,P=o.alternate,o.memoizedState!==null?A._visibility&2?zn(s,o,h,m):qs(s,o):A._visibility&2?zn(s,o,h,m):(A._visibility|=2,jr(s,o,h,m,(o.subtreeFlags&10256)!==0)),x&2048&&Th(P,o);break;case 24:zn(s,o,h,m),x&2048&&Ah(o.alternate,o);break;default:zn(s,o,h,m)}}function jr(s,o,h,m,x){for(x=x&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var A=s,P=o,q=h,tt=m,yt=P.flags;switch(P.tag){case 0:case 11:case 15:jr(A,P,q,tt,x),pl(8,P);break;case 23:break;case 22:var zt=P.stateNode;P.memoizedState!==null?zt._visibility&2?jr(A,P,q,tt,x):qs(A,P):(zt._visibility|=2,jr(A,P,q,tt,x)),x&&yt&2048&&Th(P.alternate,P);break;case 24:jr(A,P,q,tt,x),x&&yt&2048&&Ah(P.alternate,P);break;default:jr(A,P,q,tt,x)}o=o.sibling}}function qs(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var h=s,m=o,x=m.flags;switch(m.tag){case 22:qs(h,m),x&2048&&Th(m.alternate,m);break;case 24:qs(h,m),x&2048&&Ah(m.alternate,m);break;default:qs(h,m)}o=o.sibling}}var Wa=8192;function Eu(s){if(s.subtreeFlags&Wa)for(s=s.child;s!==null;)Py(s),s=s.sibling}function Py(s){switch(s.tag){case 26:Eu(s),s.flags&Wa&&s.memoizedState!==null&&DO(Gs,s.memoizedState,s.memoizedProps);break;case 5:Eu(s);break;case 3:case 4:var o=Gs;Gs=Fy(s.stateNode.containerInfo),Eu(s),Gs=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=Wa,Wa=16777216,Eu(s),Wa=o):Eu(s));break;default:Eu(s)}}function zy(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Fn(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];Pn=m,dr(m,s)}zy(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)zp(s),s=s.sibling}function zp(s){switch(s.tag){case 0:case 11:case 15:Fn(s),s.flags&2048&&ka(9,s,s.return);break;case 3:Fn(s);break;case 12:Fn(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,hr(s)):Fn(s);break;default:Fn(s)}}function hr(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];Pn=m,dr(m,s)}zy(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:ka(8,o,o.return),hr(o);break;case 22:h=o.stateNode,h._visibility&2&&(h._visibility&=-3,hr(o));break;default:hr(o)}s=s.sibling}}function dr(s,o){for(;Pn!==null;){var h=Pn;switch(h.tag){case 0:case 11:case 15:ka(8,h,o);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:ru(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,Pn=m;else t:for(h=s;Pn!==null;){m=Pn;var x=m.sibling,A=m.return;if(je(m),m===h){Pn=null;break t}if(x!==null){x.return=A,Pn=x;break t}Pn=A}}}var ei={getCacheForType:function(s){var o=$n(pi),h=o.data.get(s);return h===void 0&&(h=s(),o.data.set(s,h)),h}},Bp=typeof WeakMap=="function"?WeakMap:Map,Mn=0,Be=null,tn=null,be=0,qe=0,Jn=null,Za=!1,Tu=!1,Au=!1,vs=0,Xn=0,Xs=0,pr=0,_l=0,_s=0,pn=0,En=null,Ae=null,rn=!1,Dn=0,ta=1/0,xs=null,Ka=null,Ai=0,ea=null,Bn=null,Qa=0,Yr=0,jc=null,Ja=null,mr=0,xl=null;function ni(){if((Mn&2)!==0&&be!==0)return be&-be;if(I.T!==null){var s=Ve;return s!==0?s:ux()}return ln()}function wh(){_s===0&&(_s=(be&536870912)===0||yn?ct():536870912);var s=Ln.current;return s!==null&&(s.flags|=32),_s}function pa(s,o,h){(s===Be&&(qe===2||qe===9)||s.cancelPendingCommit!==null)&&(Io(s,0),ks(s,be,_s,!1)),Ht(s,h),((Mn&2)===0||s!==Be)&&(s===Be&&((Mn&2)===0&&(pr|=h),Xn===4&&ks(s,be,_s,!1)),Fo(s))}function Ru(s,o,h){if((Mn&6)!==0)throw Error(i(327));var m=!h&&(o&124)===0&&(o&s.expiredLanes)===0||Te(s,o),x=m?S(s,o):c(s,o,!0),A=m;do{if(x===0){Tu&&!m&&ks(s,o,0,!1);break}else{if(h=s.current.alternate,A&&!Bo(h)){x=c(s,o,!1),A=!1;continue}if(x===2){if(A=o,s.errorRecoveryDisabledLanes&A)var P=0;else P=s.pendingLanes&-536870913,P=P!==0?P:P&536870912?536870912:0;if(P!==0){o=P;t:{var q=s;x=En;var tt=q.current.memoizedState.isDehydrated;if(tt&&(Io(q,P).flags|=256),P=c(q,P,!1),P!==2){if(Au&&!tt){q.errorRecoveryDisabledLanes|=A,pr|=A,x=4;break t}A=Ae,Ae=x,A!==null&&(Ae===null?Ae=A:Ae.push.apply(Ae,A))}x=P}if(A=!1,x!==2)continue}}if(x===1){Io(s,0),ks(s,o,0,!0);break}t:{switch(m=s,A=x,A){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:ks(m,o,_s,!Za);break t;case 2:Ae=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(x=Dn+300-Ut(),10<x)){if(ks(m,o,_s,!Za),Ge(m,0,!0)!==0)break t;m.timeoutHandle=nE(Yc.bind(null,m,h,Ae,xs,rn,o,_s,pr,pn,Za,A,2,-0,0),x);break t}Yc(m,h,Ae,xs,rn,o,_s,pr,pn,Za,A,0,-0,0)}}break}while(!0);Fo(s)}function Yc(s,o,h,m,x,A,P,q,tt,yt,zt,Ft,_t,bt){if(s.timeoutHandle=-1,Ft=o.subtreeFlags,(Ft&8192||(Ft&16785408)===16785408)&&(Xp={stylesheets:null,count:0,unsuspend:CO},Py(o),Ft=OO(),Ft!==null)){s.cancelPendingCommit=Ft(Wt.bind(null,s,o,A,h,m,x,P,q,tt,zt,1,_t,bt)),ks(s,A,P,!yt);return}Wt(s,o,A,h,m,x,P,q,tt)}function Bo(s){for(var o=s;;){var h=o.tag;if((h===0||h===11||h===15)&&o.flags&16384&&(h=o.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var x=h[m],A=x.getSnapshot;x=x.value;try{if(!Sa(A(),x))return!1}catch{return!1}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ks(s,o,h,m){o&=~_l,o&=~pr,s.suspendedLanes|=o,s.pingedLanes&=~o,m&&(s.warmLanes|=o),m=s.expirationTimes;for(var x=o;0<x;){var A=31-Qt(x),P=1<<A;m[A]=-1,x&=~P}h!==0&&ie(s,h,o)}function gr(){return(Mn&6)===0?(Ip(0),!1):!0}function Sl(){if(tn!==null){if(qe===0)var s=tn.return;else s=tn,Pr=So=null,_p(s),sl=null,Vc=0,s=tn;for(;s!==null;)Su(s.alternate,s),s=s.return;tn=null}}function Io(s,o){var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,hO(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),Sl(),Be=s,tn=h=ii(s.current,null),be=o,qe=0,Jn=null,Za=!1,Tu=Te(s,o),Au=!1,pn=_s=_l=pr=Xs=Xn=0,Ae=En=null,rn=!1,(o&8)!==0&&(o|=o&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=o;0<m;){var x=31-Qt(m),A=1<<x;o|=s[x],m&=~A}return vs=o,bc(),h}function Ch(s,o){He=null,I.H=Ic,o===Uc||o===zs?(o=pp(),qe=3):o===dp?(o=pp(),qe=4):qe=o===Ly?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Jn=o,tn===null&&(Xn=1,xh(s,qi(o,s.current)))}function wu(){var s=I.H;return I.H=Ic,s===null?Ic:s}function Dh(){var s=I.A;return I.A=ei,s}function l(){Xn=4,Za||(be&4194048)!==be&&Ln.current!==null||(Tu=!0),(Xs&134217727)===0&&(pr&134217727)===0||Be===null||ks(Be,be,_s,!1)}function c(s,o,h){var m=Mn;Mn|=2;var x=wu(),A=Dh();(Be!==s||be!==o)&&(xs=null,Io(s,o)),o=!1;var P=Xn;t:do try{if(qe!==0&&tn!==null){var q=tn,tt=Jn;switch(qe){case 8:Sl(),P=6;break t;case 3:case 2:case 9:case 6:Ln.current===null&&(o=!0);var yt=qe;if(qe=0,Jn=null,et(s,q,tt,yt),h&&Tu){P=0;break t}break;default:yt=qe,qe=0,Jn=null,et(s,q,tt,yt)}}g(),P=Xn;break}catch(zt){Ch(s,zt)}while(!0);return o&&s.shellSuspendCounter++,Pr=So=null,Mn=m,I.H=x,I.A=A,tn===null&&(Be=null,be=0,bc()),P}function g(){for(;tn!==null;)U(tn)}function S(s,o){var h=Mn;Mn|=2;var m=wu(),x=Dh();Be!==s||be!==o?(xs=null,ta=Ut()+500,Io(s,o)):Tu=Te(s,o);t:do try{if(qe!==0&&tn!==null){o=tn;var A=Jn;e:switch(qe){case 1:qe=0,Jn=null,et(s,o,A,1);break;case 2:case 9:if(sh(A)){qe=0,Jn=null,k(o);break}o=function(){qe!==2&&qe!==9||Be!==s||(qe=7),Fo(s)},A.then(o,o);break t;case 3:qe=7;break t;case 4:qe=5;break t;case 7:sh(A)?(qe=0,Jn=null,k(o)):(qe=0,Jn=null,et(s,o,A,7));break;case 5:var P=null;switch(tn.tag){case 26:P=tn.memoizedState;case 5:case 27:var q=tn;if(!P||pE(P)){qe=0,Jn=null;var tt=q.sibling;if(tt!==null)tn=tt;else{var yt=q.return;yt!==null?(tn=yt,pt(yt)):tn=null}break e}}qe=0,Jn=null,et(s,o,A,5);break;case 6:qe=0,Jn=null,et(s,o,A,6);break;case 8:Sl(),Xn=6;break t;default:throw Error(i(462))}}w();break}catch(zt){Ch(s,zt)}while(!0);return Pr=So=null,I.H=m,I.A=x,Mn=h,tn!==null?0:(Be=null,be=0,bc(),Xn)}function w(){for(;tn!==null&&!Un();)U(tn)}function U(s){var o=hl(s.alternate,s,vs);s.memoizedProps=s.pendingProps,o===null?pt(s):tn=o}function k(s){var o=s,h=o.alternate;switch(o.tag){case 15:case 0:o=qa(h,o,o.pendingProps,o.type,void 0,be);break;case 11:o=qa(h,o,o.pendingProps,o.type.render,o.ref,be);break;case 5:_p(o);default:Su(h,o),o=tn=rp(o,vs),o=hl(h,o,vs)}s.memoizedProps=s.pendingProps,o===null?pt(s):tn=o}function et(s,o,h,m){Pr=So=null,_p(o),sl=null,Vc=0;var x=o.return;try{if(ox(s,x,o,h,be)){Xn=1,xh(s,qi(h,s.current)),tn=null;return}}catch(A){if(x!==null)throw tn=x,A;Xn=1,xh(s,qi(h,s.current)),tn=null;return}o.flags&32768?(yn||m===1?s=!0:Tu||(be&536870912)!==0?s=!1:(Za=s=!0,(m===2||m===9||m===3||m===6)&&(m=Ln.current,m!==null&&m.tag===13&&(m.flags|=16384))),Pt(o,s)):pt(o)}function pt(s){var o=s;do{if((o.flags&32768)!==0){Pt(o,Za);return}s=o.return;var h=Pp(o.alternate,o,vs);if(h!==null){tn=h;return}if(o=o.sibling,o!==null){tn=o;return}tn=o=s}while(o!==null);Xn===0&&(Xn=5)}function Pt(s,o){do{var h=xu(s.alternate,s);if(h!==null){h.flags&=32767,tn=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!o&&(s=s.sibling,s!==null)){tn=s;return}tn=s=h}while(s!==null);Xn=6,tn=null}function Wt(s,o,h,m,x,A,P,q,tt){s.cancelPendingCommit=null;do Vo();while(Ai!==0);if((Mn&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(A=o.lanes|o.childLanes,A|=Kf,ae(s,h,A,P,q,tt),s===Be&&(tn=Be=null,be=0),Bn=o,ea=s,Qa=h,Yr=A,jc=x,Ja=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,vn(Y,function(){return Ho(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=I.T,I.T=null,x=Z.p,Z.p=2,P=Mn,Mn|=4;try{Ti(s,o,h)}finally{Mn=P,Z.p=x,I.T=m}}Ai=1,se(),le(),Ie()}}function se(){if(Ai===1){Ai=0;var s=ea,o=Bn,h=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||h){h=I.T,I.T=null;var m=Z.p;Z.p=2;var x=Mn;Mn|=4;try{Eh(o,s);var A=yx,P=$d(s.containerInfo),q=A.focusedElem,tt=A.selectionRange;if(P!==q&&q&&q.ownerDocument&&Jd(q.ownerDocument.documentElement,q)){if(tt!==null&&_c(q)){var yt=tt.start,zt=tt.end;if(zt===void 0&&(zt=yt),"selectionStart"in q)q.selectionStart=yt,q.selectionEnd=Math.min(zt,q.value.length);else{var Ft=q.ownerDocument||document,_t=Ft&&Ft.defaultView||window;if(_t.getSelection){var bt=_t.getSelection(),Ne=q.textContent.length,we=Math.min(tt.start,Ne),qn=tt.end===void 0?we:Math.min(tt.end,Ne);!bt.extend&&we>qn&&(P=qn,qn=we,we=P);var ht=Qd(q,we),lt=Qd(q,qn);if(ht&&lt&&(bt.rangeCount!==1||bt.anchorNode!==ht.node||bt.anchorOffset!==ht.offset||bt.focusNode!==lt.node||bt.focusOffset!==lt.offset)){var gt=Ft.createRange();gt.setStart(ht.node,ht.offset),bt.removeAllRanges(),we>qn?(bt.addRange(gt),bt.extend(lt.node,lt.offset)):(gt.setEnd(lt.node,lt.offset),bt.addRange(gt))}}}}for(Ft=[],bt=q;bt=bt.parentNode;)bt.nodeType===1&&Ft.push({element:bt,left:bt.scrollLeft,top:bt.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Ft.length;q++){var It=Ft[q];It.element.scrollLeft=It.left,It.element.scrollTop=It.top}}jy=!!gx,yx=gx=null}finally{Mn=x,Z.p=m,I.T=h}}s.current=o,Ai=2}}function le(){if(Ai===2){Ai=0;var s=ea,o=Bn,h=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||h){h=I.T,I.T=null;var m=Z.p;Z.p=2;var x=Mn;Mn|=4;try{kr(s,o.alternate,o)}finally{Mn=x,Z.p=m,I.T=h}}Ai=3}}function Ie(){if(Ai===4||Ai===3){Ai=0,Vt();var s=ea,o=Bn,h=Qa,m=Ja;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ai=5:(Ai=0,Bn=ea=null,$a(s,s.pendingLanes));var x=s.pendingLanes;if(x===0&&(Ka=null),jn(h),o=o.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Ct,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=I.T,x=Z.p,Z.p=2,I.T=null;try{for(var A=s.onRecoverableError,P=0;P<m.length;P++){var q=m[P];A(q.value,{componentStack:q.stack})}}finally{I.T=o,Z.p=x}}(Qa&3)!==0&&Vo(),Fo(s),x=s.pendingLanes,(h&4194090)!==0&&(x&42)!==0?s===xl?mr++:(mr=0,xl=s):mr=0,Ip(0)}}function $a(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,ru(o)))}function Vo(s){return se(),le(),Ie(),Ho()}function Ho(){if(Ai!==5)return!1;var s=ea,o=Yr;Yr=0;var h=jn(Qa),m=I.T,x=Z.p;try{Z.p=32>h?32:h,I.T=null,h=jc,jc=null;var A=ea,P=Qa;if(Ai=0,Bn=ea=null,Qa=0,(Mn&6)!==0)throw Error(i(331));var q=Mn;if(Mn|=4,zp(A.current),Rh(A,A.current,P,h),Mn=q,Ip(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Ct,A)}catch{}return!0}finally{Z.p=x,I.T=m,$a(s,o)}}function vt(s,o,h){o=qi(h,o),o=Sh(s.stateNode,o,2),s=Ir(s,o,2),s!==null&&(Ht(s,2),Fo(s))}function ot(s,o,h){if(s.tag===3)vt(s,s,h);else for(;o!==null;){if(o.tag===3){vt(o,s,h);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ka===null||!Ka.has(m))){s=qi(h,s),h=Ny(2),m=Ir(o,h,2),m!==null&&(bh(h,m,o,s),Ht(m,2),Fo(m));break}}o=o.return}}function Mt(s,o,h){var m=s.pingCache;if(m===null){m=s.pingCache=new Bp;var x=new Set;m.set(o,x)}else x=m.get(o),x===void 0&&(x=new Set,m.set(o,x));x.has(h)||(Au=!0,x.add(h),s=jt.bind(null,s,o,h),o.then(s,s))}function jt(s,o,h){var m=s.pingCache;m!==null&&m.delete(o),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,Be===s&&(be&h)===h&&(Xn===4||Xn===3&&(be&62914560)===be&&300>Ut()-Dn?(Mn&2)===0&&Io(s,0):_l|=h,pn===be&&(pn=0)),Fo(s)}function ve(s,o){o===0&&(o=ne()),s=Nr(s,o),s!==null&&(Ht(s,o),Fo(s))}function kn(s){var o=s.memoizedState,h=0;o!==null&&(h=o.retryLane),ve(s,h)}function Ue(s,o){var h=0;switch(s.tag){case 13:var m=s.stateNode,x=s.memoizedState;x!==null&&(h=x.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(o),ve(s,h)}function vn(s,o){return ze(s,o)}var oi=null,nn=null,yr=!1,Oh=!1,lx=!1,Wc=0;function Fo(s){s!==nn&&s.next===null&&(nn===null?oi=nn=s:nn=nn.next=s),Oh=!0,yr||(yr=!0,iO())}function Ip(s,o){if(!lx&&Oh){lx=!0;do for(var h=!1,m=oi;m!==null;){if(s!==0){var x=m.pendingLanes;if(x===0)var A=0;else{var P=m.suspendedLanes,q=m.pingedLanes;A=(1<<31-Qt(42|s)+1)-1,A&=x&~(P&~q),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(h=!0,j1(m,A))}else A=be,A=Ge(m,m===Be?A:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(A&3)===0||Te(m,A)||(h=!0,j1(m,A));m=m.next}while(h);lx=!1}}function nO(){q1()}function q1(){Oh=yr=!1;var s=0;Wc!==0&&(fO()&&(s=Wc),Wc=0);for(var o=Ut(),h=null,m=oi;m!==null;){var x=m.next,A=X1(m,o);A===0?(m.next=null,h===null?oi=x:h.next=x,x===null&&(nn=h)):(h=m,(s!==0||(A&3)!==0)&&(Oh=!0)),m=x}Ip(s)}function X1(s,o){for(var h=s.suspendedLanes,m=s.pingedLanes,x=s.expirationTimes,A=s.pendingLanes&-62914561;0<A;){var P=31-Qt(A),q=1<<P,tt=x[P];tt===-1?((q&h)===0||(q&m)!==0)&&(x[P]=gn(q,o)):tt<=o&&(s.expiredLanes|=q),A&=~q}if(o=Be,h=be,h=Ge(s,s===o?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,h===0||s===o&&(qe===2||qe===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&it(m),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||Te(s,h)){if(o=h&-h,o===s.callbackPriority)return o;switch(m!==null&&it(m),jn(h)){case 2:case 8:h=Ot;break;case 32:h=Y;break;case 268435456:h=ft;break;default:h=Y}return m=k1.bind(null,s),h=ze(h,m),s.callbackPriority=o,s.callbackNode=h,o}return m!==null&&m!==null&&it(m),s.callbackPriority=2,s.callbackNode=null,2}function k1(s,o){if(Ai!==0&&Ai!==5)return s.callbackNode=null,s.callbackPriority=0,null;var h=s.callbackNode;if(Vo()&&s.callbackNode!==h)return null;var m=be;return m=Ge(s,s===Be?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(Ru(s,m,o),X1(s,Ut()),s.callbackNode!=null&&s.callbackNode===h?k1.bind(null,s):null)}function j1(s,o){if(Vo())return null;Ru(s,o,!0)}function iO(){dO(function(){(Mn&6)!==0?ze(Kt,nO):q1()})}function ux(){return Wc===0&&(Wc=ct()),Wc}function Y1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:rc(""+s)}function W1(s,o){var h=o.ownerDocument.createElement("input");return h.name=o.name,h.value=o.value,s.id&&h.setAttribute("form",s.id),o.parentNode.insertBefore(h,o),s=new FormData(s),h.parentNode.removeChild(h),s}function aO(s,o,h,m,x){if(o==="submit"&&h&&h.stateNode===x){var A=Y1((x[bi]||null).action),P=m.submitter;P&&(o=(o=P[bi]||null)?Y1(o.formAction):P.getAttribute("formAction"),o!==null&&(A=o,P=null));var q=new Yl("action","action",null,m,x);s.push({event:q,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Wc!==0){var tt=P?W1(x,P):new FormData(x);Op(h,{pending:!0,data:tt,method:x.method,action:A},null,tt)}}else typeof A=="function"&&(q.preventDefault(),tt=P?W1(x,P):new FormData(x),Op(h,{pending:!0,data:tt,method:x.method,action:A},A,tt))},currentTarget:x}]})}}for(var cx=0;cx<Sc.length;cx++){var fx=Sc[cx],sO=fx.toLowerCase(),rO=fx[0].toUpperCase()+fx.slice(1);Oi(sO,"on"+rO)}Oi(la,"onAnimationEnd"),Oi(np,"onAnimationIteration"),Oi(Ma,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(kg,"onTransitionRun"),Oi(Or,"onTransitionStart"),Oi(eu,"onTransitionCancel"),Oi(Ur,"onTransitionEnd"),X("onMouseEnter",["mouseout","mouseover"]),X("onMouseLeave",["mouseout","mouseover"]),X("onPointerEnter",["pointerout","pointerover"]),X("onPointerLeave",["pointerout","pointerover"]),Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vp));function Z1(s,o){o=(o&4)!==0;for(var h=0;h<s.length;h++){var m=s[h],x=m.event;m=m.listeners;t:{var A=void 0;if(o)for(var P=m.length-1;0<=P;P--){var q=m[P],tt=q.instance,yt=q.currentTarget;if(q=q.listener,tt!==A&&x.isPropagationStopped())break t;A=q,x.currentTarget=yt;try{A(x)}catch(zt){ol(zt)}x.currentTarget=null,A=tt}else for(P=0;P<m.length;P++){if(q=m[P],tt=q.instance,yt=q.currentTarget,q=q.listener,tt!==A&&x.isPropagationStopped())break t;A=q,x.currentTarget=yt;try{A(x)}catch(zt){ol(zt)}x.currentTarget=null,A=tt}}}}function un(s,o){var h=o[_a];h===void 0&&(h=o[_a]=new Set);var m=s+"__bubble";h.has(m)||(K1(o,s,2,!1),h.add(m))}function hx(s,o,h){var m=0;o&&(m|=4),K1(h,s,m,o)}var By="_reactListening"+Math.random().toString(36).slice(2);function dx(s){if(!s[By]){s[By]=!0,Gl.forEach(function(h){h!=="selectionchange"&&(oO.has(h)||hx(h,!1,s),hx(h,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[By]||(o[By]=!0,hx("selectionchange",!1,o))}}function K1(s,o,h,m){switch(xE(o)){case 2:var x=LO;break;case 8:x=PO;break;default:x=Rx}h=x.bind(null,o,h,s),x=void 0,!lc||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(x=!0),m?x!==void 0?s.addEventListener(o,h,{capture:!0,passive:x}):s.addEventListener(o,h,!0):x!==void 0?s.addEventListener(o,h,{passive:x}):s.addEventListener(o,h,!1)}function px(s,o,h,m,x){var A=m;if((o&1)===0&&(o&2)===0&&m!==null)t:for(;;){if(m===null)return;var P=m.tag;if(P===3||P===4){var q=m.stateNode.containerInfo;if(q===x)break;if(P===4)for(P=m.return;P!==null;){var tt=P.tag;if((tt===3||tt===4)&&P.stateNode.containerInfo===x)return;P=P.return}for(;q!==null;){if(P=Os(q),P===null)return;if(tt=P.tag,tt===5||tt===6||tt===26||tt===27){m=A=P;continue t}q=q.parentNode}}m=m.return}Vd(function(){var yt=A,zt=Bf(h),Ft=[];t:{var _t=Zf.get(s);if(_t!==void 0){var bt=Yl,Ne=s;switch(s){case"keypress":if(lo(h)===0)break t;case"keydown":case"keyup":bt=Xd;break;case"focusin":Ne="focus",bt=Vf;break;case"focusout":Ne="blur",bt=Vf;break;case"beforeblur":case"afterblur":bt=Vf;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=Gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=K_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=jd;break;case la:case np:case Ma:bt=Dg;break;case Ur:bt=Rr;break;case"scroll":case"scrollend":bt=Rg;break;case"wheel":bt=Q_;break;case"copy":case"cut":case"paste":bt=Ug;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Ff;break;case"toggle":case"beforetoggle":bt=co}var we=(o&4)!==0,qn=!we&&(s==="scroll"||s==="scrollend"),ht=we?_t!==null?_t+"Capture":null:_t;we=[];for(var lt=yt,gt;lt!==null;){var It=lt;if(gt=It.stateNode,It=It.tag,It!==5&&It!==26&&It!==27||gt===null||ht===null||(It=Xl(lt,ht),It!=null&&we.push(Hp(lt,It,gt))),qn)break;lt=lt.return}0<we.length&&(_t=new bt(_t,Ne,null,h,zt),Ft.push({event:_t,listeners:we}))}}if((o&7)===0){t:{if(_t=s==="mouseover"||s==="pointerover",bt=s==="mouseout"||s==="pointerout",_t&&h!==zf&&(Ne=h.relatedTarget||h.fromElement)&&(Os(Ne)||Ne[Qi]))break t;if((bt||_t)&&(_t=zt.window===zt?zt:(_t=zt.ownerDocument)?_t.defaultView||_t.parentWindow:window,bt?(Ne=h.relatedTarget||h.toElement,bt=yt,Ne=Ne?Os(Ne):null,Ne!==null&&(qn=r(Ne),we=Ne.tag,Ne!==qn||we!==5&&we!==27&&we!==6)&&(Ne=null)):(bt=null,Ne=yt),bt!==Ne)){if(we=Gd,It="onMouseLeave",ht="onMouseEnter",lt="mouse",(s==="pointerout"||s==="pointerover")&&(we=Ff,It="onPointerLeave",ht="onPointerEnter",lt="pointer"),qn=bt==null?_t:ro(bt),gt=Ne==null?_t:ro(Ne),_t=new we(It,lt+"leave",bt,h,zt),_t.target=qn,_t.relatedTarget=gt,It=null,Os(zt)===yt&&(we=new we(ht,lt+"enter",Ne,h,zt),we.target=gt,we.relatedTarget=qn,It=we),qn=It,bt&&Ne)e:{for(we=bt,ht=Ne,lt=0,gt=we;gt;gt=Uh(gt))lt++;for(gt=0,It=ht;It;It=Uh(It))gt++;for(;0<lt-gt;)we=Uh(we),lt--;for(;0<gt-lt;)ht=Uh(ht),gt--;for(;lt--;){if(we===ht||ht!==null&&we===ht.alternate)break e;we=Uh(we),ht=Uh(ht)}we=null}else we=null;bt!==null&&Q1(Ft,_t,bt,we,!1),Ne!==null&&qn!==null&&Q1(Ft,qn,Ne,we,!0)}}t:{if(_t=yt?ro(yt):window,bt=_t.nodeName&&_t.nodeName.toLowerCase(),bt==="select"||bt==="input"&&_t.type==="file")var he=qf;else if(Kd(_t))if(Xf)he=po;else{he=Gg;var on=J_}else bt=_t.nodeName,!bt||bt.toLowerCase()!=="input"||_t.type!=="checkbox"&&_t.type!=="radio"?yt&&Pf(yt.elementType)&&(he=qf):he=vc;if(he&&(he=he(s,yt))){xa(Ft,he,h,zt);break t}on&&on(s,_t,yt),s==="focusout"&&yt&&_t.type==="number"&&yt.memoizedProps.value!=null&&Vi(_t,"number",_t.value)}switch(on=yt?ro(yt):window,s){case"focusin":(Kd(on)||on.contentEditable==="true")&&(Cr=on,jf=yt,xc=null);break;case"focusout":xc=jf=Cr=null;break;case"mousedown":Yf=!0;break;case"contextmenu":case"mouseup":case"dragend":Yf=!1,ep(Ft,h,zt);break;case"selectionchange":if(tp)break;case"keydown":case"keyup":ep(Ft,h,zt)}var _e;if(hc)t:{switch(s){case"compositionstart":var Ce="onCompositionStart";break t;case"compositionend":Ce="onCompositionEnd";break t;case"compositionupdate":Ce="onCompositionUpdate";break t}Ce=void 0}else ho?mc(s,h)&&(Ce="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(Ce="onCompositionStart");Ce&&(pc&&h.locale!=="ko"&&(ho||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&ho&&(_e=Fd()):(Tr=zt,Hd="value"in Tr?Tr.value:Tr.textContent,ho=!0)),on=Iy(yt,Ce),0<on.length&&(Ce=new Hf(Ce,s,null,h,zt),Ft.push({event:Ce,listeners:on}),_e?Ce.data=_e:(_e=Wd(h),_e!==null&&(Ce.data=_e)))),(_e=dc?gc(s,h):Zd(s,h))&&(Ce=Iy(yt,"onBeforeInput"),0<Ce.length&&(on=new Hf("onBeforeInput","beforeinput",null,h,zt),Ft.push({event:on,listeners:Ce}),on.data=_e)),aO(Ft,s,yt,h,zt)}Z1(Ft,o)})}function Hp(s,o,h){return{instance:s,listener:o,currentTarget:h}}function Iy(s,o){for(var h=o+"Capture",m=[];s!==null;){var x=s,A=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||A===null||(x=Xl(s,h),x!=null&&m.unshift(Hp(s,x,A)),x=Xl(s,o),x!=null&&m.push(Hp(s,x,A))),s.tag===3)return m;s=s.return}return[]}function Uh(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Q1(s,o,h,m,x){for(var A=o._reactName,P=[];h!==null&&h!==m;){var q=h,tt=q.alternate,yt=q.stateNode;if(q=q.tag,tt!==null&&tt===m)break;q!==5&&q!==26&&q!==27||yt===null||(tt=yt,x?(yt=Xl(h,A),yt!=null&&P.unshift(Hp(h,yt,tt))):x||(yt=Xl(h,A),yt!=null&&P.push(Hp(h,yt,tt)))),h=h.return}P.length!==0&&s.push({event:o,listeners:P})}var lO=/\r\n?/g,uO=/\u0000|\uFFFD/g;function J1(s){return(typeof s=="string"?s:""+s).replace(lO,`
`).replace(uO,"")}function $1(s,o){return o=J1(o),J1(s)===o}function Vy(){}function Gn(s,o,h,m,x,A){switch(h){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||ra(s,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&ra(s,""+m);break;case"className":Jt(s,"class",m);break;case"tabIndex":Jt(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Jt(s,h,m);break;case"style":sc(s,m,A);break;case"data":if(o!=="object"){Jt(s,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||h!=="href")){s.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=rc(""+m),s.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(h==="formAction"?(o!=="input"&&Gn(s,o,"name",x.name,x,null),Gn(s,o,"formEncType",x.formEncType,x,null),Gn(s,o,"formMethod",x.formMethod,x,null),Gn(s,o,"formTarget",x.formTarget,x,null)):(Gn(s,o,"encType",x.encType,x,null),Gn(s,o,"method",x.method,x,null),Gn(s,o,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=rc(""+m),s.setAttribute(h,m);break;case"onClick":m!=null&&(s.onclick=Vy);break;case"onScroll":m!=null&&un("scroll",s);break;case"onScrollEnd":m!=null&&un("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}h=rc(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""+m):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":m===!0?s.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,m):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(h,m):s.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(h):s.setAttribute(h,m);break;case"popover":un("beforetoggle",s),un("toggle",s),qt(s,"popover",m);break;case"xlinkActuate":ee(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ee(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ee(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ee(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ee(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ee(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ee(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ee(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ee(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":qt(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=Bd.get(h)||h,qt(s,h,m))}}function mx(s,o,h,m,x,A){switch(h){case"style":sc(s,m,A);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(x.children!=null)throw Error(i(60));s.innerHTML=h}}break;case"children":typeof m=="string"?ra(s,m):(typeof m=="number"||typeof m=="bigint")&&ra(s,""+m);break;case"onScroll":m!=null&&un("scroll",s);break;case"onScrollEnd":m!=null&&un("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Vy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ql.hasOwnProperty(h))t:{if(h[0]==="o"&&h[1]==="n"&&(x=h.endsWith("Capture"),o=h.slice(2,x?h.length-7:void 0),A=s[bi]||null,A=A!=null?A[h]:null,typeof A=="function"&&s.removeEventListener(o,A,x),typeof m=="function")){typeof A!="function"&&A!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(o,m,x);break t}h in s?s[h]=m:m===!0?s.setAttribute(h,""):qt(s,h,m)}}}function ma(s,o,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":un("error",s),un("load",s);var m=!1,x=!1,A;for(A in h)if(h.hasOwnProperty(A)){var P=h[A];if(P!=null)switch(A){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Gn(s,o,A,P,h,null)}}x&&Gn(s,o,"srcSet",h.srcSet,h,null),m&&Gn(s,o,"src",h.src,h,null);return;case"input":un("invalid",s);var q=A=P=x=null,tt=null,yt=null;for(m in h)if(h.hasOwnProperty(m)){var zt=h[m];if(zt!=null)switch(m){case"name":x=zt;break;case"type":P=zt;break;case"checked":tt=zt;break;case"defaultChecked":yt=zt;break;case"value":A=zt;break;case"defaultValue":q=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(i(137,o));break;default:Gn(s,o,m,zt,h,null)}}Cn(s,A,q,tt,yt,P,x,!1),Kn(s);return;case"select":un("invalid",s),m=P=A=null;for(x in h)if(h.hasOwnProperty(x)&&(q=h[x],q!=null))switch(x){case"value":A=q;break;case"defaultValue":P=q;break;case"multiple":m=q;default:Gn(s,o,x,q,h,null)}o=A,h=P,s.multiple=!!m,o!=null?di(s,!!m,o,!1):h!=null&&di(s,!!m,h,!0);return;case"textarea":un("invalid",s),A=x=m=null;for(P in h)if(h.hasOwnProperty(P)&&(q=h[P],q!=null))switch(P){case"value":m=q;break;case"defaultValue":x=q;break;case"children":A=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(91));break;default:Gn(s,o,P,q,h,null)}Di(s,m,x,A),Kn(s);return;case"option":for(tt in h)if(h.hasOwnProperty(tt)&&(m=h[tt],m!=null))switch(tt){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Gn(s,o,tt,m,h,null)}return;case"dialog":un("beforetoggle",s),un("toggle",s),un("cancel",s),un("close",s);break;case"iframe":case"object":un("load",s);break;case"video":case"audio":for(m=0;m<Vp.length;m++)un(Vp[m],s);break;case"image":un("error",s),un("load",s);break;case"details":un("toggle",s);break;case"embed":case"source":case"link":un("error",s),un("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(yt in h)if(h.hasOwnProperty(yt)&&(m=h[yt],m!=null))switch(yt){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Gn(s,o,yt,m,h,null)}return;default:if(Pf(o)){for(zt in h)h.hasOwnProperty(zt)&&(m=h[zt],m!==void 0&&mx(s,o,zt,m,h,void 0));return}}for(q in h)h.hasOwnProperty(q)&&(m=h[q],m!=null&&Gn(s,o,q,m,h,null))}function cO(s,o,h,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,A=null,P=null,q=null,tt=null,yt=null,zt=null;for(bt in h){var Ft=h[bt];if(h.hasOwnProperty(bt)&&Ft!=null)switch(bt){case"checked":break;case"value":break;case"defaultValue":tt=Ft;default:m.hasOwnProperty(bt)||Gn(s,o,bt,null,m,Ft)}}for(var _t in m){var bt=m[_t];if(Ft=h[_t],m.hasOwnProperty(_t)&&(bt!=null||Ft!=null))switch(_t){case"type":A=bt;break;case"name":x=bt;break;case"checked":yt=bt;break;case"defaultChecked":zt=bt;break;case"value":P=bt;break;case"defaultValue":q=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(i(137,o));break;default:bt!==Ft&&Gn(s,o,_t,bt,m,Ft)}}$s(s,P,q,tt,yt,zt,A,x);return;case"select":bt=P=q=_t=null;for(A in h)if(tt=h[A],h.hasOwnProperty(A)&&tt!=null)switch(A){case"value":break;case"multiple":bt=tt;default:m.hasOwnProperty(A)||Gn(s,o,A,null,m,tt)}for(x in m)if(A=m[x],tt=h[x],m.hasOwnProperty(x)&&(A!=null||tt!=null))switch(x){case"value":_t=A;break;case"defaultValue":q=A;break;case"multiple":P=A;default:A!==tt&&Gn(s,o,x,A,m,tt)}o=q,h=P,m=bt,_t!=null?di(s,!!h,_t,!1):!!m!=!!h&&(o!=null?di(s,!!h,o,!0):di(s,!!h,h?[]:"",!1));return;case"textarea":bt=_t=null;for(q in h)if(x=h[q],h.hasOwnProperty(q)&&x!=null&&!m.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Gn(s,o,q,null,m,x)}for(P in m)if(x=m[P],A=h[P],m.hasOwnProperty(P)&&(x!=null||A!=null))switch(P){case"value":_t=x;break;case"defaultValue":bt=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==A&&Gn(s,o,P,x,m,A)}Ci(s,_t,bt);return;case"option":for(var Ne in h)if(_t=h[Ne],h.hasOwnProperty(Ne)&&_t!=null&&!m.hasOwnProperty(Ne))switch(Ne){case"selected":s.selected=!1;break;default:Gn(s,o,Ne,null,m,_t)}for(tt in m)if(_t=m[tt],bt=h[tt],m.hasOwnProperty(tt)&&_t!==bt&&(_t!=null||bt!=null))switch(tt){case"selected":s.selected=_t&&typeof _t!="function"&&typeof _t!="symbol";break;default:Gn(s,o,tt,_t,m,bt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in h)_t=h[we],h.hasOwnProperty(we)&&_t!=null&&!m.hasOwnProperty(we)&&Gn(s,o,we,null,m,_t);for(yt in m)if(_t=m[yt],bt=h[yt],m.hasOwnProperty(yt)&&_t!==bt&&(_t!=null||bt!=null))switch(yt){case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(i(137,o));break;default:Gn(s,o,yt,_t,m,bt)}return;default:if(Pf(o)){for(var qn in h)_t=h[qn],h.hasOwnProperty(qn)&&_t!==void 0&&!m.hasOwnProperty(qn)&&mx(s,o,qn,void 0,m,_t);for(zt in m)_t=m[zt],bt=h[zt],!m.hasOwnProperty(zt)||_t===bt||_t===void 0&&bt===void 0||mx(s,o,zt,_t,m,bt);return}}for(var ht in h)_t=h[ht],h.hasOwnProperty(ht)&&_t!=null&&!m.hasOwnProperty(ht)&&Gn(s,o,ht,null,m,_t);for(Ft in m)_t=m[Ft],bt=h[Ft],!m.hasOwnProperty(Ft)||_t===bt||_t==null&&bt==null||Gn(s,o,Ft,_t,m,bt)}var gx=null,yx=null;function Hy(s){return s.nodeType===9?s:s.ownerDocument}function tE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eE(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function vx(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var _x=null;function fO(){var s=window.event;return s&&s.type==="popstate"?s===_x?!1:(_x=s,!0):(_x=null,!1)}var nE=typeof setTimeout=="function"?setTimeout:void 0,hO=typeof clearTimeout=="function"?clearTimeout:void 0,iE=typeof Promise=="function"?Promise:void 0,dO=typeof queueMicrotask=="function"?queueMicrotask:typeof iE<"u"?function(s){return iE.resolve(null).then(s).catch(pO)}:nE;function pO(s){setTimeout(function(){throw s})}function Cu(s){return s==="head"}function aE(s,o){var h=o,m=0,x=0;do{var A=h.nextSibling;if(s.removeChild(h),A&&A.nodeType===8)if(h=A.data,h==="/$"){if(0<m&&8>m){h=m;var P=s.ownerDocument;if(h&1&&Fp(P.documentElement),h&2&&Fp(P.body),h&4)for(h=P.head,Fp(h),P=h.firstChild;P;){var q=P.nextSibling,tt=P.nodeName;P[Ds]||tt==="SCRIPT"||tt==="STYLE"||tt==="LINK"&&P.rel.toLowerCase()==="stylesheet"||h.removeChild(P),P=q}}if(x===0){s.removeChild(A),Zp(o);return}x--}else h==="$"||h==="$?"||h==="$!"?x++:m=h.charCodeAt(0)-48;else m=0;h=A}while(h);Zp(o)}function xx(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var h=o;switch(o=o.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":xx(h),wn(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function mO(s,o,h,m){for(;s.nodeType===1;){var x=h;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[Ds])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(A=s.getAttribute("rel"),A==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(A!==x.rel||s.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||s.getAttribute("title")!==(x.title==null?null:x.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(A=s.getAttribute("src"),(A!==(x.src==null?null:x.src)||s.getAttribute("type")!==(x.type==null?null:x.type)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&A&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var A=x.name==null?null:""+x.name;if(x.type==="hidden"&&s.getAttribute("name")===A)return s}else return s;if(s=Wr(s.nextSibling),s===null)break}return null}function gO(s,o,h){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=Wr(s.nextSibling),s===null))return null;return s}function Sx(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function yO(s,o){var h=s.ownerDocument;if(s.data!=="$?"||h.readyState==="complete")o();else{var m=function(){o(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function Wr(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var bx=null;function sE(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(o===0)return s;o--}else h==="/$"&&o++}s=s.previousSibling}return null}function rE(s,o,h){switch(o=Hy(h),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function Fp(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);wn(s)}var vr=new Map,oE=new Set;function Fy(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var bl=Z.d;Z.d={f:vO,r:_O,D:xO,C:SO,L:bO,m:MO,X:TO,S:EO,M:AO};function vO(){var s=bl.f(),o=gr();return s||o}function _O(s){var o=Us(s);o!==null&&o.tag===5&&o.type==="form"?xy(o):bl.r(s)}var Nh=typeof document>"u"?null:document;function lE(s,o,h){var m=Nh;if(m&&typeof o=="string"&&o){var x=Nn(o);x='link[rel="'+s+'"][href="'+x+'"]',typeof h=="string"&&(x+='[crossorigin="'+h+'"]'),oE.has(x)||(oE.add(x),s={rel:s,crossOrigin:h,href:o},m.querySelector(x)===null&&(o=m.createElement("link"),ma(o,"link",s),hi(o),m.head.appendChild(o)))}}function xO(s){bl.D(s),lE("dns-prefetch",s,null)}function SO(s,o){bl.C(s,o),lE("preconnect",s,o)}function bO(s,o,h){bl.L(s,o,h);var m=Nh;if(m&&s&&o){var x='link[rel="preload"][as="'+Nn(o)+'"]';o==="image"&&h&&h.imageSrcSet?(x+='[imagesrcset="'+Nn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(x+='[imagesizes="'+Nn(h.imageSizes)+'"]')):x+='[href="'+Nn(s)+'"]';var A=x;switch(o){case"style":A=Lh(s);break;case"script":A=Ph(s)}vr.has(A)||(s=y({rel:"preload",href:o==="image"&&h&&h.imageSrcSet?void 0:s,as:o},h),vr.set(A,s),m.querySelector(x)!==null||o==="style"&&m.querySelector(Gp(A))||o==="script"&&m.querySelector(qp(A))||(o=m.createElement("link"),ma(o,"link",s),hi(o),m.head.appendChild(o)))}}function MO(s,o){bl.m(s,o);var h=Nh;if(h&&s){var m=o&&typeof o.as=="string"?o.as:"script",x='link[rel="modulepreload"][as="'+Nn(m)+'"][href="'+Nn(s)+'"]',A=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Ph(s)}if(!vr.has(A)&&(s=y({rel:"modulepreload",href:s},o),vr.set(A,s),h.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(qp(A)))return}m=h.createElement("link"),ma(m,"link",s),hi(m),h.head.appendChild(m)}}}function EO(s,o,h){bl.S(s,o,h);var m=Nh;if(m&&s){var x=Er(m).hoistableStyles,A=Lh(s);o=o||"default";var P=x.get(A);if(!P){var q={loading:0,preload:null};if(P=m.querySelector(Gp(A)))q.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":o},h),(h=vr.get(A))&&Mx(s,h);var tt=P=m.createElement("link");hi(tt),ma(tt,"link",s),tt._p=new Promise(function(yt,zt){tt.onload=yt,tt.onerror=zt}),tt.addEventListener("load",function(){q.loading|=1}),tt.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Gy(P,o,m)}P={type:"stylesheet",instance:P,count:1,state:q},x.set(A,P)}}}function TO(s,o){bl.X(s,o);var h=Nh;if(h&&s){var m=Er(h).hoistableScripts,x=Ph(s),A=m.get(x);A||(A=h.querySelector(qp(x)),A||(s=y({src:s,async:!0},o),(o=vr.get(x))&&Ex(s,o),A=h.createElement("script"),hi(A),ma(A,"link",s),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(x,A))}}function AO(s,o){bl.M(s,o);var h=Nh;if(h&&s){var m=Er(h).hoistableScripts,x=Ph(s),A=m.get(x);A||(A=h.querySelector(qp(x)),A||(s=y({src:s,async:!0,type:"module"},o),(o=vr.get(x))&&Ex(s,o),A=h.createElement("script"),hi(A),ma(A,"link",s),h.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},m.set(x,A))}}function uE(s,o,h,m){var x=(x=Bt.current)?Fy(x):null;if(!x)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(o=Lh(h.href),h=Er(x).hoistableStyles,m=h.get(o),m||(m={type:"style",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=Lh(h.href);var A=Er(x).hoistableStyles,P=A.get(s);if(P||(x=x.ownerDocument||x,P={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(s,P),(A=x.querySelector(Gp(s)))&&!A._p&&(P.instance=A,P.state.loading=5),vr.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},vr.set(s,h),A||RO(x,s,h,P.state))),o&&m===null)throw Error(i(528,""));return P}if(o&&m!==null)throw Error(i(529,""));return null;case"script":return o=h.async,h=h.src,typeof h=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ph(h),h=Er(x).hoistableScripts,m=h.get(o),m||(m={type:"script",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Lh(s){return'href="'+Nn(s)+'"'}function Gp(s){return'link[rel="stylesheet"]['+s+"]"}function cE(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function RO(s,o,h,m){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=s.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),ma(o,"link",h),hi(o),s.head.appendChild(o))}function Ph(s){return'[src="'+Nn(s)+'"]'}function qp(s){return"script[async]"+s}function fE(s,o,h){if(o.count++,o.instance===null)switch(o.type){case"style":var m=s.querySelector('style[data-href~="'+Nn(h.href)+'"]');if(m)return o.instance=m,hi(m),m;var x=y({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),hi(m),ma(m,"style",x),Gy(m,h.precedence,s),o.instance=m;case"stylesheet":x=Lh(h.href);var A=s.querySelector(Gp(x));if(A)return o.state.loading|=4,o.instance=A,hi(A),A;m=cE(h),(x=vr.get(x))&&Mx(m,x),A=(s.ownerDocument||s).createElement("link"),hi(A);var P=A;return P._p=new Promise(function(q,tt){P.onload=q,P.onerror=tt}),ma(A,"link",m),o.state.loading|=4,Gy(A,h.precedence,s),o.instance=A;case"script":return A=Ph(h.src),(x=s.querySelector(qp(A)))?(o.instance=x,hi(x),x):(m=h,(x=vr.get(A))&&(m=y({},h),Ex(m,x)),s=s.ownerDocument||s,x=s.createElement("script"),hi(x),ma(x,"link",m),s.head.appendChild(x),o.instance=x);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,Gy(m,h.precedence,s));return o.instance}function Gy(s,o,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,A=x,P=0;P<m.length;P++){var q=m[P];if(q.dataset.precedence===o)A=q;else if(A!==x)break}A?A.parentNode.insertBefore(s,A.nextSibling):(o=h.nodeType===9?h.head:h,o.insertBefore(s,o.firstChild))}function Mx(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Ex(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var qy=null;function hE(s,o,h){if(qy===null){var m=new Map,x=qy=new Map;x.set(h,m)}else x=qy,m=x.get(h),m||(m=new Map,x.set(h,m));if(m.has(s))return m;for(m.set(s,null),h=h.getElementsByTagName(s),x=0;x<h.length;x++){var A=h[x];if(!(A[Ds]||A[fi]||s==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var P=A.getAttribute(o)||"";P=s+P;var q=m.get(P);q?q.push(A):m.set(P,[A])}}return m}function dE(s,o,h){s=s.ownerDocument||s,s.head.insertBefore(h,o==="title"?s.querySelector("head > title"):null)}function wO(s,o,h){if(h===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function pE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var Xp=null;function CO(){}function DO(s,o,h){if(Xp===null)throw Error(i(475));var m=Xp;if(o.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var x=Lh(h.href),A=s.querySelector(Gp(x));if(A){s=A._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=Xy.bind(m),s.then(m,m)),o.state.loading|=4,o.instance=A,hi(A);return}A=s.ownerDocument||s,h=cE(h),(x=vr.get(x))&&Mx(h,x),A=A.createElement("link"),hi(A);var P=A;P._p=new Promise(function(q,tt){P.onload=q,P.onerror=tt}),ma(A,"link",h),o.instance=A}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(m.count++,o=Xy.bind(m),s.addEventListener("load",o),s.addEventListener("error",o))}}function OO(){if(Xp===null)throw Error(i(475));var s=Xp;return s.stylesheets&&s.count===0&&Tx(s,s.stylesheets),0<s.count?function(o){var h=setTimeout(function(){if(s.stylesheets&&Tx(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(h)}}:null}function Xy(){if(this.count--,this.count===0){if(this.stylesheets)Tx(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var ky=null;function Tx(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,ky=new Map,o.forEach(UO,s),ky=null,Xy.call(s))}function UO(s,o){if(!(o.state.loading&4)){var h=ky.get(s);if(h)var m=h.get(null);else{h=new Map,ky.set(s,h);for(var x=s.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<x.length;A++){var P=x[A];(P.nodeName==="LINK"||P.getAttribute("media")!=="not all")&&(h.set(P.dataset.precedence,P),m=P)}m&&h.set(null,m)}x=o.instance,P=x.getAttribute("data-precedence"),A=h.get(P)||m,A===m&&h.set(null,x),h.set(P,x),this.count++,m=Xy.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),A?A.parentNode.insertBefore(x,A.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(x,s.firstChild)),o.state.loading|=4}}var kp={$$typeof:D,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function NO(s,o,h,m,x,A,P,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rt(0),this.hiddenUpdates=Rt(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=A,this.onRecoverableError=P,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function mE(s,o,h,m,x,A,P,q,tt,yt,zt,Ft){return s=new NO(s,o,h,P,q,tt,yt,Ft),o=1,A===!0&&(o|=24),A=Ea(3,null,null,o),s.current=A,A.stateNode=s,o=nh(),o.refCount++,s.pooledCache=o,o.refCount++,A.memoizedState={element:m,isDehydrated:h,cache:o},mp(A),s}function gE(s){return s?(s=yo,s):yo}function yE(s,o,h,m,x,A){x=gE(x),m.context===null?m.context=x:m.pendingContext=x,m=sr(o),m.payload={element:h},A=A===void 0?null:A,A!==null&&(m.callback=A),h=Ir(s,m,o),h!==null&&(pa(h,s,o),al(h,s,o))}function vE(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<o?h:o}}function Ax(s,o){vE(s,o),(s=s.alternate)&&vE(s,o)}function _E(s){if(s.tag===13){var o=Nr(s,67108864);o!==null&&pa(o,s,67108864),Ax(s,67108864)}}var jy=!0;function LO(s,o,h,m){var x=I.T;I.T=null;var A=Z.p;try{Z.p=2,Rx(s,o,h,m)}finally{Z.p=A,I.T=x}}function PO(s,o,h,m){var x=I.T;I.T=null;var A=Z.p;try{Z.p=8,Rx(s,o,h,m)}finally{Z.p=A,I.T=x}}function Rx(s,o,h,m){if(jy){var x=wx(m);if(x===null)px(s,o,m,Yy,h),SE(s,m);else if(BO(x,s,o,h,m))m.stopPropagation();else if(SE(s,m),o&4&&-1<zO.indexOf(s)){for(;x!==null;){var A=Us(x);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var P=te(A.pendingLanes);if(P!==0){var q=A;for(q.pendingLanes|=2,q.entangledLanes|=2;P;){var tt=1<<31-Qt(P);q.entanglements[1]|=tt,P&=~tt}Fo(A),(Mn&6)===0&&(ta=Ut()+500,Ip(0))}}break;case 13:q=Nr(A,2),q!==null&&pa(q,A,2),gr(),Ax(A,2)}if(A=wx(m),A===null&&px(s,o,m,Yy,h),A===x)break;x=A}x!==null&&m.stopPropagation()}else px(s,o,m,null,h)}}function wx(s){return s=Bf(s),Cx(s)}var Yy=null;function Cx(s){if(Yy=null,s=Os(s),s!==null){var o=r(s);if(o===null)s=null;else{var h=o.tag;if(h===13){if(s=u(o),s!==null)return s;s=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Yy=s,null}function xE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case Kt:return 2;case Ot:return 8;case Y:case V:return 32;case ft:return 268435456;default:return 32}default:return 32}}var Dx=!1,Du=null,Ou=null,Uu=null,jp=new Map,Yp=new Map,Nu=[],zO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SE(s,o){switch(s){case"focusin":case"focusout":Du=null;break;case"dragenter":case"dragleave":Ou=null;break;case"mouseover":case"mouseout":Uu=null;break;case"pointerover":case"pointerout":jp.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yp.delete(o.pointerId)}}function Wp(s,o,h,m,x,A){return s===null||s.nativeEvent!==A?(s={blockedOn:o,domEventName:h,eventSystemFlags:m,nativeEvent:A,targetContainers:[x]},o!==null&&(o=Us(o),o!==null&&_E(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,x!==null&&o.indexOf(x)===-1&&o.push(x),s)}function BO(s,o,h,m,x){switch(o){case"focusin":return Du=Wp(Du,s,o,h,m,x),!0;case"dragenter":return Ou=Wp(Ou,s,o,h,m,x),!0;case"mouseover":return Uu=Wp(Uu,s,o,h,m,x),!0;case"pointerover":var A=x.pointerId;return jp.set(A,Wp(jp.get(A)||null,s,o,h,m,x)),!0;case"gotpointercapture":return A=x.pointerId,Yp.set(A,Wp(Yp.get(A)||null,s,o,h,m,x)),!0}return!1}function bE(s){var o=Os(s.target);if(o!==null){var h=r(o);if(h!==null){if(o=h.tag,o===13){if(o=u(h),o!==null){s.blockedOn=o,va(s.priority,function(){if(h.tag===13){var m=ni();m=An(m);var x=Nr(h,m);x!==null&&pa(x,h,m),Ax(h,m)}});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wy(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var h=wx(s.nativeEvent);if(h===null){h=s.nativeEvent;var m=new h.constructor(h.type,h);zf=m,h.target.dispatchEvent(m),zf=null}else return o=Us(h),o!==null&&_E(o),s.blockedOn=h,!1;o.shift()}return!0}function ME(s,o,h){Wy(s)&&h.delete(o)}function IO(){Dx=!1,Du!==null&&Wy(Du)&&(Du=null),Ou!==null&&Wy(Ou)&&(Ou=null),Uu!==null&&Wy(Uu)&&(Uu=null),jp.forEach(ME),Yp.forEach(ME)}function Zy(s,o){s.blockedOn===o&&(s.blockedOn=null,Dx||(Dx=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,IO)))}var Ky=null;function EE(s){Ky!==s&&(Ky=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ky===s&&(Ky=null);for(var o=0;o<s.length;o+=3){var h=s[o],m=s[o+1],x=s[o+2];if(typeof m!="function"){if(Cx(m||h)===null)continue;break}var A=Us(h);A!==null&&(s.splice(o,3),o-=3,Op(A,{pending:!0,data:x,method:h.method,action:m},m,x))}}))}function Zp(s){function o(tt){return Zy(tt,s)}Du!==null&&Zy(Du,s),Ou!==null&&Zy(Ou,s),Uu!==null&&Zy(Uu,s),jp.forEach(o),Yp.forEach(o);for(var h=0;h<Nu.length;h++){var m=Nu[h];m.blockedOn===s&&(m.blockedOn=null)}for(;0<Nu.length&&(h=Nu[0],h.blockedOn===null);)bE(h),h.blockedOn===null&&Nu.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var x=h[m],A=h[m+1],P=x[bi]||null;if(typeof A=="function")P||EE(h);else if(P){var q=null;if(A&&A.hasAttribute("formAction")){if(x=A,P=A[bi]||null)q=P.formAction;else if(Cx(x)!==null)continue}else q=P.action;typeof q=="function"?h[m+1]=q:(h.splice(m,3),m-=3),EE(h)}}}function Ox(s){this._internalRoot=s}Qy.prototype.render=Ox.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var h=o.current,m=ni();yE(h,m,s,o,null,null)},Qy.prototype.unmount=Ox.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;yE(s.current,2,null,s,null,null),gr(),o[Qi]=null}};function Qy(s){this._internalRoot=s}Qy.prototype.unstable_scheduleHydration=function(s){if(s){var o=ln();s={blockedOn:null,target:s,priority:o};for(var h=0;h<Nu.length&&o!==0&&o<Nu[h].priority;h++);Nu.splice(h,0,s),h===0&&bE(s)}};var TE=t.version;if(TE!=="19.1.0")throw Error(i(527,TE,"19.1.0"));Z.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(o),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var VO={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jy.isDisabled&&Jy.supportsFiber)try{Ct=Jy.inject(VO),$t=Jy}catch{}}return Qp.createRoot=function(s,o){if(!a(s))throw Error(i(299));var h=!1,m="",x=Fc,A=_h,P=Uy,q=null;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(P=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(q=o.unstable_transitionCallbacks)),o=mE(s,1,!1,null,null,h,m,x,A,P,q,null),s[Qi]=o.current,dx(s),new Ox(o)},Qp.hydrateRoot=function(s,o,h){if(!a(s))throw Error(i(299));var m=!1,x="",A=Fc,P=_h,q=Uy,tt=null,yt=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(P=h.onCaughtError),h.onRecoverableError!==void 0&&(q=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(tt=h.unstable_transitionCallbacks),h.formState!==void 0&&(yt=h.formState)),o=mE(s,1,!0,o,h??null,m,x,A,P,q,tt,yt),o.context=gE(null),h=o.current,m=ni(),m=An(m),x=sr(m),x.callback=null,Ir(h,x,m),h=m,o.current.lanes=h,Ht(o,h),Fo(o),s[Qi]=o.current,dx(s),new Qy(o)},Qp.version="19.1.0",Qp}var PE;function KO(){if(PE)return Px.exports;PE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Px.exports=ZO(),Px.exports}var QO=KO();const JO=rg(QO);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const s_="175",$O={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},tU={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Cw=0,xb=1,Dw=2,eU=3,Ow=0,r_=1,vm=2,$r=3,Bl=0,as=1,qo=2,Nl=0,Sf=1,Sb=2,bb=3,Mb=4,Uw=5,Xu=100,Nw=101,Lw=102,Pw=103,zw=104,Bw=200,Iw=201,Vw=202,Hw=203,lv=204,uv=205,Fw=206,Gw=207,qw=208,Xw=209,kw=210,jw=211,Yw=212,Ww=213,Zw=214,cv=0,fv=1,hv=2,Af=3,dv=4,pv=5,mv=6,gv=7,og=0,Kw=1,Qw=2,ko=0,Jw=1,$w=2,tC=3,pM=4,eC=5,nC=6,iC=7,Eb="attached",aC="detached",o_=300,Il=301,Yu=302,Nm=303,Lm=304,Ad=306,Pm=1e3,br=1001,zm=1002,ya=1003,mM=1004,nU=1004,id=1005,iU=1005,Wi=1006,_m=1007,aU=1007,Xo=1008,sU=1008,no=1009,gM=1010,yM=1011,dd=1012,l_=1013,Vl=1014,As=1015,Rd=1016,u_=1017,c_=1018,pd=1020,vM=35902,_M=1021,xM=1022,Pa=1023,SM=1024,bM=1025,md=1026,gd=1027,f_=1028,lg=1029,MM=1030,h_=1031,rU=1032,d_=1033,xm=33776,Sm=33777,bm=33778,Mm=33779,yv=35840,vv=35841,_v=35842,xv=35843,Sv=36196,bv=37492,Mv=37496,Ev=37808,Tv=37809,Av=37810,Rv=37811,wv=37812,Cv=37813,Dv=37814,Ov=37815,Uv=37816,Nv=37817,Lv=37818,Pv=37819,zv=37820,Bv=37821,Em=36492,Iv=36494,Vv=36495,EM=36283,Hv=36284,Fv=36285,Gv=36286,sC=2200,rC=2201,oC=2202,Bm=2300,qv=2301,K0=2302,pf=2400,mf=2401,Im=2402,p_=2500,TM=2501,oU=0,lU=1,uU=2,lC=3200,uC=3201,cU=3202,fU=3203,Ju=0,cC=1,Dl="",Na="srgb",Wu="srgb-linear",Vm="linear",In="srgb",hU=0,cf=7680,dU=7681,pU=7682,mU=7683,gU=34055,yU=34056,vU=5386,_U=512,xU=513,SU=514,bU=515,MU=516,EU=517,TU=518,Tb=519,fC=512,hC=513,dC=514,AM=515,pC=516,mC=517,gC=518,yC=519,Hm=35044,AU=35048,RU=35040,wU=35045,CU=35049,DU=35041,OU=35046,UU=35050,NU=35042,LU="100",Ab="300 es",eo=2e3,Fm=2001,PU={COMPUTE:"compute",RENDER:"render"};class Jo{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[t]===void 0&&(i[t]=[]),i[t].indexOf(e)===-1&&i[t].push(e)}hasEventListener(t,e){const i=this._listeners;return i===void 0?!1:i[t]!==void 0&&i[t].indexOf(e)!==-1}removeEventListener(t,e){const i=this._listeners;if(i===void 0)return;const a=i[t];if(a!==void 0){const r=a.indexOf(e);r!==-1&&a.splice(r,1)}}dispatchEvent(t){const e=this._listeners;if(e===void 0)return;const i=e[t.type];if(i!==void 0){t.target=this;const a=i.slice(0);for(let r=0,u=a.length;r<u;r++)a[r].call(this,t);t.target=null}}}const Ca=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let zE=1234567;const bf=Math.PI/180,yd=180/Math.PI;function Ws(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ca[n&255]+Ca[n>>8&255]+Ca[n>>16&255]+Ca[n>>24&255]+"-"+Ca[t&255]+Ca[t>>8&255]+"-"+Ca[t>>16&15|64]+Ca[t>>24&255]+"-"+Ca[e&63|128]+Ca[e>>8&255]+"-"+Ca[e>>16&255]+Ca[e>>24&255]+Ca[i&255]+Ca[i>>8&255]+Ca[i>>16&255]+Ca[i>>24&255]).toLowerCase()}function Fe(n,t,e){return Math.max(t,Math.min(e,n))}function RM(n,t){return(n%t+t)%t}function zU(n,t,e,i,a){return i+(n-t)*(a-i)/(e-t)}function BU(n,t,e){return n!==t?(e-n)/(t-n):0}function Tm(n,t,e){return(1-e)*n+e*t}function IU(n,t,e,i){return Tm(n,t,1-Math.exp(-e*i))}function VU(n,t=1){return t-Math.abs(RM(n,t*2)-t)}function HU(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function FU(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function GU(n,t){return n+Math.floor(Math.random()*(t-n+1))}function qU(n,t){return n+Math.random()*(t-n)}function XU(n){return n*(.5-Math.random())}function kU(n){n!==void 0&&(zE=n);let t=zE+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function jU(n){return n*bf}function YU(n){return n*yd}function WU(n){return(n&n-1)===0&&n!==0}function ZU(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function KU(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function QU(n,t,e,i,a){const r=Math.cos,u=Math.sin,f=r(e/2),d=u(e/2),p=r((t+i)/2),y=u((t+i)/2),v=r((t-i)/2),_=u((t-i)/2),b=r((i-t)/2),E=u((i-t)/2);switch(a){case"XYX":n.set(f*y,d*v,d*_,f*p);break;case"YZY":n.set(d*_,f*y,d*v,f*p);break;case"ZXZ":n.set(d*v,d*_,f*y,f*p);break;case"XZX":n.set(f*y,d*E,d*b,f*p);break;case"YXY":n.set(d*b,f*y,d*E,f*p);break;case"ZYZ":n.set(d*E,d*b,f*y,f*p);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function ns(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ye(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const hm={DEG2RAD:bf,RAD2DEG:yd,generateUUID:Ws,clamp:Fe,euclideanModulo:RM,mapLinear:zU,inverseLerp:BU,lerp:Tm,damp:IU,pingpong:VU,smoothstep:HU,smootherstep:FU,randInt:GU,randFloat:qU,randFloatSpread:XU,seededRandom:kU,degToRad:jU,radToDeg:YU,isPowerOfTwo:WU,ceilPowerOfTwo:ZU,floorPowerOfTwo:KU,setQuaternionFromProperEuler:QU,normalize:Ye,denormalize:ns};class Gt{constructor(t=0,e=0){Gt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,a=t.elements;return this.x=a[0]*e+a[3]*i+a[6],this.y=a[1]*e+a[4]*i+a[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Fe(this.x,t.x,e.x),this.y=Fe(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Fe(this.x,t,e),this.y=Fe(this.y,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Fe(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Fe(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),a=Math.sin(e),r=this.x-t.x,u=this.y-t.y;return this.x=r*i-u*a+t.x,this.y=r*a+u*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Xe{constructor(t,e,i,a,r,u,f,d,p){Xe.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,i,a,r,u,f,d,p)}set(t,e,i,a,r,u,f,d,p){const y=this.elements;return y[0]=t,y[1]=a,y[2]=f,y[3]=e,y[4]=r,y[5]=d,y[6]=i,y[7]=u,y[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,a=e.elements,r=this.elements,u=i[0],f=i[3],d=i[6],p=i[1],y=i[4],v=i[7],_=i[2],b=i[5],E=i[8],R=a[0],T=a[3],M=a[6],C=a[1],D=a[4],O=a[7],N=a[2],L=a[5],H=a[8];return r[0]=u*R+f*C+d*N,r[3]=u*T+f*D+d*L,r[6]=u*M+f*O+d*H,r[1]=p*R+y*C+v*N,r[4]=p*T+y*D+v*L,r[7]=p*M+y*O+v*H,r[2]=_*R+b*C+E*N,r[5]=_*T+b*D+E*L,r[8]=_*M+b*O+E*H,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],a=t[2],r=t[3],u=t[4],f=t[5],d=t[6],p=t[7],y=t[8];return e*u*y-e*f*p-i*r*y+i*f*d+a*r*p-a*u*d}invert(){const t=this.elements,e=t[0],i=t[1],a=t[2],r=t[3],u=t[4],f=t[5],d=t[6],p=t[7],y=t[8],v=y*u-f*p,_=f*d-y*r,b=p*r-u*d,E=e*v+i*_+a*b;if(E===0)return this.set(0,0,0,0,0,0,0,0,0);const R=1/E;return t[0]=v*R,t[1]=(a*p-y*i)*R,t[2]=(f*i-a*u)*R,t[3]=_*R,t[4]=(y*e-a*d)*R,t[5]=(a*r-f*e)*R,t[6]=b*R,t[7]=(i*d-p*e)*R,t[8]=(u*e-i*r)*R,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,a,r,u,f){const d=Math.cos(r),p=Math.sin(r);return this.set(i*d,i*p,-i*(d*u+p*f)+u+t,-a*p,a*d,-a*(-p*u+d*f)+f+e,0,0,1),this}scale(t,e){return this.premultiply(Vx.makeScale(t,e)),this}rotate(t){return this.premultiply(Vx.makeRotation(-t)),this}translate(t,e){return this.premultiply(Vx.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let a=0;a<9;a++)if(e[a]!==i[a])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const Vx=new Xe;function vC(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}const JU={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ad(n,t){return new JU[n](t)}function Gm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function _C(){const n=Gm("canvas");return n.style.display="block",n}const BE={};function Q0(n){n in BE||(BE[n]=!0,console.warn(n))}function $U(n,t,e){return new Promise(function(i,a){function r(){switch(n.clientWaitSync(t,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:a();break;case n.TIMEOUT_EXPIRED:setTimeout(r,e);break;default:i()}}setTimeout(r,e)})}function tN(n){const t=n.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}function eN(n){const t=n.elements;t[11]===-1?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=-t[14]+1)}const IE=new Xe().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),VE=new Xe().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function nN(){const n={enabled:!0,workingColorSpace:Wu,spaces:{},convert:function(a,r,u){return this.enabled===!1||r===u||!r||!u||(this.spaces[r].transfer===In&&(a.r=Ll(a.r),a.g=Ll(a.g),a.b=Ll(a.b)),this.spaces[r].primaries!==this.spaces[u].primaries&&(a.applyMatrix3(this.spaces[r].toXYZ),a.applyMatrix3(this.spaces[u].fromXYZ)),this.spaces[u].transfer===In&&(a.r=hd(a.r),a.g=hd(a.g),a.b=hd(a.b))),a},fromWorkingColorSpace:function(a,r){return this.convert(a,this.workingColorSpace,r)},toWorkingColorSpace:function(a,r){return this.convert(a,r,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Dl?Vm:this.spaces[a].transfer},getLuminanceCoefficients:function(a,r=this.workingColorSpace){return a.fromArray(this.spaces[r].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,r,u){return a.copy(this.spaces[r].toXYZ).multiply(this.spaces[u].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Wu]:{primaries:t,whitePoint:i,transfer:Vm,toXYZ:IE,fromXYZ:VE,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:Na},outputColorSpaceConfig:{drawingBufferColorSpace:Na}},[Na]:{primaries:t,whitePoint:i,transfer:In,toXYZ:IE,fromXYZ:VE,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:Na}}}),n}const mn=nN();function Ll(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function hd(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let zh;class xC{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{zh===void 0&&(zh=Gm("canvas")),zh.width=t.width,zh.height=t.height;const a=zh.getContext("2d");t instanceof ImageData?a.putImageData(t,0,0):a.drawImage(t,0,0,t.width,t.height),i=zh}return i.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Gm("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const a=i.getImageData(0,0,t.width,t.height),r=a.data;for(let u=0;u<r.length;u++)r[u]=Ll(r[u]/255)*255;return i.putImageData(a,0,0),e}else if(t.data){const e=t.data.slice(0);for(let i=0;i<e.length;i++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[i]=Math.floor(Ll(e[i]/255)*255):e[i]=Ll(e[i]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let iN=0;class ju{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:iN++}),this.uuid=Ws(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const i={uuid:this.uuid,url:""},a=this.data;if(a!==null){let r;if(Array.isArray(a)){r=[];for(let u=0,f=a.length;u<f;u++)a[u].isDataTexture?r.push(Hx(a[u].image)):r.push(Hx(a[u]))}else r=Hx(a);i.url=r}return e||(t.images[this.uuid]=i),i}}function Hx(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?xC.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aN=0;class _i extends Jo{constructor(t=_i.DEFAULT_IMAGE,e=_i.DEFAULT_MAPPING,i=br,a=br,r=Wi,u=Xo,f=Pa,d=no,p=_i.DEFAULT_ANISOTROPY,y=Dl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aN++}),this.uuid=Ws(),this.name="",this.source=new ju(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=r,this.minFilter=u,this.anisotropy=p,this.format=f,this.internalFormat=null,this.type=d,this.offset=new Gt(0,0),this.repeat=new Gt(1,1),this.center=new Gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Xe,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=y,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==o_)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Pm:t.x=t.x-Math.floor(t.x);break;case br:t.x=t.x<0?0:1;break;case zm:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Pm:t.y=t.y-Math.floor(t.y);break;case br:t.y=t.y<0?0:1;break;case zm:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}_i.DEFAULT_IMAGE=null;_i.DEFAULT_MAPPING=o_;_i.DEFAULT_ANISOTROPY=1;class xn{constructor(t=0,e=0,i=0,a=1){xn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=a}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,a){return this.x=t,this.y=e,this.z=i,this.w=a,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,a=this.z,r=this.w,u=t.elements;return this.x=u[0]*e+u[4]*i+u[8]*a+u[12]*r,this.y=u[1]*e+u[5]*i+u[9]*a+u[13]*r,this.z=u[2]*e+u[6]*i+u[10]*a+u[14]*r,this.w=u[3]*e+u[7]*i+u[11]*a+u[15]*r,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,a,r;const d=t.elements,p=d[0],y=d[4],v=d[8],_=d[1],b=d[5],E=d[9],R=d[2],T=d[6],M=d[10];if(Math.abs(y-_)<.01&&Math.abs(v-R)<.01&&Math.abs(E-T)<.01){if(Math.abs(y+_)<.1&&Math.abs(v+R)<.1&&Math.abs(E+T)<.1&&Math.abs(p+b+M-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const D=(p+1)/2,O=(b+1)/2,N=(M+1)/2,L=(y+_)/4,H=(v+R)/4,G=(E+T)/4;return D>O&&D>N?D<.01?(i=0,a=.707106781,r=.707106781):(i=Math.sqrt(D),a=L/i,r=H/i):O>N?O<.01?(i=.707106781,a=0,r=.707106781):(a=Math.sqrt(O),i=L/a,r=G/a):N<.01?(i=.707106781,a=.707106781,r=0):(r=Math.sqrt(N),i=H/r,a=G/r),this.set(i,a,r,e),this}let C=Math.sqrt((T-E)*(T-E)+(v-R)*(v-R)+(_-y)*(_-y));return Math.abs(C)<.001&&(C=1),this.x=(T-E)/C,this.y=(v-R)/C,this.z=(_-y)/C,this.w=Math.acos((p+b+M-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Fe(this.x,t.x,e.x),this.y=Fe(this.y,t.y,e.y),this.z=Fe(this.z,t.z,e.z),this.w=Fe(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Fe(this.x,t,e),this.y=Fe(this.y,t,e),this.z=Fe(this.z,t,e),this.w=Fe(this.w,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Fe(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class m_ extends Jo{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new xn(0,0,t,e),this.scissorTest=!1,this.viewport=new xn(0,0,t,e);const a={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const r=new _i(a,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);r.flipY=!1,r.generateMipmaps=i.generateMipmaps,r.internalFormat=i.internalFormat,this.textures=[];const u=i.count;for(let f=0;f<u;f++)this.textures[f]=r.clone(),this.textures[f].isRenderTargetTexture=!0,this.textures[f].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let a=0,r=this.textures.length;a<r;a++)this.textures[a].image.width=t,this.textures[a].image.height=e,this.textures[a].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,i=t.textures.length;e<i;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const a=Object.assign({},t.textures[e].image);this.textures[e].source=new ju(a)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ko extends m_{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}}class ug extends _i{constructor(t=null,e=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:a},this.magFilter=ya,this.minFilter=ya,this.wrapR=br,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class sN extends Ko{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new ug(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class g_ extends _i{constructor(t=null,e=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:a},this.magFilter=ya,this.minFilter=ya,this.wrapR=br,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rN extends Ko{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new g_(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class Rs{constructor(t=0,e=0,i=0,a=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=a}static slerpFlat(t,e,i,a,r,u,f){let d=i[a+0],p=i[a+1],y=i[a+2],v=i[a+3];const _=r[u+0],b=r[u+1],E=r[u+2],R=r[u+3];if(f===0){t[e+0]=d,t[e+1]=p,t[e+2]=y,t[e+3]=v;return}if(f===1){t[e+0]=_,t[e+1]=b,t[e+2]=E,t[e+3]=R;return}if(v!==R||d!==_||p!==b||y!==E){let T=1-f;const M=d*_+p*b+y*E+v*R,C=M>=0?1:-1,D=1-M*M;if(D>Number.EPSILON){const N=Math.sqrt(D),L=Math.atan2(N,M*C);T=Math.sin(T*L)/N,f=Math.sin(f*L)/N}const O=f*C;if(d=d*T+_*O,p=p*T+b*O,y=y*T+E*O,v=v*T+R*O,T===1-f){const N=1/Math.sqrt(d*d+p*p+y*y+v*v);d*=N,p*=N,y*=N,v*=N}}t[e]=d,t[e+1]=p,t[e+2]=y,t[e+3]=v}static multiplyQuaternionsFlat(t,e,i,a,r,u){const f=i[a],d=i[a+1],p=i[a+2],y=i[a+3],v=r[u],_=r[u+1],b=r[u+2],E=r[u+3];return t[e]=f*E+y*v+d*b-p*_,t[e+1]=d*E+y*_+p*v-f*b,t[e+2]=p*E+y*b+f*_-d*v,t[e+3]=y*E-f*v-d*_-p*b,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,a){return this._x=t,this._y=e,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,a=t._y,r=t._z,u=t._order,f=Math.cos,d=Math.sin,p=f(i/2),y=f(a/2),v=f(r/2),_=d(i/2),b=d(a/2),E=d(r/2);switch(u){case"XYZ":this._x=_*y*v+p*b*E,this._y=p*b*v-_*y*E,this._z=p*y*E+_*b*v,this._w=p*y*v-_*b*E;break;case"YXZ":this._x=_*y*v+p*b*E,this._y=p*b*v-_*y*E,this._z=p*y*E-_*b*v,this._w=p*y*v+_*b*E;break;case"ZXY":this._x=_*y*v-p*b*E,this._y=p*b*v+_*y*E,this._z=p*y*E+_*b*v,this._w=p*y*v-_*b*E;break;case"ZYX":this._x=_*y*v-p*b*E,this._y=p*b*v+_*y*E,this._z=p*y*E-_*b*v,this._w=p*y*v+_*b*E;break;case"YZX":this._x=_*y*v+p*b*E,this._y=p*b*v+_*y*E,this._z=p*y*E-_*b*v,this._w=p*y*v-_*b*E;break;case"XZY":this._x=_*y*v-p*b*E,this._y=p*b*v-_*y*E,this._z=p*y*E+_*b*v,this._w=p*y*v+_*b*E;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,a=Math.sin(i);return this._x=t.x*a,this._y=t.y*a,this._z=t.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],a=e[4],r=e[8],u=e[1],f=e[5],d=e[9],p=e[2],y=e[6],v=e[10],_=i+f+v;if(_>0){const b=.5/Math.sqrt(_+1);this._w=.25/b,this._x=(y-d)*b,this._y=(r-p)*b,this._z=(u-a)*b}else if(i>f&&i>v){const b=2*Math.sqrt(1+i-f-v);this._w=(y-d)/b,this._x=.25*b,this._y=(a+u)/b,this._z=(r+p)/b}else if(f>v){const b=2*Math.sqrt(1+f-i-v);this._w=(r-p)/b,this._x=(a+u)/b,this._y=.25*b,this._z=(d+y)/b}else{const b=2*Math.sqrt(1+v-i-f);this._w=(u-a)/b,this._x=(r+p)/b,this._y=(d+y)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Fe(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(i===0)return this;const a=Math.min(1,e/i);return this.slerp(t,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,a=t._y,r=t._z,u=t._w,f=e._x,d=e._y,p=e._z,y=e._w;return this._x=i*y+u*f+a*p-r*d,this._y=a*y+u*d+r*f-i*p,this._z=r*y+u*p+i*d-a*f,this._w=u*y-i*f-a*d-r*p,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const i=this._x,a=this._y,r=this._z,u=this._w;let f=u*t._w+i*t._x+a*t._y+r*t._z;if(f<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,f=-f):this.copy(t),f>=1)return this._w=u,this._x=i,this._y=a,this._z=r,this;const d=1-f*f;if(d<=Number.EPSILON){const b=1-e;return this._w=b*u+e*this._w,this._x=b*i+e*this._x,this._y=b*a+e*this._y,this._z=b*r+e*this._z,this.normalize(),this}const p=Math.sqrt(d),y=Math.atan2(p,f),v=Math.sin((1-e)*y)/p,_=Math.sin(e*y)/p;return this._w=u*v+this._w*_,this._x=i*v+this._x*_,this._y=a*v+this._y*_,this._z=r*v+this._z*_,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),a=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(a*Math.sin(t),a*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(t=0,e=0,i=0){K.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return i===void 0&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(HE.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(HE.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,a=this.z,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6]*a,this.y=r[1]*e+r[4]*i+r[7]*a,this.z=r[2]*e+r[5]*i+r[8]*a,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,a=this.z,r=t.elements,u=1/(r[3]*e+r[7]*i+r[11]*a+r[15]);return this.x=(r[0]*e+r[4]*i+r[8]*a+r[12])*u,this.y=(r[1]*e+r[5]*i+r[9]*a+r[13])*u,this.z=(r[2]*e+r[6]*i+r[10]*a+r[14])*u,this}applyQuaternion(t){const e=this.x,i=this.y,a=this.z,r=t.x,u=t.y,f=t.z,d=t.w,p=2*(u*a-f*i),y=2*(f*e-r*a),v=2*(r*i-u*e);return this.x=e+d*p+u*v-f*y,this.y=i+d*y+f*p-r*v,this.z=a+d*v+r*y-u*p,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,a=this.z,r=t.elements;return this.x=r[0]*e+r[4]*i+r[8]*a,this.y=r[1]*e+r[5]*i+r[9]*a,this.z=r[2]*e+r[6]*i+r[10]*a,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Fe(this.x,t.x,e.x),this.y=Fe(this.y,t.y,e.y),this.z=Fe(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Fe(this.x,t,e),this.y=Fe(this.y,t,e),this.z=Fe(this.z,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Fe(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,a=t.y,r=t.z,u=e.x,f=e.y,d=e.z;return this.x=a*d-r*f,this.y=r*u-i*d,this.z=i*f-a*u,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Fx.copy(this).projectOnVector(t),this.sub(Fx)}reflect(t){return this.sub(Fx.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Fe(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,a=this.z-t.z;return e*e+i*i+a*a}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const a=Math.sin(e)*t;return this.x=a*Math.sin(i),this.y=Math.cos(e)*t,this.z=a*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),a=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=a,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Fx=new K,HE=new Rs;class ss{constructor(t=new K(1/0,1/0,1/0),e=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Zr.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Zr.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Zr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(i!==void 0){const r=i.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let u=0,f=r.count;u<f;u++)t.isMesh===!0?t.getVertexPosition(u,Zr):Zr.fromBufferAttribute(r,u),Zr.applyMatrix4(t.matrixWorld),this.expandByPoint(Zr);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),$y.copy(t.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),$y.copy(i.boundingBox)),$y.applyMatrix4(t.matrixWorld),this.union($y)}const a=t.children;for(let r=0,u=a.length;r<u;r++)this.expandByObject(a[r],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Zr),Zr.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Jp),t0.subVectors(this.max,Jp),Bh.subVectors(t.a,Jp),Ih.subVectors(t.b,Jp),Vh.subVectors(t.c,Jp),Pu.subVectors(Ih,Bh),zu.subVectors(Vh,Ih),Zc.subVectors(Bh,Vh);let e=[0,-Pu.z,Pu.y,0,-zu.z,zu.y,0,-Zc.z,Zc.y,Pu.z,0,-Pu.x,zu.z,0,-zu.x,Zc.z,0,-Zc.x,-Pu.y,Pu.x,0,-zu.y,zu.x,0,-Zc.y,Zc.x,0];return!Gx(e,Bh,Ih,Vh,t0)||(e=[1,0,0,0,1,0,0,0,1],!Gx(e,Bh,Ih,Vh,t0))?!1:(e0.crossVectors(Pu,zu),e=[e0.x,e0.y,e0.z],Gx(e,Bh,Ih,Vh,t0))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Zr).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Zr).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Ml[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Ml[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Ml[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Ml[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Ml[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Ml[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Ml[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Ml[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Ml),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Ml=[new K,new K,new K,new K,new K,new K,new K,new K],Zr=new K,$y=new ss,Bh=new K,Ih=new K,Vh=new K,Pu=new K,zu=new K,Zc=new K,Jp=new K,t0=new K,e0=new K,Kc=new K;function Gx(n,t,e,i,a){for(let r=0,u=n.length-3;r<=u;r+=3){Kc.fromArray(n,r);const f=a.x*Math.abs(Kc.x)+a.y*Math.abs(Kc.y)+a.z*Math.abs(Kc.z),d=t.dot(Kc),p=e.dot(Kc),y=i.dot(Kc);if(Math.max(-Math.max(d,p,y),Math.min(d,p,y))>f)return!1}return!0}const oN=new ss,$p=new K,qx=new K;class Ba{constructor(t=new K,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;e!==void 0?i.copy(e):oN.setFromPoints(t).getCenter(i);let a=0;for(let r=0,u=t.length;r<u;r++)a=Math.max(a,i.distanceToSquared(t[r]));return this.radius=Math.sqrt(a),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;$p.subVectors(t,this.center);const e=$p.lengthSq();if(e>this.radius*this.radius){const i=Math.sqrt(e),a=(i-this.radius)*.5;this.center.addScaledVector($p,a/i),this.radius+=a}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(qx.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint($p.copy(t.center).add(qx)),this.expandByPoint($p.copy(t.center).sub(qx))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const El=new K,Xx=new K,n0=new K,Bu=new K,kx=new K,i0=new K,jx=new K;class wd{constructor(t=new K,e=new K(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,El)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=El.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(El.copy(this.origin).addScaledVector(this.direction,e),El.distanceToSquared(t))}distanceSqToSegment(t,e,i,a){Xx.copy(t).add(e).multiplyScalar(.5),n0.copy(e).sub(t).normalize(),Bu.copy(this.origin).sub(Xx);const r=t.distanceTo(e)*.5,u=-this.direction.dot(n0),f=Bu.dot(this.direction),d=-Bu.dot(n0),p=Bu.lengthSq(),y=Math.abs(1-u*u);let v,_,b,E;if(y>0)if(v=u*d-f,_=u*f-d,E=r*y,v>=0)if(_>=-E)if(_<=E){const R=1/y;v*=R,_*=R,b=v*(v+u*_+2*f)+_*(u*v+_+2*d)+p}else _=r,v=Math.max(0,-(u*_+f)),b=-v*v+_*(_+2*d)+p;else _=-r,v=Math.max(0,-(u*_+f)),b=-v*v+_*(_+2*d)+p;else _<=-E?(v=Math.max(0,-(-u*r+f)),_=v>0?-r:Math.min(Math.max(-r,-d),r),b=-v*v+_*(_+2*d)+p):_<=E?(v=0,_=Math.min(Math.max(-r,-d),r),b=_*(_+2*d)+p):(v=Math.max(0,-(u*r+f)),_=v>0?r:Math.min(Math.max(-r,-d),r),b=-v*v+_*(_+2*d)+p);else _=u>0?-r:r,v=Math.max(0,-(u*_+f)),b=-v*v+_*(_+2*d)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,v),a&&a.copy(Xx).addScaledVector(n0,_),b}intersectSphere(t,e){El.subVectors(t.center,this.origin);const i=El.dot(this.direction),a=El.dot(El)-i*i,r=t.radius*t.radius;if(a>r)return null;const u=Math.sqrt(r-a),f=i-u,d=i+u;return d<0?null:f<0?this.at(d,e):this.at(f,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return i===null?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,a,r,u,f,d;const p=1/this.direction.x,y=1/this.direction.y,v=1/this.direction.z,_=this.origin;return p>=0?(i=(t.min.x-_.x)*p,a=(t.max.x-_.x)*p):(i=(t.max.x-_.x)*p,a=(t.min.x-_.x)*p),y>=0?(r=(t.min.y-_.y)*y,u=(t.max.y-_.y)*y):(r=(t.max.y-_.y)*y,u=(t.min.y-_.y)*y),i>u||r>a||((r>i||isNaN(i))&&(i=r),(u<a||isNaN(a))&&(a=u),v>=0?(f=(t.min.z-_.z)*v,d=(t.max.z-_.z)*v):(f=(t.max.z-_.z)*v,d=(t.min.z-_.z)*v),i>d||f>a)||((f>i||i!==i)&&(i=f),(d<a||a!==a)&&(a=d),a<0)?null:this.at(i>=0?i:a,e)}intersectsBox(t){return this.intersectBox(t,El)!==null}intersectTriangle(t,e,i,a,r){kx.subVectors(e,t),i0.subVectors(i,t),jx.crossVectors(kx,i0);let u=this.direction.dot(jx),f;if(u>0){if(a)return null;f=1}else if(u<0)f=-1,u=-u;else return null;Bu.subVectors(this.origin,t);const d=f*this.direction.dot(i0.crossVectors(Bu,i0));if(d<0)return null;const p=f*this.direction.dot(kx.cross(Bu));if(p<0||d+p>u)return null;const y=-f*Bu.dot(jx);return y<0?null:this.at(y/u,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Le{constructor(t,e,i,a,r,u,f,d,p,y,v,_,b,E,R,T){Le.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,i,a,r,u,f,d,p,y,v,_,b,E,R,T)}set(t,e,i,a,r,u,f,d,p,y,v,_,b,E,R,T){const M=this.elements;return M[0]=t,M[4]=e,M[8]=i,M[12]=a,M[1]=r,M[5]=u,M[9]=f,M[13]=d,M[2]=p,M[6]=y,M[10]=v,M[14]=_,M[3]=b,M[7]=E,M[11]=R,M[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Le().fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,a=1/Hh.setFromMatrixColumn(t,0).length(),r=1/Hh.setFromMatrixColumn(t,1).length(),u=1/Hh.setFromMatrixColumn(t,2).length();return e[0]=i[0]*a,e[1]=i[1]*a,e[2]=i[2]*a,e[3]=0,e[4]=i[4]*r,e[5]=i[5]*r,e[6]=i[6]*r,e[7]=0,e[8]=i[8]*u,e[9]=i[9]*u,e[10]=i[10]*u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,a=t.y,r=t.z,u=Math.cos(i),f=Math.sin(i),d=Math.cos(a),p=Math.sin(a),y=Math.cos(r),v=Math.sin(r);if(t.order==="XYZ"){const _=u*y,b=u*v,E=f*y,R=f*v;e[0]=d*y,e[4]=-d*v,e[8]=p,e[1]=b+E*p,e[5]=_-R*p,e[9]=-f*d,e[2]=R-_*p,e[6]=E+b*p,e[10]=u*d}else if(t.order==="YXZ"){const _=d*y,b=d*v,E=p*y,R=p*v;e[0]=_+R*f,e[4]=E*f-b,e[8]=u*p,e[1]=u*v,e[5]=u*y,e[9]=-f,e[2]=b*f-E,e[6]=R+_*f,e[10]=u*d}else if(t.order==="ZXY"){const _=d*y,b=d*v,E=p*y,R=p*v;e[0]=_-R*f,e[4]=-u*v,e[8]=E+b*f,e[1]=b+E*f,e[5]=u*y,e[9]=R-_*f,e[2]=-u*p,e[6]=f,e[10]=u*d}else if(t.order==="ZYX"){const _=u*y,b=u*v,E=f*y,R=f*v;e[0]=d*y,e[4]=E*p-b,e[8]=_*p+R,e[1]=d*v,e[5]=R*p+_,e[9]=b*p-E,e[2]=-p,e[6]=f*d,e[10]=u*d}else if(t.order==="YZX"){const _=u*d,b=u*p,E=f*d,R=f*p;e[0]=d*y,e[4]=R-_*v,e[8]=E*v+b,e[1]=v,e[5]=u*y,e[9]=-f*y,e[2]=-p*y,e[6]=b*v+E,e[10]=_-R*v}else if(t.order==="XZY"){const _=u*d,b=u*p,E=f*d,R=f*p;e[0]=d*y,e[4]=-v,e[8]=p*y,e[1]=_*v+R,e[5]=u*y,e[9]=b*v-E,e[2]=E*v-b,e[6]=f*y,e[10]=R*v+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(lN,t,uN)}lookAt(t,e,i){const a=this.elements;return js.subVectors(t,e),js.lengthSq()===0&&(js.z=1),js.normalize(),Iu.crossVectors(i,js),Iu.lengthSq()===0&&(Math.abs(i.z)===1?js.x+=1e-4:js.z+=1e-4,js.normalize(),Iu.crossVectors(i,js)),Iu.normalize(),a0.crossVectors(js,Iu),a[0]=Iu.x,a[4]=a0.x,a[8]=js.x,a[1]=Iu.y,a[5]=a0.y,a[9]=js.y,a[2]=Iu.z,a[6]=a0.z,a[10]=js.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,a=e.elements,r=this.elements,u=i[0],f=i[4],d=i[8],p=i[12],y=i[1],v=i[5],_=i[9],b=i[13],E=i[2],R=i[6],T=i[10],M=i[14],C=i[3],D=i[7],O=i[11],N=i[15],L=a[0],H=a[4],G=a[8],B=a[12],z=a[1],j=a[5],at=a[9],nt=a[13],Q=a[2],rt=a[6],I=a[10],Z=a[14],W=a[3],J=a[7],F=a[11],$=a[15];return r[0]=u*L+f*z+d*Q+p*W,r[4]=u*H+f*j+d*rt+p*J,r[8]=u*G+f*at+d*I+p*F,r[12]=u*B+f*nt+d*Z+p*$,r[1]=y*L+v*z+_*Q+b*W,r[5]=y*H+v*j+_*rt+b*J,r[9]=y*G+v*at+_*I+b*F,r[13]=y*B+v*nt+_*Z+b*$,r[2]=E*L+R*z+T*Q+M*W,r[6]=E*H+R*j+T*rt+M*J,r[10]=E*G+R*at+T*I+M*F,r[14]=E*B+R*nt+T*Z+M*$,r[3]=C*L+D*z+O*Q+N*W,r[7]=C*H+D*j+O*rt+N*J,r[11]=C*G+D*at+O*I+N*F,r[15]=C*B+D*nt+O*Z+N*$,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],a=t[8],r=t[12],u=t[1],f=t[5],d=t[9],p=t[13],y=t[2],v=t[6],_=t[10],b=t[14],E=t[3],R=t[7],T=t[11],M=t[15];return E*(+r*d*v-a*p*v-r*f*_+i*p*_+a*f*b-i*d*b)+R*(+e*d*b-e*p*_+r*u*_-a*u*b+a*p*y-r*d*y)+T*(+e*p*v-e*f*b-r*u*v+i*u*b+r*f*y-i*p*y)+M*(-a*f*y-e*d*v+e*f*_+a*u*v-i*u*_+i*d*y)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const a=this.elements;return t.isVector3?(a[12]=t.x,a[13]=t.y,a[14]=t.z):(a[12]=t,a[13]=e,a[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],a=t[2],r=t[3],u=t[4],f=t[5],d=t[6],p=t[7],y=t[8],v=t[9],_=t[10],b=t[11],E=t[12],R=t[13],T=t[14],M=t[15],C=v*T*p-R*_*p+R*d*b-f*T*b-v*d*M+f*_*M,D=E*_*p-y*T*p-E*d*b+u*T*b+y*d*M-u*_*M,O=y*R*p-E*v*p+E*f*b-u*R*b-y*f*M+u*v*M,N=E*v*d-y*R*d-E*f*_+u*R*_+y*f*T-u*v*T,L=e*C+i*D+a*O+r*N;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const H=1/L;return t[0]=C*H,t[1]=(R*_*r-v*T*r-R*a*b+i*T*b+v*a*M-i*_*M)*H,t[2]=(f*T*r-R*d*r+R*a*p-i*T*p-f*a*M+i*d*M)*H,t[3]=(v*d*r-f*_*r-v*a*p+i*_*p+f*a*b-i*d*b)*H,t[4]=D*H,t[5]=(y*T*r-E*_*r+E*a*b-e*T*b-y*a*M+e*_*M)*H,t[6]=(E*d*r-u*T*r-E*a*p+e*T*p+u*a*M-e*d*M)*H,t[7]=(u*_*r-y*d*r+y*a*p-e*_*p-u*a*b+e*d*b)*H,t[8]=O*H,t[9]=(E*v*r-y*R*r-E*i*b+e*R*b+y*i*M-e*v*M)*H,t[10]=(u*R*r-E*f*r+E*i*p-e*R*p-u*i*M+e*f*M)*H,t[11]=(y*f*r-u*v*r-y*i*p+e*v*p+u*i*b-e*f*b)*H,t[12]=N*H,t[13]=(y*R*a-E*v*a+E*i*_-e*R*_-y*i*T+e*v*T)*H,t[14]=(E*f*a-u*R*a-E*i*d+e*R*d+u*i*T-e*f*T)*H,t[15]=(u*v*a-y*f*a+y*i*d-e*v*d-u*i*_+e*f*_)*H,this}scale(t){const e=this.elements,i=t.x,a=t.y,r=t.z;return e[0]*=i,e[4]*=a,e[8]*=r,e[1]*=i,e[5]*=a,e[9]*=r,e[2]*=i,e[6]*=a,e[10]*=r,e[3]*=i,e[7]*=a,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],a=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,a))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),a=Math.sin(e),r=1-i,u=t.x,f=t.y,d=t.z,p=r*u,y=r*f;return this.set(p*u+i,p*f-a*d,p*d+a*f,0,p*f+a*d,y*f+i,y*d-a*u,0,p*d-a*f,y*d+a*u,r*d*d+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,a,r,u){return this.set(1,i,r,0,t,1,u,0,e,a,1,0,0,0,0,1),this}compose(t,e,i){const a=this.elements,r=e._x,u=e._y,f=e._z,d=e._w,p=r+r,y=u+u,v=f+f,_=r*p,b=r*y,E=r*v,R=u*y,T=u*v,M=f*v,C=d*p,D=d*y,O=d*v,N=i.x,L=i.y,H=i.z;return a[0]=(1-(R+M))*N,a[1]=(b+O)*N,a[2]=(E-D)*N,a[3]=0,a[4]=(b-O)*L,a[5]=(1-(_+M))*L,a[6]=(T+C)*L,a[7]=0,a[8]=(E+D)*H,a[9]=(T-C)*H,a[10]=(1-(_+R))*H,a[11]=0,a[12]=t.x,a[13]=t.y,a[14]=t.z,a[15]=1,this}decompose(t,e,i){const a=this.elements;let r=Hh.set(a[0],a[1],a[2]).length();const u=Hh.set(a[4],a[5],a[6]).length(),f=Hh.set(a[8],a[9],a[10]).length();this.determinant()<0&&(r=-r),t.x=a[12],t.y=a[13],t.z=a[14],Kr.copy(this);const p=1/r,y=1/u,v=1/f;return Kr.elements[0]*=p,Kr.elements[1]*=p,Kr.elements[2]*=p,Kr.elements[4]*=y,Kr.elements[5]*=y,Kr.elements[6]*=y,Kr.elements[8]*=v,Kr.elements[9]*=v,Kr.elements[10]*=v,e.setFromRotationMatrix(Kr),i.x=r,i.y=u,i.z=f,this}makePerspective(t,e,i,a,r,u,f=eo){const d=this.elements,p=2*r/(e-t),y=2*r/(i-a),v=(e+t)/(e-t),_=(i+a)/(i-a);let b,E;if(f===eo)b=-(u+r)/(u-r),E=-2*u*r/(u-r);else if(f===Fm)b=-u/(u-r),E=-u*r/(u-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+f);return d[0]=p,d[4]=0,d[8]=v,d[12]=0,d[1]=0,d[5]=y,d[9]=_,d[13]=0,d[2]=0,d[6]=0,d[10]=b,d[14]=E,d[3]=0,d[7]=0,d[11]=-1,d[15]=0,this}makeOrthographic(t,e,i,a,r,u,f=eo){const d=this.elements,p=1/(e-t),y=1/(i-a),v=1/(u-r),_=(e+t)*p,b=(i+a)*y;let E,R;if(f===eo)E=(u+r)*v,R=-2*v;else if(f===Fm)E=r*v,R=-1*v;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+f);return d[0]=2*p,d[4]=0,d[8]=0,d[12]=-_,d[1]=0,d[5]=2*y,d[9]=0,d[13]=-b,d[2]=0,d[6]=0,d[10]=R,d[14]=-E,d[3]=0,d[7]=0,d[11]=0,d[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let a=0;a<16;a++)if(e[a]!==i[a])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const Hh=new K,Kr=new Le,lN=new K(0,0,0),uN=new K(1,1,1),Iu=new K,a0=new K,js=new K,FE=new Le,GE=new Rs;class Qs{constructor(t=0,e=0,i=0,a=Qs.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=a}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,a=this._order){return this._x=t,this._y=e,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const a=t.elements,r=a[0],u=a[4],f=a[8],d=a[1],p=a[5],y=a[9],v=a[2],_=a[6],b=a[10];switch(e){case"XYZ":this._y=Math.asin(Fe(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(-y,b),this._z=Math.atan2(-u,r)):(this._x=Math.atan2(_,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Fe(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(f,b),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-v,r),this._z=0);break;case"ZXY":this._x=Math.asin(Fe(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-v,b),this._z=Math.atan2(-u,p)):(this._y=0,this._z=Math.atan2(d,r));break;case"ZYX":this._y=Math.asin(-Fe(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(_,b),this._z=Math.atan2(d,r)):(this._x=0,this._z=Math.atan2(-u,p));break;case"YZX":this._z=Math.asin(Fe(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-y,p),this._y=Math.atan2(-v,r)):(this._x=0,this._y=Math.atan2(f,b));break;case"XZY":this._z=Math.asin(-Fe(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(_,p),this._y=Math.atan2(f,r)):(this._x=Math.atan2(-y,b),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,i===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return FE.makeRotationFromQuaternion(t),this.setFromRotationMatrix(FE,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return GE.setFromEuler(this),this.setFromQuaternion(GE,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Qs.DEFAULT_ORDER="XYZ";class vd{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let cN=0;const qE=new K,Fh=new Rs,Tl=new Le,s0=new K,tm=new K,fN=new K,hN=new Rs,XE=new K(1,0,0),kE=new K(0,1,0),jE=new K(0,0,1),YE={type:"added"},dN={type:"removed"},Gh={type:"childadded",child:null},Yx={type:"childremoved",child:null};class Sn extends Jo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:cN++}),this.uuid=Ws(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Sn.DEFAULT_UP.clone();const t=new K,e=new Qs,i=new Rs,a=new K(1,1,1);function r(){i.setFromEuler(e,!1)}function u(){e.setFromQuaternion(i,void 0,!1)}e._onChange(r),i._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Le},normalMatrix:{value:new Xe}}),this.matrix=new Le,this.matrixWorld=new Le,this.matrixAutoUpdate=Sn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new vd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Fh.setFromAxisAngle(t,e),this.quaternion.multiply(Fh),this}rotateOnWorldAxis(t,e){return Fh.setFromAxisAngle(t,e),this.quaternion.premultiply(Fh),this}rotateX(t){return this.rotateOnAxis(XE,t)}rotateY(t){return this.rotateOnAxis(kE,t)}rotateZ(t){return this.rotateOnAxis(jE,t)}translateOnAxis(t,e){return qE.copy(t).applyQuaternion(this.quaternion),this.position.add(qE.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(XE,t)}translateY(t){return this.translateOnAxis(kE,t)}translateZ(t){return this.translateOnAxis(jE,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Tl.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?s0.copy(t):s0.set(t,e,i);const a=this.parent;this.updateWorldMatrix(!0,!1),tm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Tl.lookAt(tm,s0,this.up):Tl.lookAt(s0,tm,this.up),this.quaternion.setFromRotationMatrix(Tl),a&&(Tl.extractRotation(a.matrixWorld),Fh.setFromRotationMatrix(Tl),this.quaternion.premultiply(Fh.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(YE),Gh.child=t,this.dispatchEvent(Gh),Gh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(dN),Yx.child=t,this.dispatchEvent(Yx),Yx.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Tl.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Tl.multiply(t.parent.matrixWorld)),t.applyMatrix4(Tl),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(YE),Gh.child=t,this.dispatchEvent(Gh),Gh.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,a=this.children.length;i<a;i++){const u=this.children[i].getObjectByProperty(t,e);if(u!==void 0)return u}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const a=this.children;for(let r=0,u=a.length;r<u;r++)a[r].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tm,t,fN),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tm,hN,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,a=e.length;i<a;i++)e[i].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let i=0,a=e.length;i<a;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,a=e.length;i<a;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(t===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),e===!0){const a=this.children;for(let r=0,u=a.length;r<u;r++)a[r].updateWorldMatrix(!1,!0)}}toJSON(t){const e=t===void 0||typeof t=="string",i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.visibility=this._visibility,a.active=this._active,a.bounds=this._bounds.map(f=>({boxInitialized:f.boxInitialized,boxMin:f.box.min.toArray(),boxMax:f.box.max.toArray(),sphereInitialized:f.sphereInitialized,sphereRadius:f.sphere.radius,sphereCenter:f.sphere.center.toArray()})),a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.geometryCount=this._geometryCount,a.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(a.boundingSphere={center:a.boundingSphere.center.toArray(),radius:a.boundingSphere.radius}),this.boundingBox!==null&&(a.boundingBox={min:a.boundingBox.min.toArray(),max:a.boundingBox.max.toArray()}));function r(f,d){return f[d.uuid]===void 0&&(f[d.uuid]=d.toJSON(t)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=r(t.geometries,this.geometry);const f=this.geometry.parameters;if(f!==void 0&&f.shapes!==void 0){const d=f.shapes;if(Array.isArray(d))for(let p=0,y=d.length;p<y;p++){const v=d[p];r(t.shapes,v)}else r(t.shapes,d)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const f=[];for(let d=0,p=this.material.length;d<p;d++)f.push(r(t.materials,this.material[d]));a.material=f}else a.material=r(t.materials,this.material);if(this.children.length>0){a.children=[];for(let f=0;f<this.children.length;f++)a.children.push(this.children[f].toJSON(t).object)}if(this.animations.length>0){a.animations=[];for(let f=0;f<this.animations.length;f++){const d=this.animations[f];a.animations.push(r(t.animations,d))}}if(e){const f=u(t.geometries),d=u(t.materials),p=u(t.textures),y=u(t.images),v=u(t.shapes),_=u(t.skeletons),b=u(t.animations),E=u(t.nodes);f.length>0&&(i.geometries=f),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),y.length>0&&(i.images=y),v.length>0&&(i.shapes=v),_.length>0&&(i.skeletons=_),b.length>0&&(i.animations=b),E.length>0&&(i.nodes=E)}return i.object=a,i;function u(f){const d=[];for(const p in f){const y=f[p];delete y.metadata,d.push(y)}return d}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let i=0;i<t.children.length;i++){const a=t.children[i];this.add(a.clone())}return this}}Sn.DEFAULT_UP=new K(0,1,0);Sn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Qr=new K,Al=new K,Wx=new K,Rl=new K,qh=new K,Xh=new K,WE=new K,Zx=new K,Kx=new K,Qx=new K,Jx=new xn,$x=new xn,tS=new xn;class Ts{constructor(t=new K,e=new K,i=new K){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,a){a.subVectors(i,e),Qr.subVectors(t,e),a.cross(Qr);const r=a.lengthSq();return r>0?a.multiplyScalar(1/Math.sqrt(r)):a.set(0,0,0)}static getBarycoord(t,e,i,a,r){Qr.subVectors(a,e),Al.subVectors(i,e),Wx.subVectors(t,e);const u=Qr.dot(Qr),f=Qr.dot(Al),d=Qr.dot(Wx),p=Al.dot(Al),y=Al.dot(Wx),v=u*p-f*f;if(v===0)return r.set(0,0,0),null;const _=1/v,b=(p*d-f*y)*_,E=(u*y-f*d)*_;return r.set(1-b-E,E,b)}static containsPoint(t,e,i,a){return this.getBarycoord(t,e,i,a,Rl)===null?!1:Rl.x>=0&&Rl.y>=0&&Rl.x+Rl.y<=1}static getInterpolation(t,e,i,a,r,u,f,d){return this.getBarycoord(t,e,i,a,Rl)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(r,Rl.x),d.addScaledVector(u,Rl.y),d.addScaledVector(f,Rl.z),d)}static getInterpolatedAttribute(t,e,i,a,r,u){return Jx.setScalar(0),$x.setScalar(0),tS.setScalar(0),Jx.fromBufferAttribute(t,e),$x.fromBufferAttribute(t,i),tS.fromBufferAttribute(t,a),u.setScalar(0),u.addScaledVector(Jx,r.x),u.addScaledVector($x,r.y),u.addScaledVector(tS,r.z),u}static isFrontFacing(t,e,i,a){return Qr.subVectors(i,e),Al.subVectors(t,e),Qr.cross(Al).dot(a)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,a){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[a]),this}setFromAttributeAndIndices(t,e,i,a){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,a),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Qr.subVectors(this.c,this.b),Al.subVectors(this.a,this.b),Qr.cross(Al).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ts.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ts.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,a,r){return Ts.getInterpolation(t,this.a,this.b,this.c,e,i,a,r)}containsPoint(t){return Ts.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ts.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,a=this.b,r=this.c;let u,f;qh.subVectors(a,i),Xh.subVectors(r,i),Zx.subVectors(t,i);const d=qh.dot(Zx),p=Xh.dot(Zx);if(d<=0&&p<=0)return e.copy(i);Kx.subVectors(t,a);const y=qh.dot(Kx),v=Xh.dot(Kx);if(y>=0&&v<=y)return e.copy(a);const _=d*v-y*p;if(_<=0&&d>=0&&y<=0)return u=d/(d-y),e.copy(i).addScaledVector(qh,u);Qx.subVectors(t,r);const b=qh.dot(Qx),E=Xh.dot(Qx);if(E>=0&&b<=E)return e.copy(r);const R=b*p-d*E;if(R<=0&&p>=0&&E<=0)return f=p/(p-E),e.copy(i).addScaledVector(Xh,f);const T=y*E-b*v;if(T<=0&&v-y>=0&&b-E>=0)return WE.subVectors(r,a),f=(v-y)/(v-y+(b-E)),e.copy(a).addScaledVector(WE,f);const M=1/(T+R+_);return u=R*M,f=_*M,e.copy(i).addScaledVector(qh,u).addScaledVector(Xh,f)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const SC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Vu={h:0,s:0,l:0},r0={h:0,s:0,l:0};function eS(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}class fe{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(e===void 0&&i===void 0){const a=t;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Na){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,mn.toWorkingColorSpace(this,e),this}setRGB(t,e,i,a=mn.workingColorSpace){return this.r=t,this.g=e,this.b=i,mn.toWorkingColorSpace(this,a),this}setHSL(t,e,i,a=mn.workingColorSpace){if(t=RM(t,1),e=Fe(e,0,1),i=Fe(i,0,1),e===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+e):i+e-i*e,u=2*i-r;this.r=eS(u,r,t+1/3),this.g=eS(u,r,t),this.b=eS(u,r,t-1/3)}return mn.toWorkingColorSpace(this,a),this}setStyle(t,e=Na){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const u=a[1],f=a[2];switch(u){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(f))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=a[1],u=r.length;if(u===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(u===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Na){const i=SC[t.toLowerCase()];return i!==void 0?this.setHex(i,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Ll(t.r),this.g=Ll(t.g),this.b=Ll(t.b),this}copyLinearToSRGB(t){return this.r=hd(t.r),this.g=hd(t.g),this.b=hd(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Na){return mn.fromWorkingColorSpace(Da.copy(this),t),Math.round(Fe(Da.r*255,0,255))*65536+Math.round(Fe(Da.g*255,0,255))*256+Math.round(Fe(Da.b*255,0,255))}getHexString(t=Na){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=mn.workingColorSpace){mn.fromWorkingColorSpace(Da.copy(this),e);const i=Da.r,a=Da.g,r=Da.b,u=Math.max(i,a,r),f=Math.min(i,a,r);let d,p;const y=(f+u)/2;if(f===u)d=0,p=0;else{const v=u-f;switch(p=y<=.5?v/(u+f):v/(2-u-f),u){case i:d=(a-r)/v+(a<r?6:0);break;case a:d=(r-i)/v+2;break;case r:d=(i-a)/v+4;break}d/=6}return t.h=d,t.s=p,t.l=y,t}getRGB(t,e=mn.workingColorSpace){return mn.fromWorkingColorSpace(Da.copy(this),e),t.r=Da.r,t.g=Da.g,t.b=Da.b,t}getStyle(t=Na){mn.fromWorkingColorSpace(Da.copy(this),t);const e=Da.r,i=Da.g,a=Da.b;return t!==Na?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(i*255)},${Math.round(a*255)})`}offsetHSL(t,e,i){return this.getHSL(Vu),this.setHSL(Vu.h+t,Vu.s+e,Vu.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Vu),t.getHSL(r0);const i=Tm(Vu.h,r0.h,e),a=Tm(Vu.s,r0.s,e),r=Tm(Vu.l,r0.l,e);return this.setHSL(i,a,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,a=this.b,r=t.elements;return this.r=r[0]*e+r[3]*i+r[6]*a,this.g=r[1]*e+r[4]*i+r[7]*a,this.b=r[2]*e+r[5]*i+r[8]*a,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Da=new fe;fe.NAMES=SC;let pN=0;class Ia extends Jo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:pN++}),this.uuid=Ws(),this.name="",this.type="Material",this.blending=Sf,this.side=Bl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=lv,this.blendDst=uv,this.blendEquation=Xu,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new fe(0,0,0),this.blendAlpha=0,this.depthFunc=Af,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Tb,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=cf,this.stencilZFail=cf,this.stencilZPass=cf,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const i=t[e];if(i===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const a=this[e];if(a===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(i):a&&a.isVector3&&i&&i.isVector3?a.copy(i):this[e]=i}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Sf&&(i.blending=this.blending),this.side!==Bl&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==lv&&(i.blendSrc=this.blendSrc),this.blendDst!==uv&&(i.blendDst=this.blendDst),this.blendEquation!==Xu&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Af&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Tb&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==cf&&(i.stencilFail=this.stencilFail),this.stencilZFail!==cf&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==cf&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function a(r){const u=[];for(const f in r){const d=r[f];delete d.metadata,u.push(d)}return u}if(e){const r=a(t.textures),u=a(t.images);r.length>0&&(i.textures=r),u.length>0&&(i.images=u)}return i}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(e!==null){const a=e.length;i=new Array(a);for(let r=0;r!==a;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class $u extends Ia{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qs,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Ol=mN();function mN(){const n=new ArrayBuffer(4),t=new Float32Array(n),e=new Uint32Array(n),i=new Uint32Array(512),a=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(i[d]=0,i[d|256]=32768,a[d]=24,a[d|256]=24):p<-14?(i[d]=1024>>-p-14,i[d|256]=1024>>-p-14|32768,a[d]=-p-1,a[d|256]=-p-1):p<=15?(i[d]=p+15<<10,i[d|256]=p+15<<10|32768,a[d]=13,a[d|256]=13):p<128?(i[d]=31744,i[d|256]=64512,a[d]=24,a[d|256]=24):(i[d]=31744,i[d|256]=64512,a[d]=13,a[d|256]=13)}const r=new Uint32Array(2048),u=new Uint32Array(64),f=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,y=0;for(;(p&8388608)===0;)p<<=1,y-=8388608;p&=-8388609,y+=947912704,r[d]=p|y}for(let d=1024;d<2048;++d)r[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)u[d]=d<<23;u[31]=1199570944,u[32]=2147483648;for(let d=33;d<63;++d)u[d]=2147483648+(d-32<<23);u[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(f[d]=1024);return{floatView:t,uint32View:e,baseTable:i,shiftTable:a,mantissaTable:r,exponentTable:u,offsetTable:f}}function bs(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Fe(n,-65504,65504),Ol.floatView[0]=n;const t=Ol.uint32View[0],e=t>>23&511;return Ol.baseTable[e]+((t&8388607)>>Ol.shiftTable[e])}function dm(n){const t=n>>10;return Ol.uint32View[0]=Ol.mantissaTable[Ol.offsetTable[t]+(n&1023)]+Ol.exponentTable[t],Ol.floatView[0]}class gN{static toHalfFloat(t){return bs(t)}static fromHalfFloat(t){return dm(t)}}const zi=new K,o0=new Gt;let yN=0;class On{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:yN++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=i,this.usage=Hm,this.updateRanges=[],this.gpuType=As,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let a=0,r=this.itemSize;a<r;a++)this.array[t+a]=e.array[i+a];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,i=this.count;e<i;e++)o0.fromBufferAttribute(this,e),o0.applyMatrix3(t),this.setXY(e,o0.x,o0.y);else if(this.itemSize===3)for(let e=0,i=this.count;e<i;e++)zi.fromBufferAttribute(this,e),zi.applyMatrix3(t),this.setXYZ(e,zi.x,zi.y,zi.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)zi.fromBufferAttribute(this,e),zi.applyMatrix4(t),this.setXYZ(e,zi.x,zi.y,zi.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)zi.fromBufferAttribute(this,e),zi.applyNormalMatrix(t),this.setXYZ(e,zi.x,zi.y,zi.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)zi.fromBufferAttribute(this,e),zi.transformDirection(t),this.setXYZ(e,zi.x,zi.y,zi.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=ns(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Ye(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=ns(e,this.array)),e}setX(t,e){return this.normalized&&(e=Ye(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=ns(e,this.array)),e}setY(t,e){return this.normalized&&(e=Ye(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=ns(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Ye(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=ns(e,this.array)),e}setW(t,e){return this.normalized&&(e=Ye(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Ye(e,this.array),i=Ye(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,a){return t*=this.itemSize,this.normalized&&(e=Ye(e,this.array),i=Ye(i,this.array),a=Ye(a,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=a,this}setXYZW(t,e,i,a,r){return t*=this.itemSize,this.normalized&&(e=Ye(e,this.array),i=Ye(i,this.array),a=Ye(a,this.array),r=Ye(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=a,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Hm&&(t.usage=this.usage),t}}class vN extends On{constructor(t,e,i){super(new Int8Array(t),e,i)}}class _N extends On{constructor(t,e,i){super(new Uint8Array(t),e,i)}}class xN extends On{constructor(t,e,i){super(new Uint8ClampedArray(t),e,i)}}class SN extends On{constructor(t,e,i){super(new Int16Array(t),e,i)}}class wM extends On{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class bN extends On{constructor(t,e,i){super(new Int32Array(t),e,i)}}class CM extends On{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class MN extends On{constructor(t,e,i){super(new Uint16Array(t),e,i),this.isFloat16BufferAttribute=!0}getX(t){let e=dm(this.array[t*this.itemSize]);return this.normalized&&(e=ns(e,this.array)),e}setX(t,e){return this.normalized&&(e=Ye(e,this.array)),this.array[t*this.itemSize]=bs(e),this}getY(t){let e=dm(this.array[t*this.itemSize+1]);return this.normalized&&(e=ns(e,this.array)),e}setY(t,e){return this.normalized&&(e=Ye(e,this.array)),this.array[t*this.itemSize+1]=bs(e),this}getZ(t){let e=dm(this.array[t*this.itemSize+2]);return this.normalized&&(e=ns(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Ye(e,this.array)),this.array[t*this.itemSize+2]=bs(e),this}getW(t){let e=dm(this.array[t*this.itemSize+3]);return this.normalized&&(e=ns(e,this.array)),e}setW(t,e){return this.normalized&&(e=Ye(e,this.array)),this.array[t*this.itemSize+3]=bs(e),this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Ye(e,this.array),i=Ye(i,this.array)),this.array[t+0]=bs(e),this.array[t+1]=bs(i),this}setXYZ(t,e,i,a){return t*=this.itemSize,this.normalized&&(e=Ye(e,this.array),i=Ye(i,this.array),a=Ye(a,this.array)),this.array[t+0]=bs(e),this.array[t+1]=bs(i),this.array[t+2]=bs(a),this}setXYZW(t,e,i,a,r){return t*=this.itemSize,this.normalized&&(e=Ye(e,this.array),i=Ye(i,this.array),a=Ye(a,this.array),r=Ye(r,this.array)),this.array[t+0]=bs(e),this.array[t+1]=bs(i),this.array[t+2]=bs(a),this.array[t+3]=bs(r),this}}class me extends On{constructor(t,e,i){super(new Float32Array(t),e,i)}}let EN=0;const _r=new Le,nS=new Sn,kh=new K,Ys=new ss,em=new ss,ia=new K;class Qe extends Jo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:EN++}),this.uuid=Ws(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(vC(t)?CM:wM)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new Xe().getNormalMatrix(t);i.applyNormalMatrix(r),i.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(t),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return _r.makeRotationFromQuaternion(t),this.applyMatrix4(_r),this}rotateX(t){return _r.makeRotationX(t),this.applyMatrix4(_r),this}rotateY(t){return _r.makeRotationY(t),this.applyMatrix4(_r),this}rotateZ(t){return _r.makeRotationZ(t),this.applyMatrix4(_r),this}translate(t,e,i){return _r.makeTranslation(t,e,i),this.applyMatrix4(_r),this}scale(t,e,i){return _r.makeScale(t,e,i),this.applyMatrix4(_r),this}lookAt(t){return nS.lookAt(t),nS.updateMatrix(),this.applyMatrix4(nS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kh).negate(),this.translate(kh.x,kh.y,kh.z),this}setFromPoints(t){const e=this.getAttribute("position");if(e===void 0){const i=[];for(let a=0,r=t.length;a<r;a++){const u=t[a];i.push(u.x,u.y,u.z||0)}this.setAttribute("position",new me(i,3))}else{const i=Math.min(t.length,e.count);for(let a=0;a<i;a++){const r=t[a];e.setXYZ(a,r.x,r.y,r.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ss);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let i=0,a=e.length;i<a;i++){const r=e[i];Ys.setFromBufferAttribute(r),this.morphTargetsRelative?(ia.addVectors(this.boundingBox.min,Ys.min),this.boundingBox.expandByPoint(ia),ia.addVectors(this.boundingBox.max,Ys.max),this.boundingBox.expandByPoint(ia)):(this.boundingBox.expandByPoint(Ys.min),this.boundingBox.expandByPoint(Ys.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ba);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(t){const i=this.boundingSphere.center;if(Ys.setFromBufferAttribute(t),e)for(let r=0,u=e.length;r<u;r++){const f=e[r];em.setFromBufferAttribute(f),this.morphTargetsRelative?(ia.addVectors(Ys.min,em.min),Ys.expandByPoint(ia),ia.addVectors(Ys.max,em.max),Ys.expandByPoint(ia)):(Ys.expandByPoint(em.min),Ys.expandByPoint(em.max))}Ys.getCenter(i);let a=0;for(let r=0,u=t.count;r<u;r++)ia.fromBufferAttribute(t,r),a=Math.max(a,i.distanceToSquared(ia));if(e)for(let r=0,u=e.length;r<u;r++){const f=e[r],d=this.morphTargetsRelative;for(let p=0,y=f.count;p<y;p++)ia.fromBufferAttribute(f,p),d&&(kh.fromBufferAttribute(t,p),ia.add(kh)),a=Math.max(a,i.distanceToSquared(ia))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.position,a=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new On(new Float32Array(4*i.count),4));const u=this.getAttribute("tangent"),f=[],d=[];for(let G=0;G<i.count;G++)f[G]=new K,d[G]=new K;const p=new K,y=new K,v=new K,_=new Gt,b=new Gt,E=new Gt,R=new K,T=new K;function M(G,B,z){p.fromBufferAttribute(i,G),y.fromBufferAttribute(i,B),v.fromBufferAttribute(i,z),_.fromBufferAttribute(r,G),b.fromBufferAttribute(r,B),E.fromBufferAttribute(r,z),y.sub(p),v.sub(p),b.sub(_),E.sub(_);const j=1/(b.x*E.y-E.x*b.y);isFinite(j)&&(R.copy(y).multiplyScalar(E.y).addScaledVector(v,-b.y).multiplyScalar(j),T.copy(v).multiplyScalar(b.x).addScaledVector(y,-E.x).multiplyScalar(j),f[G].add(R),f[B].add(R),f[z].add(R),d[G].add(T),d[B].add(T),d[z].add(T))}let C=this.groups;C.length===0&&(C=[{start:0,count:t.count}]);for(let G=0,B=C.length;G<B;++G){const z=C[G],j=z.start,at=z.count;for(let nt=j,Q=j+at;nt<Q;nt+=3)M(t.getX(nt+0),t.getX(nt+1),t.getX(nt+2))}const D=new K,O=new K,N=new K,L=new K;function H(G){N.fromBufferAttribute(a,G),L.copy(N);const B=f[G];D.copy(B),D.sub(N.multiplyScalar(N.dot(B))).normalize(),O.crossVectors(L,B);const j=O.dot(d[G])<0?-1:1;u.setXYZW(G,D.x,D.y,D.z,j)}for(let G=0,B=C.length;G<B;++G){const z=C[G],j=z.start,at=z.count;for(let nt=j,Q=j+at;nt<Q;nt+=3)H(t.getX(nt+0)),H(t.getX(nt+1)),H(t.getX(nt+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new On(new Float32Array(e.count*3),3),this.setAttribute("normal",i);else for(let _=0,b=i.count;_<b;_++)i.setXYZ(_,0,0,0);const a=new K,r=new K,u=new K,f=new K,d=new K,p=new K,y=new K,v=new K;if(t)for(let _=0,b=t.count;_<b;_+=3){const E=t.getX(_+0),R=t.getX(_+1),T=t.getX(_+2);a.fromBufferAttribute(e,E),r.fromBufferAttribute(e,R),u.fromBufferAttribute(e,T),y.subVectors(u,r),v.subVectors(a,r),y.cross(v),f.fromBufferAttribute(i,E),d.fromBufferAttribute(i,R),p.fromBufferAttribute(i,T),f.add(y),d.add(y),p.add(y),i.setXYZ(E,f.x,f.y,f.z),i.setXYZ(R,d.x,d.y,d.z),i.setXYZ(T,p.x,p.y,p.z)}else for(let _=0,b=e.count;_<b;_+=3)a.fromBufferAttribute(e,_+0),r.fromBufferAttribute(e,_+1),u.fromBufferAttribute(e,_+2),y.subVectors(u,r),v.subVectors(a,r),y.cross(v),i.setXYZ(_+0,y.x,y.y,y.z),i.setXYZ(_+1,y.x,y.y,y.z),i.setXYZ(_+2,y.x,y.y,y.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)ia.fromBufferAttribute(t,e),ia.normalize(),t.setXYZ(e,ia.x,ia.y,ia.z)}toNonIndexed(){function t(f,d){const p=f.array,y=f.itemSize,v=f.normalized,_=new p.constructor(d.length*y);let b=0,E=0;for(let R=0,T=d.length;R<T;R++){f.isInterleavedBufferAttribute?b=d[R]*f.data.stride+f.offset:b=d[R]*y;for(let M=0;M<y;M++)_[E++]=p[b++]}return new On(_,y,v)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Qe,i=this.index.array,a=this.attributes;for(const f in a){const d=a[f],p=t(d,i);e.setAttribute(f,p)}const r=this.morphAttributes;for(const f in r){const d=[],p=r[f];for(let y=0,v=p.length;y<v;y++){const _=p[y],b=t(_,i);d.push(b)}e.morphAttributes[f]=d}e.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let f=0,d=u.length;f<d;f++){const p=u[f];e.addGroup(p.start,p.count,p.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(t[p]=d[p]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const d in i){const p=i[d];t.data.attributes[d]=p.toJSON(t.data)}const a={};let r=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],y=[];for(let v=0,_=p.length;v<_;v++){const b=p[v];y.push(b.toJSON(t.data))}y.length>0&&(a[d]=y,r=!0)}r&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(t.data.groups=JSON.parse(JSON.stringify(u)));const f=this.boundingSphere;return f!==null&&(t.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;i!==null&&this.setIndex(i.clone());const a=t.attributes;for(const p in a){const y=a[p];this.setAttribute(p,y.clone(e))}const r=t.morphAttributes;for(const p in r){const y=[],v=r[p];for(let _=0,b=v.length;_<b;_++)y.push(v[_].clone(e));this.morphAttributes[p]=y}this.morphTargetsRelative=t.morphTargetsRelative;const u=t.groups;for(let p=0,y=u.length;p<y;p++){const v=u[p];this.addGroup(v.start,v.count,v.materialIndex)}const f=t.boundingBox;f!==null&&(this.boundingBox=f.clone());const d=t.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ZE=new Le,Qc=new wd,l0=new Ba,KE=new K,u0=new K,c0=new K,f0=new K,iS=new K,h0=new K,QE=new K,d0=new K;class Bi extends Sn{constructor(t=new Qe,e=new $u){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,u=a.length;r<u;r++){const f=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=r}}}}getVertexPosition(t,e){const i=this.geometry,a=i.attributes.position,r=i.morphAttributes.position,u=i.morphTargetsRelative;e.fromBufferAttribute(a,t);const f=this.morphTargetInfluences;if(r&&f){h0.set(0,0,0);for(let d=0,p=r.length;d<p;d++){const y=f[d],v=r[d];y!==0&&(iS.fromBufferAttribute(v,t),u?h0.addScaledVector(iS,y):h0.addScaledVector(iS.sub(e),y))}e.add(h0)}return e}raycast(t,e){const i=this.geometry,a=this.material,r=this.matrixWorld;a!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),l0.copy(i.boundingSphere),l0.applyMatrix4(r),Qc.copy(t.ray).recast(t.near),!(l0.containsPoint(Qc.origin)===!1&&(Qc.intersectSphere(l0,KE)===null||Qc.origin.distanceToSquared(KE)>(t.far-t.near)**2))&&(ZE.copy(r).invert(),Qc.copy(t.ray).applyMatrix4(ZE),!(i.boundingBox!==null&&Qc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(t,e,Qc)))}_computeIntersections(t,e,i){let a;const r=this.geometry,u=this.material,f=r.index,d=r.attributes.position,p=r.attributes.uv,y=r.attributes.uv1,v=r.attributes.normal,_=r.groups,b=r.drawRange;if(f!==null)if(Array.isArray(u))for(let E=0,R=_.length;E<R;E++){const T=_[E],M=u[T.materialIndex],C=Math.max(T.start,b.start),D=Math.min(f.count,Math.min(T.start+T.count,b.start+b.count));for(let O=C,N=D;O<N;O+=3){const L=f.getX(O),H=f.getX(O+1),G=f.getX(O+2);a=p0(this,M,t,i,p,y,v,L,H,G),a&&(a.faceIndex=Math.floor(O/3),a.face.materialIndex=T.materialIndex,e.push(a))}}else{const E=Math.max(0,b.start),R=Math.min(f.count,b.start+b.count);for(let T=E,M=R;T<M;T+=3){const C=f.getX(T),D=f.getX(T+1),O=f.getX(T+2);a=p0(this,u,t,i,p,y,v,C,D,O),a&&(a.faceIndex=Math.floor(T/3),e.push(a))}}else if(d!==void 0)if(Array.isArray(u))for(let E=0,R=_.length;E<R;E++){const T=_[E],M=u[T.materialIndex],C=Math.max(T.start,b.start),D=Math.min(d.count,Math.min(T.start+T.count,b.start+b.count));for(let O=C,N=D;O<N;O+=3){const L=O,H=O+1,G=O+2;a=p0(this,M,t,i,p,y,v,L,H,G),a&&(a.faceIndex=Math.floor(O/3),a.face.materialIndex=T.materialIndex,e.push(a))}}else{const E=Math.max(0,b.start),R=Math.min(d.count,b.start+b.count);for(let T=E,M=R;T<M;T+=3){const C=T,D=T+1,O=T+2;a=p0(this,u,t,i,p,y,v,C,D,O),a&&(a.faceIndex=Math.floor(T/3),e.push(a))}}}}function TN(n,t,e,i,a,r,u,f){let d;if(t.side===as?d=i.intersectTriangle(u,r,a,!0,f):d=i.intersectTriangle(a,r,u,t.side===Bl,f),d===null)return null;d0.copy(f),d0.applyMatrix4(n.matrixWorld);const p=e.ray.origin.distanceTo(d0);return p<e.near||p>e.far?null:{distance:p,point:d0.clone(),object:n}}function p0(n,t,e,i,a,r,u,f,d,p){n.getVertexPosition(f,u0),n.getVertexPosition(d,c0),n.getVertexPosition(p,f0);const y=TN(n,t,e,i,u0,c0,f0,QE);if(y){const v=new K;Ts.getBarycoord(QE,u0,c0,f0,v),a&&(y.uv=Ts.getInterpolatedAttribute(a,f,d,p,v,new Gt)),r&&(y.uv1=Ts.getInterpolatedAttribute(r,f,d,p,v,new Gt)),u&&(y.normal=Ts.getInterpolatedAttribute(u,f,d,p,v,new K),y.normal.dot(i.direction)>0&&y.normal.multiplyScalar(-1));const _={a:f,b:d,c:p,normal:new K,materialIndex:0};Ts.getNormal(u0,c0,f0,_.normal),y.face=_,y.barycoord=v}return y}class Of extends Qe{constructor(t=1,e=1,i=1,a=1,r=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:a,heightSegments:r,depthSegments:u};const f=this;a=Math.floor(a),r=Math.floor(r),u=Math.floor(u);const d=[],p=[],y=[],v=[];let _=0,b=0;E("z","y","x",-1,-1,i,e,t,u,r,0),E("z","y","x",1,-1,i,e,-t,u,r,1),E("x","z","y",1,1,t,i,e,a,u,2),E("x","z","y",1,-1,t,i,-e,a,u,3),E("x","y","z",1,-1,t,e,i,a,r,4),E("x","y","z",-1,-1,t,e,-i,a,r,5),this.setIndex(d),this.setAttribute("position",new me(p,3)),this.setAttribute("normal",new me(y,3)),this.setAttribute("uv",new me(v,2));function E(R,T,M,C,D,O,N,L,H,G,B){const z=O/H,j=N/G,at=O/2,nt=N/2,Q=L/2,rt=H+1,I=G+1;let Z=0,W=0;const J=new K;for(let F=0;F<I;F++){const $=F*j-nt;for(let mt=0;mt<rt;mt++){const Tt=mt*z-at;J[R]=Tt*C,J[T]=$*D,J[M]=Q,p.push(J.x,J.y,J.z),J[R]=0,J[T]=0,J[M]=L>0?1:-1,y.push(J.x,J.y,J.z),v.push(mt/H),v.push(1-F/G),Z+=1}}for(let F=0;F<G;F++)for(let $=0;$<H;$++){const mt=_+$+rt*F,Tt=_+$+rt*(F+1),st=_+($+1)+rt*(F+1),Et=_+($+1)+rt*F;d.push(mt,Tt,Et),d.push(Tt,st,Et),W+=6}f.addGroup(b,W,B),b+=W,_+=Z}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Of(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function _d(n){const t={};for(const e in n){t[e]={};for(const i in n[e]){const a=n[e][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][i]=null):t[e][i]=a.clone():Array.isArray(a)?t[e][i]=a.slice():t[e][i]=a}}return t}function es(n){const t={};for(let e=0;e<n.length;e++){const i=_d(n[e]);for(const a in i)t[a]=i[a]}return t}function AN(n){const t=[];for(let e=0;e<n.length;e++)t.push(n[e].clone());return t}function bC(n){const t=n.getRenderTarget();return t===null?n.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:mn.workingColorSpace}const MC={clone:_d,merge:es};var RN=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,wN=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class io extends Ia{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=RN,this.fragmentShader=wN,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=_d(t.uniforms),this.uniformsGroups=AN(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const a in this.uniforms){const u=this.uniforms[a].value;u&&u.isTexture?e.uniforms[a]={type:"t",value:u.toJSON(t).uuid}:u&&u.isColor?e.uniforms[a]={type:"c",value:u.getHex()}:u&&u.isVector2?e.uniforms[a]={type:"v2",value:u.toArray()}:u&&u.isVector3?e.uniforms[a]={type:"v3",value:u.toArray()}:u&&u.isVector4?e.uniforms[a]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?e.uniforms[a]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?e.uniforms[a]={type:"m4",value:u.toArray()}:e.uniforms[a]={value:u}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const i={};for(const a in this.extensions)this.extensions[a]===!0&&(i[a]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}class y_ extends Sn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Le,this.projectionMatrix=new Le,this.projectionMatrixInverse=new Le,this.coordinateSystem=eo}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Hu=new K,JE=new Gt,$E=new Gt;class aa extends y_{constructor(t=50,e=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=yd*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(bf*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return yd*2*Math.atan(Math.tan(bf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){Hu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Hu.x,Hu.y).multiplyScalar(-t/Hu.z),Hu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Hu.x,Hu.y).multiplyScalar(-t/Hu.z)}getViewSize(t,e){return this.getViewBounds(t,JE,$E),e.subVectors($E,JE)}setViewOffset(t,e,i,a,r,u){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=a,this.view.width=r,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(bf*.5*this.fov)/this.zoom,i=2*e,a=this.aspect*i,r=-.5*a;const u=this.view;if(this.view!==null&&this.view.enabled){const d=u.fullWidth,p=u.fullHeight;r+=u.offsetX*a/d,e-=u.offsetY*i/p,a*=u.width/d,i*=u.height/p}const f=this.filmOffset;f!==0&&(r+=t*f/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+a,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const jh=-90,Yh=1;class EC extends Sn{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new aa(jh,Yh,t,e);a.layers=this.layers,this.add(a);const r=new aa(jh,Yh,t,e);r.layers=this.layers,this.add(r);const u=new aa(jh,Yh,t,e);u.layers=this.layers,this.add(u);const f=new aa(jh,Yh,t,e);f.layers=this.layers,this.add(f);const d=new aa(jh,Yh,t,e);d.layers=this.layers,this.add(d);const p=new aa(jh,Yh,t,e);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[i,a,r,u,f,d]=e;for(const p of e)this.remove(p);if(t===eo)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),f.up.set(0,1,0),f.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(t===Fm)i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),f.up.set(0,-1,0),f.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(const p of e)this.add(p),p.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:a}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[r,u,f,d,p,y]=this.children,v=t.getRenderTarget(),_=t.getActiveCubeFace(),b=t.getActiveMipmapLevel(),E=t.xr.enabled;t.xr.enabled=!1;const R=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,a),t.render(e,r),t.setRenderTarget(i,1,a),t.render(e,u),t.setRenderTarget(i,2,a),t.render(e,f),t.setRenderTarget(i,3,a),t.render(e,d),t.setRenderTarget(i,4,a),t.render(e,p),i.texture.generateMipmaps=R,t.setRenderTarget(i,5,a),t.render(e,y),t.setRenderTarget(v,_,b),t.xr.enabled=E,i.texture.needsPMREMUpdate=!0}}class cg extends _i{constructor(t=[],e=Il,i,a,r,u,f,d,p,y){super(t,e,i,a,r,u,f,d,p,y),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class TC extends Ko{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},a=[i,i,i,i,i,i];this.texture=new cg(a,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=e.generateMipmaps!==void 0?e.generateMipmaps:!1,this.texture.minFilter=e.minFilter!==void 0?e.minFilter:Wi}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Of(5,5,5),r=new io({name:"CubemapFromEquirect",uniforms:_d(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:as,blending:Nl});r.uniforms.tEquirect.value=e;const u=new Bi(a,r),f=e.minFilter;return e.minFilter===Xo&&(e.minFilter=Wi),new EC(1,10,this).update(t,u),e.minFilter=f,u.geometry.dispose(),u.material.dispose(),this}clear(t,e=!0,i=!0,a=!0){const r=t.getRenderTarget();for(let u=0;u<6;u++)t.setRenderTarget(this,u),t.clear(e,i,a);t.setRenderTarget(r)}}class sd extends Sn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const CN={type:"move"};class J0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new sd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new sd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new sd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,i){let a=null,r=null,u=null;const f=this._targetRay,d=this._grip,p=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(p&&t.hand){u=!0;for(const R of t.hand.values()){const T=e.getJointPose(R,i),M=this._getHandJoint(p,R);T!==null&&(M.matrix.fromArray(T.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=T.radius),M.visible=T!==null}const y=p.joints["index-finger-tip"],v=p.joints["thumb-tip"],_=y.position.distanceTo(v.position),b=.02,E=.005;p.inputState.pinching&&_>b+E?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!p.inputState.pinching&&_<=b-E&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else d!==null&&t.gripSpace&&(r=e.getPose(t.gripSpace,i),r!==null&&(d.matrix.fromArray(r.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,r.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(r.linearVelocity)):d.hasLinearVelocity=!1,r.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(r.angularVelocity)):d.hasAngularVelocity=!1));f!==null&&(a=e.getPose(t.targetRaySpace,i),a===null&&r!==null&&(a=r),a!==null&&(f.matrix.fromArray(a.transform.matrix),f.matrix.decompose(f.position,f.rotation,f.scale),f.matrixWorldNeedsUpdate=!0,a.linearVelocity?(f.hasLinearVelocity=!0,f.linearVelocity.copy(a.linearVelocity)):f.hasLinearVelocity=!1,a.angularVelocity?(f.hasAngularVelocity=!0,f.angularVelocity.copy(a.angularVelocity)):f.hasAngularVelocity=!1,this.dispatchEvent(CN)))}return f!==null&&(f.visible=a!==null),d!==null&&(d.visible=r!==null),p!==null&&(p.visible=u!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){const i=new sd;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}}class v_{constructor(t,e=25e-5){this.isFogExp2=!0,this.name="",this.color=new fe(t),this.density=e}clone(){return new v_(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class __{constructor(t,e=1,i=1e3){this.isFog=!0,this.name="",this.color=new fe(t),this.near=e,this.far=i}clone(){return new __(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class DM extends Sn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Qs,this.environmentIntensity=1,this.environmentRotation=new Qs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class x_{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Hm,this.updateRanges=[],this.version=0,this.uuid=Ws()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,i){t*=this.stride,i*=e.stride;for(let a=0,r=this.stride;a<r;a++)this.array[t+a]=e.array[i+a];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ws()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(e,this.stride);return i.setUsage(this.usage),i}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ws()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ts=new K;class Rf{constructor(t,e,i,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=i,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,i=this.data.count;e<i;e++)ts.fromBufferAttribute(this,e),ts.applyMatrix4(t),this.setXYZ(e,ts.x,ts.y,ts.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)ts.fromBufferAttribute(this,e),ts.applyNormalMatrix(t),this.setXYZ(e,ts.x,ts.y,ts.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)ts.fromBufferAttribute(this,e),ts.transformDirection(t),this.setXYZ(e,ts.x,ts.y,ts.z);return this}getComponent(t,e){let i=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(i=ns(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Ye(i,this.array)),this.data.array[t*this.data.stride+this.offset+e]=i,this}setX(t,e){return this.normalized&&(e=Ye(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=Ye(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=Ye(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=Ye(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=ns(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=ns(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=ns(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=ns(e,this.array)),e}setXY(t,e,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=Ye(e,this.array),i=Ye(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this}setXYZ(t,e,i,a){return t=t*this.data.stride+this.offset,this.normalized&&(e=Ye(e,this.array),i=Ye(i,this.array),a=Ye(a,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=a,this}setXYZW(t,e,i,a,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=Ye(e,this.array),i=Ye(i,this.array),a=Ye(a,this.array),r=Ye(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=i,this.data.array[t+2]=a,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[a+r])}return new On(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Rf(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[a+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class OM extends Ia{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new fe(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}let Wh;const nm=new K,Zh=new K,Kh=new K,Qh=new Gt,im=new Gt,AC=new Le,m0=new K,am=new K,g0=new K,tT=new Gt,aS=new Gt,eT=new Gt;class RC extends Sn{constructor(t=new OM){if(super(),this.isSprite=!0,this.type="Sprite",Wh===void 0){Wh=new Qe;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new x_(e,5);Wh.setIndex([0,1,2,0,2,3]),Wh.setAttribute("position",new Rf(i,3,0,!1)),Wh.setAttribute("uv",new Rf(i,2,3,!1))}this.geometry=Wh,this.material=t,this.center=new Gt(.5,.5)}raycast(t,e){t.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zh.setFromMatrixScale(this.matrixWorld),AC.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Kh.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zh.multiplyScalar(-Kh.z);const i=this.material.rotation;let a,r;i!==0&&(r=Math.cos(i),a=Math.sin(i));const u=this.center;y0(m0.set(-.5,-.5,0),Kh,u,Zh,a,r),y0(am.set(.5,-.5,0),Kh,u,Zh,a,r),y0(g0.set(.5,.5,0),Kh,u,Zh,a,r),tT.set(0,0),aS.set(1,0),eT.set(1,1);let f=t.ray.intersectTriangle(m0,am,g0,!1,nm);if(f===null&&(y0(am.set(-.5,.5,0),Kh,u,Zh,a,r),aS.set(0,1),f=t.ray.intersectTriangle(m0,g0,am,!1,nm),f===null))return;const d=t.ray.origin.distanceTo(nm);d<t.near||d>t.far||e.push({distance:d,point:nm.clone(),uv:Ts.getInterpolation(nm,m0,am,g0,tT,aS,eT,new Gt),face:null,object:this})}copy(t,e){return super.copy(t,e),t.center!==void 0&&this.center.copy(t.center),this.material=t.material,this}}function y0(n,t,e,i,a,r){Qh.subVectors(n,e).addScalar(.5).multiply(i),a!==void 0?(im.x=r*Qh.x-a*Qh.y,im.y=a*Qh.x+r*Qh.y):im.copy(Qh),n.copy(t),n.x+=im.x,n.y+=im.y,n.applyMatrix4(AC)}const v0=new K,nT=new K;class wC extends Sn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let i=0,a=e.length;i<a;i++){const r=e[i];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0,i=0){e=Math.abs(e);const a=this.levels;let r;for(r=0;r<a.length&&!(e<a[r].distance);r++);return a.splice(r,0,{distance:e,hysteresis:i,object:t}),this.add(t),this}removeLevel(t){const e=this.levels;for(let i=0;i<e.length;i++)if(e[i].distance===t){const a=e.splice(i,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let i,a;for(i=1,a=e.length;i<a;i++){let r=e[i].distance;if(e[i].object.visible&&(r-=r*e[i].hysteresis),t<r)break}return e[i-1].object}return null}raycast(t,e){if(this.levels.length>0){v0.setFromMatrixPosition(this.matrixWorld);const a=t.ray.origin.distanceTo(v0);this.getObjectForDistance(a).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){v0.setFromMatrixPosition(t.matrixWorld),nT.setFromMatrixPosition(this.matrixWorld);const i=v0.distanceTo(nT)/t.zoom;e[0].object.visible=!0;let a,r;for(a=1,r=e.length;a<r;a++){let u=e[a].distance;if(e[a].object.visible&&(u-=u*e[a].hysteresis),i>=u)e[a-1].object.visible=!1,e[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<r;a++)e[a].object.visible=!1}}toJSON(t){const e=super.toJSON(t);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const i=this.levels;for(let a=0,r=i.length;a<r;a++){const u=i[a];e.object.levels.push({object:u.object.uuid,distance:u.distance,hysteresis:u.hysteresis})}return e}}const iT=new K,aT=new xn,sT=new xn,DN=new K,rT=new Le,_0=new K,sS=new Ba,oT=new Le,rS=new wd;class CC extends Bi{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Eb,this.bindMatrix=new Le,this.bindMatrixInverse=new Le,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new ss),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,_0),this.boundingBox.expandByPoint(_0)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ba),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let i=0;i<e.count;i++)this.getVertexPosition(i,_0),this.boundingSphere.expandByPoint(_0)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const i=this.material,a=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),sS.copy(this.boundingSphere),sS.applyMatrix4(a),t.ray.intersectsSphere(sS)!==!1&&(oT.copy(a).invert(),rS.copy(t.ray).applyMatrix4(oT),!(this.boundingBox!==null&&rS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,e,rS)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new xn,e=this.geometry.attributes.skinWeight;for(let i=0,a=e.count;i<a;i++){t.fromBufferAttribute(e,i);const r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(i,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===Eb?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===aC?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const i=this.skeleton,a=this.geometry;aT.fromBufferAttribute(a.attributes.skinIndex,t),sT.fromBufferAttribute(a.attributes.skinWeight,t),iT.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const u=sT.getComponent(r);if(u!==0){const f=aT.getComponent(r);rT.multiplyMatrices(i.bones[f].matrixWorld,i.boneInverses[f]),e.addScaledVector(DN.copy(iT).applyMatrix4(rT),u)}}return e.applyMatrix4(this.bindMatrixInverse)}}class UM extends Sn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class jo extends _i{constructor(t=null,e=1,i=1,a,r,u,f,d,p=ya,y=ya,v,_){super(null,u,f,d,p,y,a,r,v,_),this.isDataTexture=!0,this.image={data:t,width:e,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const lT=new Le,ON=new Le;class S_{constructor(t=[],e=[]){this.uuid=Ws(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),e.length===0)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new Le)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const i=new Le;this.bones[t]&&i.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&i.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const i=this.bones[t];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const t=this.bones,e=this.boneInverses,i=this.boneMatrices,a=this.boneTexture;for(let r=0,u=t.length;r<u;r++){const f=t[r]?t[r].matrixWorld:ON;lT.multiplyMatrices(f,e[r]),lT.toArray(i,r*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new S_(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const i=new jo(e,t,t,Pa,As);return i.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=i,this}getBoneByName(t){for(let e=0,i=this.bones.length;e<i;e++){const a=this.bones[e];if(a.name===t)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let i=0,a=t.bones.length;i<a;i++){const r=t.bones[i];let u=e[r];u===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),u=new UM),this.bones.push(u),this.boneInverses.push(new Le().fromArray(t.boneInverses[i]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,i=this.boneInverses;for(let a=0,r=e.length;a<r;a++){const u=e[a];t.bones.push(u.uuid);const f=i[a];t.boneInverses.push(f.toArray())}return t}}class xd extends On{constructor(t,e,i,a=1){super(t,e,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Jh=new Le,uT=new Le,x0=[],cT=new ss,UN=new Le,sm=new Bi,rm=new Ba;class DC extends Bi{constructor(t,e,i){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new xd(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<i;a++)this.setMatrixAt(a,UN)}computeBoundingBox(){const t=this.geometry,e=this.count;this.boundingBox===null&&(this.boundingBox=new ss),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Jh),cT.copy(t.boundingBox).applyMatrix4(Jh),this.boundingBox.union(cT)}computeBoundingSphere(){const t=this.geometry,e=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ba),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<e;i++)this.getMatrixAt(i,Jh),rm.copy(t.boundingSphere).applyMatrix4(Jh),this.boundingSphere.union(rm)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,e){const i=e.morphTargetInfluences,a=this.morphTexture.source.data.data,r=i.length+1,u=t*r+1;for(let f=0;f<i.length;f++)i[f]=a[u+f]}raycast(t,e){const i=this.matrixWorld,a=this.count;if(sm.geometry=this.geometry,sm.material=this.material,sm.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),rm.copy(this.boundingSphere),rm.applyMatrix4(i),t.ray.intersectsSphere(rm)!==!1))for(let r=0;r<a;r++){this.getMatrixAt(r,Jh),uT.multiplyMatrices(i,Jh),sm.matrixWorld=uT,sm.raycast(t,x0);for(let u=0,f=x0.length;u<f;u++){const d=x0[u];d.instanceId=r,d.object=this,e.push(d)}x0.length=0}}setColorAt(t,e){this.instanceColor===null&&(this.instanceColor=new xd(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),e.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,e){const i=e.morphTargetInfluences,a=i.length+1;this.morphTexture===null&&(this.morphTexture=new jo(new Float32Array(a*this.count),a,this.count,f_,As));const r=this.morphTexture.source.data.data;let u=0;for(let p=0;p<i.length;p++)u+=i[p];const f=this.geometry.morphTargetsRelative?1:1-u,d=a*t;r[d]=f,r.set(i,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const oS=new K,NN=new K,LN=new Xe;class qu{constructor(t=new K(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,a){return this.normal.set(t,e,i),this.constant=a,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const a=oS.subVectors(i,e).cross(NN.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(a,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const i=t.delta(oS),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/a;return r<0||r>1?null:e.copy(t.start).addScaledVector(i,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||LN.getNormalMatrix(t),a=this.coplanarPoint(oS).applyMatrix4(t),r=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Jc=new Ba,S0=new K;class fg{constructor(t=new qu,e=new qu,i=new qu,a=new qu,r=new qu,u=new qu){this.planes=[t,e,i,a,r,u]}set(t,e,i,a,r,u){const f=this.planes;return f[0].copy(t),f[1].copy(e),f[2].copy(i),f[3].copy(a),f[4].copy(r),f[5].copy(u),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=eo){const i=this.planes,a=t.elements,r=a[0],u=a[1],f=a[2],d=a[3],p=a[4],y=a[5],v=a[6],_=a[7],b=a[8],E=a[9],R=a[10],T=a[11],M=a[12],C=a[13],D=a[14],O=a[15];if(i[0].setComponents(d-r,_-p,T-b,O-M).normalize(),i[1].setComponents(d+r,_+p,T+b,O+M).normalize(),i[2].setComponents(d+u,_+y,T+E,O+C).normalize(),i[3].setComponents(d-u,_-y,T-E,O-C).normalize(),i[4].setComponents(d-f,_-v,T-R,O-D).normalize(),e===eo)i[5].setComponents(d+f,_+v,T+R,O+D).normalize();else if(e===Fm)i[5].setComponents(f,v,R,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Jc.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),Jc.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Jc)}intersectsSprite(t){return Jc.center.set(0,0,0),Jc.radius=.7071067811865476,Jc.applyMatrix4(t.matrixWorld),this.intersectsSphere(Jc)}intersectsSphere(t){const e=this.planes,i=t.center,a=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(i)<a)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const a=e[i];if(S0.x=a.normal.x>0?t.max.x:t.min.x,S0.y=a.normal.y>0?t.max.y:t.min.y,S0.z=a.normal.z>0?t.max.z:t.min.z,a.distanceToPoint(S0)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function lS(n,t){return n-t}function PN(n,t){return n.z-t.z}function zN(n,t){return t.z-n.z}class BN{constructor(){this.index=0,this.pool=[],this.list=[]}push(t,e,i,a){const r=this.pool,u=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const f=r[this.index];u.push(f),this.index++,f.start=t,f.count=e,f.z=i,f.index=a}reset(){this.list.length=0,this.index=0}}const Ss=new Le,IN=new fe(1,1,1),uS=new fg,b0=new ss,$c=new Ba,om=new K,fT=new K,VN=new K,cS=new BN,Oa=new Bi,M0=[];function HN(n,t,e=0){const i=t.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==t.array.constructor){const a=n.count;for(let r=0;r<a;r++)for(let u=0;u<i;u++)t.setComponent(r+e,u,n.getComponent(r,u))}else t.array.set(n.array,e*i);t.needsUpdate=!0}function tf(n,t){if(n.constructor!==t.constructor){const e=Math.min(n.length,t.length);for(let i=0;i<e;i++)t[i]=n[i]}else{const e=Math.min(n.length,t.length);t.set(new n.constructor(n.buffer,0,e))}}class OC extends Bi{constructor(t,e,i=e*2,a){super(new Qe,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=t,this._maxVertexCount=e,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(t),this._multiDrawStarts=new Int32Array(t),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let t=Math.sqrt(this._maxInstanceCount*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const e=new Float32Array(t*t*4),i=new jo(e,t,t,Pa,As);this._matricesTexture=i}_initIndirectTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Uint32Array(t*t),i=new jo(e,t,t,lg,Vl);this._indirectTexture=i}_initColorsTexture(){let t=Math.sqrt(this._maxInstanceCount);t=Math.ceil(t);const e=new Float32Array(t*t*4).fill(1),i=new jo(e,t,t,Pa,As);i.colorSpace=mn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(t){const e=this.geometry,i=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in t.attributes){const u=t.getAttribute(r),{array:f,itemSize:d,normalized:p}=u,y=new f.constructor(i*d),v=new On(y,d,p);e.setAttribute(r,v)}if(t.getIndex()!==null){const r=i>65535?new Uint32Array(a):new Uint16Array(a);e.setIndex(new On(r,1))}this._geometryInitialized=!0}}_validateGeometry(t){const e=this.geometry;if(!!t.getIndex()!=!!e.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in e.attributes){if(!t.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const a=t.getAttribute(i),r=e.getAttribute(i);if(a.itemSize!==r.itemSize||a.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(t){const e=this._instanceInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${t}. Instance is either out of range or has been deleted.`)}validateGeometryId(t){const e=this._geometryInfo;if(t<0||t>=e.length||e[t].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${t}. Geometry is either out of range or has been deleted.`)}setCustomSort(t){return this.customSort=t,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ss);const t=this.boundingBox,e=this._instanceInfo;t.makeEmpty();for(let i=0,a=e.length;i<a;i++){if(e[i].active===!1)continue;const r=e[i].geometryIndex;this.getMatrixAt(i,Ss),this.getBoundingBoxAt(r,b0).applyMatrix4(Ss),t.union(b0)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ba);const t=this.boundingSphere,e=this._instanceInfo;t.makeEmpty();for(let i=0,a=e.length;i<a;i++){if(e[i].active===!1)continue;const r=e[i].geometryIndex;this.getMatrixAt(i,Ss),this.getBoundingSphereAt(r,$c).applyMatrix4(Ss),t.union($c)}}addInstance(t){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:t};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(lS),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=i):(a=this._instanceInfo.length,this._instanceInfo.push(i));const r=this._matricesTexture;Ss.identity().toArray(r.image.data,a*16),r.needsUpdate=!0;const u=this._colorsTexture;return u&&(IN.toArray(u.image.data,a*4),u.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(t,e=-1,i=-1){this._initializeGeometry(t),this._validateGeometry(t);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=e===-1?t.getAttribute("position").count:e;const u=t.getIndex();if(u!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=i===-1?u.count:i),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(lS),d=this._availableGeometryIds.shift(),r[d]=a):(d=this._geometryCount,this._geometryCount++,r.push(a)),this.setGeometryAt(d,t),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,d}setGeometryAt(t,e){if(t>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(e);const i=this.geometry,a=i.getIndex()!==null,r=i.getIndex(),u=e.getIndex(),f=this._geometryInfo[t];if(a&&u.count>f.reservedIndexCount||e.attributes.position.count>f.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=f.vertexStart,p=f.reservedVertexCount;f.vertexCount=e.getAttribute("position").count;for(const y in i.attributes){const v=e.getAttribute(y),_=i.getAttribute(y);HN(v,_,d);const b=v.itemSize;for(let E=v.count,R=p;E<R;E++){const T=d+E;for(let M=0;M<b;M++)_.setComponent(T,M,0)}_.needsUpdate=!0,_.addUpdateRange(d*b,p*b)}if(a){const y=f.indexStart,v=f.reservedIndexCount;f.indexCount=e.getIndex().count;for(let _=0;_<u.count;_++)r.setX(y+_,d+u.getX(_));for(let _=u.count,b=v;_<b;_++)r.setX(y+_,d);r.needsUpdate=!0,r.addUpdateRange(y,f.reservedIndexCount)}return f.start=a?f.indexStart:f.vertexStart,f.count=a?f.indexCount:f.vertexCount,f.boundingBox=null,e.boundingBox!==null&&(f.boundingBox=e.boundingBox.clone()),f.boundingSphere=null,e.boundingSphere!==null&&(f.boundingSphere=e.boundingSphere.clone()),this._visibilityChanged=!0,t}deleteGeometry(t){const e=this._geometryInfo;if(t>=e.length||e[t].active===!1)return this;const i=this._instanceInfo;for(let a=0,r=i.length;a<r;a++)i[a].active&&i[a].geometryIndex===t&&this.deleteInstance(a);return e[t].active=!1,this._availableGeometryIds.push(t),this._visibilityChanged=!0,this}deleteInstance(t){return this.validateInstanceId(t),this._instanceInfo[t].active=!1,this._availableInstanceIds.push(t),this._visibilityChanged=!0,this}optimize(){let t=0,e=0;const i=this._geometryInfo,a=i.map((u,f)=>f).sort((u,f)=>i[u].vertexStart-i[f].vertexStart),r=this.geometry;for(let u=0,f=i.length;u<f;u++){const d=a[u],p=i[d];if(p.active!==!1){if(r.index!==null){if(p.indexStart!==e){const{indexStart:y,vertexStart:v,reservedIndexCount:_}=p,b=r.index,E=b.array,R=t-v;for(let T=y;T<y+_;T++)E[T]=E[T]+R;b.array.copyWithin(e,y,y+_),b.addUpdateRange(e,_),p.indexStart=e}e+=p.reservedIndexCount}if(p.vertexStart!==t){const{vertexStart:y,reservedVertexCount:v}=p,_=r.attributes;for(const b in _){const E=_[b],{array:R,itemSize:T}=E;R.copyWithin(t*T,y*T,(y+v)*T),E.addUpdateRange(t*T,v*T)}p.vertexStart=t}t+=p.reservedVertexCount,p.start=r.index?p.indexStart:p.vertexStart,this._nextIndexStart=r.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(t,e){if(t>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[t];if(a.boundingBox===null){const r=new ss,u=i.index,f=i.attributes.position;for(let d=a.start,p=a.start+a.count;d<p;d++){let y=d;u&&(y=u.getX(y)),r.expandByPoint(om.fromBufferAttribute(f,y))}a.boundingBox=r}return e.copy(a.boundingBox),e}getBoundingSphereAt(t,e){if(t>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[t];if(a.boundingSphere===null){const r=new Ba;this.getBoundingBoxAt(t,b0),b0.getCenter(r.center);const u=i.index,f=i.attributes.position;let d=0;for(let p=a.start,y=a.start+a.count;p<y;p++){let v=p;u&&(v=u.getX(v)),om.fromBufferAttribute(f,v),d=Math.max(d,r.center.distanceToSquared(om))}r.radius=Math.sqrt(d),a.boundingSphere=r}return e.copy(a.boundingSphere),e}setMatrixAt(t,e){this.validateInstanceId(t);const i=this._matricesTexture,a=this._matricesTexture.image.data;return e.toArray(a,t*16),i.needsUpdate=!0,this}getMatrixAt(t,e){return this.validateInstanceId(t),e.fromArray(this._matricesTexture.image.data,t*16)}setColorAt(t,e){return this.validateInstanceId(t),this._colorsTexture===null&&this._initColorsTexture(),e.toArray(this._colorsTexture.image.data,t*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(t,e){return this.validateInstanceId(t),e.fromArray(this._colorsTexture.image.data,t*4)}setVisibleAt(t,e){return this.validateInstanceId(t),this._instanceInfo[t].visible===e?this:(this._instanceInfo[t].visible=e,this._visibilityChanged=!0,this)}getVisibleAt(t){return this.validateInstanceId(t),this._instanceInfo[t].visible}setGeometryIdAt(t,e){return this.validateInstanceId(t),this.validateGeometryId(e),this._instanceInfo[t].geometryIndex=e,this}getGeometryIdAt(t){return this.validateInstanceId(t),this._instanceInfo[t].geometryIndex}getGeometryRangeAt(t,e={}){this.validateGeometryId(t);const i=this._geometryInfo[t];return e.vertexStart=i.vertexStart,e.vertexCount=i.vertexCount,e.reservedVertexCount=i.reservedVertexCount,e.indexStart=i.indexStart,e.indexCount=i.indexCount,e.reservedIndexCount=i.reservedIndexCount,e.start=i.start,e.count=i.count,e}setInstanceCount(t){const e=this._availableInstanceIds,i=this._instanceInfo;for(e.sort(lS);e[e.length-1]===i.length;)i.pop(),e.pop();if(t<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${t} are being used. Cannot shrink instance count.`);const a=new Int32Array(t),r=new Int32Array(t);tf(this._multiDrawCounts,a),tf(this._multiDrawStarts,r),this._multiDrawCounts=a,this._multiDrawStarts=r,this._maxInstanceCount=t;const u=this._indirectTexture,f=this._matricesTexture,d=this._colorsTexture;u.dispose(),this._initIndirectTexture(),tf(u.image.data,this._indirectTexture.image.data),f.dispose(),this._initMatricesTexture(),tf(f.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),tf(d.image.data,this._colorsTexture.image.data))}setGeometrySize(t,e){const i=[...this._geometryInfo].filter(f=>f.active);if(Math.max(...i.map(f=>f.vertexStart+f.reservedVertexCount))>t)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${e}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(d=>d.indexStart+d.reservedIndexCount))>e)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${e}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=t,this._maxIndexCount=e,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Qe,this._initializeGeometry(r));const u=this.geometry;r.index&&tf(r.index.array,u.index.array);for(const f in r.attributes)tf(r.attributes[f].array,u.attributes[f].array)}raycast(t,e){const i=this._instanceInfo,a=this._geometryInfo,r=this.matrixWorld,u=this.geometry;Oa.material=this.material,Oa.geometry.index=u.index,Oa.geometry.attributes=u.attributes,Oa.geometry.boundingBox===null&&(Oa.geometry.boundingBox=new ss),Oa.geometry.boundingSphere===null&&(Oa.geometry.boundingSphere=new Ba);for(let f=0,d=i.length;f<d;f++){if(!i[f].visible||!i[f].active)continue;const p=i[f].geometryIndex,y=a[p];Oa.geometry.setDrawRange(y.start,y.count),this.getMatrixAt(f,Oa.matrixWorld).premultiply(r),this.getBoundingBoxAt(p,Oa.geometry.boundingBox),this.getBoundingSphereAt(p,Oa.geometry.boundingSphere),Oa.raycast(t,M0);for(let v=0,_=M0.length;v<_;v++){const b=M0[v];b.object=this,b.batchId=f,e.push(b)}M0.length=0}Oa.material=null,Oa.geometry.index=null,Oa.geometry.attributes={},Oa.geometry.setDrawRange(0,1/0)}copy(t){return super.copy(t),this.geometry=t.geometry.clone(),this.perObjectFrustumCulled=t.perObjectFrustumCulled,this.sortObjects=t.sortObjects,this.boundingBox=t.boundingBox!==null?t.boundingBox.clone():null,this.boundingSphere=t.boundingSphere!==null?t.boundingSphere.clone():null,this._geometryInfo=t._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox!==null?e.boundingBox.clone():null,boundingSphere:e.boundingSphere!==null?e.boundingSphere.clone():null})),this._instanceInfo=t._instanceInfo.map(e=>({...e})),this._maxInstanceCount=t._maxInstanceCount,this._maxVertexCount=t._maxVertexCount,this._maxIndexCount=t._maxIndexCount,this._geometryInitialized=t._geometryInitialized,this._geometryCount=t._geometryCount,this._multiDrawCounts=t._multiDrawCounts.slice(),this._multiDrawStarts=t._multiDrawStarts.slice(),this._matricesTexture=t._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=t._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(t,e,i,a,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const u=a.getIndex(),f=u===null?1:u.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,y=this._multiDrawCounts,v=this._geometryInfo,_=this.perObjectFrustumCulled,b=this._indirectTexture,E=b.image.data;_&&(Ss.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),uS.setFromProjectionMatrix(Ss,t.coordinateSystem));let R=0;if(this.sortObjects){Ss.copy(this.matrixWorld).invert(),om.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Ss),fT.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Ss);for(let C=0,D=d.length;C<D;C++)if(d[C].visible&&d[C].active){const O=d[C].geometryIndex;this.getMatrixAt(C,Ss),this.getBoundingSphereAt(O,$c).applyMatrix4(Ss);let N=!1;if(_&&(N=!uS.intersectsSphere($c)),!N){const L=v[O],H=VN.subVectors($c.center,om).dot(fT);cS.push(L.start,L.count,H,C)}}const T=cS.list,M=this.customSort;M===null?T.sort(r.transparent?zN:PN):M.call(this,T,i);for(let C=0,D=T.length;C<D;C++){const O=T[C];p[R]=O.start*f,y[R]=O.count,E[R]=O.index,R++}cS.reset()}else for(let T=0,M=d.length;T<M;T++)if(d[T].visible&&d[T].active){const C=d[T].geometryIndex;let D=!1;if(_&&(this.getMatrixAt(T,Ss),this.getBoundingSphereAt(C,$c).applyMatrix4(Ss),D=!uS.intersectsSphere($c)),!D){const O=v[C];p[R]=O.start*f,y[R]=O.count,E[R]=T,R++}}b.needsUpdate=!0,this._multiDrawCount=R,this._visibilityChanged=!1}onBeforeShadow(t,e,i,a,r,u){this.onBeforeRender(t,null,a,r,u)}}class rs extends Ia{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new fe(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const Xv=new K,kv=new K,hT=new Le,lm=new wd,E0=new Ba,fS=new K,dT=new K;class Zu extends Sn{constructor(t=new Qe,e=new rs){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[0];for(let a=1,r=e.count;a<r;a++)Xv.fromBufferAttribute(e,a-1),kv.fromBufferAttribute(e,a),i[a]=i[a-1],i[a]+=Xv.distanceTo(kv);t.setAttribute("lineDistance",new me(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,a=this.matrixWorld,r=t.params.Line.threshold,u=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),E0.copy(i.boundingSphere),E0.applyMatrix4(a),E0.radius+=r,t.ray.intersectsSphere(E0)===!1)return;hT.copy(a).invert(),lm.copy(t.ray).applyMatrix4(hT);const f=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=f*f,p=this.isLineSegments?2:1,y=i.index,_=i.attributes.position;if(y!==null){const b=Math.max(0,u.start),E=Math.min(y.count,u.start+u.count);for(let R=b,T=E-1;R<T;R+=p){const M=y.getX(R),C=y.getX(R+1),D=T0(this,t,lm,d,M,C,R);D&&e.push(D)}if(this.isLineLoop){const R=y.getX(E-1),T=y.getX(b),M=T0(this,t,lm,d,R,T,E-1);M&&e.push(M)}}else{const b=Math.max(0,u.start),E=Math.min(_.count,u.start+u.count);for(let R=b,T=E-1;R<T;R+=p){const M=T0(this,t,lm,d,R,R+1,R);M&&e.push(M)}if(this.isLineLoop){const R=T0(this,t,lm,d,E-1,b,E-1);R&&e.push(R)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,u=a.length;r<u;r++){const f=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=r}}}}}function T0(n,t,e,i,a,r,u){const f=n.geometry.attributes.position;if(Xv.fromBufferAttribute(f,a),kv.fromBufferAttribute(f,r),e.distanceSqToSegment(Xv,kv,fS,dT)>i)return;fS.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(fS);if(!(p<t.near||p>t.far))return{distance:p,point:dT.clone().applyMatrix4(n.matrixWorld),index:u,face:null,faceIndex:null,barycoord:null,object:n}}const pT=new K,mT=new K;class $o extends Zu{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const e=t.attributes.position,i=[];for(let a=0,r=e.count;a<r;a+=2)pT.fromBufferAttribute(e,a),mT.fromBufferAttribute(e,a+1),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+pT.distanceTo(mT);t.setAttribute("lineDistance",new me(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class UC extends Zu{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class NM extends Ia{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new fe(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const gT=new Le,Rb=new wd,A0=new Ba,R0=new K;class NC extends Sn{constructor(t=new Qe,e=new NM){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const i=this.geometry,a=this.matrixWorld,r=t.params.Points.threshold,u=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),A0.copy(i.boundingSphere),A0.applyMatrix4(a),A0.radius+=r,t.ray.intersectsSphere(A0)===!1)return;gT.copy(a).invert(),Rb.copy(t.ray).applyMatrix4(gT);const f=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=f*f,p=i.index,v=i.attributes.position;if(p!==null){const _=Math.max(0,u.start),b=Math.min(p.count,u.start+u.count);for(let E=_,R=b;E<R;E++){const T=p.getX(E);R0.fromBufferAttribute(v,T),yT(R0,T,d,a,t,e,this)}}else{const _=Math.max(0,u.start),b=Math.min(v.count,u.start+u.count);for(let E=_,R=b;E<R;E++)R0.fromBufferAttribute(v,E),yT(R0,E,d,a,t,e,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,i=Object.keys(e);if(i.length>0){const a=e[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,u=a.length;r<u;r++){const f=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[f]=r}}}}}function yT(n,t,e,i,a,r,u){const f=Rb.distanceSqToPoint(n);if(f<e){const d=new K;Rb.closestPointToPoint(n,d),d.applyMatrix4(i);const p=a.ray.origin.distanceTo(d);if(p<a.near||p>a.far)return;r.push({distance:p,distanceToRay:Math.sqrt(f),point:d,index:t,face:null,faceIndex:null,barycoord:null,object:u})}}class LC extends _i{constructor(t,e,i,a,r=Wi,u=Wi,f,d,p){super(t,e,i,a,r,u,f,d,p),this.isVideoTexture=!0,this.generateMipmaps=!1;const y=this;function v(){y.needsUpdate=!0,t.requestVideoFrameCallback(v)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(v)}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;"requestVideoFrameCallback"in t===!1&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FN extends LC{constructor(t,e,i,a,r,u,f,d){super({},t,e,i,a,r,u,f,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(t){this.image=t,this.needsUpdate=!0}}class GN extends _i{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=ya,this.minFilter=ya,this.generateMipmaps=!1,this.needsUpdate=!0}}class b_ extends _i{constructor(t,e,i,a,r,u,f,d,p,y,v,_){super(null,u,f,d,p,y,a,r,v,_),this.isCompressedTexture=!0,this.image={width:e,height:i},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class qN extends b_{constructor(t,e,i,a,r,u){super(t,e,i,r,u),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=br,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class XN extends b_{constructor(t,e,i){super(void 0,t[0].width,t[0].height,e,i,Il),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=t}}class kN extends _i{constructor(t,e,i,a,r,u,f,d,p){super(t,e,i,a,r,u,f,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class LM extends _i{constructor(t,e,i=Vl,a,r,u,f=ya,d=ya,p,y=md){if(y!==md&&y!==gd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super(null,a,r,u,f,d,y,i,p),this.isDepthTexture=!0,this.image={width:t,height:e},this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new ju(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}class ao{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(t,e){const i=this.getUtoTmapping(t);return this.getPoint(i,e)}getPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return e}getSpacedPoints(t=5){const e=[];for(let i=0;i<=t;i++)e.push(this.getPointAt(i/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let i,a=this.getPoint(0),r=0;e.push(0);for(let u=1;u<=t;u++)i=this.getPoint(u/t),r+=i.distanceTo(a),e.push(r),a=i;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e=null){const i=this.getLengths();let a=0;const r=i.length;let u;e?u=e:u=t*i[r-1];let f=0,d=r-1,p;for(;f<=d;)if(a=Math.floor(f+(d-f)/2),p=i[a]-u,p<0)f=a+1;else if(p>0)d=a-1;else{d=a;break}if(a=d,i[a]===u)return a/(r-1);const y=i[a],_=i[a+1]-y,b=(u-y)/_;return(a+b)/(r-1)}getTangent(t,e){let a=t-1e-4,r=t+1e-4;a<0&&(a=0),r>1&&(r=1);const u=this.getPoint(a),f=this.getPoint(r),d=e||(u.isVector2?new Gt:new K);return d.copy(f).sub(u).normalize(),d}getTangentAt(t,e){const i=this.getUtoTmapping(t);return this.getTangent(i,e)}computeFrenetFrames(t,e=!1){const i=new K,a=[],r=[],u=[],f=new K,d=new Le;for(let b=0;b<=t;b++){const E=b/t;a[b]=this.getTangentAt(E,new K)}r[0]=new K,u[0]=new K;let p=Number.MAX_VALUE;const y=Math.abs(a[0].x),v=Math.abs(a[0].y),_=Math.abs(a[0].z);y<=p&&(p=y,i.set(1,0,0)),v<=p&&(p=v,i.set(0,1,0)),_<=p&&i.set(0,0,1),f.crossVectors(a[0],i).normalize(),r[0].crossVectors(a[0],f),u[0].crossVectors(a[0],r[0]);for(let b=1;b<=t;b++){if(r[b]=r[b-1].clone(),u[b]=u[b-1].clone(),f.crossVectors(a[b-1],a[b]),f.length()>Number.EPSILON){f.normalize();const E=Math.acos(Fe(a[b-1].dot(a[b]),-1,1));r[b].applyMatrix4(d.makeRotationAxis(f,E))}u[b].crossVectors(a[b],r[b])}if(e===!0){let b=Math.acos(Fe(r[0].dot(r[t]),-1,1));b/=t,a[0].dot(f.crossVectors(r[0],r[t]))>0&&(b=-b);for(let E=1;E<=t;E++)r[E].applyMatrix4(d.makeRotationAxis(a[E],b*E)),u[E].crossVectors(a[E],r[E])}return{tangents:a,normals:r,binormals:u}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class M_ extends ao{constructor(t=0,e=0,i=1,a=1,r=0,u=Math.PI*2,f=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=i,this.yRadius=a,this.aStartAngle=r,this.aEndAngle=u,this.aClockwise=f,this.aRotation=d}getPoint(t,e=new Gt){const i=e,a=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const u=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=a;for(;r>a;)r-=a;r<Number.EPSILON&&(u?r=0:r=a),this.aClockwise===!0&&!u&&(r===a?r=-a:r=r-a);const f=this.aStartAngle+t*r;let d=this.aX+this.xRadius*Math.cos(f),p=this.aY+this.yRadius*Math.sin(f);if(this.aRotation!==0){const y=Math.cos(this.aRotation),v=Math.sin(this.aRotation),_=d-this.aX,b=p-this.aY;d=_*y-b*v+this.aX,p=_*v+b*y+this.aY}return i.set(d,p)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}class PC extends M_{constructor(t,e,i,a,r,u){super(t,e,i,i,a,r,u),this.isArcCurve=!0,this.type="ArcCurve"}}function PM(){let n=0,t=0,e=0,i=0;function a(r,u,f,d){n=r,t=f,e=-3*r+3*u-2*f-d,i=2*r-2*u+f+d}return{initCatmullRom:function(r,u,f,d,p){a(u,f,p*(f-r),p*(d-u))},initNonuniformCatmullRom:function(r,u,f,d,p,y,v){let _=(u-r)/p-(f-r)/(p+y)+(f-u)/y,b=(f-u)/y-(d-u)/(y+v)+(d-f)/v;_*=y,b*=y,a(u,f,_,b)},calc:function(r){const u=r*r,f=u*r;return n+t*r+e*u+i*f}}}const w0=new K,hS=new PM,dS=new PM,pS=new PM;class zC extends ao{constructor(t=[],e=!1,i="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=i,this.tension=a}getPoint(t,e=new K){const i=e,a=this.points,r=a.length,u=(r-(this.closed?0:1))*t;let f=Math.floor(u),d=u-f;this.closed?f+=f>0?0:(Math.floor(Math.abs(f)/r)+1)*r:d===0&&f===r-1&&(f=r-2,d=1);let p,y;this.closed||f>0?p=a[(f-1)%r]:(w0.subVectors(a[0],a[1]).add(a[0]),p=w0);const v=a[f%r],_=a[(f+1)%r];if(this.closed||f+2<r?y=a[(f+2)%r]:(w0.subVectors(a[r-1],a[r-2]).add(a[r-1]),y=w0),this.curveType==="centripetal"||this.curveType==="chordal"){const b=this.curveType==="chordal"?.5:.25;let E=Math.pow(p.distanceToSquared(v),b),R=Math.pow(v.distanceToSquared(_),b),T=Math.pow(_.distanceToSquared(y),b);R<1e-4&&(R=1),E<1e-4&&(E=R),T<1e-4&&(T=R),hS.initNonuniformCatmullRom(p.x,v.x,_.x,y.x,E,R,T),dS.initNonuniformCatmullRom(p.y,v.y,_.y,y.y,E,R,T),pS.initNonuniformCatmullRom(p.z,v.z,_.z,y.z,E,R,T)}else this.curveType==="catmullrom"&&(hS.initCatmullRom(p.x,v.x,_.x,y.x,this.tension),dS.initCatmullRom(p.y,v.y,_.y,y.y,this.tension),pS.initCatmullRom(p.z,v.z,_.z,y.z,this.tension));return i.set(hS.calc(d),dS.calc(d),pS.calc(d)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(a.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const a=this.points[e];t.points.push(a.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(new K().fromArray(a))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function vT(n,t,e,i,a){const r=(i-t)*.5,u=(a-e)*.5,f=n*n,d=n*f;return(2*e-2*i+r+u)*d+(-3*e+3*i-2*r-u)*f+r*n+e}function jN(n,t){const e=1-n;return e*e*t}function YN(n,t){return 2*(1-n)*n*t}function WN(n,t){return n*n*t}function Am(n,t,e,i){return jN(n,t)+YN(n,e)+WN(n,i)}function ZN(n,t){const e=1-n;return e*e*e*t}function KN(n,t){const e=1-n;return 3*e*e*n*t}function QN(n,t){return 3*(1-n)*n*n*t}function JN(n,t){return n*n*n*t}function Rm(n,t,e,i,a){return ZN(n,t)+KN(n,e)+QN(n,i)+JN(n,a)}class zM extends ao{constructor(t=new Gt,e=new Gt,i=new Gt,a=new Gt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=i,this.v3=a}getPoint(t,e=new Gt){const i=e,a=this.v0,r=this.v1,u=this.v2,f=this.v3;return i.set(Rm(t,a.x,r.x,u.x,f.x),Rm(t,a.y,r.y,u.y,f.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class BC extends ao{constructor(t=new K,e=new K,i=new K,a=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=i,this.v3=a}getPoint(t,e=new K){const i=e,a=this.v0,r=this.v1,u=this.v2,f=this.v3;return i.set(Rm(t,a.x,r.x,u.x,f.x),Rm(t,a.y,r.y,u.y,f.y),Rm(t,a.z,r.z,u.z,f.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class BM extends ao{constructor(t=new Gt,e=new Gt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new Gt){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new Gt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class IC extends ao{constructor(t=new K,e=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new K){const i=e;return t===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new K){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class IM extends ao{constructor(t=new Gt,e=new Gt,i=new Gt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new Gt){const i=e,a=this.v0,r=this.v1,u=this.v2;return i.set(Am(t,a.x,r.x,u.x),Am(t,a.y,r.y,u.y)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class VM extends ao{constructor(t=new K,e=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=i}getPoint(t,e=new K){const i=e,a=this.v0,r=this.v1,u=this.v2;return i.set(Am(t,a.x,r.x,u.x),Am(t,a.y,r.y,u.y),Am(t,a.z,r.z,u.z)),i}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class HM extends ao{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new Gt){const i=e,a=this.points,r=(a.length-1)*t,u=Math.floor(r),f=r-u,d=a[u===0?u:u-1],p=a[u],y=a[u>a.length-2?a.length-1:u+1],v=a[u>a.length-3?a.length-1:u+2];return i.set(vT(f,d.x,p.x,y.x,v.x),vT(f,d.y,p.y,y.y,v.y)),i}copy(t){super.copy(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,i=this.points.length;e<i;e++){const a=this.points[e];t.points.push(a.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,i=t.points.length;e<i;e++){const a=t.points[e];this.points.push(new Gt().fromArray(a))}return this}}var jv=Object.freeze({__proto__:null,ArcCurve:PC,CatmullRomCurve3:zC,CubicBezierCurve:zM,CubicBezierCurve3:BC,EllipseCurve:M_,LineCurve:BM,LineCurve3:IC,QuadraticBezierCurve:IM,QuadraticBezierCurve3:VM,SplineCurve:HM});class VC extends ao{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!t.equals(e)){const i=t.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new jv[i](e,t))}return this}getPoint(t,e){const i=t*this.getLength(),a=this.getCurveLengths();let r=0;for(;r<a.length;){if(a[r]>=i){const u=a[r]-i,f=this.curves[r],d=f.getLength(),p=d===0?0:1-u/d;return f.getPointAt(p,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let i=0,a=this.curves.length;i<a;i++)e+=this.curves[i].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let i=0;i<=t;i++)e.push(this.getPoint(i/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let i;for(let a=0,r=this.curves;a<r.length;a++){const u=r[a],f=u.isEllipseCurve?t*2:u.isLineCurve||u.isLineCurve3?1:u.isSplineCurve?t*u.points.length:t,d=u.getPoints(f);for(let p=0;p<d.length;p++){const y=d[p];i&&i.equals(y)||(e.push(y),i=y)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const a=t.curves[e];this.curves.push(a.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,i=this.curves.length;e<i;e++){const a=this.curves[e];t.curves.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,i=t.curves.length;e<i;e++){const a=t.curves[e];this.curves.push(new jv[a.type]().fromJSON(a))}return this}}class qm extends VC{constructor(t){super(),this.type="Path",this.currentPoint=new Gt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,i=t.length;e<i;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const i=new BM(this.currentPoint.clone(),new Gt(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,i,a){const r=new IM(this.currentPoint.clone(),new Gt(t,e),new Gt(i,a));return this.curves.push(r),this.currentPoint.set(i,a),this}bezierCurveTo(t,e,i,a,r,u){const f=new zM(this.currentPoint.clone(),new Gt(t,e),new Gt(i,a),new Gt(r,u));return this.curves.push(f),this.currentPoint.set(r,u),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),i=new HM(e);return this.curves.push(i),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,i,a,r,u){const f=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(t+f,e+d,i,a,r,u),this}absarc(t,e,i,a,r,u){return this.absellipse(t,e,i,i,a,r,u),this}ellipse(t,e,i,a,r,u,f,d){const p=this.currentPoint.x,y=this.currentPoint.y;return this.absellipse(t+p,e+y,i,a,r,u,f,d),this}absellipse(t,e,i,a,r,u,f,d){const p=new M_(t,e,i,a,r,u,f,d);if(this.curves.length>0){const v=p.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(p);const y=p.getPoint(1);return this.currentPoint.copy(y),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class hg extends Qe{constructor(t=[new Gt(0,-.5),new Gt(.5,0),new Gt(0,.5)],e=12,i=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:a},e=Math.floor(e),a=Fe(a,0,Math.PI*2);const r=[],u=[],f=[],d=[],p=[],y=1/e,v=new K,_=new Gt,b=new K,E=new K,R=new K;let T=0,M=0;for(let C=0;C<=t.length-1;C++)switch(C){case 0:T=t[C+1].x-t[C].x,M=t[C+1].y-t[C].y,b.x=M*1,b.y=-T,b.z=M*0,R.copy(b),b.normalize(),d.push(b.x,b.y,b.z);break;case t.length-1:d.push(R.x,R.y,R.z);break;default:T=t[C+1].x-t[C].x,M=t[C+1].y-t[C].y,b.x=M*1,b.y=-T,b.z=M*0,E.copy(b),b.x+=R.x,b.y+=R.y,b.z+=R.z,b.normalize(),d.push(b.x,b.y,b.z),R.copy(E)}for(let C=0;C<=e;C++){const D=i+C*y*a,O=Math.sin(D),N=Math.cos(D);for(let L=0;L<=t.length-1;L++){v.x=t[L].x*O,v.y=t[L].y,v.z=t[L].x*N,u.push(v.x,v.y,v.z),_.x=C/e,_.y=L/(t.length-1),f.push(_.x,_.y);const H=d[3*L+0]*O,G=d[3*L+1],B=d[3*L+0]*N;p.push(H,G,B)}}for(let C=0;C<e;C++)for(let D=0;D<t.length-1;D++){const O=D+C*t.length,N=O,L=O+t.length,H=O+t.length+1,G=O+1;r.push(N,L,G),r.push(H,G,L)}this.setIndex(r),this.setAttribute("position",new me(u,3)),this.setAttribute("uv",new me(f,2)),this.setAttribute("normal",new me(p,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new hg(t.points,t.segments,t.phiStart,t.phiLength)}}class E_ extends hg{constructor(t=1,e=1,i=4,a=8){const r=new qm;r.absarc(0,-e/2,t,Math.PI*1.5,0),r.absarc(0,e/2,t,0,Math.PI*.5),super(r.getPoints(i),a),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:i,radialSegments:a}}static fromJSON(t){return new E_(t.radius,t.length,t.capSegments,t.radialSegments)}}class T_ extends Qe{constructor(t=1,e=32,i=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:a},e=Math.max(3,e);const r=[],u=[],f=[],d=[],p=new K,y=new Gt;u.push(0,0,0),f.push(0,0,1),d.push(.5,.5);for(let v=0,_=3;v<=e;v++,_+=3){const b=i+v/e*a;p.x=t*Math.cos(b),p.y=t*Math.sin(b),u.push(p.x,p.y,p.z),f.push(0,0,1),y.x=(u[_]/t+1)/2,y.y=(u[_+1]/t+1)/2,d.push(y.x,y.y)}for(let v=1;v<=e;v++)r.push(v,v+1,0);this.setIndex(r),this.setAttribute("position",new me(u,3)),this.setAttribute("normal",new me(f,3)),this.setAttribute("uv",new me(d,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new T_(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class Cd extends Qe{constructor(t=1,e=1,i=1,a=32,r=1,u=!1,f=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:a,heightSegments:r,openEnded:u,thetaStart:f,thetaLength:d};const p=this;a=Math.floor(a),r=Math.floor(r);const y=[],v=[],_=[],b=[];let E=0;const R=[],T=i/2;let M=0;C(),u===!1&&(t>0&&D(!0),e>0&&D(!1)),this.setIndex(y),this.setAttribute("position",new me(v,3)),this.setAttribute("normal",new me(_,3)),this.setAttribute("uv",new me(b,2));function C(){const O=new K,N=new K;let L=0;const H=(e-t)/i;for(let G=0;G<=r;G++){const B=[],z=G/r,j=z*(e-t)+t;for(let at=0;at<=a;at++){const nt=at/a,Q=nt*d+f,rt=Math.sin(Q),I=Math.cos(Q);N.x=j*rt,N.y=-z*i+T,N.z=j*I,v.push(N.x,N.y,N.z),O.set(rt,H,I).normalize(),_.push(O.x,O.y,O.z),b.push(nt,1-z),B.push(E++)}R.push(B)}for(let G=0;G<a;G++)for(let B=0;B<r;B++){const z=R[B][G],j=R[B+1][G],at=R[B+1][G+1],nt=R[B][G+1];(t>0||B!==0)&&(y.push(z,j,nt),L+=3),(e>0||B!==r-1)&&(y.push(j,at,nt),L+=3)}p.addGroup(M,L,0),M+=L}function D(O){const N=E,L=new Gt,H=new K;let G=0;const B=O===!0?t:e,z=O===!0?1:-1;for(let at=1;at<=a;at++)v.push(0,T*z,0),_.push(0,z,0),b.push(.5,.5),E++;const j=E;for(let at=0;at<=a;at++){const Q=at/a*d+f,rt=Math.cos(Q),I=Math.sin(Q);H.x=B*I,H.y=T*z,H.z=B*rt,v.push(H.x,H.y,H.z),_.push(0,z,0),L.x=rt*.5+.5,L.y=I*.5*z+.5,b.push(L.x,L.y),E++}for(let at=0;at<a;at++){const nt=N+at,Q=j+at;O===!0?y.push(Q,Q+1,nt):y.push(Q+1,Q,nt),G+=3}p.addGroup(M,G,O===!0?1:2),M+=G}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Cd(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class A_ extends Cd{constructor(t=1,e=1,i=32,a=1,r=!1,u=0,f=Math.PI*2){super(0,t,e,i,a,r,u,f),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:i,heightSegments:a,openEnded:r,thetaStart:u,thetaLength:f}}static fromJSON(t){return new A_(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class tc extends Qe{constructor(t=[],e=[],i=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:a};const r=[],u=[];f(a),p(i),y(),this.setAttribute("position",new me(r,3)),this.setAttribute("normal",new me(r.slice(),3)),this.setAttribute("uv",new me(u,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function f(C){const D=new K,O=new K,N=new K;for(let L=0;L<e.length;L+=3)b(e[L+0],D),b(e[L+1],O),b(e[L+2],N),d(D,O,N,C)}function d(C,D,O,N){const L=N+1,H=[];for(let G=0;G<=L;G++){H[G]=[];const B=C.clone().lerp(O,G/L),z=D.clone().lerp(O,G/L),j=L-G;for(let at=0;at<=j;at++)at===0&&G===L?H[G][at]=B:H[G][at]=B.clone().lerp(z,at/j)}for(let G=0;G<L;G++)for(let B=0;B<2*(L-G)-1;B++){const z=Math.floor(B/2);B%2===0?(_(H[G][z+1]),_(H[G+1][z]),_(H[G][z])):(_(H[G][z+1]),_(H[G+1][z+1]),_(H[G+1][z]))}}function p(C){const D=new K;for(let O=0;O<r.length;O+=3)D.x=r[O+0],D.y=r[O+1],D.z=r[O+2],D.normalize().multiplyScalar(C),r[O+0]=D.x,r[O+1]=D.y,r[O+2]=D.z}function y(){const C=new K;for(let D=0;D<r.length;D+=3){C.x=r[D+0],C.y=r[D+1],C.z=r[D+2];const O=T(C)/2/Math.PI+.5,N=M(C)/Math.PI+.5;u.push(O,1-N)}E(),v()}function v(){for(let C=0;C<u.length;C+=6){const D=u[C+0],O=u[C+2],N=u[C+4],L=Math.max(D,O,N),H=Math.min(D,O,N);L>.9&&H<.1&&(D<.2&&(u[C+0]+=1),O<.2&&(u[C+2]+=1),N<.2&&(u[C+4]+=1))}}function _(C){r.push(C.x,C.y,C.z)}function b(C,D){const O=C*3;D.x=t[O+0],D.y=t[O+1],D.z=t[O+2]}function E(){const C=new K,D=new K,O=new K,N=new K,L=new Gt,H=new Gt,G=new Gt;for(let B=0,z=0;B<r.length;B+=9,z+=6){C.set(r[B+0],r[B+1],r[B+2]),D.set(r[B+3],r[B+4],r[B+5]),O.set(r[B+6],r[B+7],r[B+8]),L.set(u[z+0],u[z+1]),H.set(u[z+2],u[z+3]),G.set(u[z+4],u[z+5]),N.copy(C).add(D).add(O).divideScalar(3);const j=T(N);R(L,z+0,C,j),R(H,z+2,D,j),R(G,z+4,O,j)}}function R(C,D,O,N){N<0&&C.x===1&&(u[D]=C.x-1),O.x===0&&O.z===0&&(u[D]=N/2/Math.PI+.5)}function T(C){return Math.atan2(C.z,-C.x)}function M(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new tc(t.vertices,t.indices,t.radius,t.details)}}class R_ extends tc{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,a=1/i,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-i,0,-a,i,0,a,-i,0,a,i,-a,-i,0,-a,i,0,a,-i,0,a,i,0,-i,0,-a,i,0,-a,-i,0,a,i,0,a],u=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,u,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new R_(t.radius,t.detail)}}const C0=new K,D0=new K,mS=new K,O0=new Ts;class HC extends Qe{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){const a=Math.pow(10,4),r=Math.cos(bf*e),u=t.getIndex(),f=t.getAttribute("position"),d=u?u.count:f.count,p=[0,0,0],y=["a","b","c"],v=new Array(3),_={},b=[];for(let E=0;E<d;E+=3){u?(p[0]=u.getX(E),p[1]=u.getX(E+1),p[2]=u.getX(E+2)):(p[0]=E,p[1]=E+1,p[2]=E+2);const{a:R,b:T,c:M}=O0;if(R.fromBufferAttribute(f,p[0]),T.fromBufferAttribute(f,p[1]),M.fromBufferAttribute(f,p[2]),O0.getNormal(mS),v[0]=`${Math.round(R.x*a)},${Math.round(R.y*a)},${Math.round(R.z*a)}`,v[1]=`${Math.round(T.x*a)},${Math.round(T.y*a)},${Math.round(T.z*a)}`,v[2]=`${Math.round(M.x*a)},${Math.round(M.y*a)},${Math.round(M.z*a)}`,!(v[0]===v[1]||v[1]===v[2]||v[2]===v[0]))for(let C=0;C<3;C++){const D=(C+1)%3,O=v[C],N=v[D],L=O0[y[C]],H=O0[y[D]],G=`${O}_${N}`,B=`${N}_${O}`;B in _&&_[B]?(mS.dot(_[B].normal)<=r&&(b.push(L.x,L.y,L.z),b.push(H.x,H.y,H.z)),_[B]=null):G in _||(_[G]={index0:p[C],index1:p[D],normal:mS.clone()})}}for(const E in _)if(_[E]){const{index0:R,index1:T}=_[E];C0.fromBufferAttribute(f,R),D0.fromBufferAttribute(f,T),b.push(C0.x,C0.y,C0.z),b.push(D0.x,D0.y,D0.z)}this.setAttribute("position",new me(b,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class Mf extends qm{constructor(t){super(t),this.uuid=Ws(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let i=0,a=this.holes.length;i<a;i++)e[i]=this.holes[i].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const a=t.holes[e];this.holes.push(a.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,i=this.holes.length;e<i;e++){const a=this.holes[e];t.holes.push(a.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,i=t.holes.length;e<i;e++){const a=t.holes[e];this.holes.push(new qm().fromJSON(a))}return this}}function $N(n,t,e=2){const i=t&&t.length,a=i?t[0]*e:n.length;let r=FC(n,0,a,e,!0);const u=[];if(!r||r.next===r.prev)return u;let f,d,p;if(i&&(r=aL(n,t,r,e)),n.length>80*e){f=1/0,d=1/0;let y=-1/0,v=-1/0;for(let _=e;_<a;_+=e){const b=n[_],E=n[_+1];b<f&&(f=b),E<d&&(d=E),b>y&&(y=b),E>v&&(v=E)}p=Math.max(y-f,v-d),p=p!==0?32767/p:0}return Xm(r,u,e,f,d,p,0),u}function FC(n,t,e,i,a){let r;if(a===mL(n,t,e,i)>0)for(let u=t;u<e;u+=i)r=_T(u/i|0,n[u],n[u+1],r);else for(let u=e-i;u>=t;u-=i)r=_T(u/i|0,n[u],n[u+1],r);return r&&Sd(r,r.next)&&(jm(r),r=r.next),r}function wf(n,t){if(!n)return n;t||(t=n);let e=n,i;do if(i=!1,!e.steiner&&(Sd(e,e.next)||ui(e.prev,e,e.next)===0)){if(jm(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function Xm(n,t,e,i,a,r,u){if(!n)return;!u&&r&&uL(n,i,a,r);let f=n;for(;n.prev!==n.next;){const d=n.prev,p=n.next;if(r?eL(n,i,a,r):tL(n)){t.push(d.i,n.i,p.i),jm(n),n=p.next,f=p.next;continue}if(n=p,n===f){u?u===1?(n=nL(wf(n),t),Xm(n,t,e,i,a,r,2)):u===2&&iL(n,t,e,i,a,r):Xm(wf(n),t,e,i,a,r,1);break}}}function tL(n){const t=n.prev,e=n,i=n.next;if(ui(t,e,i)>=0)return!1;const a=t.x,r=e.x,u=i.x,f=t.y,d=e.y,p=i.y,y=Math.min(a,r,u),v=Math.min(f,d,p),_=Math.max(a,r,u),b=Math.max(f,d,p);let E=i.next;for(;E!==t;){if(E.x>=y&&E.x<=_&&E.y>=v&&E.y<=b&&pm(a,f,r,d,u,p,E.x,E.y)&&ui(E.prev,E,E.next)>=0)return!1;E=E.next}return!0}function eL(n,t,e,i){const a=n.prev,r=n,u=n.next;if(ui(a,r,u)>=0)return!1;const f=a.x,d=r.x,p=u.x,y=a.y,v=r.y,_=u.y,b=Math.min(f,d,p),E=Math.min(y,v,_),R=Math.max(f,d,p),T=Math.max(y,v,_),M=wb(b,E,t,e,i),C=wb(R,T,t,e,i);let D=n.prevZ,O=n.nextZ;for(;D&&D.z>=M&&O&&O.z<=C;){if(D.x>=b&&D.x<=R&&D.y>=E&&D.y<=T&&D!==a&&D!==u&&pm(f,y,d,v,p,_,D.x,D.y)&&ui(D.prev,D,D.next)>=0||(D=D.prevZ,O.x>=b&&O.x<=R&&O.y>=E&&O.y<=T&&O!==a&&O!==u&&pm(f,y,d,v,p,_,O.x,O.y)&&ui(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;D&&D.z>=M;){if(D.x>=b&&D.x<=R&&D.y>=E&&D.y<=T&&D!==a&&D!==u&&pm(f,y,d,v,p,_,D.x,D.y)&&ui(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;O&&O.z<=C;){if(O.x>=b&&O.x<=R&&O.y>=E&&O.y<=T&&O!==a&&O!==u&&pm(f,y,d,v,p,_,O.x,O.y)&&ui(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function nL(n,t){let e=n;do{const i=e.prev,a=e.next.next;!Sd(i,a)&&qC(i,e,e.next,a)&&km(i,a)&&km(a,i)&&(t.push(i.i,e.i,a.i),jm(e),jm(e.next),e=n=a),e=e.next}while(e!==n);return wf(e)}function iL(n,t,e,i,a,r){let u=n;do{let f=u.next.next;for(;f!==u.prev;){if(u.i!==f.i&&hL(u,f)){let d=XC(u,f);u=wf(u,u.next),d=wf(d,d.next),Xm(u,t,e,i,a,r,0),Xm(d,t,e,i,a,r,0);return}f=f.next}u=u.next}while(u!==n)}function aL(n,t,e,i){const a=[];for(let r=0,u=t.length;r<u;r++){const f=t[r]*i,d=r<u-1?t[r+1]*i:n.length,p=FC(n,f,d,i,!1);p===p.next&&(p.steiner=!0),a.push(fL(p))}a.sort(sL);for(let r=0;r<a.length;r++)e=rL(a[r],e);return e}function sL(n,t){let e=n.x-t.x;if(e===0&&(e=n.y-t.y,e===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),a=(t.next.y-t.y)/(t.next.x-t.x);e=i-a}return e}function rL(n,t){const e=oL(n,t);if(!e)return t;const i=XC(e,n);return wf(i,i.next),wf(e,e.next)}function oL(n,t){let e=t;const i=n.x,a=n.y;let r=-1/0,u;if(Sd(n,e))return e;do{if(Sd(n,e.next))return e.next;if(a<=e.y&&a>=e.next.y&&e.next.y!==e.y){const v=e.x+(a-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(v<=i&&v>r&&(r=v,u=e.x<e.next.x?e:e.next,v===i))return u}e=e.next}while(e!==t);if(!u)return null;const f=u,d=u.x,p=u.y;let y=1/0;e=u;do{if(i>=e.x&&e.x>=d&&i!==e.x&&GC(a<p?i:r,a,d,p,a<p?r:i,a,e.x,e.y)){const v=Math.abs(a-e.y)/(i-e.x);km(e,n)&&(v<y||v===y&&(e.x>u.x||e.x===u.x&&lL(u,e)))&&(u=e,y=v)}e=e.next}while(e!==f);return u}function lL(n,t){return ui(n.prev,n,t.prev)<0&&ui(t.next,n,n.next)<0}function uL(n,t,e,i){let a=n;do a.z===0&&(a.z=wb(a.x,a.y,t,e,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==n);a.prevZ.nextZ=null,a.prevZ=null,cL(a)}function cL(n){let t,e=1;do{let i=n,a;n=null;let r=null;for(t=0;i;){t++;let u=i,f=0;for(let p=0;p<e&&(f++,u=u.nextZ,!!u);p++);let d=e;for(;f>0||d>0&&u;)f!==0&&(d===0||!u||i.z<=u.z)?(a=i,i=i.nextZ,f--):(a=u,u=u.nextZ,d--),r?r.nextZ=a:n=a,a.prevZ=r,r=a;i=u}r.nextZ=null,e*=2}while(t>1);return n}function wb(n,t,e,i,a){return n=(n-e)*a|0,t=(t-i)*a|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,n|t<<1}function fL(n){let t=n,e=n;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==n);return e}function GC(n,t,e,i,a,r,u,f){return(a-u)*(t-f)>=(n-u)*(r-f)&&(n-u)*(i-f)>=(e-u)*(t-f)&&(e-u)*(r-f)>=(a-u)*(i-f)}function pm(n,t,e,i,a,r,u,f){return!(n===u&&t===f)&&GC(n,t,e,i,a,r,u,f)}function hL(n,t){return n.next.i!==t.i&&n.prev.i!==t.i&&!dL(n,t)&&(km(n,t)&&km(t,n)&&pL(n,t)&&(ui(n.prev,n,t.prev)||ui(n,t.prev,t))||Sd(n,t)&&ui(n.prev,n,n.next)>0&&ui(t.prev,t,t.next)>0)}function ui(n,t,e){return(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y)}function Sd(n,t){return n.x===t.x&&n.y===t.y}function qC(n,t,e,i){const a=N0(ui(n,t,e)),r=N0(ui(n,t,i)),u=N0(ui(e,i,n)),f=N0(ui(e,i,t));return!!(a!==r&&u!==f||a===0&&U0(n,e,t)||r===0&&U0(n,i,t)||u===0&&U0(e,n,i)||f===0&&U0(e,t,i))}function U0(n,t,e){return t.x<=Math.max(n.x,e.x)&&t.x>=Math.min(n.x,e.x)&&t.y<=Math.max(n.y,e.y)&&t.y>=Math.min(n.y,e.y)}function N0(n){return n>0?1:n<0?-1:0}function dL(n,t){let e=n;do{if(e.i!==n.i&&e.next.i!==n.i&&e.i!==t.i&&e.next.i!==t.i&&qC(e,e.next,n,t))return!0;e=e.next}while(e!==n);return!1}function km(n,t){return ui(n.prev,n,n.next)<0?ui(n,t,n.next)>=0&&ui(n,n.prev,t)>=0:ui(n,t,n.prev)<0||ui(n,n.next,t)<0}function pL(n,t){let e=n,i=!1;const a=(n.x+t.x)/2,r=(n.y+t.y)/2;do e.y>r!=e.next.y>r&&e.next.y!==e.y&&a<(e.next.x-e.x)*(r-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==n);return i}function XC(n,t){const e=Cb(n.i,n.x,n.y),i=Cb(t.i,t.x,t.y),a=n.next,r=t.prev;return n.next=t,t.prev=n,e.next=a,a.prev=e,i.next=e,e.prev=i,r.next=i,i.prev=r,i}function _T(n,t,e,i){const a=Cb(n,t,e);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function jm(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Cb(n,t,e){return{i:n,x:t,y:e,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function mL(n,t,e,i){let a=0;for(let r=t,u=e-i;r<e;r+=i)a+=(n[u]-n[r])*(n[r+1]+n[u+1]),u=r;return a}class gL{static triangulate(t,e,i=2){return $N(t,e,i)}}class Yo{static area(t){const e=t.length;let i=0;for(let a=e-1,r=0;r<e;a=r++)i+=t[a].x*t[r].y-t[r].x*t[a].y;return i*.5}static isClockWise(t){return Yo.area(t)<0}static triangulateShape(t,e){const i=[],a=[],r=[];xT(t),ST(i,t);let u=t.length;e.forEach(xT);for(let d=0;d<e.length;d++)a.push(u),u+=e[d].length,ST(i,e[d]);const f=gL.triangulate(i,a);for(let d=0;d<f.length;d+=3)r.push(f.slice(d,d+3));return r}}function xT(n){const t=n.length;t>2&&n[t-1].equals(n[0])&&n.pop()}function ST(n,t){for(let e=0;e<t.length;e++)n.push(t[e].x),n.push(t[e].y)}class dg extends Qe{constructor(t=new Mf([new Gt(.5,.5),new Gt(-.5,.5),new Gt(-.5,-.5),new Gt(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const i=this,a=[],r=[];for(let f=0,d=t.length;f<d;f++){const p=t[f];u(p)}this.setAttribute("position",new me(a,3)),this.setAttribute("uv",new me(r,2)),this.computeVertexNormals();function u(f){const d=[],p=e.curveSegments!==void 0?e.curveSegments:12,y=e.steps!==void 0?e.steps:1,v=e.depth!==void 0?e.depth:1;let _=e.bevelEnabled!==void 0?e.bevelEnabled:!0,b=e.bevelThickness!==void 0?e.bevelThickness:.2,E=e.bevelSize!==void 0?e.bevelSize:b-.1,R=e.bevelOffset!==void 0?e.bevelOffset:0,T=e.bevelSegments!==void 0?e.bevelSegments:3;const M=e.extrudePath,C=e.UVGenerator!==void 0?e.UVGenerator:yL;let D,O=!1,N,L,H,G;M&&(D=M.getSpacedPoints(y),O=!0,_=!1,N=M.computeFrenetFrames(y,!1),L=new K,H=new K,G=new K),_||(T=0,b=0,E=0,R=0);const B=f.extractPoints(p);let z=B.shape;const j=B.holes;if(!Yo.isClockWise(z)){z=z.reverse();for(let Vt=0,Ut=j.length;Vt<Ut;Vt++){const Nt=j[Vt];Yo.isClockWise(Nt)&&(j[Vt]=Nt.reverse())}}function nt(Vt){const Nt=10000000000000001e-36;let Kt=Vt[0];for(let Ot=1;Ot<=Vt.length;Ot++){const Y=Ot%Vt.length,V=Vt[Y],ft=V.x-Kt.x,wt=V.y-Kt.y,Lt=ft*ft+wt*wt,Ct=Math.max(Math.abs(V.x),Math.abs(V.y),Math.abs(Kt.x),Math.abs(Kt.y)),$t=Nt*Ct*Ct;if(Lt<=$t){Vt.splice(Y,1),Ot--;continue}Kt=V}}nt(z),j.forEach(nt);const Q=j.length,rt=z;for(let Vt=0;Vt<Q;Vt++){const Ut=j[Vt];z=z.concat(Ut)}function I(Vt,Ut,Nt){return Ut||console.error("THREE.ExtrudeGeometry: vec does not exist"),Vt.clone().addScaledVector(Ut,Nt)}const Z=z.length;function W(Vt,Ut,Nt){let Kt,Ot,Y;const V=Vt.x-Ut.x,ft=Vt.y-Ut.y,wt=Nt.x-Vt.x,Lt=Nt.y-Vt.y,Ct=V*V+ft*ft,$t=V*Lt-ft*wt;if(Math.abs($t)>Number.EPSILON){const Yt=Math.sqrt(Ct),Qt=Math.sqrt(wt*wt+Lt*Lt),Je=Ut.x-ft/Yt,kt=Ut.y+V/Yt,ue=Nt.x-Lt/Qt,de=Nt.y+wt/Qt,pe=((ue-Je)*Lt-(de-kt)*wt)/(V*Lt-ft*wt);Kt=Je+V*pe-Vt.x,Ot=kt+ft*pe-Vt.y;const te=Kt*Kt+Ot*Ot;if(te<=2)return new Gt(Kt,Ot);Y=Math.sqrt(te/2)}else{let Yt=!1;V>Number.EPSILON?wt>Number.EPSILON&&(Yt=!0):V<-Number.EPSILON?wt<-Number.EPSILON&&(Yt=!0):Math.sign(ft)===Math.sign(Lt)&&(Yt=!0),Yt?(Kt=-ft,Ot=V,Y=Math.sqrt(Ct)):(Kt=V,Ot=ft,Y=Math.sqrt(Ct/2))}return new Gt(Kt/Y,Ot/Y)}const J=[];for(let Vt=0,Ut=rt.length,Nt=Ut-1,Kt=Vt+1;Vt<Ut;Vt++,Nt++,Kt++)Nt===Ut&&(Nt=0),Kt===Ut&&(Kt=0),J[Vt]=W(rt[Vt],rt[Nt],rt[Kt]);const F=[];let $,mt=J.concat();for(let Vt=0,Ut=Q;Vt<Ut;Vt++){const Nt=j[Vt];$=[];for(let Kt=0,Ot=Nt.length,Y=Ot-1,V=Kt+1;Kt<Ot;Kt++,Y++,V++)Y===Ot&&(Y=0),V===Ot&&(V=0),$[Kt]=W(Nt[Kt],Nt[Y],Nt[V]);F.push($),mt=mt.concat($)}const Tt=[],st=[];for(let Vt=0;Vt<T;Vt++){const Ut=Vt/T,Nt=b*Math.cos(Ut*Math.PI/2),Kt=E*Math.sin(Ut*Math.PI/2)+R;for(let Ot=0,Y=rt.length;Ot<Y;Ot++){const V=I(rt[Ot],J[Ot],Kt);ke(V.x,V.y,-Nt),Ut==0&&Tt.push(V)}for(let Ot=0,Y=Q;Ot<Y;Ot++){const V=j[Ot];$=F[Ot];const ft=[];for(let wt=0,Lt=V.length;wt<Lt;wt++){const Ct=I(V[wt],$[wt],Kt);ke(Ct.x,Ct.y,-Nt),Ut==0&&ft.push(Ct)}Ut==0&&st.push(ft)}}const Et=Yo.triangulateShape(Tt,st),Bt=Et.length,Xt=E+R;for(let Vt=0;Vt<Z;Vt++){const Ut=_?I(z[Vt],mt[Vt],Xt):z[Vt];O?(H.copy(N.normals[0]).multiplyScalar(Ut.x),L.copy(N.binormals[0]).multiplyScalar(Ut.y),G.copy(D[0]).add(H).add(L),ke(G.x,G.y,G.z)):ke(Ut.x,Ut.y,0)}for(let Vt=1;Vt<=y;Vt++)for(let Ut=0;Ut<Z;Ut++){const Nt=_?I(z[Ut],mt[Ut],Xt):z[Ut];O?(H.copy(N.normals[Vt]).multiplyScalar(Nt.x),L.copy(N.binormals[Vt]).multiplyScalar(Nt.y),G.copy(D[Vt]).add(H).add(L),ke(G.x,G.y,G.z)):ke(Nt.x,Nt.y,v/y*Vt)}for(let Vt=T-1;Vt>=0;Vt--){const Ut=Vt/T,Nt=b*Math.cos(Ut*Math.PI/2),Kt=E*Math.sin(Ut*Math.PI/2)+R;for(let Ot=0,Y=rt.length;Ot<Y;Ot++){const V=I(rt[Ot],J[Ot],Kt);ke(V.x,V.y,v+Nt)}for(let Ot=0,Y=j.length;Ot<Y;Ot++){const V=j[Ot];$=F[Ot];for(let ft=0,wt=V.length;ft<wt;ft++){const Lt=I(V[ft],$[ft],Kt);O?ke(Lt.x,Lt.y+D[y-1].y,D[y-1].x+Nt):ke(Lt.x,Lt.y,v+Nt)}}}Zt(),Me();function Zt(){const Vt=a.length/3;if(_){let Ut=0,Nt=Z*Ut;for(let Kt=0;Kt<Bt;Kt++){const Ot=Et[Kt];an(Ot[2]+Nt,Ot[1]+Nt,Ot[0]+Nt)}Ut=y+T*2,Nt=Z*Ut;for(let Kt=0;Kt<Bt;Kt++){const Ot=Et[Kt];an(Ot[0]+Nt,Ot[1]+Nt,Ot[2]+Nt)}}else{for(let Ut=0;Ut<Bt;Ut++){const Nt=Et[Ut];an(Nt[2],Nt[1],Nt[0])}for(let Ut=0;Ut<Bt;Ut++){const Nt=Et[Ut];an(Nt[0]+Z*y,Nt[1]+Z*y,Nt[2]+Z*y)}}i.addGroup(Vt,a.length/3-Vt,0)}function Me(){const Vt=a.length/3;let Ut=0;ge(rt,Ut),Ut+=rt.length;for(let Nt=0,Kt=j.length;Nt<Kt;Nt++){const Ot=j[Nt];ge(Ot,Ut),Ut+=Ot.length}i.addGroup(Vt,a.length/3-Vt,1)}function ge(Vt,Ut){let Nt=Vt.length;for(;--Nt>=0;){const Kt=Nt;let Ot=Nt-1;Ot<0&&(Ot=Vt.length-1);for(let Y=0,V=y+T*2;Y<V;Y++){const ft=Z*Y,wt=Z*(Y+1),Lt=Ut+Kt+ft,Ct=Ut+Ot+ft,$t=Ut+Ot+wt,Yt=Ut+Kt+wt;ze(Lt,Ct,$t,Yt)}}}function ke(Vt,Ut,Nt){d.push(Vt),d.push(Ut),d.push(Nt)}function an(Vt,Ut,Nt){it(Vt),it(Ut),it(Nt);const Kt=a.length/3,Ot=C.generateTopUV(i,a,Kt-3,Kt-2,Kt-1);Un(Ot[0]),Un(Ot[1]),Un(Ot[2])}function ze(Vt,Ut,Nt,Kt){it(Vt),it(Ut),it(Kt),it(Ut),it(Nt),it(Kt);const Ot=a.length/3,Y=C.generateSideWallUV(i,a,Ot-6,Ot-3,Ot-2,Ot-1);Un(Y[0]),Un(Y[1]),Un(Y[3]),Un(Y[1]),Un(Y[2]),Un(Y[3])}function it(Vt){a.push(d[Vt*3+0]),a.push(d[Vt*3+1]),a.push(d[Vt*3+2])}function Un(Vt){r.push(Vt.x),r.push(Vt.y)}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes,i=this.parameters.options;return vL(e,i,t)}static fromJSON(t,e){const i=[];for(let r=0,u=t.shapes.length;r<u;r++){const f=e[t.shapes[r]];i.push(f)}const a=t.options.extrudePath;return a!==void 0&&(t.options.extrudePath=new jv[a.type]().fromJSON(a)),new dg(i,t.options)}}const yL={generateTopUV:function(n,t,e,i,a){const r=t[e*3],u=t[e*3+1],f=t[i*3],d=t[i*3+1],p=t[a*3],y=t[a*3+1];return[new Gt(r,u),new Gt(f,d),new Gt(p,y)]},generateSideWallUV:function(n,t,e,i,a,r){const u=t[e*3],f=t[e*3+1],d=t[e*3+2],p=t[i*3],y=t[i*3+1],v=t[i*3+2],_=t[a*3],b=t[a*3+1],E=t[a*3+2],R=t[r*3],T=t[r*3+1],M=t[r*3+2];return Math.abs(f-y)<Math.abs(u-p)?[new Gt(u,1-d),new Gt(p,1-v),new Gt(_,1-E),new Gt(R,1-M)]:[new Gt(f,1-d),new Gt(y,1-v),new Gt(b,1-E),new Gt(T,1-M)]}};function vL(n,t,e){if(e.shapes=[],Array.isArray(n))for(let i=0,a=n.length;i<a;i++){const r=n[i];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e.options=Object.assign({},t),t.extrudePath!==void 0&&(e.options.extrudePath=t.extrudePath.toJSON()),e}class w_ extends tc{constructor(t=1,e=0){const i=(1+Math.sqrt(5))/2,a=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new w_(t.radius,t.detail)}}class pg extends tc{constructor(t=1,e=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,a,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new pg(t.radius,t.detail)}}class Dd extends Qe{constructor(t=1,e=1,i=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:a};const r=t/2,u=e/2,f=Math.floor(i),d=Math.floor(a),p=f+1,y=d+1,v=t/f,_=e/d,b=[],E=[],R=[],T=[];for(let M=0;M<y;M++){const C=M*_-u;for(let D=0;D<p;D++){const O=D*v-r;E.push(O,-C,0),R.push(0,0,1),T.push(D/f),T.push(1-M/d)}}for(let M=0;M<d;M++)for(let C=0;C<f;C++){const D=C+p*M,O=C+p*(M+1),N=C+1+p*(M+1),L=C+1+p*M;b.push(D,O,L),b.push(O,N,L)}this.setIndex(b),this.setAttribute("position",new me(E,3)),this.setAttribute("normal",new me(R,3)),this.setAttribute("uv",new me(T,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Dd(t.width,t.height,t.widthSegments,t.heightSegments)}}class C_ extends Qe{constructor(t=.5,e=1,i=32,a=1,r=0,u=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:a,thetaStart:r,thetaLength:u},i=Math.max(3,i),a=Math.max(1,a);const f=[],d=[],p=[],y=[];let v=t;const _=(e-t)/a,b=new K,E=new Gt;for(let R=0;R<=a;R++){for(let T=0;T<=i;T++){const M=r+T/i*u;b.x=v*Math.cos(M),b.y=v*Math.sin(M),d.push(b.x,b.y,b.z),p.push(0,0,1),E.x=(b.x/e+1)/2,E.y=(b.y/e+1)/2,y.push(E.x,E.y)}v+=_}for(let R=0;R<a;R++){const T=R*(i+1);for(let M=0;M<i;M++){const C=M+T,D=C,O=C+i+1,N=C+i+2,L=C+1;f.push(D,O,L),f.push(O,N,L)}}this.setIndex(f),this.setAttribute("position",new me(d,3)),this.setAttribute("normal",new me(p,3)),this.setAttribute("uv",new me(y,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new C_(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class D_ extends Qe{constructor(t=new Mf([new Gt(0,.5),new Gt(-.5,-.5),new Gt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const i=[],a=[],r=[],u=[];let f=0,d=0;if(Array.isArray(t)===!1)p(t);else for(let y=0;y<t.length;y++)p(t[y]),this.addGroup(f,d,y),f+=d,d=0;this.setIndex(i),this.setAttribute("position",new me(a,3)),this.setAttribute("normal",new me(r,3)),this.setAttribute("uv",new me(u,2));function p(y){const v=a.length/3,_=y.extractPoints(e);let b=_.shape;const E=_.holes;Yo.isClockWise(b)===!1&&(b=b.reverse());for(let T=0,M=E.length;T<M;T++){const C=E[T];Yo.isClockWise(C)===!0&&(E[T]=C.reverse())}const R=Yo.triangulateShape(b,E);for(let T=0,M=E.length;T<M;T++){const C=E[T];b=b.concat(C)}for(let T=0,M=b.length;T<M;T++){const C=b[T];a.push(C.x,C.y,0),r.push(0,0,1),u.push(C.x,C.y)}for(let T=0,M=R.length;T<M;T++){const C=R[T],D=C[0]+v,O=C[1]+v,N=C[2]+v;i.push(D,O,N),d+=3}}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON(),e=this.parameters.shapes;return _L(e,t)}static fromJSON(t,e){const i=[];for(let a=0,r=t.shapes.length;a<r;a++){const u=e[t.shapes[a]];i.push(u)}return new D_(i,t.curveSegments)}}function _L(n,t){if(t.shapes=[],Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const a=n[e];t.shapes.push(a.uuid)}else t.shapes.push(n.uuid);return t}class mg extends Qe{constructor(t=1,e=32,i=16,a=0,r=Math.PI*2,u=0,f=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:i,phiStart:a,phiLength:r,thetaStart:u,thetaLength:f},e=Math.max(3,Math.floor(e)),i=Math.max(2,Math.floor(i));const d=Math.min(u+f,Math.PI);let p=0;const y=[],v=new K,_=new K,b=[],E=[],R=[],T=[];for(let M=0;M<=i;M++){const C=[],D=M/i;let O=0;M===0&&u===0?O=.5/e:M===i&&d===Math.PI&&(O=-.5/e);for(let N=0;N<=e;N++){const L=N/e;v.x=-t*Math.cos(a+L*r)*Math.sin(u+D*f),v.y=t*Math.cos(u+D*f),v.z=t*Math.sin(a+L*r)*Math.sin(u+D*f),E.push(v.x,v.y,v.z),_.copy(v).normalize(),R.push(_.x,_.y,_.z),T.push(L+O,1-D),C.push(p++)}y.push(C)}for(let M=0;M<i;M++)for(let C=0;C<e;C++){const D=y[M][C+1],O=y[M][C],N=y[M+1][C],L=y[M+1][C+1];(M!==0||u>0)&&b.push(D,O,L),(M!==i-1||d<Math.PI)&&b.push(O,N,L)}this.setIndex(b),this.setAttribute("position",new me(E,3)),this.setAttribute("normal",new me(R,3)),this.setAttribute("uv",new me(T,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new mg(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class O_ extends tc{constructor(t=1,e=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,a,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new O_(t.radius,t.detail)}}class U_ extends Qe{constructor(t=1,e=.4,i=12,a=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:i,tubularSegments:a,arc:r},i=Math.floor(i),a=Math.floor(a);const u=[],f=[],d=[],p=[],y=new K,v=new K,_=new K;for(let b=0;b<=i;b++)for(let E=0;E<=a;E++){const R=E/a*r,T=b/i*Math.PI*2;v.x=(t+e*Math.cos(T))*Math.cos(R),v.y=(t+e*Math.cos(T))*Math.sin(R),v.z=e*Math.sin(T),f.push(v.x,v.y,v.z),y.x=t*Math.cos(R),y.y=t*Math.sin(R),_.subVectors(v,y).normalize(),d.push(_.x,_.y,_.z),p.push(E/a),p.push(b/i)}for(let b=1;b<=i;b++)for(let E=1;E<=a;E++){const R=(a+1)*b+E-1,T=(a+1)*(b-1)+E-1,M=(a+1)*(b-1)+E,C=(a+1)*b+E;u.push(R,T,C),u.push(T,M,C)}this.setIndex(u),this.setAttribute("position",new me(f,3)),this.setAttribute("normal",new me(d,3)),this.setAttribute("uv",new me(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new U_(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class N_ extends Qe{constructor(t=1,e=.4,i=64,a=8,r=2,u=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:i,radialSegments:a,p:r,q:u},i=Math.floor(i),a=Math.floor(a);const f=[],d=[],p=[],y=[],v=new K,_=new K,b=new K,E=new K,R=new K,T=new K,M=new K;for(let D=0;D<=i;++D){const O=D/i*r*Math.PI*2;C(O,r,u,t,b),C(O+.01,r,u,t,E),T.subVectors(E,b),M.addVectors(E,b),R.crossVectors(T,M),M.crossVectors(R,T),R.normalize(),M.normalize();for(let N=0;N<=a;++N){const L=N/a*Math.PI*2,H=-e*Math.cos(L),G=e*Math.sin(L);v.x=b.x+(H*M.x+G*R.x),v.y=b.y+(H*M.y+G*R.y),v.z=b.z+(H*M.z+G*R.z),d.push(v.x,v.y,v.z),_.subVectors(v,b).normalize(),p.push(_.x,_.y,_.z),y.push(D/i),y.push(N/a)}}for(let D=1;D<=i;D++)for(let O=1;O<=a;O++){const N=(a+1)*(D-1)+(O-1),L=(a+1)*D+(O-1),H=(a+1)*D+O,G=(a+1)*(D-1)+O;f.push(N,L,G),f.push(L,H,G)}this.setIndex(f),this.setAttribute("position",new me(d,3)),this.setAttribute("normal",new me(p,3)),this.setAttribute("uv",new me(y,2));function C(D,O,N,L,H){const G=Math.cos(D),B=Math.sin(D),z=N/O*D,j=Math.cos(z);H.x=L*(2+j)*.5*G,H.y=L*(2+j)*B*.5,H.z=L*Math.sin(z)*.5}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new N_(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class L_ extends Qe{constructor(t=new VM(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),e=64,i=1,a=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:a,closed:r};const u=t.computeFrenetFrames(e,r);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;const f=new K,d=new K,p=new Gt;let y=new K;const v=[],_=[],b=[],E=[];R(),this.setIndex(E),this.setAttribute("position",new me(v,3)),this.setAttribute("normal",new me(_,3)),this.setAttribute("uv",new me(b,2));function R(){for(let D=0;D<e;D++)T(D);T(r===!1?e:0),C(),M()}function T(D){y=t.getPointAt(D/e,y);const O=u.normals[D],N=u.binormals[D];for(let L=0;L<=a;L++){const H=L/a*Math.PI*2,G=Math.sin(H),B=-Math.cos(H);d.x=B*O.x+G*N.x,d.y=B*O.y+G*N.y,d.z=B*O.z+G*N.z,d.normalize(),_.push(d.x,d.y,d.z),f.x=y.x+i*d.x,f.y=y.y+i*d.y,f.z=y.z+i*d.z,v.push(f.x,f.y,f.z)}}function M(){for(let D=1;D<=e;D++)for(let O=1;O<=a;O++){const N=(a+1)*(D-1)+(O-1),L=(a+1)*D+(O-1),H=(a+1)*D+O,G=(a+1)*(D-1)+O;E.push(N,L,G),E.push(L,H,G)}}function C(){for(let D=0;D<=e;D++)for(let O=0;O<=a;O++)p.x=D/e,p.y=O/a,b.push(p.x,p.y)}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new L_(new jv[t.path.type]().fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class kC extends Qe{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},t!==null){const e=[],i=new Set,a=new K,r=new K;if(t.index!==null){const u=t.attributes.position,f=t.index;let d=t.groups;d.length===0&&(d=[{start:0,count:f.count,materialIndex:0}]);for(let p=0,y=d.length;p<y;++p){const v=d[p],_=v.start,b=v.count;for(let E=_,R=_+b;E<R;E+=3)for(let T=0;T<3;T++){const M=f.getX(E+T),C=f.getX(E+(T+1)%3);a.fromBufferAttribute(u,M),r.fromBufferAttribute(u,C),bT(a,r,i)===!0&&(e.push(a.x,a.y,a.z),e.push(r.x,r.y,r.z))}}}else{const u=t.attributes.position;for(let f=0,d=u.count/3;f<d;f++)for(let p=0;p<3;p++){const y=3*f+p,v=3*f+(p+1)%3;a.fromBufferAttribute(u,y),r.fromBufferAttribute(u,v),bT(a,r,i)===!0&&(e.push(a.x,a.y,a.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new me(e,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}function bT(n,t,e){const i=`${n.x},${n.y},${n.z}-${t.x},${t.y},${t.z}`,a=`${t.x},${t.y},${t.z}-${n.x},${n.y},${n.z}`;return e.has(i)===!0||e.has(a)===!0?!1:(e.add(i),e.add(a),!0)}var MT=Object.freeze({__proto__:null,BoxGeometry:Of,CapsuleGeometry:E_,CircleGeometry:T_,ConeGeometry:A_,CylinderGeometry:Cd,DodecahedronGeometry:R_,EdgesGeometry:HC,ExtrudeGeometry:dg,IcosahedronGeometry:w_,LatheGeometry:hg,OctahedronGeometry:pg,PlaneGeometry:Dd,PolyhedronGeometry:tc,RingGeometry:C_,ShapeGeometry:D_,SphereGeometry:mg,TetrahedronGeometry:O_,TorusGeometry:U_,TorusKnotGeometry:N_,TubeGeometry:L_,WireframeGeometry:kC});class jC extends Ia{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new fe(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class YC extends io{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class FM extends Ia{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new fe(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ju,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class WC extends FM{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Gt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Fe(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new fe(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new fe(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new fe(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class ZC extends Ia{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new fe(16777215),this.specular=new fe(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ju,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qs,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class KC extends Ia{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new fe(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ju,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class QC extends Ia{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ju,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class JC extends Ia{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new fe(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new fe(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ju,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Qs,this.combine=og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class GM extends Ia{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=lC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class qM extends Ia{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}class $C extends Ia{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new fe(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ju,this.normalScale=new Gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class t2 extends rs{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}function gf(n,t){return!n||n.constructor===t?n:typeof t.BYTES_PER_ELEMENT=="number"?new t(n):Array.prototype.slice.call(n)}function e2(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function n2(n){function t(a,r){return n[a]-n[r]}const e=n.length,i=new Array(e);for(let a=0;a!==e;++a)i[a]=a;return i.sort(t),i}function Db(n,t,e){const i=n.length,a=new n.constructor(i);for(let r=0,u=0;u!==i;++r){const f=e[r]*t;for(let d=0;d!==t;++d)a[u++]=n[f+d]}return a}function XM(n,t,e,i){let a=1,r=n[0];for(;r!==void 0&&r[i]===void 0;)r=n[a++];if(r===void 0)return;let u=r[i];if(u!==void 0)if(Array.isArray(u))do u=r[i],u!==void 0&&(t.push(r.time),e.push(...u)),r=n[a++];while(r!==void 0);else if(u.toArray!==void 0)do u=r[i],u!==void 0&&(t.push(r.time),u.toArray(e,e.length)),r=n[a++];while(r!==void 0);else do u=r[i],u!==void 0&&(t.push(r.time),e.push(u)),r=n[a++];while(r!==void 0)}function xL(n,t,e,i,a=30){const r=n.clone();r.name=t;const u=[];for(let d=0;d<r.tracks.length;++d){const p=r.tracks[d],y=p.getValueSize(),v=[],_=[];for(let b=0;b<p.times.length;++b){const E=p.times[b]*a;if(!(E<e||E>=i)){v.push(p.times[b]);for(let R=0;R<y;++R)_.push(p.values[b*y+R])}}v.length!==0&&(p.times=gf(v,p.times.constructor),p.values=gf(_,p.values.constructor),u.push(p))}r.tracks=u;let f=1/0;for(let d=0;d<r.tracks.length;++d)f>r.tracks[d].times[0]&&(f=r.tracks[d].times[0]);for(let d=0;d<r.tracks.length;++d)r.tracks[d].shift(-1*f);return r.resetDuration(),r}function SL(n,t=0,e=n,i=30){i<=0&&(i=30);const a=e.tracks.length,r=t/i;for(let u=0;u<a;++u){const f=e.tracks[u],d=f.ValueTypeName;if(d==="bool"||d==="string")continue;const p=n.tracks.find(function(M){return M.name===f.name&&M.ValueTypeName===d});if(p===void 0)continue;let y=0;const v=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(y=v/3);let _=0;const b=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=b/3);const E=f.times.length-1;let R;if(r<=f.times[0]){const M=y,C=v-y;R=f.values.slice(M,C)}else if(r>=f.times[E]){const M=E*v+y,C=M+v-y;R=f.values.slice(M,C)}else{const M=f.createInterpolant(),C=y,D=v-y;M.evaluate(r),R=M.resultBuffer.slice(C,D)}d==="quaternion"&&new Rs().fromArray(R).normalize().conjugate().toArray(R);const T=p.times.length;for(let M=0;M<T;++M){const C=M*b+_;if(d==="quaternion")Rs.multiplyQuaternionsFlat(p.values,C,R,0,p.values,C);else{const D=b-_*2;for(let O=0;O<D;++O)p.values[C+O]-=R[O]}}}return n.blendMode=TM,n}class bL{static convertArray(t,e){return gf(t,e)}static isTypedArray(t){return e2(t)}static getKeyframeOrder(t){return n2(t)}static sortedArray(t,e,i){return Db(t,e,i)}static flattenJSON(t,e,i,a){XM(t,e,i,a)}static subclip(t,e,i,a,r=30){return xL(t,e,i,a,r)}static makeClipAdditive(t,e=0,i=t,a=30){return SL(t,e,i,a)}}class gg{constructor(t,e,i,a){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,a=e[i],r=e[i-1];t:{e:{let u;n:{i:if(!(t<a)){for(let f=i+2;;){if(a===void 0){if(t<r)break i;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===f)break;if(r=a,a=e[++i],t<a)break e}u=e.length;break n}if(!(t>=r)){const f=e[1];t<f&&(i=2,r=f);for(let d=i-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(a=r,r=e[--i-1],t>=r)break e}u=i,i=0;break n}break t}for(;i<u;){const f=i+u>>>1;t<e[f]?u=f:i=f+1}if(a=e[i],r=e[i-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,a)}return this.interpolate_(i,r,t,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,a=this.valueSize,r=t*a;for(let u=0;u!==a;++u)e[u]=i[r+u];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class i2 extends gg{constructor(t,e,i,a){super(t,e,i,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:pf,endingEnd:pf}}intervalChanged_(t,e,i){const a=this.parameterPositions;let r=t-2,u=t+1,f=a[r],d=a[u];if(f===void 0)switch(this.getSettings_().endingStart){case mf:r=t,f=2*e-i;break;case Im:r=a.length-2,f=e+a[r]-a[r+1];break;default:r=t,f=i}if(d===void 0)switch(this.getSettings_().endingEnd){case mf:u=t,d=2*i-e;break;case Im:u=1,d=i+a[1]-a[0];break;default:u=t-1,d=e}const p=(i-e)*.5,y=this.valueSize;this._weightPrev=p/(e-f),this._weightNext=p/(d-i),this._offsetPrev=r*y,this._offsetNext=u*y}interpolate_(t,e,i,a){const r=this.resultBuffer,u=this.sampleValues,f=this.valueSize,d=t*f,p=d-f,y=this._offsetPrev,v=this._offsetNext,_=this._weightPrev,b=this._weightNext,E=(i-e)/(a-e),R=E*E,T=R*E,M=-_*T+2*_*R-_*E,C=(1+_)*T+(-1.5-2*_)*R+(-.5+_)*E+1,D=(-1-b)*T+(1.5+b)*R+.5*E,O=b*T-b*R;for(let N=0;N!==f;++N)r[N]=M*u[y+N]+C*u[p+N]+D*u[d+N]+O*u[v+N];return r}}class kM extends gg{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t,e,i,a){const r=this.resultBuffer,u=this.sampleValues,f=this.valueSize,d=t*f,p=d-f,y=(i-e)/(a-e),v=1-y;for(let _=0;_!==f;++_)r[_]=u[p+_]*v+u[d+_]*y;return r}}class a2 extends gg{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t){return this.copySampleValue_(t-1)}}class Mr{constructor(t,e,i,a){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=gf(e,this.TimeBufferType),this.values=gf(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:gf(t.times,Array),values:gf(t.values,Array)};const a=t.getInterpolation();a!==t.DefaultInterpolation&&(i.interpolation=a)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new a2(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new kM(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new i2(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Bm:e=this.InterpolantFactoryMethodDiscrete;break;case qv:e=this.InterpolantFactoryMethodLinear;break;case K0:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Bm;case this.InterpolantFactoryMethodLinear:return qv;case this.InterpolantFactoryMethodSmooth:return K0}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const e=this.times;for(let i=0,a=e.length;i!==a;++i)e[i]+=t}return this}scale(t){if(t!==1){const e=this.times;for(let i=0,a=e.length;i!==a;++i)e[i]*=t}return this}trim(t,e){const i=this.times,a=i.length;let r=0,u=a-1;for(;r!==a&&i[r]<t;)++r;for(;u!==-1&&i[u]>e;)--u;if(++u,r!==0||u!==a){r>=u&&(u=Math.max(u,1),r=u-1);const f=this.getValueSize();this.times=i.slice(r,u),this.values=this.values.slice(r*f,u*f)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,a=this.values,r=i.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let u=null;for(let f=0;f!==r;f++){const d=i[f];if(typeof d=="number"&&isNaN(d)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,f,d),t=!1;break}if(u!==null&&u>d){console.error("THREE.KeyframeTrack: Out of order keys.",this,f,d,u),t=!1;break}u=d}if(a!==void 0&&e2(a))for(let f=0,d=a.length;f!==d;++f){const p=a[f];if(isNaN(p)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,f,p),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),a=this.getInterpolation()===K0,r=t.length-1;let u=1;for(let f=1;f<r;++f){let d=!1;const p=t[f],y=t[f+1];if(p!==y&&(f!==1||p!==t[0]))if(a)d=!0;else{const v=f*i,_=v-i,b=v+i;for(let E=0;E!==i;++E){const R=e[v+E];if(R!==e[_+E]||R!==e[b+E]){d=!0;break}}}if(d){if(f!==u){t[u]=t[f];const v=f*i,_=u*i;for(let b=0;b!==i;++b)e[_+b]=e[v+b]}++u}}if(r>0){t[u]=t[r];for(let f=r*i,d=u*i,p=0;p!==i;++p)e[d+p]=e[f+p];++u}return u!==t.length?(this.times=t.slice(0,u),this.values=e.slice(0,u*i)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),i=this.constructor,a=new i(this.name,t,e);return a.createInterpolant=this.createInterpolant,a}}Mr.prototype.ValueTypeName="";Mr.prototype.TimeBufferType=Float32Array;Mr.prototype.ValueBufferType=Float32Array;Mr.prototype.DefaultInterpolation=qv;class Uf extends Mr{constructor(t,e,i){super(t,e,i)}}Uf.prototype.ValueTypeName="bool";Uf.prototype.ValueBufferType=Array;Uf.prototype.DefaultInterpolation=Bm;Uf.prototype.InterpolantFactoryMethodLinear=void 0;Uf.prototype.InterpolantFactoryMethodSmooth=void 0;class jM extends Mr{constructor(t,e,i,a){super(t,e,i,a)}}jM.prototype.ValueTypeName="color";class Ym extends Mr{constructor(t,e,i,a){super(t,e,i,a)}}Ym.prototype.ValueTypeName="number";class s2 extends gg{constructor(t,e,i,a){super(t,e,i,a)}interpolate_(t,e,i,a){const r=this.resultBuffer,u=this.sampleValues,f=this.valueSize,d=(i-e)/(a-e);let p=t*f;for(let y=p+f;p!==y;p+=4)Rs.slerpFlat(r,0,u,p-f,u,p,d);return r}}class yg extends Mr{constructor(t,e,i,a){super(t,e,i,a)}InterpolantFactoryMethodLinear(t){return new s2(this.times,this.values,this.getValueSize(),t)}}yg.prototype.ValueTypeName="quaternion";yg.prototype.InterpolantFactoryMethodSmooth=void 0;class Nf extends Mr{constructor(t,e,i){super(t,e,i)}}Nf.prototype.ValueTypeName="string";Nf.prototype.ValueBufferType=Array;Nf.prototype.DefaultInterpolation=Bm;Nf.prototype.InterpolantFactoryMethodLinear=void 0;Nf.prototype.InterpolantFactoryMethodSmooth=void 0;class Wm extends Mr{constructor(t,e,i,a){super(t,e,i,a)}}Wm.prototype.ValueTypeName="vector";class Zm{constructor(t="",e=-1,i=[],a=p_){this.name=t,this.tracks=i,this.duration=e,this.blendMode=a,this.uuid=Ws(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],i=t.tracks,a=1/(t.fps||1);for(let u=0,f=i.length;u!==f;++u)e.push(EL(i[u]).scale(a));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],i=t.tracks,a={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,u=i.length;r!==u;++r)e.push(Mr.toJSON(i[r]));return a}static CreateFromMorphTargetSequence(t,e,i,a){const r=e.length,u=[];for(let f=0;f<r;f++){let d=[],p=[];d.push((f+r-1)%r,f,(f+1)%r),p.push(0,1,0);const y=n2(d);d=Db(d,1,y),p=Db(p,1,y),!a&&d[0]===0&&(d.push(r),p.push(p[0])),u.push(new Ym(".morphTargetInfluences["+e[f].name+"]",d,p).scale(1/i))}return new this(t,-1,u)}static findByName(t,e){let i=t;if(!Array.isArray(t)){const a=t;i=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<i.length;a++)if(i[a].name===e)return i[a];return null}static CreateClipsFromMorphTargetSequences(t,e,i){const a={},r=/^([\w-]*?)([\d]+)$/;for(let f=0,d=t.length;f<d;f++){const p=t[f],y=p.name.match(r);if(y&&y.length>1){const v=y[1];let _=a[v];_||(a[v]=_=[]),_.push(p)}}const u=[];for(const f in a)u.push(this.CreateFromMorphTargetSequence(f,a[f],e,i));return u}static parseAnimation(t,e){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(v,_,b,E,R){if(b.length!==0){const T=[],M=[];XM(b,T,M,E),T.length!==0&&R.push(new v(_,T,M))}},a=[],r=t.name||"default",u=t.fps||30,f=t.blendMode;let d=t.length||-1;const p=t.hierarchy||[];for(let v=0;v<p.length;v++){const _=p[v].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const b={};let E;for(E=0;E<_.length;E++)if(_[E].morphTargets)for(let R=0;R<_[E].morphTargets.length;R++)b[_[E].morphTargets[R]]=-1;for(const R in b){const T=[],M=[];for(let C=0;C!==_[E].morphTargets.length;++C){const D=_[E];T.push(D.time),M.push(D.morphTarget===R?1:0)}a.push(new Ym(".morphTargetInfluence["+R+"]",T,M))}d=b.length*u}else{const b=".bones["+e[v].name+"]";i(Wm,b+".position",_,"pos",a),i(yg,b+".quaternion",_,"rot",a),i(Wm,b+".scale",_,"scl",a)}}return a.length===0?null:new this(r,d,a,f)}resetDuration(){const t=this.tracks;let e=0;for(let i=0,a=t.length;i!==a;++i){const r=this.tracks[i];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ML(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ym;case"vector":case"vector2":case"vector3":case"vector4":return Wm;case"color":return jM;case"quaternion":return yg;case"bool":case"boolean":return Uf;case"string":return Nf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function EL(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=ML(n.type);if(n.times===void 0){const e=[],i=[];XM(n.keys,e,i,"value"),n.times=e,n.values=i}return t.parse!==void 0?t.parse(n):new t(n.name,n.times,n.values,n.interpolation)}const Ul={enabled:!1,files:{},add:function(n,t){this.enabled!==!1&&(this.files[n]=t)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class YM{constructor(t,e,i){const a=this;let r=!1,u=0,f=0,d;const p=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(y){f++,r===!1&&a.onStart!==void 0&&a.onStart(y,u,f),r=!0},this.itemEnd=function(y){u++,a.onProgress!==void 0&&a.onProgress(y,u,f),u===f&&(r=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(y){a.onError!==void 0&&a.onError(y)},this.resolveURL=function(y){return d?d(y):y},this.setURLModifier=function(y){return d=y,this},this.addHandler=function(y,v){return p.push(y,v),this},this.removeHandler=function(y){const v=p.indexOf(y);return v!==-1&&p.splice(v,2),this},this.getHandler=function(y){for(let v=0,_=p.length;v<_;v+=2){const b=p[v],E=p[v+1];if(b.global&&(b.lastIndex=0),b.test(y))return E}return null}}}const r2=new YM;class os{constructor(t){this.manager=t!==void 0?t:r2,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(a,r){i.load(t,a,e,r)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}os.DEFAULT_MATERIAL_NAME="__DEFAULT";const wl={};class TL extends Error{constructor(t,e){super(t),this.response=e}}class Qo extends os{constructor(t){super(t),this.mimeType="",this.responseType=""}load(t,e,i,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=Ul.get(t);if(r!==void 0)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(wl[t]!==void 0){wl[t].push({onLoad:e,onProgress:i,onError:a});return}wl[t]=[],wl[t].push({onLoad:e,onProgress:i,onError:a});const u=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),f=this.mimeType,d=this.responseType;fetch(u).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const y=wl[t],v=p.body.getReader(),_=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),b=_?parseInt(_):0,E=b!==0;let R=0;const T=new ReadableStream({start(M){C();function C(){v.read().then(({done:D,value:O})=>{if(D)M.close();else{R+=O.byteLength;const N=new ProgressEvent("progress",{lengthComputable:E,loaded:R,total:b});for(let L=0,H=y.length;L<H;L++){const G=y[L];G.onProgress&&G.onProgress(N)}M.enqueue(O),C()}},D=>{M.error(D)})}}});return new Response(T)}else throw new TL(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(y=>new DOMParser().parseFromString(y,f));case"json":return p.json();default:if(f==="")return p.text();{const v=/charset="?([^;"\s]*)"?/i.exec(f),_=v&&v[1]?v[1].toLowerCase():void 0,b=new TextDecoder(_);return p.arrayBuffer().then(E=>b.decode(E))}}}).then(p=>{Ul.add(t,p);const y=wl[t];delete wl[t];for(let v=0,_=y.length;v<_;v++){const b=y[v];b.onLoad&&b.onLoad(p)}}).catch(p=>{const y=wl[t];if(y===void 0)throw this.manager.itemError(t),p;delete wl[t];for(let v=0,_=y.length;v<_;v++){const b=y[v];b.onError&&b.onError(p)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class AL extends os{constructor(t){super(t)}load(t,e,i,a){const r=this,u=new Qo(this.manager);u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(f){try{e(r.parse(JSON.parse(f)))}catch(d){a?a(d):console.error(d),r.manager.itemError(t)}},i,a)}parse(t){const e=[];for(let i=0;i<t.length;i++){const a=Zm.parse(t[i]);e.push(a)}return e}}class RL extends os{constructor(t){super(t)}load(t,e,i,a){const r=this,u=[],f=new b_,d=new Qo(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(r.withCredentials);let p=0;function y(v){d.load(t[v],function(_){const b=r.parse(_,!0);u[v]={width:b.width,height:b.height,format:b.format,mipmaps:b.mipmaps},p+=1,p===6&&(b.mipmapCount===1&&(f.minFilter=Wi),f.image=u,f.format=b.format,f.needsUpdate=!0,e&&e(f))},i,a)}if(Array.isArray(t))for(let v=0,_=t.length;v<_;++v)y(v);else d.load(t,function(v){const _=r.parse(v,!0);if(_.isCubemap){const b=_.mipmaps.length/_.mipmapCount;for(let E=0;E<b;E++){u[E]={mipmaps:[]};for(let R=0;R<_.mipmapCount;R++)u[E].mipmaps.push(_.mipmaps[E*_.mipmapCount+R]),u[E].format=_.format,u[E].width=_.width,u[E].height=_.height}f.image=u}else f.image.width=_.width,f.image.height=_.height,f.mipmaps=_.mipmaps;_.mipmapCount===1&&(f.minFilter=Wi),f.format=_.format,f.needsUpdate=!0,e&&e(f)},i,a);return f}}class Km extends os{constructor(t){super(t)}load(t,e,i,a){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,u=Ul.get(t);if(u!==void 0)return r.manager.itemStart(t),setTimeout(function(){e&&e(u),r.manager.itemEnd(t)},0),u;const f=Gm("img");function d(){y(),Ul.add(t,this),e&&e(this),r.manager.itemEnd(t)}function p(v){y(),a&&a(v),r.manager.itemError(t),r.manager.itemEnd(t)}function y(){f.removeEventListener("load",d,!1),f.removeEventListener("error",p,!1)}return f.addEventListener("load",d,!1),f.addEventListener("error",p,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(f.crossOrigin=this.crossOrigin),r.manager.itemStart(t),f.src=t,f}}class wL extends os{constructor(t){super(t)}load(t,e,i,a){const r=new cg;r.colorSpace=Na;const u=new Km(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let f=0;function d(p){u.load(t[p],function(y){r.images[p]=y,f++,f===6&&(r.needsUpdate=!0,e&&e(r))},void 0,a)}for(let p=0;p<t.length;++p)d(p);return r}}class CL extends os{constructor(t){super(t)}load(t,e,i,a){const r=this,u=new jo,f=new Qo(this.manager);return f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setPath(this.path),f.setWithCredentials(r.withCredentials),f.load(t,function(d){let p;try{p=r.parse(d)}catch(y){if(a!==void 0)a(y);else{console.error(y);return}}p.image!==void 0?u.image=p.image:p.data!==void 0&&(u.image.width=p.width,u.image.height=p.height,u.image.data=p.data),u.wrapS=p.wrapS!==void 0?p.wrapS:br,u.wrapT=p.wrapT!==void 0?p.wrapT:br,u.magFilter=p.magFilter!==void 0?p.magFilter:Wi,u.minFilter=p.minFilter!==void 0?p.minFilter:Wi,u.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(u.colorSpace=p.colorSpace),p.flipY!==void 0&&(u.flipY=p.flipY),p.format!==void 0&&(u.format=p.format),p.type!==void 0&&(u.type=p.type),p.mipmaps!==void 0&&(u.mipmaps=p.mipmaps,u.minFilter=Xo),p.mipmapCount===1&&(u.minFilter=Wi),p.generateMipmaps!==void 0&&(u.generateMipmaps=p.generateMipmaps),u.needsUpdate=!0,e&&e(u,p)},i,a),u}}class DL extends os{constructor(t){super(t)}load(t,e,i,a){const r=new _i,u=new Km(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(t,function(f){r.image=f,r.needsUpdate=!0,e!==void 0&&e(r)},i,a),r}}class ec extends Sn{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new fe(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(e.object.target=this.target.uuid),e}}class o2 extends ec{constructor(t,e,i){super(t,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new fe(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const gS=new Le,ET=new K,TT=new K;class WM{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Gt(512,512),this.map=null,this.mapPass=null,this.matrix=new Le,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fg,this._frameExtents=new Gt(1,1),this._viewportCount=1,this._viewports=[new xn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,i=this.matrix;ET.setFromMatrixPosition(t.matrixWorld),e.position.copy(ET),TT.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(TT),e.updateMatrixWorld(),gS.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gS),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(gS)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class OL extends WM{constructor(){super(new aa(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,i=yd*2*t.angle*this.focus,a=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(i!==e.fov||a!==e.aspect||r!==e.far)&&(e.fov=i,e.aspect=a,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class l2 extends ec{constructor(t,e,i=0,a=Math.PI/3,r=0,u=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.target=new Sn,this.distance=i,this.angle=a,this.penumbra=r,this.decay=u,this.map=null,this.shadow=new OL}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const AT=new Le,um=new K,yS=new K;class UL extends WM{constructor(){super(new aa(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Gt(4,2),this._viewportCount=6,this._viewports=[new xn(2,1,1,1),new xn(0,1,1,1),new xn(3,1,1,1),new xn(1,1,1,1),new xn(3,0,1,1),new xn(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(t,e=0){const i=this.camera,a=this.matrix,r=t.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),um.setFromMatrixPosition(t.matrixWorld),i.position.copy(um),yS.copy(i.position),yS.add(this._cubeDirections[e]),i.up.copy(this._cubeUps[e]),i.lookAt(yS),i.updateMatrixWorld(),a.makeTranslation(-um.x,-um.y,-um.z),AT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(AT)}}class u2 extends ec{constructor(t,e,i=0,a=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=a,this.shadow=new UL}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class vg extends y_{constructor(t=-1,e=1,i=1,a=-1,r=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=a,this.near=r,this.far=u,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,i,a,r,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=a,this.view.width=r,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let r=i-t,u=i+t,f=a+e,d=a-e;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=p*this.view.offsetX,u=r+p*this.view.width,f-=y*this.view.offsetY,d=f-y*this.view.height}this.projectionMatrix.makeOrthographic(r,u,f,d,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class NL extends WM{constructor(){super(new vg(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class c2 extends ec{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.target=new Sn,this.shadow=new NL}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class f2 extends ec{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class h2 extends ec{constructor(t,e,i=10,a=10){super(t,e),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}class d2{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new K)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const i=t.x,a=t.y,r=t.z,u=this.coefficients;return e.copy(u[0]).multiplyScalar(.282095),e.addScaledVector(u[1],.488603*a),e.addScaledVector(u[2],.488603*r),e.addScaledVector(u[3],.488603*i),e.addScaledVector(u[4],1.092548*(i*a)),e.addScaledVector(u[5],1.092548*(a*r)),e.addScaledVector(u[6],.315392*(3*r*r-1)),e.addScaledVector(u[7],1.092548*(i*r)),e.addScaledVector(u[8],.546274*(i*i-a*a)),e}getIrradianceAt(t,e){const i=t.x,a=t.y,r=t.z,u=this.coefficients;return e.copy(u[0]).multiplyScalar(.886227),e.addScaledVector(u[1],2*.511664*a),e.addScaledVector(u[2],2*.511664*r),e.addScaledVector(u[3],2*.511664*i),e.addScaledVector(u[4],2*.429043*i*a),e.addScaledVector(u[5],2*.429043*a*r),e.addScaledVector(u[6],.743125*r*r-.247708),e.addScaledVector(u[7],2*.429043*i*r),e.addScaledVector(u[8],.429043*(i*i-a*a)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,e=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].fromArray(t,e+a*3);return this}toArray(t=[],e=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].toArray(t,e+a*3);return t}static getBasisAt(t,e){const i=t.x,a=t.y,r=t.z;e[0]=.282095,e[1]=.488603*a,e[2]=.488603*r,e[3]=.488603*i,e[4]=1.092548*i*a,e[5]=1.092548*a*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*i*r,e[8]=.546274*(i*i-a*a)}}class p2 extends ec{constructor(t=new d2,e=1){super(void 0,e),this.isLightProbe=!0,this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}class P_ extends os{constructor(t){super(t),this.textures={}}load(t,e,i,a){const r=this,u=new Qo(r.manager);u.setPath(r.path),u.setRequestHeader(r.requestHeader),u.setWithCredentials(r.withCredentials),u.load(t,function(f){try{e(r.parse(JSON.parse(f)))}catch(d){a?a(d):console.error(d),r.manager.itemError(t)}},i,a)}parse(t){const e=this.textures;function i(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}const a=this.createMaterialFromType(t.type);if(t.uuid!==void 0&&(a.uuid=t.uuid),t.name!==void 0&&(a.name=t.name),t.color!==void 0&&a.color!==void 0&&a.color.setHex(t.color),t.roughness!==void 0&&(a.roughness=t.roughness),t.metalness!==void 0&&(a.metalness=t.metalness),t.sheen!==void 0&&(a.sheen=t.sheen),t.sheenColor!==void 0&&(a.sheenColor=new fe().setHex(t.sheenColor)),t.sheenRoughness!==void 0&&(a.sheenRoughness=t.sheenRoughness),t.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(t.emissive),t.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(t.specular),t.specularIntensity!==void 0&&(a.specularIntensity=t.specularIntensity),t.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(t.specularColor),t.shininess!==void 0&&(a.shininess=t.shininess),t.clearcoat!==void 0&&(a.clearcoat=t.clearcoat),t.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=t.clearcoatRoughness),t.dispersion!==void 0&&(a.dispersion=t.dispersion),t.iridescence!==void 0&&(a.iridescence=t.iridescence),t.iridescenceIOR!==void 0&&(a.iridescenceIOR=t.iridescenceIOR),t.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=t.iridescenceThicknessRange),t.transmission!==void 0&&(a.transmission=t.transmission),t.thickness!==void 0&&(a.thickness=t.thickness),t.attenuationDistance!==void 0&&(a.attenuationDistance=t.attenuationDistance),t.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(t.attenuationColor),t.anisotropy!==void 0&&(a.anisotropy=t.anisotropy),t.anisotropyRotation!==void 0&&(a.anisotropyRotation=t.anisotropyRotation),t.fog!==void 0&&(a.fog=t.fog),t.flatShading!==void 0&&(a.flatShading=t.flatShading),t.blending!==void 0&&(a.blending=t.blending),t.combine!==void 0&&(a.combine=t.combine),t.side!==void 0&&(a.side=t.side),t.shadowSide!==void 0&&(a.shadowSide=t.shadowSide),t.opacity!==void 0&&(a.opacity=t.opacity),t.transparent!==void 0&&(a.transparent=t.transparent),t.alphaTest!==void 0&&(a.alphaTest=t.alphaTest),t.alphaHash!==void 0&&(a.alphaHash=t.alphaHash),t.depthFunc!==void 0&&(a.depthFunc=t.depthFunc),t.depthTest!==void 0&&(a.depthTest=t.depthTest),t.depthWrite!==void 0&&(a.depthWrite=t.depthWrite),t.colorWrite!==void 0&&(a.colorWrite=t.colorWrite),t.blendSrc!==void 0&&(a.blendSrc=t.blendSrc),t.blendDst!==void 0&&(a.blendDst=t.blendDst),t.blendEquation!==void 0&&(a.blendEquation=t.blendEquation),t.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=t.blendSrcAlpha),t.blendDstAlpha!==void 0&&(a.blendDstAlpha=t.blendDstAlpha),t.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=t.blendEquationAlpha),t.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(t.blendColor),t.blendAlpha!==void 0&&(a.blendAlpha=t.blendAlpha),t.stencilWriteMask!==void 0&&(a.stencilWriteMask=t.stencilWriteMask),t.stencilFunc!==void 0&&(a.stencilFunc=t.stencilFunc),t.stencilRef!==void 0&&(a.stencilRef=t.stencilRef),t.stencilFuncMask!==void 0&&(a.stencilFuncMask=t.stencilFuncMask),t.stencilFail!==void 0&&(a.stencilFail=t.stencilFail),t.stencilZFail!==void 0&&(a.stencilZFail=t.stencilZFail),t.stencilZPass!==void 0&&(a.stencilZPass=t.stencilZPass),t.stencilWrite!==void 0&&(a.stencilWrite=t.stencilWrite),t.wireframe!==void 0&&(a.wireframe=t.wireframe),t.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=t.wireframeLinewidth),t.wireframeLinecap!==void 0&&(a.wireframeLinecap=t.wireframeLinecap),t.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=t.wireframeLinejoin),t.rotation!==void 0&&(a.rotation=t.rotation),t.linewidth!==void 0&&(a.linewidth=t.linewidth),t.dashSize!==void 0&&(a.dashSize=t.dashSize),t.gapSize!==void 0&&(a.gapSize=t.gapSize),t.scale!==void 0&&(a.scale=t.scale),t.polygonOffset!==void 0&&(a.polygonOffset=t.polygonOffset),t.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=t.polygonOffsetFactor),t.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=t.polygonOffsetUnits),t.dithering!==void 0&&(a.dithering=t.dithering),t.alphaToCoverage!==void 0&&(a.alphaToCoverage=t.alphaToCoverage),t.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=t.premultipliedAlpha),t.forceSinglePass!==void 0&&(a.forceSinglePass=t.forceSinglePass),t.visible!==void 0&&(a.visible=t.visible),t.toneMapped!==void 0&&(a.toneMapped=t.toneMapped),t.userData!==void 0&&(a.userData=t.userData),t.vertexColors!==void 0&&(typeof t.vertexColors=="number"?a.vertexColors=t.vertexColors>0:a.vertexColors=t.vertexColors),t.uniforms!==void 0)for(const r in t.uniforms){const u=t.uniforms[r];switch(a.uniforms[r]={},u.type){case"t":a.uniforms[r].value=i(u.value);break;case"c":a.uniforms[r].value=new fe().setHex(u.value);break;case"v2":a.uniforms[r].value=new Gt().fromArray(u.value);break;case"v3":a.uniforms[r].value=new K().fromArray(u.value);break;case"v4":a.uniforms[r].value=new xn().fromArray(u.value);break;case"m3":a.uniforms[r].value=new Xe().fromArray(u.value);break;case"m4":a.uniforms[r].value=new Le().fromArray(u.value);break;default:a.uniforms[r].value=u.value}}if(t.defines!==void 0&&(a.defines=t.defines),t.vertexShader!==void 0&&(a.vertexShader=t.vertexShader),t.fragmentShader!==void 0&&(a.fragmentShader=t.fragmentShader),t.glslVersion!==void 0&&(a.glslVersion=t.glslVersion),t.extensions!==void 0)for(const r in t.extensions)a.extensions[r]=t.extensions[r];if(t.lights!==void 0&&(a.lights=t.lights),t.clipping!==void 0&&(a.clipping=t.clipping),t.size!==void 0&&(a.size=t.size),t.sizeAttenuation!==void 0&&(a.sizeAttenuation=t.sizeAttenuation),t.map!==void 0&&(a.map=i(t.map)),t.matcap!==void 0&&(a.matcap=i(t.matcap)),t.alphaMap!==void 0&&(a.alphaMap=i(t.alphaMap)),t.bumpMap!==void 0&&(a.bumpMap=i(t.bumpMap)),t.bumpScale!==void 0&&(a.bumpScale=t.bumpScale),t.normalMap!==void 0&&(a.normalMap=i(t.normalMap)),t.normalMapType!==void 0&&(a.normalMapType=t.normalMapType),t.normalScale!==void 0){let r=t.normalScale;Array.isArray(r)===!1&&(r=[r,r]),a.normalScale=new Gt().fromArray(r)}return t.displacementMap!==void 0&&(a.displacementMap=i(t.displacementMap)),t.displacementScale!==void 0&&(a.displacementScale=t.displacementScale),t.displacementBias!==void 0&&(a.displacementBias=t.displacementBias),t.roughnessMap!==void 0&&(a.roughnessMap=i(t.roughnessMap)),t.metalnessMap!==void 0&&(a.metalnessMap=i(t.metalnessMap)),t.emissiveMap!==void 0&&(a.emissiveMap=i(t.emissiveMap)),t.emissiveIntensity!==void 0&&(a.emissiveIntensity=t.emissiveIntensity),t.specularMap!==void 0&&(a.specularMap=i(t.specularMap)),t.specularIntensityMap!==void 0&&(a.specularIntensityMap=i(t.specularIntensityMap)),t.specularColorMap!==void 0&&(a.specularColorMap=i(t.specularColorMap)),t.envMap!==void 0&&(a.envMap=i(t.envMap)),t.envMapRotation!==void 0&&a.envMapRotation.fromArray(t.envMapRotation),t.envMapIntensity!==void 0&&(a.envMapIntensity=t.envMapIntensity),t.reflectivity!==void 0&&(a.reflectivity=t.reflectivity),t.refractionRatio!==void 0&&(a.refractionRatio=t.refractionRatio),t.lightMap!==void 0&&(a.lightMap=i(t.lightMap)),t.lightMapIntensity!==void 0&&(a.lightMapIntensity=t.lightMapIntensity),t.aoMap!==void 0&&(a.aoMap=i(t.aoMap)),t.aoMapIntensity!==void 0&&(a.aoMapIntensity=t.aoMapIntensity),t.gradientMap!==void 0&&(a.gradientMap=i(t.gradientMap)),t.clearcoatMap!==void 0&&(a.clearcoatMap=i(t.clearcoatMap)),t.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=i(t.clearcoatRoughnessMap)),t.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=i(t.clearcoatNormalMap)),t.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new Gt().fromArray(t.clearcoatNormalScale)),t.iridescenceMap!==void 0&&(a.iridescenceMap=i(t.iridescenceMap)),t.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=i(t.iridescenceThicknessMap)),t.transmissionMap!==void 0&&(a.transmissionMap=i(t.transmissionMap)),t.thicknessMap!==void 0&&(a.thicknessMap=i(t.thicknessMap)),t.anisotropyMap!==void 0&&(a.anisotropyMap=i(t.anisotropyMap)),t.sheenColorMap!==void 0&&(a.sheenColorMap=i(t.sheenColorMap)),t.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=i(t.sheenRoughnessMap)),a}setTextures(t){return this.textures=t,this}createMaterialFromType(t){return P_.createMaterialFromType(t)}static createMaterialFromType(t){const e={ShadowMaterial:jC,SpriteMaterial:OM,RawShaderMaterial:YC,ShaderMaterial:io,PointsMaterial:NM,MeshPhysicalMaterial:WC,MeshStandardMaterial:FM,MeshPhongMaterial:ZC,MeshToonMaterial:KC,MeshNormalMaterial:QC,MeshLambertMaterial:JC,MeshDepthMaterial:GM,MeshDistanceMaterial:qM,MeshBasicMaterial:$u,MeshMatcapMaterial:$C,LineDashedMaterial:t2,LineBasicMaterial:rs,Material:Ia};return new e[t]}}class Ob{static extractUrlBase(t){const e=t.lastIndexOf("/");return e===-1?"./":t.slice(0,e+1)}static resolveURL(t,e){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class m2 extends Qe{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){const t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}class g2 extends os{constructor(t){super(t)}load(t,e,i,a){const r=this,u=new Qo(r.manager);u.setPath(r.path),u.setRequestHeader(r.requestHeader),u.setWithCredentials(r.withCredentials),u.load(t,function(f){try{e(r.parse(JSON.parse(f)))}catch(d){a?a(d):console.error(d),r.manager.itemError(t)}},i,a)}parse(t){const e={},i={};function a(b,E){if(e[E]!==void 0)return e[E];const T=b.interleavedBuffers[E],M=r(b,T.buffer),C=ad(T.type,M),D=new x_(C,T.stride);return D.uuid=T.uuid,e[E]=D,D}function r(b,E){if(i[E]!==void 0)return i[E];const T=b.arrayBuffers[E],M=new Uint32Array(T).buffer;return i[E]=M,M}const u=t.isInstancedBufferGeometry?new m2:new Qe,f=t.data.index;if(f!==void 0){const b=ad(f.type,f.array);u.setIndex(new On(b,1))}const d=t.data.attributes;for(const b in d){const E=d[b];let R;if(E.isInterleavedBufferAttribute){const T=a(t.data,E.data);R=new Rf(T,E.itemSize,E.offset,E.normalized)}else{const T=ad(E.type,E.array),M=E.isInstancedBufferAttribute?xd:On;R=new M(T,E.itemSize,E.normalized)}E.name!==void 0&&(R.name=E.name),E.usage!==void 0&&R.setUsage(E.usage),u.setAttribute(b,R)}const p=t.data.morphAttributes;if(p)for(const b in p){const E=p[b],R=[];for(let T=0,M=E.length;T<M;T++){const C=E[T];let D;if(C.isInterleavedBufferAttribute){const O=a(t.data,C.data);D=new Rf(O,C.itemSize,C.offset,C.normalized)}else{const O=ad(C.type,C.array);D=new On(O,C.itemSize,C.normalized)}C.name!==void 0&&(D.name=C.name),R.push(D)}u.morphAttributes[b]=R}t.data.morphTargetsRelative&&(u.morphTargetsRelative=!0);const v=t.data.groups||t.data.drawcalls||t.data.offsets;if(v!==void 0)for(let b=0,E=v.length;b!==E;++b){const R=v[b];u.addGroup(R.start,R.count,R.materialIndex)}const _=t.data.boundingSphere;if(_!==void 0){const b=new K;_.center!==void 0&&b.fromArray(_.center),u.boundingSphere=new Ba(b,_.radius)}return t.name&&(u.name=t.name),t.userData&&(u.userData=t.userData),u}}class LL extends os{constructor(t){super(t)}load(t,e,i,a){const r=this,u=this.path===""?Ob.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||u;const f=new Qo(this.manager);f.setPath(this.path),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(t,function(d){let p=null;try{p=JSON.parse(d)}catch(v){a!==void 0&&a(v),console.error("THREE:ObjectLoader: Can't parse "+t+".",v.message);return}const y=p.metadata;if(y===void 0||y.type===void 0||y.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+t)),console.error("THREE.ObjectLoader: Can't load "+t);return}r.parse(p,e)},i,a)}async loadAsync(t,e){const i=this,a=this.path===""?Ob.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;const r=new Qo(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const u=await r.loadAsync(t,e),f=JSON.parse(u),d=f.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+t);return await i.parseAsync(f)}parse(t,e){const i=this.parseAnimations(t.animations),a=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,a),u=this.parseImages(t.images,function(){e!==void 0&&e(p)}),f=this.parseTextures(t.textures,u),d=this.parseMaterials(t.materials,f),p=this.parseObject(t.object,r,d,f,i),y=this.parseSkeletons(t.skeletons,p);if(this.bindSkeletons(p,y),this.bindLightTargets(p),e!==void 0){let v=!1;for(const _ in u)if(u[_].data instanceof HTMLImageElement){v=!0;break}v===!1&&e(p)}return p}async parseAsync(t){const e=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),a=this.parseGeometries(t.geometries,i),r=await this.parseImagesAsync(t.images),u=this.parseTextures(t.textures,r),f=this.parseMaterials(t.materials,u),d=this.parseObject(t.object,a,f,u,e),p=this.parseSkeletons(t.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(t){const e={};if(t!==void 0)for(let i=0,a=t.length;i<a;i++){const r=new Mf().fromJSON(t[i]);e[r.uuid]=r}return e}parseSkeletons(t,e){const i={},a={};if(e.traverse(function(r){r.isBone&&(a[r.uuid]=r)}),t!==void 0)for(let r=0,u=t.length;r<u;r++){const f=new S_().fromJSON(t[r],a);i[f.uuid]=f}return i}parseGeometries(t,e){const i={};if(t!==void 0){const a=new g2;for(let r=0,u=t.length;r<u;r++){let f;const d=t[r];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":f=a.parse(d);break;default:d.type in MT?f=MT[d.type].fromJSON(d,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${d.type}"`)}f.uuid=d.uuid,d.name!==void 0&&(f.name=d.name),d.userData!==void 0&&(f.userData=d.userData),i[d.uuid]=f}}return i}parseMaterials(t,e){const i={},a={};if(t!==void 0){const r=new P_;r.setTextures(e);for(let u=0,f=t.length;u<f;u++){const d=t[u];i[d.uuid]===void 0&&(i[d.uuid]=r.parse(d)),a[d.uuid]=i[d.uuid]}}return a}parseAnimations(t){const e={};if(t!==void 0)for(let i=0;i<t.length;i++){const a=t[i],r=Zm.parse(a);e[r.uuid]=r}return e}parseImages(t,e){const i=this,a={};let r;function u(d){return i.manager.itemStart(d),r.load(d,function(){i.manager.itemEnd(d)},void 0,function(){i.manager.itemError(d),i.manager.itemEnd(d)})}function f(d){if(typeof d=="string"){const p=d,y=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return u(y)}else return d.data?{data:ad(d.type,d.data),width:d.width,height:d.height}:null}if(t!==void 0&&t.length>0){const d=new YM(e);r=new Km(d),r.setCrossOrigin(this.crossOrigin);for(let p=0,y=t.length;p<y;p++){const v=t[p],_=v.url;if(Array.isArray(_)){const b=[];for(let E=0,R=_.length;E<R;E++){const T=_[E],M=f(T);M!==null&&(M instanceof HTMLImageElement?b.push(M):b.push(new jo(M.data,M.width,M.height)))}a[v.uuid]=new ju(b)}else{const b=f(v.url);a[v.uuid]=new ju(b)}}}return a}async parseImagesAsync(t){const e=this,i={};let a;async function r(u){if(typeof u=="string"){const f=u,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:e.resourcePath+f;return await a.loadAsync(d)}else return u.data?{data:ad(u.type,u.data),width:u.width,height:u.height}:null}if(t!==void 0&&t.length>0){a=new Km(this.manager),a.setCrossOrigin(this.crossOrigin);for(let u=0,f=t.length;u<f;u++){const d=t[u],p=d.url;if(Array.isArray(p)){const y=[];for(let v=0,_=p.length;v<_;v++){const b=p[v],E=await r(b);E!==null&&(E instanceof HTMLImageElement?y.push(E):y.push(new jo(E.data,E.width,E.height)))}i[d.uuid]=new ju(y)}else{const y=await r(d.url);i[d.uuid]=new ju(y)}}}return i}parseTextures(t,e){function i(r,u){return typeof r=="number"?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),u[r])}const a={};if(t!==void 0)for(let r=0,u=t.length;r<u;r++){const f=t[r];f.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',f.uuid),e[f.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",f.image);const d=e[f.image],p=d.data;let y;Array.isArray(p)?(y=new cg,p.length===6&&(y.needsUpdate=!0)):(p&&p.data?y=new jo:y=new _i,p&&(y.needsUpdate=!0)),y.source=d,y.uuid=f.uuid,f.name!==void 0&&(y.name=f.name),f.mapping!==void 0&&(y.mapping=i(f.mapping,PL)),f.channel!==void 0&&(y.channel=f.channel),f.offset!==void 0&&y.offset.fromArray(f.offset),f.repeat!==void 0&&y.repeat.fromArray(f.repeat),f.center!==void 0&&y.center.fromArray(f.center),f.rotation!==void 0&&(y.rotation=f.rotation),f.wrap!==void 0&&(y.wrapS=i(f.wrap[0],RT),y.wrapT=i(f.wrap[1],RT)),f.format!==void 0&&(y.format=f.format),f.internalFormat!==void 0&&(y.internalFormat=f.internalFormat),f.type!==void 0&&(y.type=f.type),f.colorSpace!==void 0&&(y.colorSpace=f.colorSpace),f.minFilter!==void 0&&(y.minFilter=i(f.minFilter,wT)),f.magFilter!==void 0&&(y.magFilter=i(f.magFilter,wT)),f.anisotropy!==void 0&&(y.anisotropy=f.anisotropy),f.flipY!==void 0&&(y.flipY=f.flipY),f.generateMipmaps!==void 0&&(y.generateMipmaps=f.generateMipmaps),f.premultiplyAlpha!==void 0&&(y.premultiplyAlpha=f.premultiplyAlpha),f.unpackAlignment!==void 0&&(y.unpackAlignment=f.unpackAlignment),f.compareFunction!==void 0&&(y.compareFunction=f.compareFunction),f.userData!==void 0&&(y.userData=f.userData),a[f.uuid]=y}return a}parseObject(t,e,i,a,r){let u;function f(_){return e[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",_),e[_]}function d(_){if(_!==void 0){if(Array.isArray(_)){const b=[];for(let E=0,R=_.length;E<R;E++){const T=_[E];i[T]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",T),b.push(i[T])}return b}return i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),i[_]}}function p(_){return a[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",_),a[_]}let y,v;switch(t.type){case"Scene":u=new DM,t.background!==void 0&&(Number.isInteger(t.background)?u.background=new fe(t.background):u.background=p(t.background)),t.environment!==void 0&&(u.environment=p(t.environment)),t.fog!==void 0&&(t.fog.type==="Fog"?u.fog=new __(t.fog.color,t.fog.near,t.fog.far):t.fog.type==="FogExp2"&&(u.fog=new v_(t.fog.color,t.fog.density)),t.fog.name!==""&&(u.fog.name=t.fog.name)),t.backgroundBlurriness!==void 0&&(u.backgroundBlurriness=t.backgroundBlurriness),t.backgroundIntensity!==void 0&&(u.backgroundIntensity=t.backgroundIntensity),t.backgroundRotation!==void 0&&u.backgroundRotation.fromArray(t.backgroundRotation),t.environmentIntensity!==void 0&&(u.environmentIntensity=t.environmentIntensity),t.environmentRotation!==void 0&&u.environmentRotation.fromArray(t.environmentRotation);break;case"PerspectiveCamera":u=new aa(t.fov,t.aspect,t.near,t.far),t.focus!==void 0&&(u.focus=t.focus),t.zoom!==void 0&&(u.zoom=t.zoom),t.filmGauge!==void 0&&(u.filmGauge=t.filmGauge),t.filmOffset!==void 0&&(u.filmOffset=t.filmOffset),t.view!==void 0&&(u.view=Object.assign({},t.view));break;case"OrthographicCamera":u=new vg(t.left,t.right,t.top,t.bottom,t.near,t.far),t.zoom!==void 0&&(u.zoom=t.zoom),t.view!==void 0&&(u.view=Object.assign({},t.view));break;case"AmbientLight":u=new f2(t.color,t.intensity);break;case"DirectionalLight":u=new c2(t.color,t.intensity),u.target=t.target||"";break;case"PointLight":u=new u2(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":u=new h2(t.color,t.intensity,t.width,t.height);break;case"SpotLight":u=new l2(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay),u.target=t.target||"";break;case"HemisphereLight":u=new o2(t.color,t.groundColor,t.intensity);break;case"LightProbe":u=new p2().fromJSON(t);break;case"SkinnedMesh":y=f(t.geometry),v=d(t.material),u=new CC(y,v),t.bindMode!==void 0&&(u.bindMode=t.bindMode),t.bindMatrix!==void 0&&u.bindMatrix.fromArray(t.bindMatrix),t.skeleton!==void 0&&(u.skeleton=t.skeleton);break;case"Mesh":y=f(t.geometry),v=d(t.material),u=new Bi(y,v);break;case"InstancedMesh":y=f(t.geometry),v=d(t.material);const _=t.count,b=t.instanceMatrix,E=t.instanceColor;u=new DC(y,v,_),u.instanceMatrix=new xd(new Float32Array(b.array),16),E!==void 0&&(u.instanceColor=new xd(new Float32Array(E.array),E.itemSize));break;case"BatchedMesh":y=f(t.geometry),v=d(t.material),u=new OC(t.maxInstanceCount,t.maxVertexCount,t.maxIndexCount,v),u.geometry=y,u.perObjectFrustumCulled=t.perObjectFrustumCulled,u.sortObjects=t.sortObjects,u._drawRanges=t.drawRanges,u._reservedRanges=t.reservedRanges,u._visibility=t.visibility,u._active=t.active,u._bounds=t.bounds.map(R=>{const T=new ss;T.min.fromArray(R.boxMin),T.max.fromArray(R.boxMax);const M=new Ba;return M.radius=R.sphereRadius,M.center.fromArray(R.sphereCenter),{boxInitialized:R.boxInitialized,box:T,sphereInitialized:R.sphereInitialized,sphere:M}}),u._maxInstanceCount=t.maxInstanceCount,u._maxVertexCount=t.maxVertexCount,u._maxIndexCount=t.maxIndexCount,u._geometryInitialized=t.geometryInitialized,u._geometryCount=t.geometryCount,u._matricesTexture=p(t.matricesTexture.uuid),t.colorsTexture!==void 0&&(u._colorsTexture=p(t.colorsTexture.uuid));break;case"LOD":u=new wC;break;case"Line":u=new Zu(f(t.geometry),d(t.material));break;case"LineLoop":u=new UC(f(t.geometry),d(t.material));break;case"LineSegments":u=new $o(f(t.geometry),d(t.material));break;case"PointCloud":case"Points":u=new NC(f(t.geometry),d(t.material));break;case"Sprite":u=new RC(d(t.material));break;case"Group":u=new sd;break;case"Bone":u=new UM;break;default:u=new Sn}if(u.uuid=t.uuid,t.name!==void 0&&(u.name=t.name),t.matrix!==void 0?(u.matrix.fromArray(t.matrix),t.matrixAutoUpdate!==void 0&&(u.matrixAutoUpdate=t.matrixAutoUpdate),u.matrixAutoUpdate&&u.matrix.decompose(u.position,u.quaternion,u.scale)):(t.position!==void 0&&u.position.fromArray(t.position),t.rotation!==void 0&&u.rotation.fromArray(t.rotation),t.quaternion!==void 0&&u.quaternion.fromArray(t.quaternion),t.scale!==void 0&&u.scale.fromArray(t.scale)),t.up!==void 0&&u.up.fromArray(t.up),t.castShadow!==void 0&&(u.castShadow=t.castShadow),t.receiveShadow!==void 0&&(u.receiveShadow=t.receiveShadow),t.shadow&&(t.shadow.intensity!==void 0&&(u.shadow.intensity=t.shadow.intensity),t.shadow.bias!==void 0&&(u.shadow.bias=t.shadow.bias),t.shadow.normalBias!==void 0&&(u.shadow.normalBias=t.shadow.normalBias),t.shadow.radius!==void 0&&(u.shadow.radius=t.shadow.radius),t.shadow.mapSize!==void 0&&u.shadow.mapSize.fromArray(t.shadow.mapSize),t.shadow.camera!==void 0&&(u.shadow.camera=this.parseObject(t.shadow.camera))),t.visible!==void 0&&(u.visible=t.visible),t.frustumCulled!==void 0&&(u.frustumCulled=t.frustumCulled),t.renderOrder!==void 0&&(u.renderOrder=t.renderOrder),t.userData!==void 0&&(u.userData=t.userData),t.layers!==void 0&&(u.layers.mask=t.layers),t.children!==void 0){const _=t.children;for(let b=0;b<_.length;b++)u.add(this.parseObject(_[b],e,i,a,r))}if(t.animations!==void 0){const _=t.animations;for(let b=0;b<_.length;b++){const E=_[b];u.animations.push(r[E])}}if(t.type==="LOD"){t.autoUpdate!==void 0&&(u.autoUpdate=t.autoUpdate);const _=t.levels;for(let b=0;b<_.length;b++){const E=_[b],R=u.getObjectByProperty("uuid",E.object);R!==void 0&&u.addLevel(R,E.distance,E.hysteresis)}}return u}bindSkeletons(t,e){Object.keys(e).length!==0&&t.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const a=e[i.skeleton];a===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(a,i.bindMatrix)}})}bindLightTargets(t){t.traverse(function(e){if(e.isDirectionalLight||e.isSpotLight){const i=e.target,a=t.getObjectByProperty("uuid",i);a!==void 0?e.target=a:e.target=new Sn}})}}const PL={UVMapping:o_,CubeReflectionMapping:Il,CubeRefractionMapping:Yu,EquirectangularReflectionMapping:Nm,EquirectangularRefractionMapping:Lm,CubeUVReflectionMapping:Ad},RT={RepeatWrapping:Pm,ClampToEdgeWrapping:br,MirroredRepeatWrapping:zm},wT={NearestFilter:ya,NearestMipmapNearestFilter:mM,NearestMipmapLinearFilter:id,LinearFilter:Wi,LinearMipmapNearestFilter:_m,LinearMipmapLinearFilter:Xo};class zL extends os{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,i,a){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,u=Ul.get(t);if(u!==void 0){if(r.manager.itemStart(t),u.then){u.then(p=>{e&&e(p),r.manager.itemEnd(t)}).catch(p=>{a&&a(p)});return}return setTimeout(function(){e&&e(u),r.manager.itemEnd(t)},0),u}const f={};f.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",f.headers=this.requestHeader;const d=fetch(t,f).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(p){return Ul.add(t,p),e&&e(p),r.manager.itemEnd(t),p}).catch(function(p){a&&a(p),Ul.remove(t),r.manager.itemError(t),r.manager.itemEnd(t)});Ul.add(t,d),r.manager.itemStart(t)}}let L0;class ZM{static getContext(){return L0===void 0&&(L0=new(window.AudioContext||window.webkitAudioContext)),L0}static setContext(t){L0=t}}class BL extends os{constructor(t){super(t)}load(t,e,i,a){const r=this,u=new Qo(this.manager);u.setResponseType("arraybuffer"),u.setPath(this.path),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(t,function(d){try{const p=d.slice(0);ZM.getContext().decodeAudioData(p,function(v){e(v)}).catch(f)}catch(p){f(p)}},i,a);function f(d){a?a(d):console.error(d),r.manager.itemError(t)}}}const CT=new Le,DT=new Le,ef=new Le;class IL{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new aa,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new aa,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(t){const e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,ef.copy(t.projectionMatrix);const a=e.eyeSep/2,r=a*e.near/e.focus,u=e.near*Math.tan(bf*e.fov*.5)/e.zoom;let f,d;DT.elements[12]=-a,CT.elements[12]=a,f=-u*e.aspect+r,d=u*e.aspect+r,ef.elements[0]=2*e.near/(d-f),ef.elements[8]=(d+f)/(d-f),this.cameraL.projectionMatrix.copy(ef),f=-u*e.aspect-r,d=u*e.aspect-r,ef.elements[0]=2*e.near/(d-f),ef.elements[8]=(d+f)/(d-f),this.cameraR.projectionMatrix.copy(ef)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(DT),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(CT)}}class y2 extends aa{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t,this.index=0}}class KM{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=OT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=OT();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function OT(){return performance.now()}const nf=new K,UT=new Rs,VL=new K,af=new K;class HL extends Sn{constructor(){super(),this.type="AudioListener",this.context=ZM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new KM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(nf,UT,VL),af.set(0,0,-1).applyQuaternion(UT),e.positionX){const a=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(nf.x,a),e.positionY.linearRampToValueAtTime(nf.y,a),e.positionZ.linearRampToValueAtTime(nf.z,a),e.forwardX.linearRampToValueAtTime(af.x,a),e.forwardY.linearRampToValueAtTime(af.y,a),e.forwardZ.linearRampToValueAtTime(af.z,a),e.upX.linearRampToValueAtTime(i.x,a),e.upY.linearRampToValueAtTime(i.y,a),e.upZ.linearRampToValueAtTime(i.z,a)}else e.setPosition(nf.x,nf.y,nf.z),e.setOrientation(af.x,af.y,af.z,i.x,i.y,i.z)}}class v2 extends Sn{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(t=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+t),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(t){return t||(t=[]),this._connected===!0?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){return this.detune=t,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=t,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=t,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}copy(t,e){return super.copy(t,e),t.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=t.autoplay,this.buffer=t.buffer,this.detune=t.detune,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.offset=t.offset,this.duration=t.duration,this.playbackRate=t.playbackRate,this.hasPlaybackControl=t.hasPlaybackControl,this.sourceType=t.sourceType,this.filters=t.filters.slice(),this)}clone(t){return new this.constructor(this.listener).copy(this,t)}}const sf=new K,NT=new Rs,FL=new K,rf=new K;class GL extends v2{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,i){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=i,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(sf,NT,FL),rf.set(0,0,1).applyQuaternion(NT);const e=this.panner;if(e.positionX){const i=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(sf.x,i),e.positionY.linearRampToValueAtTime(sf.y,i),e.positionZ.linearRampToValueAtTime(sf.z,i),e.orientationX.linearRampToValueAtTime(rf.x,i),e.orientationY.linearRampToValueAtTime(rf.y,i),e.orientationZ.linearRampToValueAtTime(rf.z,i)}else e.setPosition(sf.x,sf.y,sf.z),e.setOrientation(rf.x,rf.y,rf.z)}}class qL{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}}class _2{constructor(t,e,i){this.binding=t,this.valueSize=i;let a,r,u;switch(e){case"quaternion":a=this._slerp,r=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":a=this._select,r=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:a=this._lerp,r=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=r,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const i=this.buffer,a=this.valueSize,r=t*a+a;let u=this.cumulativeWeight;if(u===0){for(let f=0;f!==a;++f)i[r+f]=i[f];u=e}else{u+=e;const f=e/u;this._mixBufferRegion(i,r,0,f,a)}this.cumulativeWeight=u}accumulateAdditive(t){const e=this.buffer,i=this.valueSize,a=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,a,0,t,i),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,i=this.buffer,a=t*e+e,r=this.cumulativeWeight,u=this.cumulativeWeightAdditive,f=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const d=e*this._origIndex;this._mixBufferRegion(i,a,d,1-r,e)}u>0&&this._mixBufferRegionAdditive(i,a,this._addIndex*e,1,e);for(let d=e,p=e+e;d!==p;++d)if(i[d]!==i[d+e]){f.setValue(i,a);break}}saveOriginalState(){const t=this.binding,e=this.buffer,i=this.valueSize,a=i*this._origIndex;t.getValue(e,a);for(let r=i,u=a;r!==u;++r)e[r]=e[a+r%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let i=t;i<e;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[e+i]=this.buffer[t+i]}_select(t,e,i,a,r){if(a>=.5)for(let u=0;u!==r;++u)t[e+u]=t[i+u]}_slerp(t,e,i,a){Rs.slerpFlat(t,e,t,e,t,i,a)}_slerpAdditive(t,e,i,a,r){const u=this._workIndex*r;Rs.multiplyQuaternionsFlat(t,u,t,e,t,i),Rs.slerpFlat(t,e,t,e,t,u,a)}_lerp(t,e,i,a,r){const u=1-a;for(let f=0;f!==r;++f){const d=e+f;t[d]=t[d]*u+t[i+f]*a}}_lerpAdditive(t,e,i,a,r){for(let u=0;u!==r;++u){const f=e+u;t[f]=t[f]+t[i+u]*a}}}const QM="\\[\\]\\.:\\/",XL=new RegExp("["+QM+"]","g"),JM="[^"+QM+"]",kL="[^"+QM.replace("\\.","")+"]",jL=/((?:WC+[\/:])*)/.source.replace("WC",JM),YL=/(WCOD+)?/.source.replace("WCOD",kL),WL=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",JM),ZL=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",JM),KL=new RegExp("^"+jL+YL+WL+ZL+"$"),QL=["material","materials","bones","map"];class JL{constructor(t,e,i){const a=i||_n.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,a)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,a=this._bindings[i];a!==void 0&&a.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,r=i.length;a!==r;++a)i[a].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}}class _n{constructor(t,e,i){this.path=e,this.parsedPath=i||_n.parseTrackName(e),this.node=_n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new _n.Composite(t,e,i):new _n(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(XL,"")}static parseTrackName(t){const e=KL.exec(t);if(e===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},a=i.nodeName&&i.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const r=i.nodeName.substring(a+1);QL.indexOf(r)!==-1&&(i.nodeName=i.nodeName.substring(0,a),i.objectName=r)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(e===void 0||e===""||e==="."||e===-1||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(i!==void 0)return i}if(t.children){const i=function(r){for(let u=0;u<r.length;u++){const f=r[u];if(f.name===e||f.uuid===e)return f;const d=i(f.children);if(d)return d}return null},a=i(t.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)t[e++]=i[a]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)i[a]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)i[a]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let a=0,r=i.length;a!==r;++a)i[a]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,a=e.propertyName;let r=e.propertyIndex;if(t||(t=_n.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=e.objectIndex;switch(i){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let y=0;y<t.length;y++)if(t[y].name===p){p=y;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[i]}if(p!==void 0){if(t[p]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[p]}}const u=t[a];if(u===void 0){const p=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+a+" but it wasn't found.",t);return}let f=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?f=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(f=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(r!==void 0){if(a==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[r]!==void 0&&(r=t.morphTargetDictionary[r])}d=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=r}else u.fromArray!==void 0&&u.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(d=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=a;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][f]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_n.Composite=JL;_n.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};_n.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};_n.prototype.GetterByBindingType=[_n.prototype._getValue_direct,_n.prototype._getValue_array,_n.prototype._getValue_arrayElement,_n.prototype._getValue_toArray];_n.prototype.SetterByBindingTypeAndVersioning=[[_n.prototype._setValue_direct,_n.prototype._setValue_direct_setNeedsUpdate,_n.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_array,_n.prototype._setValue_array_setNeedsUpdate,_n.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_arrayElement,_n.prototype._setValue_arrayElement_setNeedsUpdate,_n.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_fromArray,_n.prototype._setValue_fromArray_setNeedsUpdate,_n.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class $L{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ws(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let i=0,a=arguments.length;i!==a;++i)t[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,i=this._paths,a=this._parsedPaths,r=this._bindings,u=r.length;let f,d=t.length,p=this.nCachedObjects_;for(let y=0,v=arguments.length;y!==v;++y){const _=arguments[y],b=_.uuid;let E=e[b];if(E===void 0){E=d++,e[b]=E,t.push(_);for(let R=0,T=u;R!==T;++R)r[R].push(new _n(_,i[R],a[R]))}else if(E<p){f=t[E];const R=--p,T=t[R];e[T.uuid]=E,t[E]=T,e[b]=R,t[R]=_;for(let M=0,C=u;M!==C;++M){const D=r[M],O=D[R];let N=D[E];D[E]=O,N===void 0&&(N=new _n(_,i[M],a[M])),D[R]=N}}else t[E]!==f&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,a=i.length;let r=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const d=arguments[u],p=d.uuid,y=e[p];if(y!==void 0&&y>=r){const v=r++,_=t[v];e[_.uuid]=y,t[y]=_,e[p]=v,t[v]=d;for(let b=0,E=a;b!==E;++b){const R=i[b],T=R[v],M=R[y];R[y]=T,R[v]=M}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,i=this._bindings,a=i.length;let r=this.nCachedObjects_,u=t.length;for(let f=0,d=arguments.length;f!==d;++f){const p=arguments[f],y=p.uuid,v=e[y];if(v!==void 0)if(delete e[y],v<r){const _=--r,b=t[_],E=--u,R=t[E];e[b.uuid]=v,t[v]=b,e[R.uuid]=_,t[_]=R,t.pop();for(let T=0,M=a;T!==M;++T){const C=i[T],D=C[_],O=C[E];C[v]=D,C[_]=O,C.pop()}}else{const _=--u,b=t[_];_>0&&(e[b.uuid]=v),t[v]=b,t.pop();for(let E=0,R=a;E!==R;++E){const T=i[E];T[v]=T[_],T.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const i=this._bindingsIndicesByPath;let a=i[t];const r=this._bindings;if(a!==void 0)return r[a];const u=this._paths,f=this._parsedPaths,d=this._objects,p=d.length,y=this.nCachedObjects_,v=new Array(p);a=r.length,i[t]=a,u.push(t),f.push(e),r.push(v);for(let _=y,b=d.length;_!==b;++_){const E=d[_];v[_]=new _n(E,t,e)}return v}unsubscribe_(t){const e=this._bindingsIndicesByPath,i=e[t];if(i!==void 0){const a=this._paths,r=this._parsedPaths,u=this._bindings,f=u.length-1,d=u[f],p=t[f];e[p]=i,u[i]=d,u.pop(),r[i]=r[f],r.pop(),a[i]=a[f],a.pop()}}}class x2{constructor(t,e,i=null,a=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=i,this.blendMode=a;const r=e.tracks,u=r.length,f=new Array(u),d={endingStart:pf,endingEnd:pf};for(let p=0;p!==u;++p){const y=r[p].createInterpolant(null);f[p]=y,y.settings=d}this._interpolantSettings=d,this._interpolants=f,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,i=!1){if(t.fadeOut(e),this.fadeIn(e),i===!0){const a=this._clip.duration,r=t._clip.duration,u=r/a,f=a/r;t.warp(1,u,e),this.warp(f,1,e)}return this}crossFadeTo(t,e,i=!1){return t.crossFadeFrom(this,e,i)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,i){const a=this._mixer,r=a.time,u=this.timeScale;let f=this._timeScaleInterpolant;f===null&&(f=a._lendControlInterpolant(),this._timeScaleInterpolant=f);const d=f.parameterPositions,p=f.sampleValues;return d[0]=r,d[1]=r+i,p[0]=t/u,p[1]=e/u,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,i,a){if(!this.enabled){this._updateWeight(t);return}const r=this._startTime;if(r!==null){const d=(t-r)*i;d<0||i===0?e=0:(this._startTime=null,e=i*d)}e*=this._updateTimeScale(t);const u=this._updateTime(e),f=this._updateWeight(t);if(f>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case TM:for(let y=0,v=d.length;y!==v;++y)d[y].evaluate(u),p[y].accumulateAdditive(f);break;case p_:default:for(let y=0,v=d.length;y!==v;++y)d[y].evaluate(u),p[y].accumulate(a,f)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const i=this._weightInterpolant;if(i!==null){const a=i.evaluate(t)[0];e*=a,t>i.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const a=i.evaluate(t)[0];e*=a,t>i.parameterPositions[1]&&(this.stopWarping(),e===0?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,i=this.loop;let a=this.time+t,r=this._loopCount;const u=i===oC;if(t===0)return r===-1?a:u&&(r&1)===1?e-a:a;if(i===sC){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(a>=e)a=e;else if(a<0)a=0;else{this.time=a;break t}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(r===-1&&(t>=0?(r=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),a>=e||a<0){const f=Math.floor(a/e);a-=e*f,r+=Math.abs(f);const d=this.repetitions-r;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=t>0?e:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(d===1){const p=t<0;this._setEndings(p,!p,u)}else this._setEndings(!1,!1,u);this._loopCount=r,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:f})}}else this.time=a;if(u&&(r&1)===1)return e-a}return a}_setEndings(t,e,i){const a=this._interpolantSettings;i?(a.endingStart=mf,a.endingEnd=mf):(t?a.endingStart=this.zeroSlopeAtStart?mf:pf:a.endingStart=Im,e?a.endingEnd=this.zeroSlopeAtEnd?mf:pf:a.endingEnd=Im)}_scheduleFading(t,e,i){const a=this._mixer,r=a.time;let u=this._weightInterpolant;u===null&&(u=a._lendControlInterpolant(),this._weightInterpolant=u);const f=u.parameterPositions,d=u.sampleValues;return f[0]=r,d[0]=e,f[1]=r+t,d[1]=i,this}}const tP=new Float32Array(1);class eP extends Jo{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const i=t._localRoot||this._root,a=t._clip.tracks,r=a.length,u=t._propertyBindings,f=t._interpolants,d=i.uuid,p=this._bindingsByRootAndName;let y=p[d];y===void 0&&(y={},p[d]=y);for(let v=0;v!==r;++v){const _=a[v],b=_.name;let E=y[b];if(E!==void 0)++E.referenceCount,u[v]=E;else{if(E=u[v],E!==void 0){E._cacheIndex===null&&(++E.referenceCount,this._addInactiveBinding(E,d,b));continue}const R=e&&e._propertyBindings[v].binding.parsedPath;E=new _2(_n.create(i,b,R),_.ValueTypeName,_.getValueSize()),++E.referenceCount,this._addInactiveBinding(E,d,b),u[v]=E}f[v].resultBuffer=E.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){const i=(t._localRoot||this._root).uuid,a=t._clip.uuid,r=this._actionsByClip[a];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,a,i)}const e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){const r=e[i];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){const r=e[i];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return e!==null&&e<this._nActiveActions}_addInactiveAction(t,e,i){const a=this._actions,r=this._actionsByClip;let u=r[e];if(u===void 0)u={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=u;else{const f=u.knownActions;t._byClipCacheIndex=f.length,f.push(t)}t._cacheIndex=a.length,a.push(t),u.actionByRoot[i]=t}_removeInactiveAction(t){const e=this._actions,i=e[e.length-1],a=t._cacheIndex;i._cacheIndex=a,e[a]=i,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,u=this._actionsByClip,f=u[r],d=f.knownActions,p=d[d.length-1],y=t._byClipCacheIndex;p._byClipCacheIndex=y,d[y]=p,d.pop(),t._byClipCacheIndex=null;const v=f.actionByRoot,_=(t._localRoot||this._root).uuid;delete v[_],d.length===0&&delete u[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let i=0,a=e.length;i!==a;++i){const r=e[i];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(t){const e=this._actions,i=t._cacheIndex,a=this._nActiveActions++,r=e[a];t._cacheIndex=a,e[a]=t,r._cacheIndex=i,e[i]=r}_takeBackAction(t){const e=this._actions,i=t._cacheIndex,a=--this._nActiveActions,r=e[a];t._cacheIndex=a,e[a]=t,r._cacheIndex=i,e[i]=r}_addInactiveBinding(t,e,i){const a=this._bindingsByRootAndName,r=this._bindings;let u=a[e];u===void 0&&(u={},a[e]=u),u[i]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,i=t.binding,a=i.rootNode.uuid,r=i.path,u=this._bindingsByRootAndName,f=u[a],d=e[e.length-1],p=t._cacheIndex;d._cacheIndex=p,e[p]=d,e.pop(),delete f[r],Object.keys(f).length===0&&delete u[a]}_lendBinding(t){const e=this._bindings,i=t._cacheIndex,a=this._nActiveBindings++,r=e[a];t._cacheIndex=a,e[a]=t,r._cacheIndex=i,e[i]=r}_takeBackBinding(t){const e=this._bindings,i=t._cacheIndex,a=--this._nActiveBindings,r=e[a];t._cacheIndex=a,e[a]=t,r._cacheIndex=i,e[i]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let i=t[e];return i===void 0&&(i=new kM(new Float32Array(2),new Float32Array(2),1,tP),i.__cacheIndex=e,t[e]=i),i}_takeBackControlInterpolant(t){const e=this._controlInterpolants,i=t.__cacheIndex,a=--this._nActiveControlInterpolants,r=e[a];t.__cacheIndex=a,e[a]=t,r.__cacheIndex=i,e[i]=r}clipAction(t,e,i){const a=e||this._root,r=a.uuid;let u=typeof t=="string"?Zm.findByName(a,t):t;const f=u!==null?u.uuid:t,d=this._actionsByClip[f];let p=null;if(i===void 0&&(u!==null?i=u.blendMode:i=p_),d!==void 0){const v=d.actionByRoot[r];if(v!==void 0&&v.blendMode===i)return v;p=d.knownActions[0],u===null&&(u=p._clip)}if(u===null)return null;const y=new x2(this,u,e,i);return this._bindAction(y,p),this._addInactiveAction(y,f,r),y}existingAction(t,e){const i=e||this._root,a=i.uuid,r=typeof t=="string"?Zm.findByName(i,t):t,u=r?r.uuid:t,f=this._actionsByClip[u];return f!==void 0&&f.actionByRoot[a]||null}stopAllAction(){const t=this._actions,e=this._nActiveActions;for(let i=e-1;i>=0;--i)t[i].stop();return this}update(t){t*=this.timeScale;const e=this._actions,i=this._nActiveActions,a=this.time+=t,r=Math.sign(t),u=this._accuIndex^=1;for(let p=0;p!==i;++p)e[p]._update(a,t,r,u);const f=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)f[p].apply(u);return this}setTime(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,i=t.uuid,a=this._actionsByClip,r=a[i];if(r!==void 0){const u=r.knownActions;for(let f=0,d=u.length;f!==d;++f){const p=u[f];this._deactivateAction(p);const y=p._cacheIndex,v=e[e.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,v._cacheIndex=y,e[y]=v,e.pop(),this._removeInactiveBindingsForAction(p)}delete a[i]}}uncacheRoot(t){const e=t.uuid,i=this._actionsByClip;for(const u in i){const f=i[u].actionByRoot,d=f[e];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const a=this._bindingsByRootAndName,r=a[e];if(r!==void 0)for(const u in r){const f=r[u];f.restoreOriginalState(),this._removeInactiveBinding(f)}}uncacheAction(t,e){const i=this.existingAction(t,e);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class nP extends m_{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isRenderTarget3D=!0,this.depth=i,this.texture=new g_(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class iP extends m_{constructor(t=1,e=1,i=1,a={}){super(t,e,a),this.isRenderTargetArray=!0,this.depth=i,this.texture=new ug(null,t,e,i),this.texture.isRenderTargetTexture=!0}}class $M{constructor(t){this.value=t}clone(){return new $M(this.value.clone===void 0?this.value:this.value.clone())}}let aP=0;class sP extends Jo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:aP++}),this.name="",this.usage=Hm,this.uniforms=[]}add(t){return this.uniforms.push(t),this}remove(t){const e=this.uniforms.indexOf(t);return e!==-1&&this.uniforms.splice(e,1),this}setName(t){return this.name=t,this}setUsage(t){return this.usage=t,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(t){this.name=t.name,this.usage=t.usage;const e=t.uniforms;this.uniforms.length=0;for(let i=0,a=e.length;i<a;i++){const r=Array.isArray(e[i])?e[i]:[e[i]];for(let u=0;u<r.length;u++)this.uniforms.push(r[u].clone())}return this}clone(){return new this.constructor().copy(this)}}class rP extends x_{constructor(t,e,i=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}class oP{constructor(t,e,i,a,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=t,this.type=e,this.itemSize=i,this.elementSize=a,this.count=r,this.version=0}set needsUpdate(t){t===!0&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}const LT=new Le;class S2{constructor(t,e,i=0,a=1/0){this.ray=new wd(t,e),this.near=i,this.far=a,this.camera=null,this.layers=new vd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return LT.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(LT),this}intersectObject(t,e=!0,i=[]){return Ub(t,this,i,e),i.sort(PT),i}intersectObjects(t,e=!0,i=[]){for(let a=0,r=t.length;a<r;a++)Ub(t[a],this,i,e);return i.sort(PT),i}}function PT(n,t){return n.distance-t.distance}function Ub(n,t,e,i){let a=!0;if(n.layers.test(t.layers)&&n.raycast(t,e)===!1&&(a=!1),a===!0&&i===!0){const r=n.children;for(let u=0,f=r.length;u<f;u++)Ub(r[u],t,e,!0)}}class lP{constructor(t=1,e=0,i=0){this.radius=t,this.phi=e,this.theta=i}set(t,e,i){return this.radius=t,this.phi=e,this.theta=i,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Fe(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+e*e+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(Fe(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class uP{constructor(t=1,e=0,i=0){this.radius=t,this.theta=e,this.y=i}set(t,e,i){return this.radius=t,this.theta=e,this.y=i,this}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,i){return this.radius=Math.sqrt(t*t+i*i),this.theta=Math.atan2(t,i),this.y=e,this}clone(){return new this.constructor().copy(this)}}class t1{constructor(t,e,i,a){t1.prototype.isMatrix2=!0,this.elements=[1,0,0,1],t!==void 0&&this.set(t,e,i,a)}identity(){return this.set(1,0,0,1),this}fromArray(t,e=0){for(let i=0;i<4;i++)this.elements[i]=t[i+e];return this}set(t,e,i,a){const r=this.elements;return r[0]=t,r[2]=e,r[1]=i,r[3]=a,this}}const zT=new Gt;class cP{constructor(t=new Gt(1/0,1/0),e=new Gt(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=zT.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,zT).distanceTo(t)}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const BT=new K,P0=new K;class fP{constructor(t=new K,e=new K){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){BT.subVectors(t,this.start),P0.subVectors(this.end,this.start);const i=P0.dot(P0);let r=P0.dot(BT)/i;return e&&(r=Fe(r,0,1)),r}closestPointToPoint(t,e,i){const a=this.closestPointToPointParameter(t,e);return this.delta(i).multiplyScalar(a).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const IT=new K;class hP extends Sn{constructor(t,e){super(),this.light=t,this.matrixAutoUpdate=!1,this.color=e,this.type="SpotLightHelper";const i=new Qe,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let u=0,f=1,d=32;u<d;u++,f++){const p=u/d*Math.PI*2,y=f/d*Math.PI*2;a.push(Math.cos(p),Math.sin(p),1,Math.cos(y),Math.sin(y),1)}i.setAttribute("position",new me(a,3));const r=new rs({fog:!1,toneMapped:!1});this.cone=new $o(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),IT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(IT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Fu=new K,z0=new Le,vS=new Le;class dP extends $o{constructor(t){const e=b2(t),i=new Qe,a=[],r=[],u=new fe(0,0,1),f=new fe(0,1,0);for(let p=0;p<e.length;p++){const y=e[p];y.parent&&y.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),r.push(u.r,u.g,u.b),r.push(f.r,f.g,f.b))}i.setAttribute("position",new me(a,3)),i.setAttribute("color",new me(r,3));const d=new rs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,d),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,i=this.geometry,a=i.getAttribute("position");vS.copy(this.root.matrixWorld).invert();for(let r=0,u=0;r<e.length;r++){const f=e[r];f.parent&&f.parent.isBone&&(z0.multiplyMatrices(vS,f.matrixWorld),Fu.setFromMatrixPosition(z0),a.setXYZ(u,Fu.x,Fu.y,Fu.z),z0.multiplyMatrices(vS,f.parent.matrixWorld),Fu.setFromMatrixPosition(z0),a.setXYZ(u+1,Fu.x,Fu.y,Fu.z),u+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose()}}function b2(n){const t=[];n.isBone===!0&&t.push(n);for(let e=0;e<n.children.length;e++)t.push(...b2(n.children[e]));return t}class pP extends Bi{constructor(t,e,i){const a=new mg(e,4,2),r=new $u({wireframe:!0,fog:!1,toneMapped:!1});super(a,r),this.light=t,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const mP=new K,VT=new fe,HT=new fe;class gP extends Sn{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const a=new pg(e);a.rotateY(Math.PI*.5),this.material=new $u({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=a.getAttribute("position"),u=new Float32Array(r.count*3);a.setAttribute("color",new On(u,3)),this.add(new Bi(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");VT.copy(this.light.color),HT.copy(this.light.groundColor);for(let i=0,a=e.count;i<a;i++){const r=i<a/2?VT:HT;e.setXYZ(i,r.r,r.g,r.b)}e.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),t.lookAt(mP.setFromMatrixPosition(this.light.matrixWorld).negate())}}class yP extends $o{constructor(t=10,e=10,i=4473924,a=8947848){i=new fe(i),a=new fe(a);const r=e/2,u=t/e,f=t/2,d=[],p=[];for(let _=0,b=0,E=-f;_<=e;_++,E+=u){d.push(-f,0,E,f,0,E),d.push(E,0,-f,E,0,f);const R=_===r?i:a;R.toArray(p,b),b+=3,R.toArray(p,b),b+=3,R.toArray(p,b),b+=3,R.toArray(p,b),b+=3}const y=new Qe;y.setAttribute("position",new me(d,3)),y.setAttribute("color",new me(p,3));const v=new rs({vertexColors:!0,toneMapped:!1});super(y,v),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class vP extends $o{constructor(t=10,e=16,i=8,a=64,r=4473924,u=8947848){r=new fe(r),u=new fe(u);const f=[],d=[];if(e>1)for(let v=0;v<e;v++){const _=v/e*(Math.PI*2),b=Math.sin(_)*t,E=Math.cos(_)*t;f.push(0,0,0),f.push(b,0,E);const R=v&1?r:u;d.push(R.r,R.g,R.b),d.push(R.r,R.g,R.b)}for(let v=0;v<i;v++){const _=v&1?r:u,b=t-t/i*v;for(let E=0;E<a;E++){let R=E/a*(Math.PI*2),T=Math.sin(R)*b,M=Math.cos(R)*b;f.push(T,0,M),d.push(_.r,_.g,_.b),R=(E+1)/a*(Math.PI*2),T=Math.sin(R)*b,M=Math.cos(R)*b,f.push(T,0,M),d.push(_.r,_.g,_.b)}}const p=new Qe;p.setAttribute("position",new me(f,3)),p.setAttribute("color",new me(d,3));const y=new rs({vertexColors:!0,toneMapped:!1});super(p,y),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const FT=new K,B0=new K,GT=new K;class _P extends Sn{constructor(t,e,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",e===void 0&&(e=1);let a=new Qe;a.setAttribute("position",new me([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new rs({fog:!1,toneMapped:!1});this.lightPlane=new Zu(a,r),this.add(this.lightPlane),a=new Qe,a.setAttribute("position",new me([0,0,0,0,0,1],3)),this.targetLine=new Zu(a,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),FT.setFromMatrixPosition(this.light.matrixWorld),B0.setFromMatrixPosition(this.light.target.matrixWorld),GT.subVectors(B0,FT),this.lightPlane.lookAt(B0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(B0),this.targetLine.scale.z=GT.length()}}const I0=new K,yi=new y_;class xP extends $o{constructor(t){const e=new Qe,i=new rs({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],r=[],u={};f("n1","n2"),f("n2","n4"),f("n4","n3"),f("n3","n1"),f("f1","f2"),f("f2","f4"),f("f4","f3"),f("f3","f1"),f("n1","f1"),f("n2","f2"),f("n3","f3"),f("n4","f4"),f("p","n1"),f("p","n2"),f("p","n3"),f("p","n4"),f("u1","u2"),f("u2","u3"),f("u3","u1"),f("c","t"),f("p","c"),f("cn1","cn2"),f("cn3","cn4"),f("cf1","cf2"),f("cf3","cf4");function f(E,R){d(E),d(R)}function d(E){a.push(0,0,0),r.push(0,0,0),u[E]===void 0&&(u[E]=[]),u[E].push(a.length/3-1)}e.setAttribute("position",new me(a,3)),e.setAttribute("color",new me(r,3)),super(e,i),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const p=new fe(16755200),y=new fe(16711680),v=new fe(43775),_=new fe(16777215),b=new fe(3355443);this.setColors(p,y,v,_,b)}setColors(t,e,i,a,r){const f=this.geometry.getAttribute("color");f.setXYZ(0,t.r,t.g,t.b),f.setXYZ(1,t.r,t.g,t.b),f.setXYZ(2,t.r,t.g,t.b),f.setXYZ(3,t.r,t.g,t.b),f.setXYZ(4,t.r,t.g,t.b),f.setXYZ(5,t.r,t.g,t.b),f.setXYZ(6,t.r,t.g,t.b),f.setXYZ(7,t.r,t.g,t.b),f.setXYZ(8,t.r,t.g,t.b),f.setXYZ(9,t.r,t.g,t.b),f.setXYZ(10,t.r,t.g,t.b),f.setXYZ(11,t.r,t.g,t.b),f.setXYZ(12,t.r,t.g,t.b),f.setXYZ(13,t.r,t.g,t.b),f.setXYZ(14,t.r,t.g,t.b),f.setXYZ(15,t.r,t.g,t.b),f.setXYZ(16,t.r,t.g,t.b),f.setXYZ(17,t.r,t.g,t.b),f.setXYZ(18,t.r,t.g,t.b),f.setXYZ(19,t.r,t.g,t.b),f.setXYZ(20,t.r,t.g,t.b),f.setXYZ(21,t.r,t.g,t.b),f.setXYZ(22,t.r,t.g,t.b),f.setXYZ(23,t.r,t.g,t.b),f.setXYZ(24,e.r,e.g,e.b),f.setXYZ(25,e.r,e.g,e.b),f.setXYZ(26,e.r,e.g,e.b),f.setXYZ(27,e.r,e.g,e.b),f.setXYZ(28,e.r,e.g,e.b),f.setXYZ(29,e.r,e.g,e.b),f.setXYZ(30,e.r,e.g,e.b),f.setXYZ(31,e.r,e.g,e.b),f.setXYZ(32,i.r,i.g,i.b),f.setXYZ(33,i.r,i.g,i.b),f.setXYZ(34,i.r,i.g,i.b),f.setXYZ(35,i.r,i.g,i.b),f.setXYZ(36,i.r,i.g,i.b),f.setXYZ(37,i.r,i.g,i.b),f.setXYZ(38,a.r,a.g,a.b),f.setXYZ(39,a.r,a.g,a.b),f.setXYZ(40,r.r,r.g,r.b),f.setXYZ(41,r.r,r.g,r.b),f.setXYZ(42,r.r,r.g,r.b),f.setXYZ(43,r.r,r.g,r.b),f.setXYZ(44,r.r,r.g,r.b),f.setXYZ(45,r.r,r.g,r.b),f.setXYZ(46,r.r,r.g,r.b),f.setXYZ(47,r.r,r.g,r.b),f.setXYZ(48,r.r,r.g,r.b),f.setXYZ(49,r.r,r.g,r.b),f.needsUpdate=!0}update(){const t=this.geometry,e=this.pointMap,i=1,a=1;yi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const r=this.camera.coordinateSystem===eo?-1:0;Ri("c",e,t,yi,0,0,r),Ri("t",e,t,yi,0,0,1),Ri("n1",e,t,yi,-1,-1,r),Ri("n2",e,t,yi,i,-1,r),Ri("n3",e,t,yi,-1,a,r),Ri("n4",e,t,yi,i,a,r),Ri("f1",e,t,yi,-1,-1,1),Ri("f2",e,t,yi,i,-1,1),Ri("f3",e,t,yi,-1,a,1),Ri("f4",e,t,yi,i,a,1),Ri("u1",e,t,yi,i*.7,a*1.1,r),Ri("u2",e,t,yi,-1*.7,a*1.1,r),Ri("u3",e,t,yi,0,a*2,r),Ri("cf1",e,t,yi,-1,0,1),Ri("cf2",e,t,yi,i,0,1),Ri("cf3",e,t,yi,0,-1,1),Ri("cf4",e,t,yi,0,a,1),Ri("cn1",e,t,yi,-1,0,r),Ri("cn2",e,t,yi,i,0,r),Ri("cn3",e,t,yi,0,-1,r),Ri("cn4",e,t,yi,0,a,r),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ri(n,t,e,i,a,r,u){I0.set(a,r,u).unproject(i);const f=t[n];if(f!==void 0){const d=e.getAttribute("position");for(let p=0,y=f.length;p<y;p++)d.setXYZ(f[p],I0.x,I0.y,I0.z)}}const V0=new ss;class SP extends $o{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(8*3),r=new Qe;r.setIndex(new On(i,1)),r.setAttribute("position",new On(a,3)),super(r,new rs({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&V0.setFromObject(this.object),V0.isEmpty())return;const t=V0.min,e=V0.max,i=this.geometry.attributes.position,a=i.array;a[0]=e.x,a[1]=e.y,a[2]=e.z,a[3]=t.x,a[4]=e.y,a[5]=e.z,a[6]=t.x,a[7]=t.y,a[8]=e.z,a[9]=e.x,a[10]=t.y,a[11]=e.z,a[12]=e.x,a[13]=e.y,a[14]=t.z,a[15]=t.x,a[16]=e.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=e.x,a[22]=t.y,a[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t,e){return super.copy(t,e),this.object=t.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class bP extends $o{constructor(t,e=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new Qe;r.setIndex(new On(i,1)),r.setAttribute("position",new me(a,3)),super(r,new rs({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}}class MP extends Zu{constructor(t,e=1,i=16776960){const a=i,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],u=new Qe;u.setAttribute("position",new me(r,3)),u.computeBoundingSphere(),super(u,new rs({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const f=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new Qe;d.setAttribute("position",new me(f,3)),d.computeBoundingSphere(),this.add(new Bi(d,new $u({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(t)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const qT=new K;let H0,_S;class EP extends Sn{constructor(t=new K(0,0,1),e=new K(0,0,0),i=1,a=16776960,r=i*.2,u=r*.2){super(),this.type="ArrowHelper",H0===void 0&&(H0=new Qe,H0.setAttribute("position",new me([0,0,0,0,1,0],3)),_S=new Cd(0,.5,1,5,1),_S.translate(0,-.5,0)),this.position.copy(e),this.line=new Zu(H0,new rs({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bi(_S,new $u({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(i,r,u)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{qT.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(qT,e)}}setLength(t,e=t*.2,i=e*.2){this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(i,e,i),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class TP extends $o{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new Qe;a.setAttribute("position",new me(e,3)),a.setAttribute("color",new me(i,3));const r=new rs({vertexColors:!0,toneMapped:!1});super(a,r),this.type="AxesHelper"}setColors(t,e,i){const a=new fe,r=this.geometry.attributes.color.array;return a.set(t),a.toArray(r,0),a.toArray(r,3),a.set(e),a.toArray(r,6),a.toArray(r,9),a.set(i),a.toArray(r,12),a.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class M2{constructor(){this.type="ShapePath",this.color=new fe,this.subPaths=[],this.currentPath=null}moveTo(t,e){return this.currentPath=new qm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}lineTo(t,e){return this.currentPath.lineTo(t,e),this}quadraticCurveTo(t,e,i,a){return this.currentPath.quadraticCurveTo(t,e,i,a),this}bezierCurveTo(t,e,i,a,r,u){return this.currentPath.bezierCurveTo(t,e,i,a,r,u),this}splineThru(t){return this.currentPath.splineThru(t),this}toShapes(t){function e(M){const C=[];for(let D=0,O=M.length;D<O;D++){const N=M[D],L=new Mf;L.curves=N.curves,C.push(L)}return C}function i(M,C){const D=C.length;let O=!1;for(let N=D-1,L=0;L<D;N=L++){let H=C[N],G=C[L],B=G.x-H.x,z=G.y-H.y;if(Math.abs(z)>Number.EPSILON){if(z<0&&(H=C[L],B=-B,G=C[N],z=-z),M.y<H.y||M.y>G.y)continue;if(M.y===H.y){if(M.x===H.x)return!0}else{const j=z*(M.x-H.x)-B*(M.y-H.y);if(j===0)return!0;if(j<0)continue;O=!O}}else{if(M.y!==H.y)continue;if(G.x<=M.x&&M.x<=H.x||H.x<=M.x&&M.x<=G.x)return!0}}return O}const a=Yo.isClockWise,r=this.subPaths;if(r.length===0)return[];let u,f,d;const p=[];if(r.length===1)return f=r[0],d=new Mf,d.curves=f.curves,p.push(d),p;let y=!a(r[0].getPoints());y=t?!y:y;const v=[],_=[];let b=[],E=0,R;_[E]=void 0,b[E]=[];for(let M=0,C=r.length;M<C;M++)f=r[M],R=f.getPoints(),u=a(R),u=t?!u:u,u?(!y&&_[E]&&E++,_[E]={s:new Mf,p:R},_[E].s.curves=f.curves,y&&E++,b[E]=[]):b[E].push({h:f,p:R[0]});if(!_[0])return e(r);if(_.length>1){let M=!1,C=0;for(let D=0,O=_.length;D<O;D++)v[D]=[];for(let D=0,O=_.length;D<O;D++){const N=b[D];for(let L=0;L<N.length;L++){const H=N[L];let G=!0;for(let B=0;B<_.length;B++)i(H.p,_[B].p)&&(D!==B&&C++,G?(G=!1,v[B].push(H)):M=!0);G&&v[D].push(H)}}C>0&&M===!1&&(b=v)}let T;for(let M=0,C=_.length;M<C;M++){d=_[M].s,p.push(d),T=b[M];for(let D=0,O=T.length;D<O;D++)d.holes.push(T[D].h)}return p}}class AP extends Jo{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}}function RP(n,t){const e=n.image&&n.image.width?n.image.width/n.image.height:1;return e>t?(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function wP(n,t){const e=n.image&&n.image.width?n.image.width/n.image.height:1;return e>t?(n.repeat.x=t/e,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=e/t,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function CP(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function Nb(n,t,e,i){const a=DP(i);switch(e){case _M:return n*t;case SM:return n*t;case bM:return n*t*2;case f_:return n*t/a.components*a.byteLength;case lg:return n*t/a.components*a.byteLength;case MM:return n*t*2/a.components*a.byteLength;case h_:return n*t*2/a.components*a.byteLength;case xM:return n*t*3/a.components*a.byteLength;case Pa:return n*t*4/a.components*a.byteLength;case d_:return n*t*4/a.components*a.byteLength;case xm:case Sm:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case bm:case Mm:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case vv:case xv:return Math.max(n,16)*Math.max(t,8)/4;case yv:case _v:return Math.max(n,8)*Math.max(t,8)/2;case Sv:case bv:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*8;case Mv:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Ev:return Math.floor((n+3)/4)*Math.floor((t+3)/4)*16;case Tv:return Math.floor((n+4)/5)*Math.floor((t+3)/4)*16;case Av:return Math.floor((n+4)/5)*Math.floor((t+4)/5)*16;case Rv:return Math.floor((n+5)/6)*Math.floor((t+4)/5)*16;case wv:return Math.floor((n+5)/6)*Math.floor((t+5)/6)*16;case Cv:return Math.floor((n+7)/8)*Math.floor((t+4)/5)*16;case Dv:return Math.floor((n+7)/8)*Math.floor((t+5)/6)*16;case Ov:return Math.floor((n+7)/8)*Math.floor((t+7)/8)*16;case Uv:return Math.floor((n+9)/10)*Math.floor((t+4)/5)*16;case Nv:return Math.floor((n+9)/10)*Math.floor((t+5)/6)*16;case Lv:return Math.floor((n+9)/10)*Math.floor((t+7)/8)*16;case Pv:return Math.floor((n+9)/10)*Math.floor((t+9)/10)*16;case zv:return Math.floor((n+11)/12)*Math.floor((t+9)/10)*16;case Bv:return Math.floor((n+11)/12)*Math.floor((t+11)/12)*16;case Em:case Iv:case Vv:return Math.ceil(n/4)*Math.ceil(t/4)*16;case EM:case Hv:return Math.ceil(n/4)*Math.ceil(t/4)*8;case Fv:case Gv:return Math.ceil(n/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function DP(n){switch(n){case no:case gM:return{byteLength:1,components:1};case dd:case yM:case Rd:return{byteLength:2,components:1};case u_:case c_:return{byteLength:2,components:4};case Vl:case l_:case As:return{byteLength:4,components:1};case vM:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class OP{static contain(t,e){return RP(t,e)}static cover(t,e){return wP(t,e)}static fill(t){return CP(t)}static getByteLength(t,e,i,a){return Nb(t,e,i,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:s_}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=s_);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function E2(){let n=null,t=!1,e=null,i=null;function a(r,u){e(r,u),i=n.requestAnimationFrame(a)}return{start:function(){t!==!0&&e!==null&&(i=n.requestAnimationFrame(a),t=!0)},stop:function(){n.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(r){e=r},setContext:function(r){n=r}}}function UP(n){const t=new WeakMap;function e(f,d){const p=f.array,y=f.usage,v=p.byteLength,_=n.createBuffer();n.bindBuffer(d,_),n.bufferData(d,p,y),f.onUploadCallback();let b;if(p instanceof Float32Array)b=n.FLOAT;else if(p instanceof Uint16Array)f.isFloat16BufferAttribute?b=n.HALF_FLOAT:b=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)b=n.SHORT;else if(p instanceof Uint32Array)b=n.UNSIGNED_INT;else if(p instanceof Int32Array)b=n.INT;else if(p instanceof Int8Array)b=n.BYTE;else if(p instanceof Uint8Array)b=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)b=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:_,type:b,bytesPerElement:p.BYTES_PER_ELEMENT,version:f.version,size:v}}function i(f,d,p){const y=d.array,v=d.updateRanges;if(n.bindBuffer(p,f),v.length===0)n.bufferSubData(p,0,y);else{v.sort((b,E)=>b.start-E.start);let _=0;for(let b=1;b<v.length;b++){const E=v[_],R=v[b];R.start<=E.start+E.count+1?E.count=Math.max(E.count,R.start+R.count-E.start):(++_,v[_]=R)}v.length=_+1;for(let b=0,E=v.length;b<E;b++){const R=v[b];n.bufferSubData(p,R.start*y.BYTES_PER_ELEMENT,y,R.start,R.count)}d.clearUpdateRanges()}d.onUploadCallback()}function a(f){return f.isInterleavedBufferAttribute&&(f=f.data),t.get(f)}function r(f){f.isInterleavedBufferAttribute&&(f=f.data);const d=t.get(f);d&&(n.deleteBuffer(d.buffer),t.delete(f))}function u(f,d){if(f.isInterleavedBufferAttribute&&(f=f.data),f.isGLBufferAttribute){const y=t.get(f);(!y||y.version<f.version)&&t.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}const p=t.get(f);if(p===void 0)t.set(f,e(f,d));else if(p.version<f.version){if(p.size!==f.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(p.buffer,f,d),p.version=f.version}}return{get:a,remove:r,update:u}}var NP=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,LP=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,PP=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,zP=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,BP=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,IP=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,VP=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,HP=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,FP=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,GP=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,qP=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,XP=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,kP=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,jP=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,YP=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,WP=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,ZP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,KP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,QP=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,JP=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,$P=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,tz=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ez=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,nz=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,iz=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,az=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,sz=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,rz=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,oz=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,lz=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,uz="gl_FragColor = linearToOutputTexel( gl_FragColor );",cz=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,fz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,hz=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,dz=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,pz=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,mz=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,gz=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,yz=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,vz=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,_z=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,xz=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Sz=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bz=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Mz=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Ez=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Tz=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Az=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Rz=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,wz=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Cz=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Dz=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Oz=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Uz=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Nz=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Lz=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Pz=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,zz=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Bz=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Iz=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Vz=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Hz=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Fz=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Gz=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qz=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Xz=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,kz=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,jz=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Yz=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Wz=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Zz=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Kz=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Qz=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Jz=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$z=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tB=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,eB=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,nB=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,iB=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,aB=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,sB=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,rB=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,oB=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,lB=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,uB=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,cB=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,fB=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,hB=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,dB=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,pB=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,mB=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,gB=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,yB=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,vB=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,_B=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,xB=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,SB=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,bB=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,MB=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,EB=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,TB=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,AB=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,RB=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,wB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,DB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,OB=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const UB=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,NB=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,PB=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,BB=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,VB=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,HB=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,FB=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,GB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,qB=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,XB=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kB=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,YB=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WB=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ZB=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KB=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,QB=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JB=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,$B=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,t4=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,e4=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n4=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,i4=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,a4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,s4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r4=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,o4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,l4=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,u4=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,c4=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,f4=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Ke={alphahash_fragment:NP,alphahash_pars_fragment:LP,alphamap_fragment:PP,alphamap_pars_fragment:zP,alphatest_fragment:BP,alphatest_pars_fragment:IP,aomap_fragment:VP,aomap_pars_fragment:HP,batching_pars_vertex:FP,batching_vertex:GP,begin_vertex:qP,beginnormal_vertex:XP,bsdfs:kP,iridescence_fragment:jP,bumpmap_pars_fragment:YP,clipping_planes_fragment:WP,clipping_planes_pars_fragment:ZP,clipping_planes_pars_vertex:KP,clipping_planes_vertex:QP,color_fragment:JP,color_pars_fragment:$P,color_pars_vertex:tz,color_vertex:ez,common:nz,cube_uv_reflection_fragment:iz,defaultnormal_vertex:az,displacementmap_pars_vertex:sz,displacementmap_vertex:rz,emissivemap_fragment:oz,emissivemap_pars_fragment:lz,colorspace_fragment:uz,colorspace_pars_fragment:cz,envmap_fragment:fz,envmap_common_pars_fragment:hz,envmap_pars_fragment:dz,envmap_pars_vertex:pz,envmap_physical_pars_fragment:Tz,envmap_vertex:mz,fog_vertex:gz,fog_pars_vertex:yz,fog_fragment:vz,fog_pars_fragment:_z,gradientmap_pars_fragment:xz,lightmap_pars_fragment:Sz,lights_lambert_fragment:bz,lights_lambert_pars_fragment:Mz,lights_pars_begin:Ez,lights_toon_fragment:Az,lights_toon_pars_fragment:Rz,lights_phong_fragment:wz,lights_phong_pars_fragment:Cz,lights_physical_fragment:Dz,lights_physical_pars_fragment:Oz,lights_fragment_begin:Uz,lights_fragment_maps:Nz,lights_fragment_end:Lz,logdepthbuf_fragment:Pz,logdepthbuf_pars_fragment:zz,logdepthbuf_pars_vertex:Bz,logdepthbuf_vertex:Iz,map_fragment:Vz,map_pars_fragment:Hz,map_particle_fragment:Fz,map_particle_pars_fragment:Gz,metalnessmap_fragment:qz,metalnessmap_pars_fragment:Xz,morphinstance_vertex:kz,morphcolor_vertex:jz,morphnormal_vertex:Yz,morphtarget_pars_vertex:Wz,morphtarget_vertex:Zz,normal_fragment_begin:Kz,normal_fragment_maps:Qz,normal_pars_fragment:Jz,normal_pars_vertex:$z,normal_vertex:tB,normalmap_pars_fragment:eB,clearcoat_normal_fragment_begin:nB,clearcoat_normal_fragment_maps:iB,clearcoat_pars_fragment:aB,iridescence_pars_fragment:sB,opaque_fragment:rB,packing:oB,premultiplied_alpha_fragment:lB,project_vertex:uB,dithering_fragment:cB,dithering_pars_fragment:fB,roughnessmap_fragment:hB,roughnessmap_pars_fragment:dB,shadowmap_pars_fragment:pB,shadowmap_pars_vertex:mB,shadowmap_vertex:gB,shadowmask_pars_fragment:yB,skinbase_vertex:vB,skinning_pars_vertex:_B,skinning_vertex:xB,skinnormal_vertex:SB,specularmap_fragment:bB,specularmap_pars_fragment:MB,tonemapping_fragment:EB,tonemapping_pars_fragment:TB,transmission_fragment:AB,transmission_pars_fragment:RB,uv_pars_fragment:wB,uv_pars_vertex:CB,uv_vertex:DB,worldpos_vertex:OB,background_vert:UB,background_frag:NB,backgroundCube_vert:LB,backgroundCube_frag:PB,cube_vert:zB,cube_frag:BB,depth_vert:IB,depth_frag:VB,distanceRGBA_vert:HB,distanceRGBA_frag:FB,equirect_vert:GB,equirect_frag:qB,linedashed_vert:XB,linedashed_frag:kB,meshbasic_vert:jB,meshbasic_frag:YB,meshlambert_vert:WB,meshlambert_frag:ZB,meshmatcap_vert:KB,meshmatcap_frag:QB,meshnormal_vert:JB,meshnormal_frag:$B,meshphong_vert:t4,meshphong_frag:e4,meshphysical_vert:n4,meshphysical_frag:i4,meshtoon_vert:a4,meshtoon_frag:s4,points_vert:r4,points_frag:o4,shadow_vert:l4,shadow_frag:u4,sprite_vert:c4,sprite_frag:f4},re={common:{diffuse:{value:new fe(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Xe},alphaMap:{value:null},alphaMapTransform:{value:new Xe},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Xe}},envmap:{envMap:{value:null},envMapRotation:{value:new Xe},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Xe}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Xe}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Xe},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Xe},normalScale:{value:new Gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Xe},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Xe}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Xe}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Xe}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new fe(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new fe(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Xe},alphaTest:{value:0},uvTransform:{value:new Xe}},sprite:{diffuse:{value:new fe(16777215)},opacity:{value:1},center:{value:new Gt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Xe},alphaMap:{value:null},alphaMapTransform:{value:new Xe},alphaTest:{value:0}}},to={basic:{uniforms:es([re.common,re.specularmap,re.envmap,re.aomap,re.lightmap,re.fog]),vertexShader:Ke.meshbasic_vert,fragmentShader:Ke.meshbasic_frag},lambert:{uniforms:es([re.common,re.specularmap,re.envmap,re.aomap,re.lightmap,re.emissivemap,re.bumpmap,re.normalmap,re.displacementmap,re.fog,re.lights,{emissive:{value:new fe(0)}}]),vertexShader:Ke.meshlambert_vert,fragmentShader:Ke.meshlambert_frag},phong:{uniforms:es([re.common,re.specularmap,re.envmap,re.aomap,re.lightmap,re.emissivemap,re.bumpmap,re.normalmap,re.displacementmap,re.fog,re.lights,{emissive:{value:new fe(0)},specular:{value:new fe(1118481)},shininess:{value:30}}]),vertexShader:Ke.meshphong_vert,fragmentShader:Ke.meshphong_frag},standard:{uniforms:es([re.common,re.envmap,re.aomap,re.lightmap,re.emissivemap,re.bumpmap,re.normalmap,re.displacementmap,re.roughnessmap,re.metalnessmap,re.fog,re.lights,{emissive:{value:new fe(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ke.meshphysical_vert,fragmentShader:Ke.meshphysical_frag},toon:{uniforms:es([re.common,re.aomap,re.lightmap,re.emissivemap,re.bumpmap,re.normalmap,re.displacementmap,re.gradientmap,re.fog,re.lights,{emissive:{value:new fe(0)}}]),vertexShader:Ke.meshtoon_vert,fragmentShader:Ke.meshtoon_frag},matcap:{uniforms:es([re.common,re.bumpmap,re.normalmap,re.displacementmap,re.fog,{matcap:{value:null}}]),vertexShader:Ke.meshmatcap_vert,fragmentShader:Ke.meshmatcap_frag},points:{uniforms:es([re.points,re.fog]),vertexShader:Ke.points_vert,fragmentShader:Ke.points_frag},dashed:{uniforms:es([re.common,re.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ke.linedashed_vert,fragmentShader:Ke.linedashed_frag},depth:{uniforms:es([re.common,re.displacementmap]),vertexShader:Ke.depth_vert,fragmentShader:Ke.depth_frag},normal:{uniforms:es([re.common,re.bumpmap,re.normalmap,re.displacementmap,{opacity:{value:1}}]),vertexShader:Ke.meshnormal_vert,fragmentShader:Ke.meshnormal_frag},sprite:{uniforms:es([re.sprite,re.fog]),vertexShader:Ke.sprite_vert,fragmentShader:Ke.sprite_frag},background:{uniforms:{uvTransform:{value:new Xe},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Ke.background_vert,fragmentShader:Ke.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Xe}},vertexShader:Ke.backgroundCube_vert,fragmentShader:Ke.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Ke.cube_vert,fragmentShader:Ke.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ke.equirect_vert,fragmentShader:Ke.equirect_frag},distanceRGBA:{uniforms:es([re.common,re.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ke.distanceRGBA_vert,fragmentShader:Ke.distanceRGBA_frag},shadow:{uniforms:es([re.lights,re.fog,{color:{value:new fe(0)},opacity:{value:1}}]),vertexShader:Ke.shadow_vert,fragmentShader:Ke.shadow_frag}};to.physical={uniforms:es([to.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Xe},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Xe},clearcoatNormalScale:{value:new Gt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Xe},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Xe},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Xe},sheen:{value:0},sheenColor:{value:new fe(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Xe},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Xe},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Xe},transmissionSamplerSize:{value:new Gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Xe},attenuationDistance:{value:0},attenuationColor:{value:new fe(0)},specularColor:{value:new fe(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Xe},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Xe},anisotropyVector:{value:new Gt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Xe}}]),vertexShader:Ke.meshphysical_vert,fragmentShader:Ke.meshphysical_frag};const F0={r:0,b:0,g:0},of=new Qs,h4=new Le;function d4(n,t,e,i,a,r,u){const f=new fe(0);let d=r===!0?0:1,p,y,v=null,_=0,b=null;function E(D){let O=D.isScene===!0?D.background:null;return O&&O.isTexture&&(O=(D.backgroundBlurriness>0?e:t).get(O)),O}function R(D){let O=!1;const N=E(D);N===null?M(f,d):N&&N.isColor&&(M(N,1),O=!0);const L=n.xr.getEnvironmentBlendMode();L==="additive"?i.buffers.color.setClear(0,0,0,1,u):L==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,u),(n.autoClear||O)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function T(D,O){const N=E(O);N&&(N.isCubeTexture||N.mapping===Ad)?(y===void 0&&(y=new Bi(new Of(1,1,1),new io({name:"BackgroundCubeMaterial",uniforms:_d(to.backgroundCube.uniforms),vertexShader:to.backgroundCube.vertexShader,fragmentShader:to.backgroundCube.fragmentShader,side:as,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),y.geometry.deleteAttribute("normal"),y.geometry.deleteAttribute("uv"),y.onBeforeRender=function(L,H,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(y.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(y)),of.copy(O.backgroundRotation),of.x*=-1,of.y*=-1,of.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(of.y*=-1,of.z*=-1),y.material.uniforms.envMap.value=N,y.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,y.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,y.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,y.material.uniforms.backgroundRotation.value.setFromMatrix4(h4.makeRotationFromEuler(of)),y.material.toneMapped=mn.getTransfer(N.colorSpace)!==In,(v!==N||_!==N.version||b!==n.toneMapping)&&(y.material.needsUpdate=!0,v=N,_=N.version,b=n.toneMapping),y.layers.enableAll(),D.unshift(y,y.geometry,y.material,0,0,null)):N&&N.isTexture&&(p===void 0&&(p=new Bi(new Dd(2,2),new io({name:"BackgroundMaterial",uniforms:_d(to.background.uniforms),vertexShader:to.background.vertexShader,fragmentShader:to.background.fragmentShader,side:Bl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(p)),p.material.uniforms.t2D.value=N,p.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,p.material.toneMapped=mn.getTransfer(N.colorSpace)!==In,N.matrixAutoUpdate===!0&&N.updateMatrix(),p.material.uniforms.uvTransform.value.copy(N.matrix),(v!==N||_!==N.version||b!==n.toneMapping)&&(p.material.needsUpdate=!0,v=N,_=N.version,b=n.toneMapping),p.layers.enableAll(),D.unshift(p,p.geometry,p.material,0,0,null))}function M(D,O){D.getRGB(F0,bC(n)),i.buffers.color.setClear(F0.r,F0.g,F0.b,O,u)}function C(){y!==void 0&&(y.geometry.dispose(),y.material.dispose(),y=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return f},setClearColor:function(D,O=1){f.set(D),d=O,M(f,d)},getClearAlpha:function(){return d},setClearAlpha:function(D){d=D,M(f,d)},render:R,addToRenderList:T,dispose:C}}function p4(n,t){const e=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},a=_(null);let r=a,u=!1;function f(z,j,at,nt,Q){let rt=!1;const I=v(nt,at,j);r!==I&&(r=I,p(r.object)),rt=b(z,nt,at,Q),rt&&E(z,nt,at,Q),Q!==null&&t.update(Q,n.ELEMENT_ARRAY_BUFFER),(rt||u)&&(u=!1,O(z,j,at,nt),Q!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(Q).buffer))}function d(){return n.createVertexArray()}function p(z){return n.bindVertexArray(z)}function y(z){return n.deleteVertexArray(z)}function v(z,j,at){const nt=at.wireframe===!0;let Q=i[z.id];Q===void 0&&(Q={},i[z.id]=Q);let rt=Q[j.id];rt===void 0&&(rt={},Q[j.id]=rt);let I=rt[nt];return I===void 0&&(I=_(d()),rt[nt]=I),I}function _(z){const j=[],at=[],nt=[];for(let Q=0;Q<e;Q++)j[Q]=0,at[Q]=0,nt[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:at,attributeDivisors:nt,object:z,attributes:{},index:null}}function b(z,j,at,nt){const Q=r.attributes,rt=j.attributes;let I=0;const Z=at.getAttributes();for(const W in Z)if(Z[W].location>=0){const F=Q[W];let $=rt[W];if($===void 0&&(W==="instanceMatrix"&&z.instanceMatrix&&($=z.instanceMatrix),W==="instanceColor"&&z.instanceColor&&($=z.instanceColor)),F===void 0||F.attribute!==$||$&&F.data!==$.data)return!0;I++}return r.attributesNum!==I||r.index!==nt}function E(z,j,at,nt){const Q={},rt=j.attributes;let I=0;const Z=at.getAttributes();for(const W in Z)if(Z[W].location>=0){let F=rt[W];F===void 0&&(W==="instanceMatrix"&&z.instanceMatrix&&(F=z.instanceMatrix),W==="instanceColor"&&z.instanceColor&&(F=z.instanceColor));const $={};$.attribute=F,F&&F.data&&($.data=F.data),Q[W]=$,I++}r.attributes=Q,r.attributesNum=I,r.index=nt}function R(){const z=r.newAttributes;for(let j=0,at=z.length;j<at;j++)z[j]=0}function T(z){M(z,0)}function M(z,j){const at=r.newAttributes,nt=r.enabledAttributes,Q=r.attributeDivisors;at[z]=1,nt[z]===0&&(n.enableVertexAttribArray(z),nt[z]=1),Q[z]!==j&&(n.vertexAttribDivisor(z,j),Q[z]=j)}function C(){const z=r.newAttributes,j=r.enabledAttributes;for(let at=0,nt=j.length;at<nt;at++)j[at]!==z[at]&&(n.disableVertexAttribArray(at),j[at]=0)}function D(z,j,at,nt,Q,rt,I){I===!0?n.vertexAttribIPointer(z,j,at,Q,rt):n.vertexAttribPointer(z,j,at,nt,Q,rt)}function O(z,j,at,nt){R();const Q=nt.attributes,rt=at.getAttributes(),I=j.defaultAttributeValues;for(const Z in rt){const W=rt[Z];if(W.location>=0){let J=Q[Z];if(J===void 0&&(Z==="instanceMatrix"&&z.instanceMatrix&&(J=z.instanceMatrix),Z==="instanceColor"&&z.instanceColor&&(J=z.instanceColor)),J!==void 0){const F=J.normalized,$=J.itemSize,mt=t.get(J);if(mt===void 0)continue;const Tt=mt.buffer,st=mt.type,Et=mt.bytesPerElement,Bt=st===n.INT||st===n.UNSIGNED_INT||J.gpuType===l_;if(J.isInterleavedBufferAttribute){const Xt=J.data,Zt=Xt.stride,Me=J.offset;if(Xt.isInstancedInterleavedBuffer){for(let ge=0;ge<W.locationSize;ge++)M(W.location+ge,Xt.meshPerAttribute);z.isInstancedMesh!==!0&&nt._maxInstanceCount===void 0&&(nt._maxInstanceCount=Xt.meshPerAttribute*Xt.count)}else for(let ge=0;ge<W.locationSize;ge++)T(W.location+ge);n.bindBuffer(n.ARRAY_BUFFER,Tt);for(let ge=0;ge<W.locationSize;ge++)D(W.location+ge,$/W.locationSize,st,F,Zt*Et,(Me+$/W.locationSize*ge)*Et,Bt)}else{if(J.isInstancedBufferAttribute){for(let Xt=0;Xt<W.locationSize;Xt++)M(W.location+Xt,J.meshPerAttribute);z.isInstancedMesh!==!0&&nt._maxInstanceCount===void 0&&(nt._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let Xt=0;Xt<W.locationSize;Xt++)T(W.location+Xt);n.bindBuffer(n.ARRAY_BUFFER,Tt);for(let Xt=0;Xt<W.locationSize;Xt++)D(W.location+Xt,$/W.locationSize,st,F,$*Et,$/W.locationSize*Xt*Et,Bt)}}else if(I!==void 0){const F=I[Z];if(F!==void 0)switch(F.length){case 2:n.vertexAttrib2fv(W.location,F);break;case 3:n.vertexAttrib3fv(W.location,F);break;case 4:n.vertexAttrib4fv(W.location,F);break;default:n.vertexAttrib1fv(W.location,F)}}}}C()}function N(){G();for(const z in i){const j=i[z];for(const at in j){const nt=j[at];for(const Q in nt)y(nt[Q].object),delete nt[Q];delete j[at]}delete i[z]}}function L(z){if(i[z.id]===void 0)return;const j=i[z.id];for(const at in j){const nt=j[at];for(const Q in nt)y(nt[Q].object),delete nt[Q];delete j[at]}delete i[z.id]}function H(z){for(const j in i){const at=i[j];if(at[z.id]===void 0)continue;const nt=at[z.id];for(const Q in nt)y(nt[Q].object),delete nt[Q];delete at[z.id]}}function G(){B(),u=!0,r!==a&&(r=a,p(r.object))}function B(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:f,reset:G,resetDefaultState:B,dispose:N,releaseStatesOfGeometry:L,releaseStatesOfProgram:H,initAttributes:R,enableAttribute:T,disableUnusedAttributes:C}}function m4(n,t,e){let i;function a(p){i=p}function r(p,y){n.drawArrays(i,p,y),e.update(y,i,1)}function u(p,y,v){v!==0&&(n.drawArraysInstanced(i,p,y,v),e.update(y,i,v))}function f(p,y,v){if(v===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,p,0,y,0,v);let b=0;for(let E=0;E<v;E++)b+=y[E];e.update(b,i,1)}function d(p,y,v,_){if(v===0)return;const b=t.get("WEBGL_multi_draw");if(b===null)for(let E=0;E<p.length;E++)u(p[E],y[E],_[E]);else{b.multiDrawArraysInstancedWEBGL(i,p,0,y,0,_,0,v);let E=0;for(let R=0;R<v;R++)E+=y[R]*_[R];e.update(E,i,1)}}this.setMode=a,this.render=r,this.renderInstances=u,this.renderMultiDraw=f,this.renderMultiDrawInstances=d}function g4(n,t,e,i){let a;function r(){if(a!==void 0)return a;if(t.has("EXT_texture_filter_anisotropic")===!0){const H=t.get("EXT_texture_filter_anisotropic");a=n.getParameter(H.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function u(H){return!(H!==Pa&&i.convert(H)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function f(H){const G=H===Rd&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(H!==no&&i.convert(H)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&H!==As&&!G)}function d(H){if(H==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";H="mediump"}return H==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=e.precision!==void 0?e.precision:"highp";const y=d(p);y!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",y,"instead."),p=y);const v=e.logarithmicDepthBuffer===!0,_=e.reverseDepthBuffer===!0&&t.has("EXT_clip_control"),b=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),E=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),R=n.getParameter(n.MAX_TEXTURE_SIZE),T=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),M=n.getParameter(n.MAX_VERTEX_ATTRIBS),C=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),D=n.getParameter(n.MAX_VARYING_VECTORS),O=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),N=E>0,L=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:d,textureFormatReadable:u,textureTypeReadable:f,precision:p,logarithmicDepthBuffer:v,reverseDepthBuffer:_,maxTextures:b,maxVertexTextures:E,maxTextureSize:R,maxCubemapSize:T,maxAttributes:M,maxVertexUniforms:C,maxVaryings:D,maxFragmentUniforms:O,vertexTextures:N,maxSamples:L}}function y4(n){const t=this;let e=null,i=0,a=!1,r=!1;const u=new qu,f=new Xe,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(v,_){const b=v.length!==0||_||i!==0||a;return a=_,i=v.length,b},this.beginShadows=function(){r=!0,y(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(v,_){e=y(v,_,0)},this.setState=function(v,_,b){const E=v.clippingPlanes,R=v.clipIntersection,T=v.clipShadows,M=n.get(v);if(!a||E===null||E.length===0||r&&!T)r?y(null):p();else{const C=r?0:i,D=C*4;let O=M.clippingState||null;d.value=O,O=y(E,_,D,b);for(let N=0;N!==D;++N)O[N]=e[N];M.clippingState=O,this.numIntersection=R?this.numPlanes:0,this.numPlanes+=C}};function p(){d.value!==e&&(d.value=e,d.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function y(v,_,b,E){const R=v!==null?v.length:0;let T=null;if(R!==0){if(T=d.value,E!==!0||T===null){const M=b+R*4,C=_.matrixWorldInverse;f.getNormalMatrix(C),(T===null||T.length<M)&&(T=new Float32Array(M));for(let D=0,O=b;D!==R;++D,O+=4)u.copy(v[D]).applyMatrix4(C,f),u.normal.toArray(T,O),T[O+3]=u.constant}d.value=T,d.needsUpdate=!0}return t.numPlanes=R,t.numIntersection=0,T}}function v4(n){let t=new WeakMap;function e(u,f){return f===Nm?u.mapping=Il:f===Lm&&(u.mapping=Yu),u}function i(u){if(u&&u.isTexture){const f=u.mapping;if(f===Nm||f===Lm)if(t.has(u)){const d=t.get(u).texture;return e(d,u.mapping)}else{const d=u.image;if(d&&d.height>0){const p=new TC(d.height);return p.fromEquirectangularTexture(n,u),t.set(u,p),u.addEventListener("dispose",a),e(p.texture,u.mapping)}else return null}}return u}function a(u){const f=u.target;f.removeEventListener("dispose",a);const d=t.get(f);d!==void 0&&(t.delete(f),d.dispose())}function r(){t=new WeakMap}return{get:i,dispose:r}}const rd=4,XT=[.125,.215,.35,.446,.526,.582],df=20,xS=new vg,kT=new fe;let SS=null,bS=0,MS=0,ES=!1;const ff=(1+Math.sqrt(5))/2,$h=1/ff,jT=[new K(-ff,$h,0),new K(ff,$h,0),new K(-$h,0,ff),new K($h,0,ff),new K(0,ff,-$h),new K(0,ff,$h),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)],_4=new K;class Lb{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,a=100,r={}){const{size:u=256,position:f=_4}=r;SS=this._renderer.getRenderTarget(),bS=this._renderer.getActiveCubeFace(),MS=this._renderer.getActiveMipmapLevel(),ES=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(u);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(t,i,a,d,f),e>0&&this._blur(d,0,0,e),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ZT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=WT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(SS,bS,MS),this._renderer.xr.enabled=ES,t.scissorTest=!1,G0(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===Il||t.mapping===Yu?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),SS=this._renderer.getRenderTarget(),bS=this._renderer.getActiveCubeFace(),MS=this._renderer.getActiveMipmapLevel(),ES=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:Wi,minFilter:Wi,generateMipmaps:!1,type:Rd,format:Pa,colorSpace:Wu,depthBuffer:!1},a=YT(t,e,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=YT(t,e,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=x4(r)),this._blurMaterial=S4(r,t,e)}return a}_compileMaterial(t){const e=new Bi(this._lodPlanes[0],t);this._renderer.compile(e,xS)}_sceneToCubeUV(t,e,i,a,r){const d=new aa(90,1,e,i),p=[1,-1,1,1,1,1],y=[1,1,1,-1,-1,-1],v=this._renderer,_=v.autoClear,b=v.toneMapping;v.getClearColor(kT),v.toneMapping=ko,v.autoClear=!1;const E=new $u({name:"PMREM.Background",side:as,depthWrite:!1,depthTest:!1}),R=new Bi(new Of,E);let T=!1;const M=t.background;M?M.isColor&&(E.color.copy(M),t.background=null,T=!0):(E.color.copy(kT),T=!0);for(let C=0;C<6;C++){const D=C%3;D===0?(d.up.set(0,p[C],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x+y[C],r.y,r.z)):D===1?(d.up.set(0,0,p[C]),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y+y[C],r.z)):(d.up.set(0,p[C],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y,r.z+y[C]));const O=this._cubeSize;G0(a,D*O,C>2?O:0,O,O),v.setRenderTarget(a),T&&v.render(R,d),v.render(t,d)}R.geometry.dispose(),R.material.dispose(),v.toneMapping=b,v.autoClear=_,t.background=M}_textureToCubeUV(t,e){const i=this._renderer,a=t.mapping===Il||t.mapping===Yu;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=ZT()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=WT());const r=a?this._cubemapMaterial:this._equirectMaterial,u=new Bi(this._lodPlanes[0],r),f=r.uniforms;f.envMap.value=t;const d=this._cubeSize;G0(e,0,0,3*d,2*d),i.setRenderTarget(e),i.render(u,xS)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;const a=this._lodPlanes.length;for(let r=1;r<a;r++){const u=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),f=jT[(a-r-1)%jT.length];this._blur(t,r-1,r,u,f)}e.autoClear=i}_blur(t,e,i,a,r){const u=this._pingPongRenderTarget;this._halfBlur(t,u,e,i,a,"latitudinal",r),this._halfBlur(u,t,i,i,a,"longitudinal",r)}_halfBlur(t,e,i,a,r,u,f){const d=this._renderer,p=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const y=3,v=new Bi(this._lodPlanes[a],p),_=p.uniforms,b=this._sizeLods[i]-1,E=isFinite(r)?Math.PI/(2*b):2*Math.PI/(2*df-1),R=r/E,T=isFinite(r)?1+Math.floor(y*R):df;T>df&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${df}`);const M=[];let C=0;for(let H=0;H<df;++H){const G=H/R,B=Math.exp(-G*G/2);M.push(B),H===0?C+=B:H<T&&(C+=2*B)}for(let H=0;H<M.length;H++)M[H]=M[H]/C;_.envMap.value=t.texture,_.samples.value=T,_.weights.value=M,_.latitudinal.value=u==="latitudinal",f&&(_.poleAxis.value=f);const{_lodMax:D}=this;_.dTheta.value=E,_.mipInt.value=D-i;const O=this._sizeLods[a],N=3*O*(a>D-rd?a-D+rd:0),L=4*(this._cubeSize-O);G0(e,N,L,3*O,2*O),d.setRenderTarget(e),d.render(v,xS)}}function x4(n){const t=[],e=[],i=[];let a=n;const r=n-rd+1+XT.length;for(let u=0;u<r;u++){const f=Math.pow(2,a);e.push(f);let d=1/f;u>n-rd?d=XT[u-n+rd-1]:u===0&&(d=0),i.push(d);const p=1/(f-2),y=-p,v=1+p,_=[y,y,v,y,v,v,y,y,v,v,y,v],b=6,E=6,R=3,T=2,M=1,C=new Float32Array(R*E*b),D=new Float32Array(T*E*b),O=new Float32Array(M*E*b);for(let L=0;L<b;L++){const H=L%3*2/3-1,G=L>2?0:-1,B=[H,G,0,H+2/3,G,0,H+2/3,G+1,0,H,G,0,H+2/3,G+1,0,H,G+1,0];C.set(B,R*E*L),D.set(_,T*E*L);const z=[L,L,L,L,L,L];O.set(z,M*E*L)}const N=new Qe;N.setAttribute("position",new On(C,R)),N.setAttribute("uv",new On(D,T)),N.setAttribute("faceIndex",new On(O,M)),t.push(N),a>rd&&a--}return{lodPlanes:t,sizeLods:e,sigmas:i}}function YT(n,t,e){const i=new Ko(n,t,e);return i.texture.mapping=Ad,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function G0(n,t,e,i,a){n.viewport.set(t,e,i,a),n.scissor.set(t,e,i,a)}function S4(n,t,e){const i=new Float32Array(df),a=new K(0,1,0);return new io({name:"SphericalGaussianBlur",defines:{n:df,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:e1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Nl,depthTest:!1,depthWrite:!1})}function WT(){return new io({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:e1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Nl,depthTest:!1,depthWrite:!1})}function ZT(){return new io({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:e1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Nl,depthTest:!1,depthWrite:!1})}function e1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function b4(n){let t=new WeakMap,e=null;function i(f){if(f&&f.isTexture){const d=f.mapping,p=d===Nm||d===Lm,y=d===Il||d===Yu;if(p||y){let v=t.get(f);const _=v!==void 0?v.texture.pmremVersion:0;if(f.isRenderTargetTexture&&f.pmremVersion!==_)return e===null&&(e=new Lb(n)),v=p?e.fromEquirectangular(f,v):e.fromCubemap(f,v),v.texture.pmremVersion=f.pmremVersion,t.set(f,v),v.texture;if(v!==void 0)return v.texture;{const b=f.image;return p&&b&&b.height>0||y&&b&&a(b)?(e===null&&(e=new Lb(n)),v=p?e.fromEquirectangular(f):e.fromCubemap(f),v.texture.pmremVersion=f.pmremVersion,t.set(f,v),f.addEventListener("dispose",r),v.texture):null}}}return f}function a(f){let d=0;const p=6;for(let y=0;y<p;y++)f[y]!==void 0&&d++;return d===p}function r(f){const d=f.target;d.removeEventListener("dispose",r);const p=t.get(d);p!==void 0&&(t.delete(d),p.dispose())}function u(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:i,dispose:u}}function M4(n){const t={};function e(i){if(t[i]!==void 0)return t[i];let a;switch(i){case"WEBGL_depth_texture":a=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=n.getExtension(i)}return t[i]=a,a}return{has:function(i){return e(i)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(i){const a=e(i);return a===null&&Q0("THREE.WebGLRenderer: "+i+" extension not supported."),a}}}function E4(n,t,e,i){const a={},r=new WeakMap;function u(v){const _=v.target;_.index!==null&&t.remove(_.index);for(const E in _.attributes)t.remove(_.attributes[E]);_.removeEventListener("dispose",u),delete a[_.id];const b=r.get(_);b&&(t.remove(b),r.delete(_)),i.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,e.memory.geometries--}function f(v,_){return a[_.id]===!0||(_.addEventListener("dispose",u),a[_.id]=!0,e.memory.geometries++),_}function d(v){const _=v.attributes;for(const b in _)t.update(_[b],n.ARRAY_BUFFER)}function p(v){const _=[],b=v.index,E=v.attributes.position;let R=0;if(b!==null){const C=b.array;R=b.version;for(let D=0,O=C.length;D<O;D+=3){const N=C[D+0],L=C[D+1],H=C[D+2];_.push(N,L,L,H,H,N)}}else if(E!==void 0){const C=E.array;R=E.version;for(let D=0,O=C.length/3-1;D<O;D+=3){const N=D+0,L=D+1,H=D+2;_.push(N,L,L,H,H,N)}}else return;const T=new(vC(_)?CM:wM)(_,1);T.version=R;const M=r.get(v);M&&t.remove(M),r.set(v,T)}function y(v){const _=r.get(v);if(_){const b=v.index;b!==null&&_.version<b.version&&p(v)}else p(v);return r.get(v)}return{get:f,update:d,getWireframeAttribute:y}}function T4(n,t,e){let i;function a(_){i=_}let r,u;function f(_){r=_.type,u=_.bytesPerElement}function d(_,b){n.drawElements(i,b,r,_*u),e.update(b,i,1)}function p(_,b,E){E!==0&&(n.drawElementsInstanced(i,b,r,_*u,E),e.update(b,i,E))}function y(_,b,E){if(E===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,b,0,r,_,0,E);let T=0;for(let M=0;M<E;M++)T+=b[M];e.update(T,i,1)}function v(_,b,E,R){if(E===0)return;const T=t.get("WEBGL_multi_draw");if(T===null)for(let M=0;M<_.length;M++)p(_[M]/u,b[M],R[M]);else{T.multiDrawElementsInstancedWEBGL(i,b,0,r,_,0,R,0,E);let M=0;for(let C=0;C<E;C++)M+=b[C]*R[C];e.update(M,i,1)}}this.setMode=a,this.setIndex=f,this.render=d,this.renderInstances=p,this.renderMultiDraw=y,this.renderMultiDrawInstances=v}function A4(n){const t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,u,f){switch(e.calls++,u){case n.TRIANGLES:e.triangles+=f*(r/3);break;case n.LINES:e.lines+=f*(r/2);break;case n.LINE_STRIP:e.lines+=f*(r-1);break;case n.LINE_LOOP:e.lines+=f*r;break;case n.POINTS:e.points+=f*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function a(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:a,update:i}}function R4(n,t,e){const i=new WeakMap,a=new xn;function r(u,f,d){const p=u.morphTargetInfluences,y=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,v=y!==void 0?y.length:0;let _=i.get(f);if(_===void 0||_.count!==v){let B=function(){H.dispose(),i.delete(f),f.removeEventListener("dispose",B)};_!==void 0&&_.texture.dispose();const b=f.morphAttributes.position!==void 0,E=f.morphAttributes.normal!==void 0,R=f.morphAttributes.color!==void 0,T=f.morphAttributes.position||[],M=f.morphAttributes.normal||[],C=f.morphAttributes.color||[];let D=0;b===!0&&(D=1),E===!0&&(D=2),R===!0&&(D=3);let O=f.attributes.position.count*D,N=1;O>t.maxTextureSize&&(N=Math.ceil(O/t.maxTextureSize),O=t.maxTextureSize);const L=new Float32Array(O*N*4*v),H=new ug(L,O,N,v);H.type=As,H.needsUpdate=!0;const G=D*4;for(let z=0;z<v;z++){const j=T[z],at=M[z],nt=C[z],Q=O*N*4*z;for(let rt=0;rt<j.count;rt++){const I=rt*G;b===!0&&(a.fromBufferAttribute(j,rt),L[Q+I+0]=a.x,L[Q+I+1]=a.y,L[Q+I+2]=a.z,L[Q+I+3]=0),E===!0&&(a.fromBufferAttribute(at,rt),L[Q+I+4]=a.x,L[Q+I+5]=a.y,L[Q+I+6]=a.z,L[Q+I+7]=0),R===!0&&(a.fromBufferAttribute(nt,rt),L[Q+I+8]=a.x,L[Q+I+9]=a.y,L[Q+I+10]=a.z,L[Q+I+11]=nt.itemSize===4?a.w:1)}}_={count:v,texture:H,size:new Gt(O,N)},i.set(f,_),f.addEventListener("dispose",B)}if(u.isInstancedMesh===!0&&u.morphTexture!==null)d.getUniforms().setValue(n,"morphTexture",u.morphTexture,e);else{let b=0;for(let R=0;R<p.length;R++)b+=p[R];const E=f.morphTargetsRelative?1:1-b;d.getUniforms().setValue(n,"morphTargetBaseInfluence",E),d.getUniforms().setValue(n,"morphTargetInfluences",p)}d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,e),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}return{update:r}}function w4(n,t,e,i){let a=new WeakMap;function r(d){const p=i.render.frame,y=d.geometry,v=t.get(d,y);if(a.get(v)!==p&&(t.update(v),a.set(v,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",f)===!1&&d.addEventListener("dispose",f),a.get(d)!==p&&(e.update(d.instanceMatrix,n.ARRAY_BUFFER),d.instanceColor!==null&&e.update(d.instanceColor,n.ARRAY_BUFFER),a.set(d,p))),d.isSkinnedMesh){const _=d.skeleton;a.get(_)!==p&&(_.update(),a.set(_,p))}return v}function u(){a=new WeakMap}function f(d){const p=d.target;p.removeEventListener("dispose",f),e.remove(p.instanceMatrix),p.instanceColor!==null&&e.remove(p.instanceColor)}return{update:r,dispose:u}}const T2=new _i,KT=new LM(1,1),A2=new ug,R2=new g_,w2=new cg,QT=[],JT=[],$T=new Float32Array(16),tA=new Float32Array(9),eA=new Float32Array(4);function Od(n,t,e){const i=n[0];if(i<=0||i>0)return n;const a=t*e;let r=QT[a];if(r===void 0&&(r=new Float32Array(a),QT[a]=r),t!==0){i.toArray(r,0);for(let u=1,f=0;u!==t;++u)f+=e,n[u].toArray(r,f)}return r}function Zi(n,t){if(n.length!==t.length)return!1;for(let e=0,i=n.length;e<i;e++)if(n[e]!==t[e])return!1;return!0}function Ki(n,t){for(let e=0,i=t.length;e<i;e++)n[e]=t[e]}function z_(n,t){let e=JT[t];e===void 0&&(e=new Int32Array(t),JT[t]=e);for(let i=0;i!==t;++i)e[i]=n.allocateTextureUnit();return e}function C4(n,t){const e=this.cache;e[0]!==t&&(n.uniform1f(this.addr,t),e[0]=t)}function D4(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Zi(e,t))return;n.uniform2fv(this.addr,t),Ki(e,t)}}function O4(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(n.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Zi(e,t))return;n.uniform3fv(this.addr,t),Ki(e,t)}}function U4(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Zi(e,t))return;n.uniform4fv(this.addr,t),Ki(e,t)}}function N4(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(Zi(e,t))return;n.uniformMatrix2fv(this.addr,!1,t),Ki(e,t)}else{if(Zi(e,i))return;eA.set(i),n.uniformMatrix2fv(this.addr,!1,eA),Ki(e,i)}}function L4(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(Zi(e,t))return;n.uniformMatrix3fv(this.addr,!1,t),Ki(e,t)}else{if(Zi(e,i))return;tA.set(i),n.uniformMatrix3fv(this.addr,!1,tA),Ki(e,i)}}function P4(n,t){const e=this.cache,i=t.elements;if(i===void 0){if(Zi(e,t))return;n.uniformMatrix4fv(this.addr,!1,t),Ki(e,t)}else{if(Zi(e,i))return;$T.set(i),n.uniformMatrix4fv(this.addr,!1,$T),Ki(e,i)}}function z4(n,t){const e=this.cache;e[0]!==t&&(n.uniform1i(this.addr,t),e[0]=t)}function B4(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Zi(e,t))return;n.uniform2iv(this.addr,t),Ki(e,t)}}function I4(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Zi(e,t))return;n.uniform3iv(this.addr,t),Ki(e,t)}}function V4(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Zi(e,t))return;n.uniform4iv(this.addr,t),Ki(e,t)}}function H4(n,t){const e=this.cache;e[0]!==t&&(n.uniform1ui(this.addr,t),e[0]=t)}function F4(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(n.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Zi(e,t))return;n.uniform2uiv(this.addr,t),Ki(e,t)}}function G4(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(n.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Zi(e,t))return;n.uniform3uiv(this.addr,t),Ki(e,t)}}function q4(n,t){const e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(n.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Zi(e,t))return;n.uniform4uiv(this.addr,t),Ki(e,t)}}function X4(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a);let r;this.type===n.SAMPLER_2D_SHADOW?(KT.compareFunction=AM,r=KT):r=T2,e.setTexture2D(t||r,a)}function k4(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),e.setTexture3D(t||R2,a)}function j4(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),e.setTextureCube(t||w2,a)}function Y4(n,t,e){const i=this.cache,a=e.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),e.setTexture2DArray(t||A2,a)}function W4(n){switch(n){case 5126:return C4;case 35664:return D4;case 35665:return O4;case 35666:return U4;case 35674:return N4;case 35675:return L4;case 35676:return P4;case 5124:case 35670:return z4;case 35667:case 35671:return B4;case 35668:case 35672:return I4;case 35669:case 35673:return V4;case 5125:return H4;case 36294:return F4;case 36295:return G4;case 36296:return q4;case 35678:case 36198:case 36298:case 36306:case 35682:return X4;case 35679:case 36299:case 36307:return k4;case 35680:case 36300:case 36308:case 36293:return j4;case 36289:case 36303:case 36311:case 36292:return Y4}}function Z4(n,t){n.uniform1fv(this.addr,t)}function K4(n,t){const e=Od(t,this.size,2);n.uniform2fv(this.addr,e)}function Q4(n,t){const e=Od(t,this.size,3);n.uniform3fv(this.addr,e)}function J4(n,t){const e=Od(t,this.size,4);n.uniform4fv(this.addr,e)}function $4(n,t){const e=Od(t,this.size,4);n.uniformMatrix2fv(this.addr,!1,e)}function tI(n,t){const e=Od(t,this.size,9);n.uniformMatrix3fv(this.addr,!1,e)}function eI(n,t){const e=Od(t,this.size,16);n.uniformMatrix4fv(this.addr,!1,e)}function nI(n,t){n.uniform1iv(this.addr,t)}function iI(n,t){n.uniform2iv(this.addr,t)}function aI(n,t){n.uniform3iv(this.addr,t)}function sI(n,t){n.uniform4iv(this.addr,t)}function rI(n,t){n.uniform1uiv(this.addr,t)}function oI(n,t){n.uniform2uiv(this.addr,t)}function lI(n,t){n.uniform3uiv(this.addr,t)}function uI(n,t){n.uniform4uiv(this.addr,t)}function cI(n,t,e){const i=this.cache,a=t.length,r=z_(e,a);Zi(i,r)||(n.uniform1iv(this.addr,r),Ki(i,r));for(let u=0;u!==a;++u)e.setTexture2D(t[u]||T2,r[u])}function fI(n,t,e){const i=this.cache,a=t.length,r=z_(e,a);Zi(i,r)||(n.uniform1iv(this.addr,r),Ki(i,r));for(let u=0;u!==a;++u)e.setTexture3D(t[u]||R2,r[u])}function hI(n,t,e){const i=this.cache,a=t.length,r=z_(e,a);Zi(i,r)||(n.uniform1iv(this.addr,r),Ki(i,r));for(let u=0;u!==a;++u)e.setTextureCube(t[u]||w2,r[u])}function dI(n,t,e){const i=this.cache,a=t.length,r=z_(e,a);Zi(i,r)||(n.uniform1iv(this.addr,r),Ki(i,r));for(let u=0;u!==a;++u)e.setTexture2DArray(t[u]||A2,r[u])}function pI(n){switch(n){case 5126:return Z4;case 35664:return K4;case 35665:return Q4;case 35666:return J4;case 35674:return $4;case 35675:return tI;case 35676:return eI;case 5124:case 35670:return nI;case 35667:case 35671:return iI;case 35668:case 35672:return aI;case 35669:case 35673:return sI;case 5125:return rI;case 36294:return oI;case 36295:return lI;case 36296:return uI;case 35678:case 36198:case 36298:case 36306:case 35682:return cI;case 35679:case 36299:case 36307:return fI;case 35680:case 36300:case 36308:case 36293:return hI;case 36289:case 36303:case 36311:case 36292:return dI}}class mI{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=W4(e.type)}}class gI{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=pI(e.type)}}class yI{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){const a=this.seq;for(let r=0,u=a.length;r!==u;++r){const f=a[r];f.setValue(t,e[f.id],i)}}}const TS=/(\w+)(\])?(\[|\.)?/g;function nA(n,t){n.seq.push(t),n.map[t.id]=t}function vI(n,t,e){const i=n.name,a=i.length;for(TS.lastIndex=0;;){const r=TS.exec(i),u=TS.lastIndex;let f=r[1];const d=r[2]==="]",p=r[3];if(d&&(f=f|0),p===void 0||p==="["&&u+2===a){nA(e,p===void 0?new mI(f,n,t):new gI(f,n,t));break}else{let v=e.map[f];v===void 0&&(v=new yI(f),nA(e,v)),e=v}}}class $0{constructor(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let a=0;a<i;++a){const r=t.getActiveUniform(e,a),u=t.getUniformLocation(e,r.name);vI(r,u,this)}}setValue(t,e,i,a){const r=this.map[e];r!==void 0&&r.setValue(t,i,a)}setOptional(t,e,i){const a=e[i];a!==void 0&&this.setValue(t,i,a)}static upload(t,e,i,a){for(let r=0,u=e.length;r!==u;++r){const f=e[r],d=i[f.id];d.needsUpdate!==!1&&f.setValue(t,d.value,a)}}static seqWithValue(t,e){const i=[];for(let a=0,r=t.length;a!==r;++a){const u=t[a];u.id in e&&i.push(u)}return i}}function iA(n,t,e){const i=n.createShader(t);return n.shaderSource(i,e),n.compileShader(i),i}const _I=37297;let xI=0;function SI(n,t){const e=n.split(`
`),i=[],a=Math.max(t-6,0),r=Math.min(t+6,e.length);for(let u=a;u<r;u++){const f=u+1;i.push(`${f===t?">":" "} ${f}: ${e[u]}`)}return i.join(`
`)}const aA=new Xe;function bI(n){mn._getMatrix(aA,mn.workingColorSpace,n);const t=`mat3( ${aA.elements.map(e=>e.toFixed(4))} )`;switch(mn.getTransfer(n)){case Vm:return[t,"LinearTransferOETF"];case In:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[t,"LinearTransferOETF"]}}function sA(n,t,e){const i=n.getShaderParameter(t,n.COMPILE_STATUS),a=n.getShaderInfoLog(t).trim();if(i&&a==="")return"";const r=/ERROR: 0:(\d+)/.exec(a);if(r){const u=parseInt(r[1]);return e.toUpperCase()+`

`+a+`

`+SI(n.getShaderSource(t),u)}else return a}function MI(n,t){const e=bI(t);return[`vec4 ${n}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}function EI(n,t){let e;switch(t){case Jw:e="Linear";break;case $w:e="Reinhard";break;case tC:e="Cineon";break;case pM:e="ACESFilmic";break;case nC:e="AgX";break;case iC:e="Neutral";break;case eC:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+n+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const q0=new K;function TI(){mn.getLuminanceCoefficients(q0);const n=q0.x.toFixed(4),t=q0.y.toFixed(4),e=q0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function AI(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(mm).join(`
`)}function RI(n){const t=[];for(const e in n){const i=n[e];i!==!1&&t.push("#define "+e+" "+i)}return t.join(`
`)}function wI(n,t){const e={},i=n.getProgramParameter(t,n.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const r=n.getActiveAttrib(t,a),u=r.name;let f=1;r.type===n.FLOAT_MAT2&&(f=2),r.type===n.FLOAT_MAT3&&(f=3),r.type===n.FLOAT_MAT4&&(f=4),e[u]={type:r.type,location:n.getAttribLocation(t,u),locationSize:f}}return e}function mm(n){return n!==""}function rA(n,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function oA(n,t){return n.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const CI=/^[ \t]*#include +<([\w\d./]+)>/gm;function Pb(n){return n.replace(CI,OI)}const DI=new Map;function OI(n,t){let e=Ke[t];if(e===void 0){const i=DI.get(t);if(i!==void 0)e=Ke[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,i);else throw new Error("Can not resolve #include <"+t+">")}return Pb(e)}const UI=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function lA(n){return n.replace(UI,NI)}function NI(n,t,e,i){let a="";for(let r=parseInt(t);r<parseInt(e);r++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return a}function uA(n){let t=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?t+=`
#define HIGH_PRECISION`:n.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function LI(n){let t="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===r_?t="SHADOWMAP_TYPE_PCF":n.shadowMapType===vm?t="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===$r&&(t="SHADOWMAP_TYPE_VSM"),t}function PI(n){let t="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Il:case Yu:t="ENVMAP_TYPE_CUBE";break;case Ad:t="ENVMAP_TYPE_CUBE_UV";break}return t}function zI(n){let t="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Yu:t="ENVMAP_MODE_REFRACTION";break}return t}function BI(n){let t="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case og:t="ENVMAP_BLENDING_MULTIPLY";break;case Kw:t="ENVMAP_BLENDING_MIX";break;case Qw:t="ENVMAP_BLENDING_ADD";break}return t}function II(n){const t=n.envMapCubeUVHeight;if(t===null)return null;const e=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:i,maxMip:e}}function VI(n,t,e,i){const a=n.getContext(),r=e.defines;let u=e.vertexShader,f=e.fragmentShader;const d=LI(e),p=PI(e),y=zI(e),v=BI(e),_=II(e),b=AI(e),E=RI(r),R=a.createProgram();let T,M,C=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(T=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E].filter(mm).join(`
`),T.length>0&&(T+=`
`),M=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E].filter(mm).join(`
`),M.length>0&&(M+=`
`)):(T=[uA(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+y:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(mm).join(`
`),M=[uA(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,E,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+p:"",e.envMap?"#define "+y:"",e.envMap?"#define "+v:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+d:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==ko?"#define TONE_MAPPING":"",e.toneMapping!==ko?Ke.tonemapping_pars_fragment:"",e.toneMapping!==ko?EI("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Ke.colorspace_pars_fragment,MI("linearToOutputTexel",e.outputColorSpace),TI(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(mm).join(`
`)),u=Pb(u),u=rA(u,e),u=oA(u,e),f=Pb(f),f=rA(f,e),f=oA(f,e),u=lA(u),f=lA(f),e.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,T=[b,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,M=["#define varying in",e.glslVersion===Ab?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===Ab?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const D=C+T+u,O=C+M+f,N=iA(a,a.VERTEX_SHADER,D),L=iA(a,a.FRAGMENT_SHADER,O);a.attachShader(R,N),a.attachShader(R,L),e.index0AttributeName!==void 0?a.bindAttribLocation(R,0,e.index0AttributeName):e.morphTargets===!0&&a.bindAttribLocation(R,0,"position"),a.linkProgram(R);function H(j){if(n.debug.checkShaderErrors){const at=a.getProgramInfoLog(R).trim(),nt=a.getShaderInfoLog(N).trim(),Q=a.getShaderInfoLog(L).trim();let rt=!0,I=!0;if(a.getProgramParameter(R,a.LINK_STATUS)===!1)if(rt=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(a,R,N,L);else{const Z=sA(a,N,"vertex"),W=sA(a,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(R,a.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+at+`
`+Z+`
`+W)}else at!==""?console.warn("THREE.WebGLProgram: Program Info Log:",at):(nt===""||Q==="")&&(I=!1);I&&(j.diagnostics={runnable:rt,programLog:at,vertexShader:{log:nt,prefix:T},fragmentShader:{log:Q,prefix:M}})}a.deleteShader(N),a.deleteShader(L),G=new $0(a,R),B=wI(a,R)}let G;this.getUniforms=function(){return G===void 0&&H(this),G};let B;this.getAttributes=function(){return B===void 0&&H(this),B};let z=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return z===!1&&(z=a.getProgramParameter(R,_I)),z},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(R),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=xI++,this.cacheKey=t,this.usedTimes=1,this.program=R,this.vertexShader=N,this.fragmentShader=L,this}let HI=0;class FI{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,a=this._getShaderStage(e),r=this._getShaderStage(i),u=this._getShaderCacheForMaterial(t);return u.has(a)===!1&&(u.add(a),a.usedTimes++),u.has(r)===!1&&(u.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const i of e)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return i===void 0&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return i===void 0&&(i=new GI(t),e.set(t,i)),i}}class GI{constructor(t){this.id=HI++,this.code=t,this.usedTimes=0}}function qI(n,t,e,i,a,r,u){const f=new vd,d=new FI,p=new Set,y=[],v=a.logarithmicDepthBuffer,_=a.vertexTextures;let b=a.precision;const E={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function R(B){return p.add(B),B===0?"uv":`uv${B}`}function T(B,z,j,at,nt){const Q=at.fog,rt=nt.geometry,I=B.isMeshStandardMaterial?at.environment:null,Z=(B.isMeshStandardMaterial?e:t).get(B.envMap||I),W=Z&&Z.mapping===Ad?Z.image.height:null,J=E[B.type];B.precision!==null&&(b=a.getMaxPrecision(B.precision),b!==B.precision&&console.warn("THREE.WebGLProgram.getParameters:",B.precision,"not supported, using",b,"instead."));const F=rt.morphAttributes.position||rt.morphAttributes.normal||rt.morphAttributes.color,$=F!==void 0?F.length:0;let mt=0;rt.morphAttributes.position!==void 0&&(mt=1),rt.morphAttributes.normal!==void 0&&(mt=2),rt.morphAttributes.color!==void 0&&(mt=3);let Tt,st,Et,Bt;if(J){const ln=to[J];Tt=ln.vertexShader,st=ln.fragmentShader}else Tt=B.vertexShader,st=B.fragmentShader,d.update(B),Et=d.getVertexShaderID(B),Bt=d.getFragmentShaderID(B);const Xt=n.getRenderTarget(),Zt=n.state.buffers.depth.getReversed(),Me=nt.isInstancedMesh===!0,ge=nt.isBatchedMesh===!0,ke=!!B.map,an=!!B.matcap,ze=!!Z,it=!!B.aoMap,Un=!!B.lightMap,Vt=!!B.bumpMap,Ut=!!B.normalMap,Nt=!!B.displacementMap,Kt=!!B.emissiveMap,Ot=!!B.metalnessMap,Y=!!B.roughnessMap,V=B.anisotropy>0,ft=B.clearcoat>0,wt=B.dispersion>0,Lt=B.iridescence>0,Ct=B.sheen>0,$t=B.transmission>0,Yt=V&&!!B.anisotropyMap,Qt=ft&&!!B.clearcoatMap,Je=ft&&!!B.clearcoatNormalMap,kt=ft&&!!B.clearcoatRoughnessMap,ue=Lt&&!!B.iridescenceMap,de=Lt&&!!B.iridescenceThicknessMap,pe=Ct&&!!B.sheenColorMap,te=Ct&&!!B.sheenRoughnessMap,Ge=!!B.specularMap,Te=!!B.specularColorMap,gn=!!B.specularIntensityMap,ct=$t&&!!B.transmissionMap,ne=$t&&!!B.thicknessMap,Rt=!!B.gradientMap,Ht=!!B.alphaMap,ae=B.alphaTest>0,ie=!!B.alphaHash,Pe=!!B.extensions;let An=ko;B.toneMapped&&(Xt===null||Xt.isXRRenderTarget===!0)&&(An=n.toneMapping);const jn={shaderID:J,shaderType:B.type,shaderName:B.name,vertexShader:Tt,fragmentShader:st,defines:B.defines,customVertexShaderID:Et,customFragmentShaderID:Bt,isRawShaderMaterial:B.isRawShaderMaterial===!0,glslVersion:B.glslVersion,precision:b,batching:ge,batchingColor:ge&&nt._colorsTexture!==null,instancing:Me,instancingColor:Me&&nt.instanceColor!==null,instancingMorph:Me&&nt.morphTexture!==null,supportsVertexTextures:_,outputColorSpace:Xt===null?n.outputColorSpace:Xt.isXRRenderTarget===!0?Xt.texture.colorSpace:Wu,alphaToCoverage:!!B.alphaToCoverage,map:ke,matcap:an,envMap:ze,envMapMode:ze&&Z.mapping,envMapCubeUVHeight:W,aoMap:it,lightMap:Un,bumpMap:Vt,normalMap:Ut,displacementMap:_&&Nt,emissiveMap:Kt,normalMapObjectSpace:Ut&&B.normalMapType===cC,normalMapTangentSpace:Ut&&B.normalMapType===Ju,metalnessMap:Ot,roughnessMap:Y,anisotropy:V,anisotropyMap:Yt,clearcoat:ft,clearcoatMap:Qt,clearcoatNormalMap:Je,clearcoatRoughnessMap:kt,dispersion:wt,iridescence:Lt,iridescenceMap:ue,iridescenceThicknessMap:de,sheen:Ct,sheenColorMap:pe,sheenRoughnessMap:te,specularMap:Ge,specularColorMap:Te,specularIntensityMap:gn,transmission:$t,transmissionMap:ct,thicknessMap:ne,gradientMap:Rt,opaque:B.transparent===!1&&B.blending===Sf&&B.alphaToCoverage===!1,alphaMap:Ht,alphaTest:ae,alphaHash:ie,combine:B.combine,mapUv:ke&&R(B.map.channel),aoMapUv:it&&R(B.aoMap.channel),lightMapUv:Un&&R(B.lightMap.channel),bumpMapUv:Vt&&R(B.bumpMap.channel),normalMapUv:Ut&&R(B.normalMap.channel),displacementMapUv:Nt&&R(B.displacementMap.channel),emissiveMapUv:Kt&&R(B.emissiveMap.channel),metalnessMapUv:Ot&&R(B.metalnessMap.channel),roughnessMapUv:Y&&R(B.roughnessMap.channel),anisotropyMapUv:Yt&&R(B.anisotropyMap.channel),clearcoatMapUv:Qt&&R(B.clearcoatMap.channel),clearcoatNormalMapUv:Je&&R(B.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:kt&&R(B.clearcoatRoughnessMap.channel),iridescenceMapUv:ue&&R(B.iridescenceMap.channel),iridescenceThicknessMapUv:de&&R(B.iridescenceThicknessMap.channel),sheenColorMapUv:pe&&R(B.sheenColorMap.channel),sheenRoughnessMapUv:te&&R(B.sheenRoughnessMap.channel),specularMapUv:Ge&&R(B.specularMap.channel),specularColorMapUv:Te&&R(B.specularColorMap.channel),specularIntensityMapUv:gn&&R(B.specularIntensityMap.channel),transmissionMapUv:ct&&R(B.transmissionMap.channel),thicknessMapUv:ne&&R(B.thicknessMap.channel),alphaMapUv:Ht&&R(B.alphaMap.channel),vertexTangents:!!rt.attributes.tangent&&(Ut||V),vertexColors:B.vertexColors,vertexAlphas:B.vertexColors===!0&&!!rt.attributes.color&&rt.attributes.color.itemSize===4,pointsUvs:nt.isPoints===!0&&!!rt.attributes.uv&&(ke||Ht),fog:!!Q,useFog:B.fog===!0,fogExp2:!!Q&&Q.isFogExp2,flatShading:B.flatShading===!0,sizeAttenuation:B.sizeAttenuation===!0,logarithmicDepthBuffer:v,reverseDepthBuffer:Zt,skinning:nt.isSkinnedMesh===!0,morphTargets:rt.morphAttributes.position!==void 0,morphNormals:rt.morphAttributes.normal!==void 0,morphColors:rt.morphAttributes.color!==void 0,morphTargetsCount:$,morphTextureStride:mt,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numLightProbes:z.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:B.dithering,shadowMapEnabled:n.shadowMap.enabled&&j.length>0,shadowMapType:n.shadowMap.type,toneMapping:An,decodeVideoTexture:ke&&B.map.isVideoTexture===!0&&mn.getTransfer(B.map.colorSpace)===In,decodeVideoTextureEmissive:Kt&&B.emissiveMap.isVideoTexture===!0&&mn.getTransfer(B.emissiveMap.colorSpace)===In,premultipliedAlpha:B.premultipliedAlpha,doubleSided:B.side===qo,flipSided:B.side===as,useDepthPacking:B.depthPacking>=0,depthPacking:B.depthPacking||0,index0AttributeName:B.index0AttributeName,extensionClipCullDistance:Pe&&B.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Pe&&B.extensions.multiDraw===!0||ge)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:B.customProgramCacheKey()};return jn.vertexUv1s=p.has(1),jn.vertexUv2s=p.has(2),jn.vertexUv3s=p.has(3),p.clear(),jn}function M(B){const z=[];if(B.shaderID?z.push(B.shaderID):(z.push(B.customVertexShaderID),z.push(B.customFragmentShaderID)),B.defines!==void 0)for(const j in B.defines)z.push(j),z.push(B.defines[j]);return B.isRawShaderMaterial===!1&&(C(z,B),D(z,B),z.push(n.outputColorSpace)),z.push(B.customProgramCacheKey),z.join()}function C(B,z){B.push(z.precision),B.push(z.outputColorSpace),B.push(z.envMapMode),B.push(z.envMapCubeUVHeight),B.push(z.mapUv),B.push(z.alphaMapUv),B.push(z.lightMapUv),B.push(z.aoMapUv),B.push(z.bumpMapUv),B.push(z.normalMapUv),B.push(z.displacementMapUv),B.push(z.emissiveMapUv),B.push(z.metalnessMapUv),B.push(z.roughnessMapUv),B.push(z.anisotropyMapUv),B.push(z.clearcoatMapUv),B.push(z.clearcoatNormalMapUv),B.push(z.clearcoatRoughnessMapUv),B.push(z.iridescenceMapUv),B.push(z.iridescenceThicknessMapUv),B.push(z.sheenColorMapUv),B.push(z.sheenRoughnessMapUv),B.push(z.specularMapUv),B.push(z.specularColorMapUv),B.push(z.specularIntensityMapUv),B.push(z.transmissionMapUv),B.push(z.thicknessMapUv),B.push(z.combine),B.push(z.fogExp2),B.push(z.sizeAttenuation),B.push(z.morphTargetsCount),B.push(z.morphAttributeCount),B.push(z.numDirLights),B.push(z.numPointLights),B.push(z.numSpotLights),B.push(z.numSpotLightMaps),B.push(z.numHemiLights),B.push(z.numRectAreaLights),B.push(z.numDirLightShadows),B.push(z.numPointLightShadows),B.push(z.numSpotLightShadows),B.push(z.numSpotLightShadowsWithMaps),B.push(z.numLightProbes),B.push(z.shadowMapType),B.push(z.toneMapping),B.push(z.numClippingPlanes),B.push(z.numClipIntersection),B.push(z.depthPacking)}function D(B,z){f.disableAll(),z.supportsVertexTextures&&f.enable(0),z.instancing&&f.enable(1),z.instancingColor&&f.enable(2),z.instancingMorph&&f.enable(3),z.matcap&&f.enable(4),z.envMap&&f.enable(5),z.normalMapObjectSpace&&f.enable(6),z.normalMapTangentSpace&&f.enable(7),z.clearcoat&&f.enable(8),z.iridescence&&f.enable(9),z.alphaTest&&f.enable(10),z.vertexColors&&f.enable(11),z.vertexAlphas&&f.enable(12),z.vertexUv1s&&f.enable(13),z.vertexUv2s&&f.enable(14),z.vertexUv3s&&f.enable(15),z.vertexTangents&&f.enable(16),z.anisotropy&&f.enable(17),z.alphaHash&&f.enable(18),z.batching&&f.enable(19),z.dispersion&&f.enable(20),z.batchingColor&&f.enable(21),B.push(f.mask),f.disableAll(),z.fog&&f.enable(0),z.useFog&&f.enable(1),z.flatShading&&f.enable(2),z.logarithmicDepthBuffer&&f.enable(3),z.reverseDepthBuffer&&f.enable(4),z.skinning&&f.enable(5),z.morphTargets&&f.enable(6),z.morphNormals&&f.enable(7),z.morphColors&&f.enable(8),z.premultipliedAlpha&&f.enable(9),z.shadowMapEnabled&&f.enable(10),z.doubleSided&&f.enable(11),z.flipSided&&f.enable(12),z.useDepthPacking&&f.enable(13),z.dithering&&f.enable(14),z.transmission&&f.enable(15),z.sheen&&f.enable(16),z.opaque&&f.enable(17),z.pointsUvs&&f.enable(18),z.decodeVideoTexture&&f.enable(19),z.decodeVideoTextureEmissive&&f.enable(20),z.alphaToCoverage&&f.enable(21),B.push(f.mask)}function O(B){const z=E[B.type];let j;if(z){const at=to[z];j=MC.clone(at.uniforms)}else j=B.uniforms;return j}function N(B,z){let j;for(let at=0,nt=y.length;at<nt;at++){const Q=y[at];if(Q.cacheKey===z){j=Q,++j.usedTimes;break}}return j===void 0&&(j=new VI(n,z,B,r),y.push(j)),j}function L(B){if(--B.usedTimes===0){const z=y.indexOf(B);y[z]=y[y.length-1],y.pop(),B.destroy()}}function H(B){d.remove(B)}function G(){d.dispose()}return{getParameters:T,getProgramCacheKey:M,getUniforms:O,acquireProgram:N,releaseProgram:L,releaseShaderCache:H,programs:y,dispose:G}}function XI(){let n=new WeakMap;function t(u){return n.has(u)}function e(u){let f=n.get(u);return f===void 0&&(f={},n.set(u,f)),f}function i(u){n.delete(u)}function a(u,f,d){n.get(u)[f]=d}function r(){n=new WeakMap}return{has:t,get:e,remove:i,update:a,dispose:r}}function kI(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.material.id!==t.material.id?n.material.id-t.material.id:n.z!==t.z?n.z-t.z:n.id-t.id}function cA(n,t){return n.groupOrder!==t.groupOrder?n.groupOrder-t.groupOrder:n.renderOrder!==t.renderOrder?n.renderOrder-t.renderOrder:n.z!==t.z?t.z-n.z:n.id-t.id}function fA(){const n=[];let t=0;const e=[],i=[],a=[];function r(){t=0,e.length=0,i.length=0,a.length=0}function u(v,_,b,E,R,T){let M=n[t];return M===void 0?(M={id:v.id,object:v,geometry:_,material:b,groupOrder:E,renderOrder:v.renderOrder,z:R,group:T},n[t]=M):(M.id=v.id,M.object=v,M.geometry=_,M.material=b,M.groupOrder=E,M.renderOrder=v.renderOrder,M.z=R,M.group=T),t++,M}function f(v,_,b,E,R,T){const M=u(v,_,b,E,R,T);b.transmission>0?i.push(M):b.transparent===!0?a.push(M):e.push(M)}function d(v,_,b,E,R,T){const M=u(v,_,b,E,R,T);b.transmission>0?i.unshift(M):b.transparent===!0?a.unshift(M):e.unshift(M)}function p(v,_){e.length>1&&e.sort(v||kI),i.length>1&&i.sort(_||cA),a.length>1&&a.sort(_||cA)}function y(){for(let v=t,_=n.length;v<_;v++){const b=n[v];if(b.id===null)break;b.id=null,b.object=null,b.geometry=null,b.material=null,b.group=null}}return{opaque:e,transmissive:i,transparent:a,init:r,push:f,unshift:d,finish:y,sort:p}}function jI(){let n=new WeakMap;function t(i,a){const r=n.get(i);let u;return r===void 0?(u=new fA,n.set(i,[u])):a>=r.length?(u=new fA,r.push(u)):u=r[a],u}function e(){n=new WeakMap}return{get:t,dispose:e}}function YI(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new K,color:new fe};break;case"SpotLight":e={position:new K,direction:new K,color:new fe,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new K,color:new fe,distance:0,decay:0};break;case"HemisphereLight":e={direction:new K,skyColor:new fe,groundColor:new fe};break;case"RectAreaLight":e={color:new fe,position:new K,halfWidth:new K,halfHeight:new K};break}return n[t.id]=e,e}}}function WI(){const n={};return{get:function(t){if(n[t.id]!==void 0)return n[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gt};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gt};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Gt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[t.id]=e,e}}}let ZI=0;function KI(n,t){return(t.castShadow?2:0)-(n.castShadow?2:0)+(t.map?1:0)-(n.map?1:0)}function QI(n){const t=new YI,e=WI(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new K);const a=new K,r=new Le,u=new Le;function f(p){let y=0,v=0,_=0;for(let B=0;B<9;B++)i.probe[B].set(0,0,0);let b=0,E=0,R=0,T=0,M=0,C=0,D=0,O=0,N=0,L=0,H=0;p.sort(KI);for(let B=0,z=p.length;B<z;B++){const j=p[B],at=j.color,nt=j.intensity,Q=j.distance,rt=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)y+=at.r*nt,v+=at.g*nt,_+=at.b*nt;else if(j.isLightProbe){for(let I=0;I<9;I++)i.probe[I].addScaledVector(j.sh.coefficients[I],nt);H++}else if(j.isDirectionalLight){const I=t.get(j);if(I.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const Z=j.shadow,W=e.get(j);W.shadowIntensity=Z.intensity,W.shadowBias=Z.bias,W.shadowNormalBias=Z.normalBias,W.shadowRadius=Z.radius,W.shadowMapSize=Z.mapSize,i.directionalShadow[b]=W,i.directionalShadowMap[b]=rt,i.directionalShadowMatrix[b]=j.shadow.matrix,C++}i.directional[b]=I,b++}else if(j.isSpotLight){const I=t.get(j);I.position.setFromMatrixPosition(j.matrixWorld),I.color.copy(at).multiplyScalar(nt),I.distance=Q,I.coneCos=Math.cos(j.angle),I.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),I.decay=j.decay,i.spot[R]=I;const Z=j.shadow;if(j.map&&(i.spotLightMap[N]=j.map,N++,Z.updateMatrices(j),j.castShadow&&L++),i.spotLightMatrix[R]=Z.matrix,j.castShadow){const W=e.get(j);W.shadowIntensity=Z.intensity,W.shadowBias=Z.bias,W.shadowNormalBias=Z.normalBias,W.shadowRadius=Z.radius,W.shadowMapSize=Z.mapSize,i.spotShadow[R]=W,i.spotShadowMap[R]=rt,O++}R++}else if(j.isRectAreaLight){const I=t.get(j);I.color.copy(at).multiplyScalar(nt),I.halfWidth.set(j.width*.5,0,0),I.halfHeight.set(0,j.height*.5,0),i.rectArea[T]=I,T++}else if(j.isPointLight){const I=t.get(j);if(I.color.copy(j.color).multiplyScalar(j.intensity),I.distance=j.distance,I.decay=j.decay,j.castShadow){const Z=j.shadow,W=e.get(j);W.shadowIntensity=Z.intensity,W.shadowBias=Z.bias,W.shadowNormalBias=Z.normalBias,W.shadowRadius=Z.radius,W.shadowMapSize=Z.mapSize,W.shadowCameraNear=Z.camera.near,W.shadowCameraFar=Z.camera.far,i.pointShadow[E]=W,i.pointShadowMap[E]=rt,i.pointShadowMatrix[E]=j.shadow.matrix,D++}i.point[E]=I,E++}else if(j.isHemisphereLight){const I=t.get(j);I.skyColor.copy(j.color).multiplyScalar(nt),I.groundColor.copy(j.groundColor).multiplyScalar(nt),i.hemi[M]=I,M++}}T>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=re.LTC_FLOAT_1,i.rectAreaLTC2=re.LTC_FLOAT_2):(i.rectAreaLTC1=re.LTC_HALF_1,i.rectAreaLTC2=re.LTC_HALF_2)),i.ambient[0]=y,i.ambient[1]=v,i.ambient[2]=_;const G=i.hash;(G.directionalLength!==b||G.pointLength!==E||G.spotLength!==R||G.rectAreaLength!==T||G.hemiLength!==M||G.numDirectionalShadows!==C||G.numPointShadows!==D||G.numSpotShadows!==O||G.numSpotMaps!==N||G.numLightProbes!==H)&&(i.directional.length=b,i.spot.length=R,i.rectArea.length=T,i.point.length=E,i.hemi.length=M,i.directionalShadow.length=C,i.directionalShadowMap.length=C,i.pointShadow.length=D,i.pointShadowMap.length=D,i.spotShadow.length=O,i.spotShadowMap.length=O,i.directionalShadowMatrix.length=C,i.pointShadowMatrix.length=D,i.spotLightMatrix.length=O+N-L,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=H,G.directionalLength=b,G.pointLength=E,G.spotLength=R,G.rectAreaLength=T,G.hemiLength=M,G.numDirectionalShadows=C,G.numPointShadows=D,G.numSpotShadows=O,G.numSpotMaps=N,G.numLightProbes=H,i.version=ZI++)}function d(p,y){let v=0,_=0,b=0,E=0,R=0;const T=y.matrixWorldInverse;for(let M=0,C=p.length;M<C;M++){const D=p[M];if(D.isDirectionalLight){const O=i.directional[v];O.direction.setFromMatrixPosition(D.matrixWorld),a.setFromMatrixPosition(D.target.matrixWorld),O.direction.sub(a),O.direction.transformDirection(T),v++}else if(D.isSpotLight){const O=i.spot[b];O.position.setFromMatrixPosition(D.matrixWorld),O.position.applyMatrix4(T),O.direction.setFromMatrixPosition(D.matrixWorld),a.setFromMatrixPosition(D.target.matrixWorld),O.direction.sub(a),O.direction.transformDirection(T),b++}else if(D.isRectAreaLight){const O=i.rectArea[E];O.position.setFromMatrixPosition(D.matrixWorld),O.position.applyMatrix4(T),u.identity(),r.copy(D.matrixWorld),r.premultiply(T),u.extractRotation(r),O.halfWidth.set(D.width*.5,0,0),O.halfHeight.set(0,D.height*.5,0),O.halfWidth.applyMatrix4(u),O.halfHeight.applyMatrix4(u),E++}else if(D.isPointLight){const O=i.point[_];O.position.setFromMatrixPosition(D.matrixWorld),O.position.applyMatrix4(T),_++}else if(D.isHemisphereLight){const O=i.hemi[R];O.direction.setFromMatrixPosition(D.matrixWorld),O.direction.transformDirection(T),R++}}}return{setup:f,setupView:d,state:i}}function hA(n){const t=new QI(n),e=[],i=[];function a(y){p.camera=y,e.length=0,i.length=0}function r(y){e.push(y)}function u(y){i.push(y)}function f(){t.setup(e)}function d(y){t.setupView(e,y)}const p={lightsArray:e,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:a,state:p,setupLights:f,setupLightsView:d,pushLight:r,pushShadow:u}}function JI(n){let t=new WeakMap;function e(a,r=0){const u=t.get(a);let f;return u===void 0?(f=new hA(n),t.set(a,[f])):r>=u.length?(f=new hA(n),u.push(f)):f=u[r],f}function i(){t=new WeakMap}return{get:e,dispose:i}}const $I=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,tV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function eV(n,t,e){let i=new fg;const a=new Gt,r=new Gt,u=new xn,f=new GM({depthPacking:uC}),d=new qM,p={},y=e.maxTextureSize,v={[Bl]:as,[as]:Bl,[qo]:qo},_=new io({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Gt},radius:{value:4}},vertexShader:$I,fragmentShader:tV}),b=_.clone();b.defines.HORIZONTAL_PASS=1;const E=new Qe;E.setAttribute("position",new On(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const R=new Bi(E,_),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r_;let M=this.type;this.render=function(L,H,G){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||L.length===0)return;const B=n.getRenderTarget(),z=n.getActiveCubeFace(),j=n.getActiveMipmapLevel(),at=n.state;at.setBlending(Nl),at.buffers.color.setClear(1,1,1,1),at.buffers.depth.setTest(!0),at.setScissorTest(!1);const nt=M!==$r&&this.type===$r,Q=M===$r&&this.type!==$r;for(let rt=0,I=L.length;rt<I;rt++){const Z=L[rt],W=Z.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",Z,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;a.copy(W.mapSize);const J=W.getFrameExtents();if(a.multiply(J),r.copy(W.mapSize),(a.x>y||a.y>y)&&(a.x>y&&(r.x=Math.floor(y/J.x),a.x=r.x*J.x,W.mapSize.x=r.x),a.y>y&&(r.y=Math.floor(y/J.y),a.y=r.y*J.y,W.mapSize.y=r.y)),W.map===null||nt===!0||Q===!0){const $=this.type!==$r?{minFilter:ya,magFilter:ya}:{};W.map!==null&&W.map.dispose(),W.map=new Ko(a.x,a.y,$),W.map.texture.name=Z.name+".shadowMap",W.camera.updateProjectionMatrix()}n.setRenderTarget(W.map),n.clear();const F=W.getViewportCount();for(let $=0;$<F;$++){const mt=W.getViewport($);u.set(r.x*mt.x,r.y*mt.y,r.x*mt.z,r.y*mt.w),at.viewport(u),W.updateMatrices(Z,$),i=W.getFrustum(),O(H,G,W.camera,Z,this.type)}W.isPointLightShadow!==!0&&this.type===$r&&C(W,G),W.needsUpdate=!1}M=this.type,T.needsUpdate=!1,n.setRenderTarget(B,z,j)};function C(L,H){const G=t.update(R);_.defines.VSM_SAMPLES!==L.blurSamples&&(_.defines.VSM_SAMPLES=L.blurSamples,b.defines.VSM_SAMPLES=L.blurSamples,_.needsUpdate=!0,b.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new Ko(a.x,a.y)),_.uniforms.shadow_pass.value=L.map.texture,_.uniforms.resolution.value=L.mapSize,_.uniforms.radius.value=L.radius,n.setRenderTarget(L.mapPass),n.clear(),n.renderBufferDirect(H,null,G,_,R,null),b.uniforms.shadow_pass.value=L.mapPass.texture,b.uniforms.resolution.value=L.mapSize,b.uniforms.radius.value=L.radius,n.setRenderTarget(L.map),n.clear(),n.renderBufferDirect(H,null,G,b,R,null)}function D(L,H,G,B){let z=null;const j=G.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(j!==void 0)z=j;else if(z=G.isPointLight===!0?d:f,n.localClippingEnabled&&H.clipShadows===!0&&Array.isArray(H.clippingPlanes)&&H.clippingPlanes.length!==0||H.displacementMap&&H.displacementScale!==0||H.alphaMap&&H.alphaTest>0||H.map&&H.alphaTest>0){const at=z.uuid,nt=H.uuid;let Q=p[at];Q===void 0&&(Q={},p[at]=Q);let rt=Q[nt];rt===void 0&&(rt=z.clone(),Q[nt]=rt,H.addEventListener("dispose",N)),z=rt}if(z.visible=H.visible,z.wireframe=H.wireframe,B===$r?z.side=H.shadowSide!==null?H.shadowSide:H.side:z.side=H.shadowSide!==null?H.shadowSide:v[H.side],z.alphaMap=H.alphaMap,z.alphaTest=H.alphaTest,z.map=H.map,z.clipShadows=H.clipShadows,z.clippingPlanes=H.clippingPlanes,z.clipIntersection=H.clipIntersection,z.displacementMap=H.displacementMap,z.displacementScale=H.displacementScale,z.displacementBias=H.displacementBias,z.wireframeLinewidth=H.wireframeLinewidth,z.linewidth=H.linewidth,G.isPointLight===!0&&z.isMeshDistanceMaterial===!0){const at=n.properties.get(z);at.light=G}return z}function O(L,H,G,B,z){if(L.visible===!1)return;if(L.layers.test(H.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&z===$r)&&(!L.frustumCulled||i.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,L.matrixWorld);const nt=t.update(L),Q=L.material;if(Array.isArray(Q)){const rt=nt.groups;for(let I=0,Z=rt.length;I<Z;I++){const W=rt[I],J=Q[W.materialIndex];if(J&&J.visible){const F=D(L,J,B,z);L.onBeforeShadow(n,L,H,G,nt,F,W),n.renderBufferDirect(G,null,nt,F,L,W),L.onAfterShadow(n,L,H,G,nt,F,W)}}}else if(Q.visible){const rt=D(L,Q,B,z);L.onBeforeShadow(n,L,H,G,nt,rt,null),n.renderBufferDirect(G,null,nt,rt,L,null),L.onAfterShadow(n,L,H,G,nt,rt,null)}}const at=L.children;for(let nt=0,Q=at.length;nt<Q;nt++)O(at[nt],H,G,B,z)}function N(L){L.target.removeEventListener("dispose",N);for(const G in p){const B=p[G],z=L.target.uuid;z in B&&(B[z].dispose(),delete B[z])}}}const nV={[cv]:fv,[hv]:mv,[dv]:gv,[Af]:pv,[fv]:cv,[mv]:hv,[gv]:dv,[pv]:Af};function iV(n,t){function e(){let ct=!1;const ne=new xn;let Rt=null;const Ht=new xn(0,0,0,0);return{setMask:function(ae){Rt!==ae&&!ct&&(n.colorMask(ae,ae,ae,ae),Rt=ae)},setLocked:function(ae){ct=ae},setClear:function(ae,ie,Pe,An,jn){jn===!0&&(ae*=An,ie*=An,Pe*=An),ne.set(ae,ie,Pe,An),Ht.equals(ne)===!1&&(n.clearColor(ae,ie,Pe,An),Ht.copy(ne))},reset:function(){ct=!1,Rt=null,Ht.set(-1,0,0,0)}}}function i(){let ct=!1,ne=!1,Rt=null,Ht=null,ae=null;return{setReversed:function(ie){if(ne!==ie){const Pe=t.get("EXT_clip_control");ie?Pe.clipControlEXT(Pe.LOWER_LEFT_EXT,Pe.ZERO_TO_ONE_EXT):Pe.clipControlEXT(Pe.LOWER_LEFT_EXT,Pe.NEGATIVE_ONE_TO_ONE_EXT),ne=ie;const An=ae;ae=null,this.setClear(An)}},getReversed:function(){return ne},setTest:function(ie){ie?Xt(n.DEPTH_TEST):Zt(n.DEPTH_TEST)},setMask:function(ie){Rt!==ie&&!ct&&(n.depthMask(ie),Rt=ie)},setFunc:function(ie){if(ne&&(ie=nV[ie]),Ht!==ie){switch(ie){case cv:n.depthFunc(n.NEVER);break;case fv:n.depthFunc(n.ALWAYS);break;case hv:n.depthFunc(n.LESS);break;case Af:n.depthFunc(n.LEQUAL);break;case dv:n.depthFunc(n.EQUAL);break;case pv:n.depthFunc(n.GEQUAL);break;case mv:n.depthFunc(n.GREATER);break;case gv:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ht=ie}},setLocked:function(ie){ct=ie},setClear:function(ie){ae!==ie&&(ne&&(ie=1-ie),n.clearDepth(ie),ae=ie)},reset:function(){ct=!1,Rt=null,Ht=null,ae=null,ne=!1}}}function a(){let ct=!1,ne=null,Rt=null,Ht=null,ae=null,ie=null,Pe=null,An=null,jn=null;return{setTest:function(ln){ct||(ln?Xt(n.STENCIL_TEST):Zt(n.STENCIL_TEST))},setMask:function(ln){ne!==ln&&!ct&&(n.stencilMask(ln),ne=ln)},setFunc:function(ln,va,Si){(Rt!==ln||Ht!==va||ae!==Si)&&(n.stencilFunc(ln,va,Si),Rt=ln,Ht=va,ae=Si)},setOp:function(ln,va,Si){(ie!==ln||Pe!==va||An!==Si)&&(n.stencilOp(ln,va,Si),ie=ln,Pe=va,An=Si)},setLocked:function(ln){ct=ln},setClear:function(ln){jn!==ln&&(n.clearStencil(ln),jn=ln)},reset:function(){ct=!1,ne=null,Rt=null,Ht=null,ae=null,ie=null,Pe=null,An=null,jn=null}}}const r=new e,u=new i,f=new a,d=new WeakMap,p=new WeakMap;let y={},v={},_=new WeakMap,b=[],E=null,R=!1,T=null,M=null,C=null,D=null,O=null,N=null,L=null,H=new fe(0,0,0),G=0,B=!1,z=null,j=null,at=null,nt=null,Q=null;const rt=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let I=!1,Z=0;const W=n.getParameter(n.VERSION);W.indexOf("WebGL")!==-1?(Z=parseFloat(/^WebGL (\d)/.exec(W)[1]),I=Z>=1):W.indexOf("OpenGL ES")!==-1&&(Z=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),I=Z>=2);let J=null,F={};const $=n.getParameter(n.SCISSOR_BOX),mt=n.getParameter(n.VIEWPORT),Tt=new xn().fromArray($),st=new xn().fromArray(mt);function Et(ct,ne,Rt,Ht){const ae=new Uint8Array(4),ie=n.createTexture();n.bindTexture(ct,ie),n.texParameteri(ct,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ct,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Pe=0;Pe<Rt;Pe++)ct===n.TEXTURE_3D||ct===n.TEXTURE_2D_ARRAY?n.texImage3D(ne,0,n.RGBA,1,1,Ht,0,n.RGBA,n.UNSIGNED_BYTE,ae):n.texImage2D(ne+Pe,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ae);return ie}const Bt={};Bt[n.TEXTURE_2D]=Et(n.TEXTURE_2D,n.TEXTURE_2D,1),Bt[n.TEXTURE_CUBE_MAP]=Et(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Bt[n.TEXTURE_2D_ARRAY]=Et(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Bt[n.TEXTURE_3D]=Et(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),u.setClear(1),f.setClear(0),Xt(n.DEPTH_TEST),u.setFunc(Af),Vt(!1),Ut(xb),Xt(n.CULL_FACE),it(Nl);function Xt(ct){y[ct]!==!0&&(n.enable(ct),y[ct]=!0)}function Zt(ct){y[ct]!==!1&&(n.disable(ct),y[ct]=!1)}function Me(ct,ne){return v[ct]!==ne?(n.bindFramebuffer(ct,ne),v[ct]=ne,ct===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=ne),ct===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=ne),!0):!1}function ge(ct,ne){let Rt=b,Ht=!1;if(ct){Rt=_.get(ne),Rt===void 0&&(Rt=[],_.set(ne,Rt));const ae=ct.textures;if(Rt.length!==ae.length||Rt[0]!==n.COLOR_ATTACHMENT0){for(let ie=0,Pe=ae.length;ie<Pe;ie++)Rt[ie]=n.COLOR_ATTACHMENT0+ie;Rt.length=ae.length,Ht=!0}}else Rt[0]!==n.BACK&&(Rt[0]=n.BACK,Ht=!0);Ht&&n.drawBuffers(Rt)}function ke(ct){return E!==ct?(n.useProgram(ct),E=ct,!0):!1}const an={[Xu]:n.FUNC_ADD,[Nw]:n.FUNC_SUBTRACT,[Lw]:n.FUNC_REVERSE_SUBTRACT};an[Pw]=n.MIN,an[zw]=n.MAX;const ze={[Bw]:n.ZERO,[Iw]:n.ONE,[Vw]:n.SRC_COLOR,[lv]:n.SRC_ALPHA,[kw]:n.SRC_ALPHA_SATURATE,[qw]:n.DST_COLOR,[Fw]:n.DST_ALPHA,[Hw]:n.ONE_MINUS_SRC_COLOR,[uv]:n.ONE_MINUS_SRC_ALPHA,[Xw]:n.ONE_MINUS_DST_COLOR,[Gw]:n.ONE_MINUS_DST_ALPHA,[jw]:n.CONSTANT_COLOR,[Yw]:n.ONE_MINUS_CONSTANT_COLOR,[Ww]:n.CONSTANT_ALPHA,[Zw]:n.ONE_MINUS_CONSTANT_ALPHA};function it(ct,ne,Rt,Ht,ae,ie,Pe,An,jn,ln){if(ct===Nl){R===!0&&(Zt(n.BLEND),R=!1);return}if(R===!1&&(Xt(n.BLEND),R=!0),ct!==Uw){if(ct!==T||ln!==B){if((M!==Xu||O!==Xu)&&(n.blendEquation(n.FUNC_ADD),M=Xu,O=Xu),ln)switch(ct){case Sf:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Sb:n.blendFunc(n.ONE,n.ONE);break;case bb:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Mb:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ct);break}else switch(ct){case Sf:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Sb:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case bb:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Mb:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ct);break}C=null,D=null,N=null,L=null,H.set(0,0,0),G=0,T=ct,B=ln}return}ae=ae||ne,ie=ie||Rt,Pe=Pe||Ht,(ne!==M||ae!==O)&&(n.blendEquationSeparate(an[ne],an[ae]),M=ne,O=ae),(Rt!==C||Ht!==D||ie!==N||Pe!==L)&&(n.blendFuncSeparate(ze[Rt],ze[Ht],ze[ie],ze[Pe]),C=Rt,D=Ht,N=ie,L=Pe),(An.equals(H)===!1||jn!==G)&&(n.blendColor(An.r,An.g,An.b,jn),H.copy(An),G=jn),T=ct,B=!1}function Un(ct,ne){ct.side===qo?Zt(n.CULL_FACE):Xt(n.CULL_FACE);let Rt=ct.side===as;ne&&(Rt=!Rt),Vt(Rt),ct.blending===Sf&&ct.transparent===!1?it(Nl):it(ct.blending,ct.blendEquation,ct.blendSrc,ct.blendDst,ct.blendEquationAlpha,ct.blendSrcAlpha,ct.blendDstAlpha,ct.blendColor,ct.blendAlpha,ct.premultipliedAlpha),u.setFunc(ct.depthFunc),u.setTest(ct.depthTest),u.setMask(ct.depthWrite),r.setMask(ct.colorWrite);const Ht=ct.stencilWrite;f.setTest(Ht),Ht&&(f.setMask(ct.stencilWriteMask),f.setFunc(ct.stencilFunc,ct.stencilRef,ct.stencilFuncMask),f.setOp(ct.stencilFail,ct.stencilZFail,ct.stencilZPass)),Kt(ct.polygonOffset,ct.polygonOffsetFactor,ct.polygonOffsetUnits),ct.alphaToCoverage===!0?Xt(n.SAMPLE_ALPHA_TO_COVERAGE):Zt(n.SAMPLE_ALPHA_TO_COVERAGE)}function Vt(ct){z!==ct&&(ct?n.frontFace(n.CW):n.frontFace(n.CCW),z=ct)}function Ut(ct){ct!==Cw?(Xt(n.CULL_FACE),ct!==j&&(ct===xb?n.cullFace(n.BACK):ct===Dw?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Zt(n.CULL_FACE),j=ct}function Nt(ct){ct!==at&&(I&&n.lineWidth(ct),at=ct)}function Kt(ct,ne,Rt){ct?(Xt(n.POLYGON_OFFSET_FILL),(nt!==ne||Q!==Rt)&&(n.polygonOffset(ne,Rt),nt=ne,Q=Rt)):Zt(n.POLYGON_OFFSET_FILL)}function Ot(ct){ct?Xt(n.SCISSOR_TEST):Zt(n.SCISSOR_TEST)}function Y(ct){ct===void 0&&(ct=n.TEXTURE0+rt-1),J!==ct&&(n.activeTexture(ct),J=ct)}function V(ct,ne,Rt){Rt===void 0&&(J===null?Rt=n.TEXTURE0+rt-1:Rt=J);let Ht=F[Rt];Ht===void 0&&(Ht={type:void 0,texture:void 0},F[Rt]=Ht),(Ht.type!==ct||Ht.texture!==ne)&&(J!==Rt&&(n.activeTexture(Rt),J=Rt),n.bindTexture(ct,ne||Bt[ct]),Ht.type=ct,Ht.texture=ne)}function ft(){const ct=F[J];ct!==void 0&&ct.type!==void 0&&(n.bindTexture(ct.type,null),ct.type=void 0,ct.texture=void 0)}function wt(){try{n.compressedTexImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Lt(){try{n.compressedTexImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Ct(){try{n.texSubImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function $t(){try{n.texSubImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Yt(){try{n.compressedTexSubImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Qt(){try{n.compressedTexSubImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function Je(){try{n.texStorage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function kt(){try{n.texStorage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function ue(){try{n.texImage2D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function de(){try{n.texImage3D(...arguments)}catch(ct){console.error("THREE.WebGLState:",ct)}}function pe(ct){Tt.equals(ct)===!1&&(n.scissor(ct.x,ct.y,ct.z,ct.w),Tt.copy(ct))}function te(ct){st.equals(ct)===!1&&(n.viewport(ct.x,ct.y,ct.z,ct.w),st.copy(ct))}function Ge(ct,ne){let Rt=p.get(ne);Rt===void 0&&(Rt=new WeakMap,p.set(ne,Rt));let Ht=Rt.get(ct);Ht===void 0&&(Ht=n.getUniformBlockIndex(ne,ct.name),Rt.set(ct,Ht))}function Te(ct,ne){const Ht=p.get(ne).get(ct);d.get(ne)!==Ht&&(n.uniformBlockBinding(ne,Ht,ct.__bindingPointIndex),d.set(ne,Ht))}function gn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),u.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),y={},J=null,F={},v={},_=new WeakMap,b=[],E=null,R=!1,T=null,M=null,C=null,D=null,O=null,N=null,L=null,H=new fe(0,0,0),G=0,B=!1,z=null,j=null,at=null,nt=null,Q=null,Tt.set(0,0,n.canvas.width,n.canvas.height),st.set(0,0,n.canvas.width,n.canvas.height),r.reset(),u.reset(),f.reset()}return{buffers:{color:r,depth:u,stencil:f},enable:Xt,disable:Zt,bindFramebuffer:Me,drawBuffers:ge,useProgram:ke,setBlending:it,setMaterial:Un,setFlipSided:Vt,setCullFace:Ut,setLineWidth:Nt,setPolygonOffset:Kt,setScissorTest:Ot,activeTexture:Y,bindTexture:V,unbindTexture:ft,compressedTexImage2D:wt,compressedTexImage3D:Lt,texImage2D:ue,texImage3D:de,updateUBOMapping:Ge,uniformBlockBinding:Te,texStorage2D:Je,texStorage3D:kt,texSubImage2D:Ct,texSubImage3D:$t,compressedTexSubImage2D:Yt,compressedTexSubImage3D:Qt,scissor:pe,viewport:te,reset:gn}}function aV(n,t,e,i,a,r,u){const f=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new Gt,y=new WeakMap;let v;const _=new WeakMap;let b=!1;try{b=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function E(Y,V){return b?new OffscreenCanvas(Y,V):Gm("canvas")}function R(Y,V,ft){let wt=1;const Lt=Ot(Y);if((Lt.width>ft||Lt.height>ft)&&(wt=ft/Math.max(Lt.width,Lt.height)),wt<1)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap||typeof VideoFrame<"u"&&Y instanceof VideoFrame){const Ct=Math.floor(wt*Lt.width),$t=Math.floor(wt*Lt.height);v===void 0&&(v=E(Ct,$t));const Yt=V?E(Ct,$t):v;return Yt.width=Ct,Yt.height=$t,Yt.getContext("2d").drawImage(Y,0,0,Ct,$t),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Lt.width+"x"+Lt.height+") to ("+Ct+"x"+$t+")."),Yt}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Lt.width+"x"+Lt.height+")."),Y;return Y}function T(Y){return Y.generateMipmaps}function M(Y){n.generateMipmap(Y)}function C(Y){return Y.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:Y.isWebGL3DRenderTarget?n.TEXTURE_3D:Y.isWebGLArrayRenderTarget||Y.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function D(Y,V,ft,wt,Lt=!1){if(Y!==null){if(n[Y]!==void 0)return n[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let Ct=V;if(V===n.RED&&(ft===n.FLOAT&&(Ct=n.R32F),ft===n.HALF_FLOAT&&(Ct=n.R16F),ft===n.UNSIGNED_BYTE&&(Ct=n.R8)),V===n.RED_INTEGER&&(ft===n.UNSIGNED_BYTE&&(Ct=n.R8UI),ft===n.UNSIGNED_SHORT&&(Ct=n.R16UI),ft===n.UNSIGNED_INT&&(Ct=n.R32UI),ft===n.BYTE&&(Ct=n.R8I),ft===n.SHORT&&(Ct=n.R16I),ft===n.INT&&(Ct=n.R32I)),V===n.RG&&(ft===n.FLOAT&&(Ct=n.RG32F),ft===n.HALF_FLOAT&&(Ct=n.RG16F),ft===n.UNSIGNED_BYTE&&(Ct=n.RG8)),V===n.RG_INTEGER&&(ft===n.UNSIGNED_BYTE&&(Ct=n.RG8UI),ft===n.UNSIGNED_SHORT&&(Ct=n.RG16UI),ft===n.UNSIGNED_INT&&(Ct=n.RG32UI),ft===n.BYTE&&(Ct=n.RG8I),ft===n.SHORT&&(Ct=n.RG16I),ft===n.INT&&(Ct=n.RG32I)),V===n.RGB_INTEGER&&(ft===n.UNSIGNED_BYTE&&(Ct=n.RGB8UI),ft===n.UNSIGNED_SHORT&&(Ct=n.RGB16UI),ft===n.UNSIGNED_INT&&(Ct=n.RGB32UI),ft===n.BYTE&&(Ct=n.RGB8I),ft===n.SHORT&&(Ct=n.RGB16I),ft===n.INT&&(Ct=n.RGB32I)),V===n.RGBA_INTEGER&&(ft===n.UNSIGNED_BYTE&&(Ct=n.RGBA8UI),ft===n.UNSIGNED_SHORT&&(Ct=n.RGBA16UI),ft===n.UNSIGNED_INT&&(Ct=n.RGBA32UI),ft===n.BYTE&&(Ct=n.RGBA8I),ft===n.SHORT&&(Ct=n.RGBA16I),ft===n.INT&&(Ct=n.RGBA32I)),V===n.RGB&&ft===n.UNSIGNED_INT_5_9_9_9_REV&&(Ct=n.RGB9_E5),V===n.RGBA){const $t=Lt?Vm:mn.getTransfer(wt);ft===n.FLOAT&&(Ct=n.RGBA32F),ft===n.HALF_FLOAT&&(Ct=n.RGBA16F),ft===n.UNSIGNED_BYTE&&(Ct=$t===In?n.SRGB8_ALPHA8:n.RGBA8),ft===n.UNSIGNED_SHORT_4_4_4_4&&(Ct=n.RGBA4),ft===n.UNSIGNED_SHORT_5_5_5_1&&(Ct=n.RGB5_A1)}return(Ct===n.R16F||Ct===n.R32F||Ct===n.RG16F||Ct===n.RG32F||Ct===n.RGBA16F||Ct===n.RGBA32F)&&t.get("EXT_color_buffer_float"),Ct}function O(Y,V){let ft;return Y?V===null||V===Vl||V===pd?ft=n.DEPTH24_STENCIL8:V===As?ft=n.DEPTH32F_STENCIL8:V===dd&&(ft=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):V===null||V===Vl||V===pd?ft=n.DEPTH_COMPONENT24:V===As?ft=n.DEPTH_COMPONENT32F:V===dd&&(ft=n.DEPTH_COMPONENT16),ft}function N(Y,V){return T(Y)===!0||Y.isFramebufferTexture&&Y.minFilter!==ya&&Y.minFilter!==Wi?Math.log2(Math.max(V.width,V.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?V.mipmaps.length:1}function L(Y){const V=Y.target;V.removeEventListener("dispose",L),G(V),V.isVideoTexture&&y.delete(V)}function H(Y){const V=Y.target;V.removeEventListener("dispose",H),z(V)}function G(Y){const V=i.get(Y);if(V.__webglInit===void 0)return;const ft=Y.source,wt=_.get(ft);if(wt){const Lt=wt[V.__cacheKey];Lt.usedTimes--,Lt.usedTimes===0&&B(Y),Object.keys(wt).length===0&&_.delete(ft)}i.remove(Y)}function B(Y){const V=i.get(Y);n.deleteTexture(V.__webglTexture);const ft=Y.source,wt=_.get(ft);delete wt[V.__cacheKey],u.memory.textures--}function z(Y){const V=i.get(Y);if(Y.depthTexture&&(Y.depthTexture.dispose(),i.remove(Y.depthTexture)),Y.isWebGLCubeRenderTarget)for(let wt=0;wt<6;wt++){if(Array.isArray(V.__webglFramebuffer[wt]))for(let Lt=0;Lt<V.__webglFramebuffer[wt].length;Lt++)n.deleteFramebuffer(V.__webglFramebuffer[wt][Lt]);else n.deleteFramebuffer(V.__webglFramebuffer[wt]);V.__webglDepthbuffer&&n.deleteRenderbuffer(V.__webglDepthbuffer[wt])}else{if(Array.isArray(V.__webglFramebuffer))for(let wt=0;wt<V.__webglFramebuffer.length;wt++)n.deleteFramebuffer(V.__webglFramebuffer[wt]);else n.deleteFramebuffer(V.__webglFramebuffer);if(V.__webglDepthbuffer&&n.deleteRenderbuffer(V.__webglDepthbuffer),V.__webglMultisampledFramebuffer&&n.deleteFramebuffer(V.__webglMultisampledFramebuffer),V.__webglColorRenderbuffer)for(let wt=0;wt<V.__webglColorRenderbuffer.length;wt++)V.__webglColorRenderbuffer[wt]&&n.deleteRenderbuffer(V.__webglColorRenderbuffer[wt]);V.__webglDepthRenderbuffer&&n.deleteRenderbuffer(V.__webglDepthRenderbuffer)}const ft=Y.textures;for(let wt=0,Lt=ft.length;wt<Lt;wt++){const Ct=i.get(ft[wt]);Ct.__webglTexture&&(n.deleteTexture(Ct.__webglTexture),u.memory.textures--),i.remove(ft[wt])}i.remove(Y)}let j=0;function at(){j=0}function nt(){const Y=j;return Y>=a.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+a.maxTextures),j+=1,Y}function Q(Y){const V=[];return V.push(Y.wrapS),V.push(Y.wrapT),V.push(Y.wrapR||0),V.push(Y.magFilter),V.push(Y.minFilter),V.push(Y.anisotropy),V.push(Y.internalFormat),V.push(Y.format),V.push(Y.type),V.push(Y.generateMipmaps),V.push(Y.premultiplyAlpha),V.push(Y.flipY),V.push(Y.unpackAlignment),V.push(Y.colorSpace),V.join()}function rt(Y,V){const ft=i.get(Y);if(Y.isVideoTexture&&Nt(Y),Y.isRenderTargetTexture===!1&&Y.version>0&&ft.__version!==Y.version){const wt=Y.image;if(wt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(wt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{st(ft,Y,V);return}}e.bindTexture(n.TEXTURE_2D,ft.__webglTexture,n.TEXTURE0+V)}function I(Y,V){const ft=i.get(Y);if(Y.version>0&&ft.__version!==Y.version){st(ft,Y,V);return}e.bindTexture(n.TEXTURE_2D_ARRAY,ft.__webglTexture,n.TEXTURE0+V)}function Z(Y,V){const ft=i.get(Y);if(Y.version>0&&ft.__version!==Y.version){st(ft,Y,V);return}e.bindTexture(n.TEXTURE_3D,ft.__webglTexture,n.TEXTURE0+V)}function W(Y,V){const ft=i.get(Y);if(Y.version>0&&ft.__version!==Y.version){Et(ft,Y,V);return}e.bindTexture(n.TEXTURE_CUBE_MAP,ft.__webglTexture,n.TEXTURE0+V)}const J={[Pm]:n.REPEAT,[br]:n.CLAMP_TO_EDGE,[zm]:n.MIRRORED_REPEAT},F={[ya]:n.NEAREST,[mM]:n.NEAREST_MIPMAP_NEAREST,[id]:n.NEAREST_MIPMAP_LINEAR,[Wi]:n.LINEAR,[_m]:n.LINEAR_MIPMAP_NEAREST,[Xo]:n.LINEAR_MIPMAP_LINEAR},$={[fC]:n.NEVER,[yC]:n.ALWAYS,[hC]:n.LESS,[AM]:n.LEQUAL,[dC]:n.EQUAL,[gC]:n.GEQUAL,[pC]:n.GREATER,[mC]:n.NOTEQUAL};function mt(Y,V){if(V.type===As&&t.has("OES_texture_float_linear")===!1&&(V.magFilter===Wi||V.magFilter===_m||V.magFilter===id||V.magFilter===Xo||V.minFilter===Wi||V.minFilter===_m||V.minFilter===id||V.minFilter===Xo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(Y,n.TEXTURE_WRAP_S,J[V.wrapS]),n.texParameteri(Y,n.TEXTURE_WRAP_T,J[V.wrapT]),(Y===n.TEXTURE_3D||Y===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Y,n.TEXTURE_WRAP_R,J[V.wrapR]),n.texParameteri(Y,n.TEXTURE_MAG_FILTER,F[V.magFilter]),n.texParameteri(Y,n.TEXTURE_MIN_FILTER,F[V.minFilter]),V.compareFunction&&(n.texParameteri(Y,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(Y,n.TEXTURE_COMPARE_FUNC,$[V.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(V.magFilter===ya||V.minFilter!==id&&V.minFilter!==Xo||V.type===As&&t.has("OES_texture_float_linear")===!1)return;if(V.anisotropy>1||i.get(V).__currentAnisotropy){const ft=t.get("EXT_texture_filter_anisotropic");n.texParameterf(Y,ft.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(V.anisotropy,a.getMaxAnisotropy())),i.get(V).__currentAnisotropy=V.anisotropy}}}function Tt(Y,V){let ft=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,V.addEventListener("dispose",L));const wt=V.source;let Lt=_.get(wt);Lt===void 0&&(Lt={},_.set(wt,Lt));const Ct=Q(V);if(Ct!==Y.__cacheKey){Lt[Ct]===void 0&&(Lt[Ct]={texture:n.createTexture(),usedTimes:0},u.memory.textures++,ft=!0),Lt[Ct].usedTimes++;const $t=Lt[Y.__cacheKey];$t!==void 0&&(Lt[Y.__cacheKey].usedTimes--,$t.usedTimes===0&&B(V)),Y.__cacheKey=Ct,Y.__webglTexture=Lt[Ct].texture}return ft}function st(Y,V,ft){let wt=n.TEXTURE_2D;(V.isDataArrayTexture||V.isCompressedArrayTexture)&&(wt=n.TEXTURE_2D_ARRAY),V.isData3DTexture&&(wt=n.TEXTURE_3D);const Lt=Tt(Y,V),Ct=V.source;e.bindTexture(wt,Y.__webglTexture,n.TEXTURE0+ft);const $t=i.get(Ct);if(Ct.version!==$t.__version||Lt===!0){e.activeTexture(n.TEXTURE0+ft);const Yt=mn.getPrimaries(mn.workingColorSpace),Qt=V.colorSpace===Dl?null:mn.getPrimaries(V.colorSpace),Je=V.colorSpace===Dl||Yt===Qt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,V.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,V.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);let kt=R(V.image,!1,a.maxTextureSize);kt=Kt(V,kt);const ue=r.convert(V.format,V.colorSpace),de=r.convert(V.type);let pe=D(V.internalFormat,ue,de,V.colorSpace,V.isVideoTexture);mt(wt,V);let te;const Ge=V.mipmaps,Te=V.isVideoTexture!==!0,gn=$t.__version===void 0||Lt===!0,ct=Ct.dataReady,ne=N(V,kt);if(V.isDepthTexture)pe=O(V.format===gd,V.type),gn&&(Te?e.texStorage2D(n.TEXTURE_2D,1,pe,kt.width,kt.height):e.texImage2D(n.TEXTURE_2D,0,pe,kt.width,kt.height,0,ue,de,null));else if(V.isDataTexture)if(Ge.length>0){Te&&gn&&e.texStorage2D(n.TEXTURE_2D,ne,pe,Ge[0].width,Ge[0].height);for(let Rt=0,Ht=Ge.length;Rt<Ht;Rt++)te=Ge[Rt],Te?ct&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,te.width,te.height,ue,de,te.data):e.texImage2D(n.TEXTURE_2D,Rt,pe,te.width,te.height,0,ue,de,te.data);V.generateMipmaps=!1}else Te?(gn&&e.texStorage2D(n.TEXTURE_2D,ne,pe,kt.width,kt.height),ct&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,kt.width,kt.height,ue,de,kt.data)):e.texImage2D(n.TEXTURE_2D,0,pe,kt.width,kt.height,0,ue,de,kt.data);else if(V.isCompressedTexture)if(V.isCompressedArrayTexture){Te&&gn&&e.texStorage3D(n.TEXTURE_2D_ARRAY,ne,pe,Ge[0].width,Ge[0].height,kt.depth);for(let Rt=0,Ht=Ge.length;Rt<Ht;Rt++)if(te=Ge[Rt],V.format!==Pa)if(ue!==null)if(Te){if(ct)if(V.layerUpdates.size>0){const ae=Nb(te.width,te.height,V.format,V.type);for(const ie of V.layerUpdates){const Pe=te.data.subarray(ie*ae/te.data.BYTES_PER_ELEMENT,(ie+1)*ae/te.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,ie,te.width,te.height,1,ue,Pe)}V.clearLayerUpdates()}else e.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,0,te.width,te.height,kt.depth,ue,te.data)}else e.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Rt,pe,te.width,te.height,kt.depth,0,te.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Te?ct&&e.texSubImage3D(n.TEXTURE_2D_ARRAY,Rt,0,0,0,te.width,te.height,kt.depth,ue,de,te.data):e.texImage3D(n.TEXTURE_2D_ARRAY,Rt,pe,te.width,te.height,kt.depth,0,ue,de,te.data)}else{Te&&gn&&e.texStorage2D(n.TEXTURE_2D,ne,pe,Ge[0].width,Ge[0].height);for(let Rt=0,Ht=Ge.length;Rt<Ht;Rt++)te=Ge[Rt],V.format!==Pa?ue!==null?Te?ct&&e.compressedTexSubImage2D(n.TEXTURE_2D,Rt,0,0,te.width,te.height,ue,te.data):e.compressedTexImage2D(n.TEXTURE_2D,Rt,pe,te.width,te.height,0,te.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Te?ct&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,te.width,te.height,ue,de,te.data):e.texImage2D(n.TEXTURE_2D,Rt,pe,te.width,te.height,0,ue,de,te.data)}else if(V.isDataArrayTexture)if(Te){if(gn&&e.texStorage3D(n.TEXTURE_2D_ARRAY,ne,pe,kt.width,kt.height,kt.depth),ct)if(V.layerUpdates.size>0){const Rt=Nb(kt.width,kt.height,V.format,V.type);for(const Ht of V.layerUpdates){const ae=kt.data.subarray(Ht*Rt/kt.data.BYTES_PER_ELEMENT,(Ht+1)*Rt/kt.data.BYTES_PER_ELEMENT);e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ht,kt.width,kt.height,1,ue,de,ae)}V.clearLayerUpdates()}else e.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,kt.width,kt.height,kt.depth,ue,de,kt.data)}else e.texImage3D(n.TEXTURE_2D_ARRAY,0,pe,kt.width,kt.height,kt.depth,0,ue,de,kt.data);else if(V.isData3DTexture)Te?(gn&&e.texStorage3D(n.TEXTURE_3D,ne,pe,kt.width,kt.height,kt.depth),ct&&e.texSubImage3D(n.TEXTURE_3D,0,0,0,0,kt.width,kt.height,kt.depth,ue,de,kt.data)):e.texImage3D(n.TEXTURE_3D,0,pe,kt.width,kt.height,kt.depth,0,ue,de,kt.data);else if(V.isFramebufferTexture){if(gn)if(Te)e.texStorage2D(n.TEXTURE_2D,ne,pe,kt.width,kt.height);else{let Rt=kt.width,Ht=kt.height;for(let ae=0;ae<ne;ae++)e.texImage2D(n.TEXTURE_2D,ae,pe,Rt,Ht,0,ue,de,null),Rt>>=1,Ht>>=1}}else if(Ge.length>0){if(Te&&gn){const Rt=Ot(Ge[0]);e.texStorage2D(n.TEXTURE_2D,ne,pe,Rt.width,Rt.height)}for(let Rt=0,Ht=Ge.length;Rt<Ht;Rt++)te=Ge[Rt],Te?ct&&e.texSubImage2D(n.TEXTURE_2D,Rt,0,0,ue,de,te):e.texImage2D(n.TEXTURE_2D,Rt,pe,ue,de,te);V.generateMipmaps=!1}else if(Te){if(gn){const Rt=Ot(kt);e.texStorage2D(n.TEXTURE_2D,ne,pe,Rt.width,Rt.height)}ct&&e.texSubImage2D(n.TEXTURE_2D,0,0,0,ue,de,kt)}else e.texImage2D(n.TEXTURE_2D,0,pe,ue,de,kt);T(V)&&M(wt),$t.__version=Ct.version,V.onUpdate&&V.onUpdate(V)}Y.__version=V.version}function Et(Y,V,ft){if(V.image.length!==6)return;const wt=Tt(Y,V),Lt=V.source;e.bindTexture(n.TEXTURE_CUBE_MAP,Y.__webglTexture,n.TEXTURE0+ft);const Ct=i.get(Lt);if(Lt.version!==Ct.__version||wt===!0){e.activeTexture(n.TEXTURE0+ft);const $t=mn.getPrimaries(mn.workingColorSpace),Yt=V.colorSpace===Dl?null:mn.getPrimaries(V.colorSpace),Qt=V.colorSpace===Dl||$t===Yt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,V.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,V.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,V.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Qt);const Je=V.isCompressedTexture||V.image[0].isCompressedTexture,kt=V.image[0]&&V.image[0].isDataTexture,ue=[];for(let Ht=0;Ht<6;Ht++)!Je&&!kt?ue[Ht]=R(V.image[Ht],!0,a.maxCubemapSize):ue[Ht]=kt?V.image[Ht].image:V.image[Ht],ue[Ht]=Kt(V,ue[Ht]);const de=ue[0],pe=r.convert(V.format,V.colorSpace),te=r.convert(V.type),Ge=D(V.internalFormat,pe,te,V.colorSpace),Te=V.isVideoTexture!==!0,gn=Ct.__version===void 0||wt===!0,ct=Lt.dataReady;let ne=N(V,de);mt(n.TEXTURE_CUBE_MAP,V);let Rt;if(Je){Te&&gn&&e.texStorage2D(n.TEXTURE_CUBE_MAP,ne,Ge,de.width,de.height);for(let Ht=0;Ht<6;Ht++){Rt=ue[Ht].mipmaps;for(let ae=0;ae<Rt.length;ae++){const ie=Rt[ae];V.format!==Pa?pe!==null?Te?ct&&e.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,ae,0,0,ie.width,ie.height,pe,ie.data):e.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,ae,Ge,ie.width,ie.height,0,ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Te?ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,ae,0,0,ie.width,ie.height,pe,te,ie.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,ae,Ge,ie.width,ie.height,0,pe,te,ie.data)}}}else{if(Rt=V.mipmaps,Te&&gn){Rt.length>0&&ne++;const Ht=Ot(ue[0]);e.texStorage2D(n.TEXTURE_CUBE_MAP,ne,Ge,Ht.width,Ht.height)}for(let Ht=0;Ht<6;Ht++)if(kt){Te?ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,0,0,0,ue[Ht].width,ue[Ht].height,pe,te,ue[Ht].data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,0,Ge,ue[Ht].width,ue[Ht].height,0,pe,te,ue[Ht].data);for(let ae=0;ae<Rt.length;ae++){const Pe=Rt[ae].image[Ht].image;Te?ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,ae+1,0,0,Pe.width,Pe.height,pe,te,Pe.data):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,ae+1,Ge,Pe.width,Pe.height,0,pe,te,Pe.data)}}else{Te?ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,0,0,0,pe,te,ue[Ht]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,0,Ge,pe,te,ue[Ht]);for(let ae=0;ae<Rt.length;ae++){const ie=Rt[ae];Te?ct&&e.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,ae+1,0,0,pe,te,ie.image[Ht]):e.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,ae+1,Ge,pe,te,ie.image[Ht])}}}T(V)&&M(n.TEXTURE_CUBE_MAP),Ct.__version=Lt.version,V.onUpdate&&V.onUpdate(V)}Y.__version=V.version}function Bt(Y,V,ft,wt,Lt,Ct){const $t=r.convert(ft.format,ft.colorSpace),Yt=r.convert(ft.type),Qt=D(ft.internalFormat,$t,Yt,ft.colorSpace),Je=i.get(V),kt=i.get(ft);if(kt.__renderTarget=V,!Je.__hasExternalTextures){const ue=Math.max(1,V.width>>Ct),de=Math.max(1,V.height>>Ct);Lt===n.TEXTURE_3D||Lt===n.TEXTURE_2D_ARRAY?e.texImage3D(Lt,Ct,Qt,ue,de,V.depth,0,$t,Yt,null):e.texImage2D(Lt,Ct,Qt,ue,de,0,$t,Yt,null)}e.bindFramebuffer(n.FRAMEBUFFER,Y),Ut(V)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,wt,Lt,kt.__webglTexture,0,Vt(V)):(Lt===n.TEXTURE_2D||Lt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Lt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,wt,Lt,kt.__webglTexture,Ct),e.bindFramebuffer(n.FRAMEBUFFER,null)}function Xt(Y,V,ft){if(n.bindRenderbuffer(n.RENDERBUFFER,Y),V.depthBuffer){const wt=V.depthTexture,Lt=wt&&wt.isDepthTexture?wt.type:null,Ct=O(V.stencilBuffer,Lt),$t=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Yt=Vt(V);Ut(V)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Yt,Ct,V.width,V.height):ft?n.renderbufferStorageMultisample(n.RENDERBUFFER,Yt,Ct,V.width,V.height):n.renderbufferStorage(n.RENDERBUFFER,Ct,V.width,V.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,$t,n.RENDERBUFFER,Y)}else{const wt=V.textures;for(let Lt=0;Lt<wt.length;Lt++){const Ct=wt[Lt],$t=r.convert(Ct.format,Ct.colorSpace),Yt=r.convert(Ct.type),Qt=D(Ct.internalFormat,$t,Yt,Ct.colorSpace),Je=Vt(V);ft&&Ut(V)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Je,Qt,V.width,V.height):Ut(V)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Je,Qt,V.width,V.height):n.renderbufferStorage(n.RENDERBUFFER,Qt,V.width,V.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Zt(Y,V){if(V&&V.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(n.FRAMEBUFFER,Y),!(V.depthTexture&&V.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const wt=i.get(V.depthTexture);wt.__renderTarget=V,(!wt.__webglTexture||V.depthTexture.image.width!==V.width||V.depthTexture.image.height!==V.height)&&(V.depthTexture.image.width=V.width,V.depthTexture.image.height=V.height,V.depthTexture.needsUpdate=!0),rt(V.depthTexture,0);const Lt=wt.__webglTexture,Ct=Vt(V);if(V.depthTexture.format===md)Ut(V)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Lt,0,Ct):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Lt,0);else if(V.depthTexture.format===gd)Ut(V)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Lt,0,Ct):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Lt,0);else throw new Error("Unknown depthTexture format")}function Me(Y){const V=i.get(Y),ft=Y.isWebGLCubeRenderTarget===!0;if(V.__boundDepthTexture!==Y.depthTexture){const wt=Y.depthTexture;if(V.__depthDisposeCallback&&V.__depthDisposeCallback(),wt){const Lt=()=>{delete V.__boundDepthTexture,delete V.__depthDisposeCallback,wt.removeEventListener("dispose",Lt)};wt.addEventListener("dispose",Lt),V.__depthDisposeCallback=Lt}V.__boundDepthTexture=wt}if(Y.depthTexture&&!V.__autoAllocateDepthBuffer){if(ft)throw new Error("target.depthTexture not supported in Cube render targets");Zt(V.__webglFramebuffer,Y)}else if(ft){V.__webglDepthbuffer=[];for(let wt=0;wt<6;wt++)if(e.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer[wt]),V.__webglDepthbuffer[wt]===void 0)V.__webglDepthbuffer[wt]=n.createRenderbuffer(),Xt(V.__webglDepthbuffer[wt],Y,!1);else{const Lt=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ct=V.__webglDepthbuffer[wt];n.bindRenderbuffer(n.RENDERBUFFER,Ct),n.framebufferRenderbuffer(n.FRAMEBUFFER,Lt,n.RENDERBUFFER,Ct)}}else if(e.bindFramebuffer(n.FRAMEBUFFER,V.__webglFramebuffer),V.__webglDepthbuffer===void 0)V.__webglDepthbuffer=n.createRenderbuffer(),Xt(V.__webglDepthbuffer,Y,!1);else{const wt=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Lt=V.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Lt),n.framebufferRenderbuffer(n.FRAMEBUFFER,wt,n.RENDERBUFFER,Lt)}e.bindFramebuffer(n.FRAMEBUFFER,null)}function ge(Y,V,ft){const wt=i.get(Y);V!==void 0&&Bt(wt.__webglFramebuffer,Y,Y.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ft!==void 0&&Me(Y)}function ke(Y){const V=Y.texture,ft=i.get(Y),wt=i.get(V);Y.addEventListener("dispose",H);const Lt=Y.textures,Ct=Y.isWebGLCubeRenderTarget===!0,$t=Lt.length>1;if($t||(wt.__webglTexture===void 0&&(wt.__webglTexture=n.createTexture()),wt.__version=V.version,u.memory.textures++),Ct){ft.__webglFramebuffer=[];for(let Yt=0;Yt<6;Yt++)if(V.mipmaps&&V.mipmaps.length>0){ft.__webglFramebuffer[Yt]=[];for(let Qt=0;Qt<V.mipmaps.length;Qt++)ft.__webglFramebuffer[Yt][Qt]=n.createFramebuffer()}else ft.__webglFramebuffer[Yt]=n.createFramebuffer()}else{if(V.mipmaps&&V.mipmaps.length>0){ft.__webglFramebuffer=[];for(let Yt=0;Yt<V.mipmaps.length;Yt++)ft.__webglFramebuffer[Yt]=n.createFramebuffer()}else ft.__webglFramebuffer=n.createFramebuffer();if($t)for(let Yt=0,Qt=Lt.length;Yt<Qt;Yt++){const Je=i.get(Lt[Yt]);Je.__webglTexture===void 0&&(Je.__webglTexture=n.createTexture(),u.memory.textures++)}if(Y.samples>0&&Ut(Y)===!1){ft.__webglMultisampledFramebuffer=n.createFramebuffer(),ft.__webglColorRenderbuffer=[],e.bindFramebuffer(n.FRAMEBUFFER,ft.__webglMultisampledFramebuffer);for(let Yt=0;Yt<Lt.length;Yt++){const Qt=Lt[Yt];ft.__webglColorRenderbuffer[Yt]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ft.__webglColorRenderbuffer[Yt]);const Je=r.convert(Qt.format,Qt.colorSpace),kt=r.convert(Qt.type),ue=D(Qt.internalFormat,Je,kt,Qt.colorSpace,Y.isXRRenderTarget===!0),de=Vt(Y);n.renderbufferStorageMultisample(n.RENDERBUFFER,de,ue,Y.width,Y.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Yt,n.RENDERBUFFER,ft.__webglColorRenderbuffer[Yt])}n.bindRenderbuffer(n.RENDERBUFFER,null),Y.depthBuffer&&(ft.__webglDepthRenderbuffer=n.createRenderbuffer(),Xt(ft.__webglDepthRenderbuffer,Y,!0)),e.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ct){e.bindTexture(n.TEXTURE_CUBE_MAP,wt.__webglTexture),mt(n.TEXTURE_CUBE_MAP,V);for(let Yt=0;Yt<6;Yt++)if(V.mipmaps&&V.mipmaps.length>0)for(let Qt=0;Qt<V.mipmaps.length;Qt++)Bt(ft.__webglFramebuffer[Yt][Qt],Y,V,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,Qt);else Bt(ft.__webglFramebuffer[Yt],Y,V,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0);T(V)&&M(n.TEXTURE_CUBE_MAP),e.unbindTexture()}else if($t){for(let Yt=0,Qt=Lt.length;Yt<Qt;Yt++){const Je=Lt[Yt],kt=i.get(Je);e.bindTexture(n.TEXTURE_2D,kt.__webglTexture),mt(n.TEXTURE_2D,Je),Bt(ft.__webglFramebuffer,Y,Je,n.COLOR_ATTACHMENT0+Yt,n.TEXTURE_2D,0),T(Je)&&M(n.TEXTURE_2D)}e.unbindTexture()}else{let Yt=n.TEXTURE_2D;if((Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(Yt=Y.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),e.bindTexture(Yt,wt.__webglTexture),mt(Yt,V),V.mipmaps&&V.mipmaps.length>0)for(let Qt=0;Qt<V.mipmaps.length;Qt++)Bt(ft.__webglFramebuffer[Qt],Y,V,n.COLOR_ATTACHMENT0,Yt,Qt);else Bt(ft.__webglFramebuffer,Y,V,n.COLOR_ATTACHMENT0,Yt,0);T(V)&&M(Yt),e.unbindTexture()}Y.depthBuffer&&Me(Y)}function an(Y){const V=Y.textures;for(let ft=0,wt=V.length;ft<wt;ft++){const Lt=V[ft];if(T(Lt)){const Ct=C(Y),$t=i.get(Lt).__webglTexture;e.bindTexture(Ct,$t),M(Ct),e.unbindTexture()}}}const ze=[],it=[];function Un(Y){if(Y.samples>0){if(Ut(Y)===!1){const V=Y.textures,ft=Y.width,wt=Y.height;let Lt=n.COLOR_BUFFER_BIT;const Ct=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,$t=i.get(Y),Yt=V.length>1;if(Yt)for(let Qt=0;Qt<V.length;Qt++)e.bindFramebuffer(n.FRAMEBUFFER,$t.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qt,n.RENDERBUFFER,null),e.bindFramebuffer(n.FRAMEBUFFER,$t.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qt,n.TEXTURE_2D,null,0);e.bindFramebuffer(n.READ_FRAMEBUFFER,$t.__webglMultisampledFramebuffer),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,$t.__webglFramebuffer);for(let Qt=0;Qt<V.length;Qt++){if(Y.resolveDepthBuffer&&(Y.depthBuffer&&(Lt|=n.DEPTH_BUFFER_BIT),Y.stencilBuffer&&Y.resolveStencilBuffer&&(Lt|=n.STENCIL_BUFFER_BIT)),Yt){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,$t.__webglColorRenderbuffer[Qt]);const Je=i.get(V[Qt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Je,0)}n.blitFramebuffer(0,0,ft,wt,0,0,ft,wt,Lt,n.NEAREST),d===!0&&(ze.length=0,it.length=0,ze.push(n.COLOR_ATTACHMENT0+Qt),Y.depthBuffer&&Y.resolveDepthBuffer===!1&&(ze.push(Ct),it.push(Ct),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,it)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ze))}if(e.bindFramebuffer(n.READ_FRAMEBUFFER,null),e.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Yt)for(let Qt=0;Qt<V.length;Qt++){e.bindFramebuffer(n.FRAMEBUFFER,$t.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qt,n.RENDERBUFFER,$t.__webglColorRenderbuffer[Qt]);const Je=i.get(V[Qt]).__webglTexture;e.bindFramebuffer(n.FRAMEBUFFER,$t.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qt,n.TEXTURE_2D,Je,0)}e.bindFramebuffer(n.DRAW_FRAMEBUFFER,$t.__webglMultisampledFramebuffer)}else if(Y.depthBuffer&&Y.resolveDepthBuffer===!1&&d){const V=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[V])}}}function Vt(Y){return Math.min(a.maxSamples,Y.samples)}function Ut(Y){const V=i.get(Y);return Y.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&V.__useRenderToTexture!==!1}function Nt(Y){const V=u.render.frame;y.get(Y)!==V&&(y.set(Y,V),Y.update())}function Kt(Y,V){const ft=Y.colorSpace,wt=Y.format,Lt=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||ft!==Wu&&ft!==Dl&&(mn.getTransfer(ft)===In?(wt!==Pa||Lt!==no)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ft)),V}function Ot(Y){return typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement?(p.width=Y.naturalWidth||Y.width,p.height=Y.naturalHeight||Y.height):typeof VideoFrame<"u"&&Y instanceof VideoFrame?(p.width=Y.displayWidth,p.height=Y.displayHeight):(p.width=Y.width,p.height=Y.height),p}this.allocateTextureUnit=nt,this.resetTextureUnits=at,this.setTexture2D=rt,this.setTexture2DArray=I,this.setTexture3D=Z,this.setTextureCube=W,this.rebindTextures=ge,this.setupRenderTarget=ke,this.updateRenderTargetMipmap=an,this.updateMultisampleRenderTarget=Un,this.setupDepthRenderbuffer=Me,this.setupFrameBufferTexture=Bt,this.useMultisampledRTT=Ut}function C2(n,t){function e(i,a=Dl){let r;const u=mn.getTransfer(a);if(i===no)return n.UNSIGNED_BYTE;if(i===u_)return n.UNSIGNED_SHORT_4_4_4_4;if(i===c_)return n.UNSIGNED_SHORT_5_5_5_1;if(i===vM)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===gM)return n.BYTE;if(i===yM)return n.SHORT;if(i===dd)return n.UNSIGNED_SHORT;if(i===l_)return n.INT;if(i===Vl)return n.UNSIGNED_INT;if(i===As)return n.FLOAT;if(i===Rd)return n.HALF_FLOAT;if(i===_M)return n.ALPHA;if(i===xM)return n.RGB;if(i===Pa)return n.RGBA;if(i===SM)return n.LUMINANCE;if(i===bM)return n.LUMINANCE_ALPHA;if(i===md)return n.DEPTH_COMPONENT;if(i===gd)return n.DEPTH_STENCIL;if(i===f_)return n.RED;if(i===lg)return n.RED_INTEGER;if(i===MM)return n.RG;if(i===h_)return n.RG_INTEGER;if(i===d_)return n.RGBA_INTEGER;if(i===xm||i===Sm||i===bm||i===Mm)if(u===In)if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(i===xm)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===Sm)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===bm)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===Mm)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=t.get("WEBGL_compressed_texture_s3tc"),r!==null){if(i===xm)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===Sm)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===bm)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===Mm)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===yv||i===vv||i===_v||i===xv)if(r=t.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(i===yv)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===vv)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===_v)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===xv)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Sv||i===bv||i===Mv)if(r=t.get("WEBGL_compressed_texture_etc"),r!==null){if(i===Sv||i===bv)return u===In?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(i===Mv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Ev||i===Tv||i===Av||i===Rv||i===wv||i===Cv||i===Dv||i===Ov||i===Uv||i===Nv||i===Lv||i===Pv||i===zv||i===Bv)if(r=t.get("WEBGL_compressed_texture_astc"),r!==null){if(i===Ev)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Tv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Av)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Rv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===wv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Cv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Dv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Ov)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Uv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Nv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Lv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Pv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===zv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Bv)return u===In?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Em||i===Iv||i===Vv)if(r=t.get("EXT_texture_compression_bptc"),r!==null){if(i===Em)return u===In?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Iv)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Vv)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===EM||i===Hv||i===Fv||i===Gv)if(r=t.get("EXT_texture_compression_rgtc"),r!==null){if(i===Em)return r.COMPRESSED_RED_RGTC1_EXT;if(i===Hv)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Fv)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Gv)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===pd?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:e}}const sV=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,rV=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class oV{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(this.texture===null){const a=new _i,r=t.properties.get(a);r.__webglTexture=e.texture,(e.depthNear!==i.depthNear||e.depthFar!==i.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=a}}getMesh(t){if(this.texture!==null&&this.mesh===null){const e=t.cameras[0].viewport,i=new io({vertexShader:sV,fragmentShader:rV,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Bi(new Dd(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class lV extends Jo{constructor(t,e){super();const i=this;let a=null,r=1,u=null,f="local-floor",d=1,p=null,y=null,v=null,_=null,b=null,E=null;const R=new oV,T=e.getContextAttributes();let M=null,C=null;const D=[],O=[],N=new Gt;let L=null;const H=new aa;H.viewport=new xn;const G=new aa;G.viewport=new xn;const B=[H,G],z=new y2;let j=null,at=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(st){let Et=D[st];return Et===void 0&&(Et=new J0,D[st]=Et),Et.getTargetRaySpace()},this.getControllerGrip=function(st){let Et=D[st];return Et===void 0&&(Et=new J0,D[st]=Et),Et.getGripSpace()},this.getHand=function(st){let Et=D[st];return Et===void 0&&(Et=new J0,D[st]=Et),Et.getHandSpace()};function nt(st){const Et=O.indexOf(st.inputSource);if(Et===-1)return;const Bt=D[Et];Bt!==void 0&&(Bt.update(st.inputSource,st.frame,p||u),Bt.dispatchEvent({type:st.type,data:st.inputSource}))}function Q(){a.removeEventListener("select",nt),a.removeEventListener("selectstart",nt),a.removeEventListener("selectend",nt),a.removeEventListener("squeeze",nt),a.removeEventListener("squeezestart",nt),a.removeEventListener("squeezeend",nt),a.removeEventListener("end",Q),a.removeEventListener("inputsourceschange",rt);for(let st=0;st<D.length;st++){const Et=O[st];Et!==null&&(O[st]=null,D[st].disconnect(Et))}j=null,at=null,R.reset(),t.setRenderTarget(M),b=null,_=null,v=null,a=null,C=null,Tt.stop(),i.isPresenting=!1,t.setPixelRatio(L),t.setSize(N.width,N.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(st){r=st,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(st){f=st,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||u},this.setReferenceSpace=function(st){p=st},this.getBaseLayer=function(){return _!==null?_:b},this.getBinding=function(){return v},this.getFrame=function(){return E},this.getSession=function(){return a},this.setSession=async function(st){if(a=st,a!==null){if(M=t.getRenderTarget(),a.addEventListener("select",nt),a.addEventListener("selectstart",nt),a.addEventListener("selectend",nt),a.addEventListener("squeeze",nt),a.addEventListener("squeezestart",nt),a.addEventListener("squeezeend",nt),a.addEventListener("end",Q),a.addEventListener("inputsourceschange",rt),T.xrCompatible!==!0&&await e.makeXRCompatible(),L=t.getPixelRatio(),t.getSize(N),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Bt=null,Xt=null,Zt=null;T.depth&&(Zt=T.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Bt=T.stencil?gd:md,Xt=T.stencil?pd:Vl);const Me={colorFormat:e.RGBA8,depthFormat:Zt,scaleFactor:r};v=new XRWebGLBinding(a,e),_=v.createProjectionLayer(Me),a.updateRenderState({layers:[_]}),t.setPixelRatio(1),t.setSize(_.textureWidth,_.textureHeight,!1),C=new Ko(_.textureWidth,_.textureHeight,{format:Pa,type:no,depthTexture:new LM(_.textureWidth,_.textureHeight,Xt,void 0,void 0,void 0,void 0,void 0,void 0,Bt),stencilBuffer:T.stencil,colorSpace:t.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}else{const Bt={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:r};b=new XRWebGLLayer(a,e,Bt),a.updateRenderState({baseLayer:b}),t.setPixelRatio(1),t.setSize(b.framebufferWidth,b.framebufferHeight,!1),C=new Ko(b.framebufferWidth,b.framebufferHeight,{format:Pa,type:no,colorSpace:t.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:b.ignoreDepthValues===!1,resolveStencilBuffer:b.ignoreDepthValues===!1})}C.isXRRenderTarget=!0,this.setFoveation(d),p=null,u=await a.requestReferenceSpace(f),Tt.setContext(a),Tt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return R.getDepthTexture()};function rt(st){for(let Et=0;Et<st.removed.length;Et++){const Bt=st.removed[Et],Xt=O.indexOf(Bt);Xt>=0&&(O[Xt]=null,D[Xt].disconnect(Bt))}for(let Et=0;Et<st.added.length;Et++){const Bt=st.added[Et];let Xt=O.indexOf(Bt);if(Xt===-1){for(let Me=0;Me<D.length;Me++)if(Me>=O.length){O.push(Bt),Xt=Me;break}else if(O[Me]===null){O[Me]=Bt,Xt=Me;break}if(Xt===-1)break}const Zt=D[Xt];Zt&&Zt.connect(Bt)}}const I=new K,Z=new K;function W(st,Et,Bt){I.setFromMatrixPosition(Et.matrixWorld),Z.setFromMatrixPosition(Bt.matrixWorld);const Xt=I.distanceTo(Z),Zt=Et.projectionMatrix.elements,Me=Bt.projectionMatrix.elements,ge=Zt[14]/(Zt[10]-1),ke=Zt[14]/(Zt[10]+1),an=(Zt[9]+1)/Zt[5],ze=(Zt[9]-1)/Zt[5],it=(Zt[8]-1)/Zt[0],Un=(Me[8]+1)/Me[0],Vt=ge*it,Ut=ge*Un,Nt=Xt/(-it+Un),Kt=Nt*-it;if(Et.matrixWorld.decompose(st.position,st.quaternion,st.scale),st.translateX(Kt),st.translateZ(Nt),st.matrixWorld.compose(st.position,st.quaternion,st.scale),st.matrixWorldInverse.copy(st.matrixWorld).invert(),Zt[10]===-1)st.projectionMatrix.copy(Et.projectionMatrix),st.projectionMatrixInverse.copy(Et.projectionMatrixInverse);else{const Ot=ge+Nt,Y=ke+Nt,V=Vt-Kt,ft=Ut+(Xt-Kt),wt=an*ke/Y*Ot,Lt=ze*ke/Y*Ot;st.projectionMatrix.makePerspective(V,ft,wt,Lt,Ot,Y),st.projectionMatrixInverse.copy(st.projectionMatrix).invert()}}function J(st,Et){Et===null?st.matrixWorld.copy(st.matrix):st.matrixWorld.multiplyMatrices(Et.matrixWorld,st.matrix),st.matrixWorldInverse.copy(st.matrixWorld).invert()}this.updateCamera=function(st){if(a===null)return;let Et=st.near,Bt=st.far;R.texture!==null&&(R.depthNear>0&&(Et=R.depthNear),R.depthFar>0&&(Bt=R.depthFar)),z.near=G.near=H.near=Et,z.far=G.far=H.far=Bt,(j!==z.near||at!==z.far)&&(a.updateRenderState({depthNear:z.near,depthFar:z.far}),j=z.near,at=z.far),H.layers.mask=st.layers.mask|2,G.layers.mask=st.layers.mask|4,z.layers.mask=H.layers.mask|G.layers.mask;const Xt=st.parent,Zt=z.cameras;J(z,Xt);for(let Me=0;Me<Zt.length;Me++)J(Zt[Me],Xt);Zt.length===2?W(z,H,G):z.projectionMatrix.copy(H.projectionMatrix),F(st,z,Xt)};function F(st,Et,Bt){Bt===null?st.matrix.copy(Et.matrixWorld):(st.matrix.copy(Bt.matrixWorld),st.matrix.invert(),st.matrix.multiply(Et.matrixWorld)),st.matrix.decompose(st.position,st.quaternion,st.scale),st.updateMatrixWorld(!0),st.projectionMatrix.copy(Et.projectionMatrix),st.projectionMatrixInverse.copy(Et.projectionMatrixInverse),st.isPerspectiveCamera&&(st.fov=yd*2*Math.atan(1/st.projectionMatrix.elements[5]),st.zoom=1)}this.getCamera=function(){return z},this.getFoveation=function(){if(!(_===null&&b===null))return d},this.setFoveation=function(st){d=st,_!==null&&(_.fixedFoveation=st),b!==null&&b.fixedFoveation!==void 0&&(b.fixedFoveation=st)},this.hasDepthSensing=function(){return R.texture!==null},this.getDepthSensingMesh=function(){return R.getMesh(z)};let $=null;function mt(st,Et){if(y=Et.getViewerPose(p||u),E=Et,y!==null){const Bt=y.views;b!==null&&(t.setRenderTargetFramebuffer(C,b.framebuffer),t.setRenderTarget(C));let Xt=!1;Bt.length!==z.cameras.length&&(z.cameras.length=0,Xt=!0);for(let ge=0;ge<Bt.length;ge++){const ke=Bt[ge];let an=null;if(b!==null)an=b.getViewport(ke);else{const it=v.getViewSubImage(_,ke);an=it.viewport,ge===0&&(t.setRenderTargetTextures(C,it.colorTexture,it.depthStencilTexture),t.setRenderTarget(C))}let ze=B[ge];ze===void 0&&(ze=new aa,ze.layers.enable(ge),ze.viewport=new xn,B[ge]=ze),ze.matrix.fromArray(ke.transform.matrix),ze.matrix.decompose(ze.position,ze.quaternion,ze.scale),ze.projectionMatrix.fromArray(ke.projectionMatrix),ze.projectionMatrixInverse.copy(ze.projectionMatrix).invert(),ze.viewport.set(an.x,an.y,an.width,an.height),ge===0&&(z.matrix.copy(ze.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale)),Xt===!0&&z.cameras.push(ze)}const Zt=a.enabledFeatures;if(Zt&&Zt.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&v){const ge=v.getDepthInformation(Bt[0]);ge&&ge.isValid&&ge.texture&&R.init(t,ge,a.renderState)}}for(let Bt=0;Bt<D.length;Bt++){const Xt=O[Bt],Zt=D[Bt];Xt!==null&&Zt!==void 0&&Zt.update(Xt,Et,p||u)}$&&$(st,Et),Et.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Et}),E=null}const Tt=new E2;Tt.setAnimationLoop(mt),this.setAnimationLoop=function(st){$=st},this.dispose=function(){}}}const lf=new Qs,uV=new Le;function cV(n,t){function e(T,M){T.matrixAutoUpdate===!0&&T.updateMatrix(),M.value.copy(T.matrix)}function i(T,M){M.color.getRGB(T.fogColor.value,bC(n)),M.isFog?(T.fogNear.value=M.near,T.fogFar.value=M.far):M.isFogExp2&&(T.fogDensity.value=M.density)}function a(T,M,C,D,O){M.isMeshBasicMaterial||M.isMeshLambertMaterial?r(T,M):M.isMeshToonMaterial?(r(T,M),v(T,M)):M.isMeshPhongMaterial?(r(T,M),y(T,M)):M.isMeshStandardMaterial?(r(T,M),_(T,M),M.isMeshPhysicalMaterial&&b(T,M,O)):M.isMeshMatcapMaterial?(r(T,M),E(T,M)):M.isMeshDepthMaterial?r(T,M):M.isMeshDistanceMaterial?(r(T,M),R(T,M)):M.isMeshNormalMaterial?r(T,M):M.isLineBasicMaterial?(u(T,M),M.isLineDashedMaterial&&f(T,M)):M.isPointsMaterial?d(T,M,C,D):M.isSpriteMaterial?p(T,M):M.isShadowMaterial?(T.color.value.copy(M.color),T.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function r(T,M){T.opacity.value=M.opacity,M.color&&T.diffuse.value.copy(M.color),M.emissive&&T.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(T.map.value=M.map,e(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,e(M.alphaMap,T.alphaMapTransform)),M.bumpMap&&(T.bumpMap.value=M.bumpMap,e(M.bumpMap,T.bumpMapTransform),T.bumpScale.value=M.bumpScale,M.side===as&&(T.bumpScale.value*=-1)),M.normalMap&&(T.normalMap.value=M.normalMap,e(M.normalMap,T.normalMapTransform),T.normalScale.value.copy(M.normalScale),M.side===as&&T.normalScale.value.negate()),M.displacementMap&&(T.displacementMap.value=M.displacementMap,e(M.displacementMap,T.displacementMapTransform),T.displacementScale.value=M.displacementScale,T.displacementBias.value=M.displacementBias),M.emissiveMap&&(T.emissiveMap.value=M.emissiveMap,e(M.emissiveMap,T.emissiveMapTransform)),M.specularMap&&(T.specularMap.value=M.specularMap,e(M.specularMap,T.specularMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest);const C=t.get(M),D=C.envMap,O=C.envMapRotation;D&&(T.envMap.value=D,lf.copy(O),lf.x*=-1,lf.y*=-1,lf.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(lf.y*=-1,lf.z*=-1),T.envMapRotation.value.setFromMatrix4(uV.makeRotationFromEuler(lf)),T.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=M.reflectivity,T.ior.value=M.ior,T.refractionRatio.value=M.refractionRatio),M.lightMap&&(T.lightMap.value=M.lightMap,T.lightMapIntensity.value=M.lightMapIntensity,e(M.lightMap,T.lightMapTransform)),M.aoMap&&(T.aoMap.value=M.aoMap,T.aoMapIntensity.value=M.aoMapIntensity,e(M.aoMap,T.aoMapTransform))}function u(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,M.map&&(T.map.value=M.map,e(M.map,T.mapTransform))}function f(T,M){T.dashSize.value=M.dashSize,T.totalSize.value=M.dashSize+M.gapSize,T.scale.value=M.scale}function d(T,M,C,D){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.size.value=M.size*C,T.scale.value=D*.5,M.map&&(T.map.value=M.map,e(M.map,T.uvTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,e(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function p(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.rotation.value=M.rotation,M.map&&(T.map.value=M.map,e(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,e(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function y(T,M){T.specular.value.copy(M.specular),T.shininess.value=Math.max(M.shininess,1e-4)}function v(T,M){M.gradientMap&&(T.gradientMap.value=M.gradientMap)}function _(T,M){T.metalness.value=M.metalness,M.metalnessMap&&(T.metalnessMap.value=M.metalnessMap,e(M.metalnessMap,T.metalnessMapTransform)),T.roughness.value=M.roughness,M.roughnessMap&&(T.roughnessMap.value=M.roughnessMap,e(M.roughnessMap,T.roughnessMapTransform)),M.envMap&&(T.envMapIntensity.value=M.envMapIntensity)}function b(T,M,C){T.ior.value=M.ior,M.sheen>0&&(T.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),T.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(T.sheenColorMap.value=M.sheenColorMap,e(M.sheenColorMap,T.sheenColorMapTransform)),M.sheenRoughnessMap&&(T.sheenRoughnessMap.value=M.sheenRoughnessMap,e(M.sheenRoughnessMap,T.sheenRoughnessMapTransform))),M.clearcoat>0&&(T.clearcoat.value=M.clearcoat,T.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(T.clearcoatMap.value=M.clearcoatMap,e(M.clearcoatMap,T.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,e(M.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(T.clearcoatNormalMap.value=M.clearcoatNormalMap,e(M.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===as&&T.clearcoatNormalScale.value.negate())),M.dispersion>0&&(T.dispersion.value=M.dispersion),M.iridescence>0&&(T.iridescence.value=M.iridescence,T.iridescenceIOR.value=M.iridescenceIOR,T.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(T.iridescenceMap.value=M.iridescenceMap,e(M.iridescenceMap,T.iridescenceMapTransform)),M.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=M.iridescenceThicknessMap,e(M.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),M.transmission>0&&(T.transmission.value=M.transmission,T.transmissionSamplerMap.value=C.texture,T.transmissionSamplerSize.value.set(C.width,C.height),M.transmissionMap&&(T.transmissionMap.value=M.transmissionMap,e(M.transmissionMap,T.transmissionMapTransform)),T.thickness.value=M.thickness,M.thicknessMap&&(T.thicknessMap.value=M.thicknessMap,e(M.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=M.attenuationDistance,T.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(T.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(T.anisotropyMap.value=M.anisotropyMap,e(M.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=M.specularIntensity,T.specularColor.value.copy(M.specularColor),M.specularColorMap&&(T.specularColorMap.value=M.specularColorMap,e(M.specularColorMap,T.specularColorMapTransform)),M.specularIntensityMap&&(T.specularIntensityMap.value=M.specularIntensityMap,e(M.specularIntensityMap,T.specularIntensityMapTransform))}function E(T,M){M.matcap&&(T.matcap.value=M.matcap)}function R(T,M){const C=t.get(M).light;T.referencePosition.value.setFromMatrixPosition(C.matrixWorld),T.nearDistance.value=C.shadow.camera.near,T.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:a}}function fV(n,t,e,i){let a={},r={},u=[];const f=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function d(C,D){const O=D.program;i.uniformBlockBinding(C,O)}function p(C,D){let O=a[C.id];O===void 0&&(E(C),O=y(C),a[C.id]=O,C.addEventListener("dispose",T));const N=D.program;i.updateUBOMapping(C,N);const L=t.render.frame;r[C.id]!==L&&(_(C),r[C.id]=L)}function y(C){const D=v();C.__bindingPointIndex=D;const O=n.createBuffer(),N=C.__size,L=C.usage;return n.bindBuffer(n.UNIFORM_BUFFER,O),n.bufferData(n.UNIFORM_BUFFER,N,L),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,D,O),O}function v(){for(let C=0;C<f;C++)if(u.indexOf(C)===-1)return u.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(C){const D=a[C.id],O=C.uniforms,N=C.__cache;n.bindBuffer(n.UNIFORM_BUFFER,D);for(let L=0,H=O.length;L<H;L++){const G=Array.isArray(O[L])?O[L]:[O[L]];for(let B=0,z=G.length;B<z;B++){const j=G[B];if(b(j,L,B,N)===!0){const at=j.__offset,nt=Array.isArray(j.value)?j.value:[j.value];let Q=0;for(let rt=0;rt<nt.length;rt++){const I=nt[rt],Z=R(I);typeof I=="number"||typeof I=="boolean"?(j.__data[0]=I,n.bufferSubData(n.UNIFORM_BUFFER,at+Q,j.__data)):I.isMatrix3?(j.__data[0]=I.elements[0],j.__data[1]=I.elements[1],j.__data[2]=I.elements[2],j.__data[3]=0,j.__data[4]=I.elements[3],j.__data[5]=I.elements[4],j.__data[6]=I.elements[5],j.__data[7]=0,j.__data[8]=I.elements[6],j.__data[9]=I.elements[7],j.__data[10]=I.elements[8],j.__data[11]=0):(I.toArray(j.__data,Q),Q+=Z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,at,j.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function b(C,D,O,N){const L=C.value,H=D+"_"+O;if(N[H]===void 0)return typeof L=="number"||typeof L=="boolean"?N[H]=L:N[H]=L.clone(),!0;{const G=N[H];if(typeof L=="number"||typeof L=="boolean"){if(G!==L)return N[H]=L,!0}else if(G.equals(L)===!1)return G.copy(L),!0}return!1}function E(C){const D=C.uniforms;let O=0;const N=16;for(let H=0,G=D.length;H<G;H++){const B=Array.isArray(D[H])?D[H]:[D[H]];for(let z=0,j=B.length;z<j;z++){const at=B[z],nt=Array.isArray(at.value)?at.value:[at.value];for(let Q=0,rt=nt.length;Q<rt;Q++){const I=nt[Q],Z=R(I),W=O%N,J=W%Z.boundary,F=W+J;O+=J,F!==0&&N-F<Z.storage&&(O+=N-F),at.__data=new Float32Array(Z.storage/Float32Array.BYTES_PER_ELEMENT),at.__offset=O,O+=Z.storage}}}const L=O%N;return L>0&&(O+=N-L),C.__size=O,C.__cache={},this}function R(C){const D={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(D.boundary=4,D.storage=4):C.isVector2?(D.boundary=8,D.storage=8):C.isVector3||C.isColor?(D.boundary=16,D.storage=12):C.isVector4?(D.boundary=16,D.storage=16):C.isMatrix3?(D.boundary=48,D.storage=48):C.isMatrix4?(D.boundary=64,D.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),D}function T(C){const D=C.target;D.removeEventListener("dispose",T);const O=u.indexOf(D.__bindingPointIndex);u.splice(O,1),n.deleteBuffer(a[D.id]),delete a[D.id],delete r[D.id]}function M(){for(const C in a)n.deleteBuffer(a[C]);u=[],a={},r={}}return{bind:d,update:p,dispose:M}}class D2{constructor(t={}){const{canvas:e=_C(),context:i=null,depth:a=!0,stencil:r=!1,alpha:u=!1,antialias:f=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:y="default",failIfMajorPerformanceCaveat:v=!1,reverseDepthBuffer:_=!1}=t;this.isWebGLRenderer=!0;let b;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");b=i.getContextAttributes().alpha}else b=u;const E=new Uint32Array(4),R=new Int32Array(4);let T=null,M=null;const C=[],D=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ko,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const O=this;let N=!1;this._outputColorSpace=Na;let L=0,H=0,G=null,B=-1,z=null;const j=new xn,at=new xn;let nt=null;const Q=new fe(0);let rt=0,I=e.width,Z=e.height,W=1,J=null,F=null;const $=new xn(0,0,I,Z),mt=new xn(0,0,I,Z);let Tt=!1;const st=new fg;let Et=!1,Bt=!1;const Xt=new Le,Zt=new Le,Me=new K,ge=new xn,ke={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let an=!1;function ze(){return G===null?W:1}let it=i;function Un(X,ut){return e.getContext(X,ut)}try{const X={alpha:!0,depth:a,stencil:r,antialias:f,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:y,failIfMajorPerformanceCaveat:v};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${s_}`),e.addEventListener("webglcontextlost",Ht,!1),e.addEventListener("webglcontextrestored",ae,!1),e.addEventListener("webglcontextcreationerror",ie,!1),it===null){const ut="webgl2";if(it=Un(ut,X),it===null)throw Un(ut)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(X){throw console.error("THREE.WebGLRenderer: "+X.message),X}let Vt,Ut,Nt,Kt,Ot,Y,V,ft,wt,Lt,Ct,$t,Yt,Qt,Je,kt,ue,de,pe,te,Ge,Te,gn,ct;function ne(){Vt=new M4(it),Vt.init(),Te=new C2(it,Vt),Ut=new g4(it,Vt,t,Te),Nt=new iV(it,Vt),Ut.reverseDepthBuffer&&_&&Nt.buffers.depth.setReversed(!0),Kt=new A4(it),Ot=new XI,Y=new aV(it,Vt,Nt,Ot,Ut,Te,Kt),V=new v4(O),ft=new b4(O),wt=new UP(it),gn=new p4(it,wt),Lt=new E4(it,wt,Kt,gn),Ct=new w4(it,Lt,wt,Kt),pe=new R4(it,Ut,Y),kt=new y4(Ot),$t=new qI(O,V,ft,Vt,Ut,gn,kt),Yt=new cV(O,Ot),Qt=new jI,Je=new JI(Vt),de=new d4(O,V,ft,Nt,Ct,b,d),ue=new eV(O,Ct,Ut),ct=new fV(it,Kt,Ut,Nt),te=new m4(it,Vt,Kt),Ge=new T4(it,Vt,Kt),Kt.programs=$t.programs,O.capabilities=Ut,O.extensions=Vt,O.properties=Ot,O.renderLists=Qt,O.shadowMap=ue,O.state=Nt,O.info=Kt}ne();const Rt=new lV(O,it);this.xr=Rt,this.getContext=function(){return it},this.getContextAttributes=function(){return it.getContextAttributes()},this.forceContextLoss=function(){const X=Vt.get("WEBGL_lose_context");X&&X.loseContext()},this.forceContextRestore=function(){const X=Vt.get("WEBGL_lose_context");X&&X.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(X){X!==void 0&&(W=X,this.setSize(I,Z,!1))},this.getSize=function(X){return X.set(I,Z)},this.setSize=function(X,ut,xt=!0){if(Rt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}I=X,Z=ut,e.width=Math.floor(X*W),e.height=Math.floor(ut*W),xt===!0&&(e.style.width=X+"px",e.style.height=ut+"px"),this.setViewport(0,0,X,ut)},this.getDrawingBufferSize=function(X){return X.set(I*W,Z*W).floor()},this.setDrawingBufferSize=function(X,ut,xt){I=X,Z=ut,W=xt,e.width=Math.floor(X*xt),e.height=Math.floor(ut*xt),this.setViewport(0,0,X,ut)},this.getCurrentViewport=function(X){return X.copy(j)},this.getViewport=function(X){return X.copy($)},this.setViewport=function(X,ut,xt,St){X.isVector4?$.set(X.x,X.y,X.z,X.w):$.set(X,ut,xt,St),Nt.viewport(j.copy($).multiplyScalar(W).round())},this.getScissor=function(X){return X.copy(mt)},this.setScissor=function(X,ut,xt,St){X.isVector4?mt.set(X.x,X.y,X.z,X.w):mt.set(X,ut,xt,St),Nt.scissor(at.copy(mt).multiplyScalar(W).round())},this.getScissorTest=function(){return Tt},this.setScissorTest=function(X){Nt.setScissorTest(Tt=X)},this.setOpaqueSort=function(X){J=X},this.setTransparentSort=function(X){F=X},this.getClearColor=function(X){return X.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor(...arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha(...arguments)},this.clear=function(X=!0,ut=!0,xt=!0){let St=0;if(X){let dt=!1;if(G!==null){const qt=G.texture.format;dt=qt===d_||qt===h_||qt===lg}if(dt){const qt=G.texture.type,Jt=qt===no||qt===Vl||qt===dd||qt===pd||qt===u_||qt===c_,ee=de.getClearColor(),ce=de.getClearAlpha(),Re=ee.r,xe=ee.g,ye=ee.b;Jt?(E[0]=Re,E[1]=xe,E[2]=ye,E[3]=ce,it.clearBufferuiv(it.COLOR,0,E)):(R[0]=Re,R[1]=xe,R[2]=ye,R[3]=ce,it.clearBufferiv(it.COLOR,0,R))}else St|=it.COLOR_BUFFER_BIT}ut&&(St|=it.DEPTH_BUFFER_BIT),xt&&(St|=it.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),it.clear(St)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ht,!1),e.removeEventListener("webglcontextrestored",ae,!1),e.removeEventListener("webglcontextcreationerror",ie,!1),de.dispose(),Qt.dispose(),Je.dispose(),Ot.dispose(),V.dispose(),ft.dispose(),Ct.dispose(),gn.dispose(),ct.dispose(),$t.dispose(),Rt.dispose(),Rt.removeEventListener("sessionstart",fi),Rt.removeEventListener("sessionend",bi),Qi.stop()};function Ht(X){X.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function ae(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const X=Kt.autoReset,ut=ue.enabled,xt=ue.autoUpdate,St=ue.needsUpdate,dt=ue.type;ne(),Kt.autoReset=X,ue.enabled=ut,ue.autoUpdate=xt,ue.needsUpdate=St,ue.type=dt}function ie(X){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",X.statusMessage)}function Pe(X){const ut=X.target;ut.removeEventListener("dispose",Pe),An(ut)}function An(X){jn(X),Ot.remove(X)}function jn(X){const ut=Ot.get(X).programs;ut!==void 0&&(ut.forEach(function(xt){$t.releaseProgram(xt)}),X.isShaderMaterial&&$t.releaseShaderCache(X))}this.renderBufferDirect=function(X,ut,xt,St,dt,qt){ut===null&&(ut=ke);const Jt=dt.isMesh&&dt.matrixWorld.determinant()<0,ee=ro(X,ut,xt,St,dt);Nt.setMaterial(St,Jt);let ce=xt.index,Re=1;if(St.wireframe===!0){if(ce=Lt.getWireframeAttribute(xt),ce===void 0)return;Re=2}const xe=xt.drawRange,ye=xt.attributes.position;let $e=xe.start*Re,hn=(xe.start+xe.count)*Re;qt!==null&&($e=Math.max($e,qt.start*Re),hn=Math.min(hn,(qt.start+qt.count)*Re)),ce!==null?($e=Math.max($e,0),hn=Math.min(hn,ce.count)):ye!=null&&($e=Math.max($e,0),hn=Math.min(hn,ye.count));const Yn=hn-$e;if(Yn<0||Yn===1/0)return;gn.setup(dt,St,ee,xt,ce);let en,sn=te;if(ce!==null&&(en=wt.get(ce),sn=Ge,sn.setIndex(en)),dt.isMesh)St.wireframe===!0?(Nt.setLineWidth(St.wireframeLinewidth*ze()),sn.setMode(it.LINES)):sn.setMode(it.TRIANGLES);else if(dt.isLine){let Se=St.linewidth;Se===void 0&&(Se=1),Nt.setLineWidth(Se*ze()),dt.isLineSegments?sn.setMode(it.LINES):dt.isLineLoop?sn.setMode(it.LINE_LOOP):sn.setMode(it.LINE_STRIP)}else dt.isPoints?sn.setMode(it.POINTS):dt.isSprite&&sn.setMode(it.TRIANGLES);if(dt.isBatchedMesh)if(dt._multiDrawInstances!==null)Q0("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),sn.renderMultiDrawInstances(dt._multiDrawStarts,dt._multiDrawCounts,dt._multiDrawCount,dt._multiDrawInstances);else if(Vt.get("WEBGL_multi_draw"))sn.renderMultiDraw(dt._multiDrawStarts,dt._multiDrawCounts,dt._multiDrawCount);else{const Se=dt._multiDrawStarts,Kn=dt._multiDrawCounts,cn=dt._multiDrawCount,Ii=ce?wt.get(ce).bytesPerElement:1,Js=Ot.get(St).currentProgram.getUniforms();for(let Nn=0;Nn<cn;Nn++)Js.setValue(it,"_gl_DrawID",Nn),sn.render(Se[Nn]/Ii,Kn[Nn])}else if(dt.isInstancedMesh)sn.renderInstances($e,Yn,dt.count);else if(xt.isInstancedBufferGeometry){const Se=xt._maxInstanceCount!==void 0?xt._maxInstanceCount:1/0,Kn=Math.min(xt.instanceCount,Se);sn.renderInstances($e,Yn,Kn)}else sn.render($e,Yn)};function ln(X,ut,xt){X.transparent===!0&&X.side===qo&&X.forceSinglePass===!1?(X.side=as,X.needsUpdate=!0,wn(X,ut,xt),X.side=Bl,X.needsUpdate=!0,wn(X,ut,xt),X.side=qo):wn(X,ut,xt)}this.compile=function(X,ut,xt=null){xt===null&&(xt=X),M=Je.get(xt),M.init(ut),D.push(M),xt.traverseVisible(function(dt){dt.isLight&&dt.layers.test(ut.layers)&&(M.pushLight(dt),dt.castShadow&&M.pushShadow(dt))}),X!==xt&&X.traverseVisible(function(dt){dt.isLight&&dt.layers.test(ut.layers)&&(M.pushLight(dt),dt.castShadow&&M.pushShadow(dt))}),M.setupLights();const St=new Set;return X.traverse(function(dt){if(!(dt.isMesh||dt.isPoints||dt.isLine||dt.isSprite))return;const qt=dt.material;if(qt)if(Array.isArray(qt))for(let Jt=0;Jt<qt.length;Jt++){const ee=qt[Jt];ln(ee,xt,dt),St.add(ee)}else ln(qt,xt,dt),St.add(qt)}),M=D.pop(),St},this.compileAsync=function(X,ut,xt=null){const St=this.compile(X,ut,xt);return new Promise(dt=>{function qt(){if(St.forEach(function(Jt){Ot.get(Jt).currentProgram.isReady()&&St.delete(Jt)}),St.size===0){dt(X);return}setTimeout(qt,10)}Vt.get("KHR_parallel_shader_compile")!==null?qt():setTimeout(qt,10)})};let va=null;function Si(X){va&&va(X)}function fi(){Qi.stop()}function bi(){Qi.start()}const Qi=new E2;Qi.setAnimationLoop(Si),typeof self<"u"&&Qi.setContext(self),this.setAnimationLoop=function(X){va=X,Rt.setAnimationLoop(X),X===null?Qi.stop():Qi.start()},Rt.addEventListener("sessionstart",fi),Rt.addEventListener("sessionend",bi),this.render=function(X,ut){if(ut!==void 0&&ut.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if(X.matrixWorldAutoUpdate===!0&&X.updateMatrixWorld(),ut.parent===null&&ut.matrixWorldAutoUpdate===!0&&ut.updateMatrixWorld(),Rt.enabled===!0&&Rt.isPresenting===!0&&(Rt.cameraAutoUpdate===!0&&Rt.updateCamera(ut),ut=Rt.getCamera()),X.isScene===!0&&X.onBeforeRender(O,X,ut,G),M=Je.get(X,D.length),M.init(ut),D.push(M),Zt.multiplyMatrices(ut.projectionMatrix,ut.matrixWorldInverse),st.setFromProjectionMatrix(Zt),Bt=this.localClippingEnabled,Et=kt.init(this.clippingPlanes,Bt),T=Qt.get(X,C.length),T.init(),C.push(T),Rt.enabled===!0&&Rt.isPresenting===!0){const qt=O.xr.getDepthSensingMesh();qt!==null&&_a(qt,ut,-1/0,O.sortObjects)}_a(X,ut,0,O.sortObjects),T.finish(),O.sortObjects===!0&&T.sort(J,F),an=Rt.enabled===!1||Rt.isPresenting===!1||Rt.hasDepthSensing()===!1,an&&de.addToRenderList(T,X),this.info.render.frame++,Et===!0&&kt.beginShadows();const xt=M.state.shadowsArray;ue.render(xt,X,ut),Et===!0&&kt.endShadows(),this.info.autoReset===!0&&this.info.reset();const St=T.opaque,dt=T.transmissive;if(M.setupLights(),ut.isArrayCamera){const qt=ut.cameras;if(dt.length>0)for(let Jt=0,ee=qt.length;Jt<ee;Jt++){const ce=qt[Jt];Cs(St,dt,X,ce)}an&&de.render(X);for(let Jt=0,ee=qt.length;Jt<ee;Jt++){const ce=qt[Jt];ic(T,X,ce,ce.viewport)}}else dt.length>0&&Cs(St,dt,X,ut),an&&de.render(X),ic(T,X,ut);G!==null&&H===0&&(Y.updateMultisampleRenderTarget(G),Y.updateRenderTargetMipmap(G)),X.isScene===!0&&X.onAfterRender(O,X,ut),gn.resetDefaultState(),B=-1,z=null,D.pop(),D.length>0?(M=D[D.length-1],Et===!0&&kt.setGlobalState(O.clippingPlanes,M.state.camera)):M=null,C.pop(),C.length>0?T=C[C.length-1]:T=null};function _a(X,ut,xt,St){if(X.visible===!1)return;if(X.layers.test(ut.layers)){if(X.isGroup)xt=X.renderOrder;else if(X.isLOD)X.autoUpdate===!0&&X.update(ut);else if(X.isLight)M.pushLight(X),X.castShadow&&M.pushShadow(X);else if(X.isSprite){if(!X.frustumCulled||st.intersectsSprite(X)){St&&ge.setFromMatrixPosition(X.matrixWorld).applyMatrix4(Zt);const Jt=Ct.update(X),ee=X.material;ee.visible&&T.push(X,Jt,ee,xt,ge.z,null)}}else if((X.isMesh||X.isLine||X.isPoints)&&(!X.frustumCulled||st.intersectsObject(X))){const Jt=Ct.update(X),ee=X.material;if(St&&(X.boundingSphere!==void 0?(X.boundingSphere===null&&X.computeBoundingSphere(),ge.copy(X.boundingSphere.center)):(Jt.boundingSphere===null&&Jt.computeBoundingSphere(),ge.copy(Jt.boundingSphere.center)),ge.applyMatrix4(X.matrixWorld).applyMatrix4(Zt)),Array.isArray(ee)){const ce=Jt.groups;for(let Re=0,xe=ce.length;Re<xe;Re++){const ye=ce[Re],$e=ee[ye.materialIndex];$e&&$e.visible&&T.push(X,Jt,$e,xt,ge.z,ye)}}else ee.visible&&T.push(X,Jt,ee,xt,ge.z,null)}}const qt=X.children;for(let Jt=0,ee=qt.length;Jt<ee;Jt++)_a(qt[Jt],ut,xt,St)}function ic(X,ut,xt,St){const dt=X.opaque,qt=X.transmissive,Jt=X.transparent;M.setupLightsView(xt),Et===!0&&kt.setGlobalState(O.clippingPlanes,xt),St&&Nt.viewport(j.copy(St)),dt.length>0&&sa(dt,ut,xt),qt.length>0&&sa(qt,ut,xt),Jt.length>0&&sa(Jt,ut,xt),Nt.buffers.depth.setTest(!0),Nt.buffers.depth.setMask(!0),Nt.buffers.color.setMask(!0),Nt.setPolygonOffset(!1)}function Cs(X,ut,xt,St){if((xt.isScene===!0?xt.overrideMaterial:null)!==null)return;M.state.transmissionRenderTarget[St.id]===void 0&&(M.state.transmissionRenderTarget[St.id]=new Ko(1,1,{generateMipmaps:!0,type:Vt.has("EXT_color_buffer_half_float")||Vt.has("EXT_color_buffer_float")?Rd:no,minFilter:Xo,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:mn.workingColorSpace}));const qt=M.state.transmissionRenderTarget[St.id],Jt=St.viewport||j;qt.setSize(Jt.z*O.transmissionResolutionScale,Jt.w*O.transmissionResolutionScale);const ee=O.getRenderTarget();O.setRenderTarget(qt),O.getClearColor(Q),rt=O.getClearAlpha(),rt<1&&O.setClearColor(16777215,.5),O.clear(),an&&de.render(xt);const ce=O.toneMapping;O.toneMapping=ko;const Re=St.viewport;if(St.viewport!==void 0&&(St.viewport=void 0),M.setupLightsView(St),Et===!0&&kt.setGlobalState(O.clippingPlanes,St),sa(X,xt,St),Y.updateMultisampleRenderTarget(qt),Y.updateRenderTargetMipmap(qt),Vt.has("WEBGL_multisampled_render_to_texture")===!1){let xe=!1;for(let ye=0,$e=ut.length;ye<$e;ye++){const hn=ut[ye],Yn=hn.object,en=hn.geometry,sn=hn.material,Se=hn.group;if(sn.side===qo&&Yn.layers.test(St.layers)){const Kn=sn.side;sn.side=as,sn.needsUpdate=!0,Ds(Yn,xt,St,en,sn,Se),sn.side=Kn,sn.needsUpdate=!0,xe=!0}}xe===!0&&(Y.updateMultisampleRenderTarget(qt),Y.updateRenderTargetMipmap(qt))}O.setRenderTarget(ee),O.setClearColor(Q,rt),Re!==void 0&&(St.viewport=Re),O.toneMapping=ce}function sa(X,ut,xt){const St=ut.isScene===!0?ut.overrideMaterial:null;for(let dt=0,qt=X.length;dt<qt;dt++){const Jt=X[dt],ee=Jt.object,ce=Jt.geometry,Re=Jt.group;let xe=Jt.material;xe.allowOverride===!0&&St!==null&&(xe=St),ee.layers.test(xt.layers)&&Ds(ee,ut,xt,ce,xe,Re)}}function Ds(X,ut,xt,St,dt,qt){X.onBeforeRender(O,ut,xt,St,dt,qt),X.modelViewMatrix.multiplyMatrices(xt.matrixWorldInverse,X.matrixWorld),X.normalMatrix.getNormalMatrix(X.modelViewMatrix),dt.onBeforeRender(O,ut,xt,St,X,qt),dt.transparent===!0&&dt.side===qo&&dt.forceSinglePass===!1?(dt.side=as,dt.needsUpdate=!0,O.renderBufferDirect(xt,ut,St,dt,X,qt),dt.side=Bl,dt.needsUpdate=!0,O.renderBufferDirect(xt,ut,St,dt,X,qt),dt.side=qo):O.renderBufferDirect(xt,ut,St,dt,X,qt),X.onAfterRender(O,ut,xt,St,dt,qt)}function wn(X,ut,xt){ut.isScene!==!0&&(ut=ke);const St=Ot.get(X),dt=M.state.lights,qt=M.state.shadowsArray,Jt=dt.state.version,ee=$t.getParameters(X,dt.state,qt,ut,xt),ce=$t.getProgramCacheKey(ee);let Re=St.programs;St.environment=X.isMeshStandardMaterial?ut.environment:null,St.fog=ut.fog,St.envMap=(X.isMeshStandardMaterial?ft:V).get(X.envMap||St.environment),St.envMapRotation=St.environment!==null&&X.envMap===null?ut.environmentRotation:X.envMapRotation,Re===void 0&&(X.addEventListener("dispose",Pe),Re=new Map,St.programs=Re);let xe=Re.get(ce);if(xe!==void 0){if(St.currentProgram===xe&&St.lightsStateVersion===Jt)return Us(X,ee),xe}else ee.uniforms=$t.getUniforms(X),X.onBeforeCompile(ee,O),xe=$t.acquireProgram(ee,ce),Re.set(ce,xe),St.uniforms=ee.uniforms;const ye=St.uniforms;return(!X.isShaderMaterial&&!X.isRawShaderMaterial||X.clipping===!0)&&(ye.clippingPlanes=kt.uniform),Us(X,ee),St.needsLights=hi(X),St.lightsStateVersion=Jt,St.needsLights&&(ye.ambientLightColor.value=dt.state.ambient,ye.lightProbe.value=dt.state.probe,ye.directionalLights.value=dt.state.directional,ye.directionalLightShadows.value=dt.state.directionalShadow,ye.spotLights.value=dt.state.spot,ye.spotLightShadows.value=dt.state.spotShadow,ye.rectAreaLights.value=dt.state.rectArea,ye.ltc_1.value=dt.state.rectAreaLTC1,ye.ltc_2.value=dt.state.rectAreaLTC2,ye.pointLights.value=dt.state.point,ye.pointLightShadows.value=dt.state.pointShadow,ye.hemisphereLights.value=dt.state.hemi,ye.directionalShadowMap.value=dt.state.directionalShadowMap,ye.directionalShadowMatrix.value=dt.state.directionalShadowMatrix,ye.spotShadowMap.value=dt.state.spotShadowMap,ye.spotLightMatrix.value=dt.state.spotLightMatrix,ye.spotLightMap.value=dt.state.spotLightMap,ye.pointShadowMap.value=dt.state.pointShadowMap,ye.pointShadowMatrix.value=dt.state.pointShadowMatrix),St.currentProgram=xe,St.uniformsList=null,xe}function Os(X){if(X.uniformsList===null){const ut=X.currentProgram.getUniforms();X.uniformsList=$0.seqWithValue(ut.seq,X.uniforms)}return X.uniformsList}function Us(X,ut){const xt=Ot.get(X);xt.outputColorSpace=ut.outputColorSpace,xt.batching=ut.batching,xt.batchingColor=ut.batchingColor,xt.instancing=ut.instancing,xt.instancingColor=ut.instancingColor,xt.instancingMorph=ut.instancingMorph,xt.skinning=ut.skinning,xt.morphTargets=ut.morphTargets,xt.morphNormals=ut.morphNormals,xt.morphColors=ut.morphColors,xt.morphTargetsCount=ut.morphTargetsCount,xt.numClippingPlanes=ut.numClippingPlanes,xt.numIntersection=ut.numClipIntersection,xt.vertexAlphas=ut.vertexAlphas,xt.vertexTangents=ut.vertexTangents,xt.toneMapping=ut.toneMapping}function ro(X,ut,xt,St,dt){ut.isScene!==!0&&(ut=ke),Y.resetTextureUnits();const qt=ut.fog,Jt=St.isMeshStandardMaterial?ut.environment:null,ee=G===null?O.outputColorSpace:G.isXRRenderTarget===!0?G.texture.colorSpace:Wu,ce=(St.isMeshStandardMaterial?ft:V).get(St.envMap||Jt),Re=St.vertexColors===!0&&!!xt.attributes.color&&xt.attributes.color.itemSize===4,xe=!!xt.attributes.tangent&&(!!St.normalMap||St.anisotropy>0),ye=!!xt.morphAttributes.position,$e=!!xt.morphAttributes.normal,hn=!!xt.morphAttributes.color;let Yn=ko;St.toneMapped&&(G===null||G.isXRRenderTarget===!0)&&(Yn=O.toneMapping);const en=xt.morphAttributes.position||xt.morphAttributes.normal||xt.morphAttributes.color,sn=en!==void 0?en.length:0,Se=Ot.get(St),Kn=M.state.lights;if(Et===!0&&(Bt===!0||X!==z)){const Ci=X===z&&St.id===B;kt.setState(St,X,Ci)}let cn=!1;St.version===Se.__version?(Se.needsLights&&Se.lightsStateVersion!==Kn.state.version||Se.outputColorSpace!==ee||dt.isBatchedMesh&&Se.batching===!1||!dt.isBatchedMesh&&Se.batching===!0||dt.isBatchedMesh&&Se.batchingColor===!0&&dt.colorTexture===null||dt.isBatchedMesh&&Se.batchingColor===!1&&dt.colorTexture!==null||dt.isInstancedMesh&&Se.instancing===!1||!dt.isInstancedMesh&&Se.instancing===!0||dt.isSkinnedMesh&&Se.skinning===!1||!dt.isSkinnedMesh&&Se.skinning===!0||dt.isInstancedMesh&&Se.instancingColor===!0&&dt.instanceColor===null||dt.isInstancedMesh&&Se.instancingColor===!1&&dt.instanceColor!==null||dt.isInstancedMesh&&Se.instancingMorph===!0&&dt.morphTexture===null||dt.isInstancedMesh&&Se.instancingMorph===!1&&dt.morphTexture!==null||Se.envMap!==ce||St.fog===!0&&Se.fog!==qt||Se.numClippingPlanes!==void 0&&(Se.numClippingPlanes!==kt.numPlanes||Se.numIntersection!==kt.numIntersection)||Se.vertexAlphas!==Re||Se.vertexTangents!==xe||Se.morphTargets!==ye||Se.morphNormals!==$e||Se.morphColors!==hn||Se.toneMapping!==Yn||Se.morphTargetsCount!==sn)&&(cn=!0):(cn=!0,Se.__version=St.version);let Ii=Se.currentProgram;cn===!0&&(Ii=wn(St,ut,dt));let Js=!1,Nn=!1,$s=!1;const Cn=Ii.getUniforms(),Vi=Se.uniforms;if(Nt.useProgram(Ii.program)&&(Js=!0,Nn=!0,$s=!0),St.id!==B&&(B=St.id,Nn=!0),Js||z!==X){Nt.buffers.depth.getReversed()?(Xt.copy(X.projectionMatrix),tN(Xt),eN(Xt),Cn.setValue(it,"projectionMatrix",Xt)):Cn.setValue(it,"projectionMatrix",X.projectionMatrix),Cn.setValue(it,"viewMatrix",X.matrixWorldInverse);const Di=Cn.map.cameraPosition;Di!==void 0&&Di.setValue(it,Me.setFromMatrixPosition(X.matrixWorld)),Ut.logarithmicDepthBuffer&&Cn.setValue(it,"logDepthBufFC",2/(Math.log(X.far+1)/Math.LN2)),(St.isMeshPhongMaterial||St.isMeshToonMaterial||St.isMeshLambertMaterial||St.isMeshBasicMaterial||St.isMeshStandardMaterial||St.isShaderMaterial)&&Cn.setValue(it,"isOrthographic",X.isOrthographicCamera===!0),z!==X&&(z=X,Nn=!0,$s=!0)}if(dt.isSkinnedMesh){Cn.setOptional(it,dt,"bindMatrix"),Cn.setOptional(it,dt,"bindMatrixInverse");const Ci=dt.skeleton;Ci&&(Ci.boneTexture===null&&Ci.computeBoneTexture(),Cn.setValue(it,"boneTexture",Ci.boneTexture,Y))}dt.isBatchedMesh&&(Cn.setOptional(it,dt,"batchingTexture"),Cn.setValue(it,"batchingTexture",dt._matricesTexture,Y),Cn.setOptional(it,dt,"batchingIdTexture"),Cn.setValue(it,"batchingIdTexture",dt._indirectTexture,Y),Cn.setOptional(it,dt,"batchingColorTexture"),dt._colorsTexture!==null&&Cn.setValue(it,"batchingColorTexture",dt._colorsTexture,Y));const di=xt.morphAttributes;if((di.position!==void 0||di.normal!==void 0||di.color!==void 0)&&pe.update(dt,xt,Ii),(Nn||Se.receiveShadow!==dt.receiveShadow)&&(Se.receiveShadow=dt.receiveShadow,Cn.setValue(it,"receiveShadow",dt.receiveShadow)),St.isMeshGouraudMaterial&&St.envMap!==null&&(Vi.envMap.value=ce,Vi.flipEnvMap.value=ce.isCubeTexture&&ce.isRenderTargetTexture===!1?-1:1),St.isMeshStandardMaterial&&St.envMap===null&&ut.environment!==null&&(Vi.envMapIntensity.value=ut.environmentIntensity),Nn&&(Cn.setValue(it,"toneMappingExposure",O.toneMappingExposure),Se.needsLights&&Er(Vi,$s),qt&&St.fog===!0&&Yt.refreshFogUniforms(Vi,qt),Yt.refreshMaterialUniforms(Vi,St,W,Z,M.state.transmissionRenderTarget[X.id]),$0.upload(it,Os(Se),Vi,Y)),St.isShaderMaterial&&St.uniformsNeedUpdate===!0&&($0.upload(it,Os(Se),Vi,Y),St.uniformsNeedUpdate=!1),St.isSpriteMaterial&&Cn.setValue(it,"center",dt.center),Cn.setValue(it,"modelViewMatrix",dt.modelViewMatrix),Cn.setValue(it,"normalMatrix",dt.normalMatrix),Cn.setValue(it,"modelMatrix",dt.matrixWorld),St.isShaderMaterial||St.isRawShaderMaterial){const Ci=St.uniformsGroups;for(let Di=0,ra=Ci.length;Di<ra;Di++){const tr=Ci[Di];ct.update(tr,Ii),ct.bind(tr,Ii)}}return Ii}function Er(X,ut){X.ambientLightColor.needsUpdate=ut,X.lightProbe.needsUpdate=ut,X.directionalLights.needsUpdate=ut,X.directionalLightShadows.needsUpdate=ut,X.pointLights.needsUpdate=ut,X.pointLightShadows.needsUpdate=ut,X.spotLights.needsUpdate=ut,X.spotLightShadows.needsUpdate=ut,X.rectAreaLights.needsUpdate=ut,X.hemisphereLights.needsUpdate=ut}function hi(X){return X.isMeshLambertMaterial||X.isMeshToonMaterial||X.isMeshPhongMaterial||X.isMeshStandardMaterial||X.isShadowMaterial||X.isShaderMaterial&&X.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return H},this.getRenderTarget=function(){return G},this.setRenderTargetTextures=function(X,ut,xt){const St=Ot.get(X);St.__autoAllocateDepthBuffer=X.resolveDepthBuffer===!1,St.__autoAllocateDepthBuffer===!1&&(St.__useRenderToTexture=!1),Ot.get(X.texture).__webglTexture=ut,Ot.get(X.depthTexture).__webglTexture=St.__autoAllocateDepthBuffer?void 0:xt,St.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(X,ut){const xt=Ot.get(X);xt.__webglFramebuffer=ut,xt.__useDefaultFramebuffer=ut===void 0};const Gl=it.createFramebuffer();this.setRenderTarget=function(X,ut=0,xt=0){G=X,L=ut,H=xt;let St=!0,dt=null,qt=!1,Jt=!1;if(X){const ce=Ot.get(X);if(ce.__useDefaultFramebuffer!==void 0)Nt.bindFramebuffer(it.FRAMEBUFFER,null),St=!1;else if(ce.__webglFramebuffer===void 0)Y.setupRenderTarget(X);else if(ce.__hasExternalTextures)Y.rebindTextures(X,Ot.get(X.texture).__webglTexture,Ot.get(X.depthTexture).__webglTexture);else if(X.depthBuffer){const ye=X.depthTexture;if(ce.__boundDepthTexture!==ye){if(ye!==null&&Ot.has(ye)&&(X.width!==ye.image.width||X.height!==ye.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Y.setupDepthRenderbuffer(X)}}const Re=X.texture;(Re.isData3DTexture||Re.isDataArrayTexture||Re.isCompressedArrayTexture)&&(Jt=!0);const xe=Ot.get(X).__webglFramebuffer;X.isWebGLCubeRenderTarget?(Array.isArray(xe[ut])?dt=xe[ut][xt]:dt=xe[ut],qt=!0):X.samples>0&&Y.useMultisampledRTT(X)===!1?dt=Ot.get(X).__webglMultisampledFramebuffer:Array.isArray(xe)?dt=xe[xt]:dt=xe,j.copy(X.viewport),at.copy(X.scissor),nt=X.scissorTest}else j.copy($).multiplyScalar(W).floor(),at.copy(mt).multiplyScalar(W).floor(),nt=Tt;if(xt!==0&&(dt=Gl),Nt.bindFramebuffer(it.FRAMEBUFFER,dt)&&St&&Nt.drawBuffers(X,dt),Nt.viewport(j),Nt.scissor(at),Nt.setScissorTest(nt),qt){const ce=Ot.get(X.texture);it.framebufferTexture2D(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_CUBE_MAP_POSITIVE_X+ut,ce.__webglTexture,xt)}else if(Jt){const ce=Ot.get(X.texture),Re=ut;it.framebufferTextureLayer(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0,ce.__webglTexture,xt,Re)}else if(X!==null&&xt!==0){const ce=Ot.get(X.texture);it.framebufferTexture2D(it.FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_2D,ce.__webglTexture,xt)}B=-1},this.readRenderTargetPixels=function(X,ut,xt,St,dt,qt,Jt){if(!(X&&X.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ee=Ot.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&Jt!==void 0&&(ee=ee[Jt]),ee){Nt.bindFramebuffer(it.FRAMEBUFFER,ee);try{const ce=X.texture,Re=ce.format,xe=ce.type;if(!Ut.textureFormatReadable(Re)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ut.textureTypeReadable(xe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ut>=0&&ut<=X.width-St&&xt>=0&&xt<=X.height-dt&&it.readPixels(ut,xt,St,dt,Te.convert(Re),Te.convert(xe),qt)}finally{const ce=G!==null?Ot.get(G).__webglFramebuffer:null;Nt.bindFramebuffer(it.FRAMEBUFFER,ce)}}},this.readRenderTargetPixelsAsync=async function(X,ut,xt,St,dt,qt,Jt){if(!(X&&X.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ee=Ot.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&Jt!==void 0&&(ee=ee[Jt]),ee)if(ut>=0&&ut<=X.width-St&&xt>=0&&xt<=X.height-dt){Nt.bindFramebuffer(it.FRAMEBUFFER,ee);const ce=X.texture,Re=ce.format,xe=ce.type;if(!Ut.textureFormatReadable(Re))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ut.textureTypeReadable(xe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const ye=it.createBuffer();it.bindBuffer(it.PIXEL_PACK_BUFFER,ye),it.bufferData(it.PIXEL_PACK_BUFFER,qt.byteLength,it.STREAM_READ),it.readPixels(ut,xt,St,dt,Te.convert(Re),Te.convert(xe),0);const $e=G!==null?Ot.get(G).__webglFramebuffer:null;Nt.bindFramebuffer(it.FRAMEBUFFER,$e);const hn=it.fenceSync(it.SYNC_GPU_COMMANDS_COMPLETE,0);return it.flush(),await $U(it,hn,4),it.bindBuffer(it.PIXEL_PACK_BUFFER,ye),it.getBufferSubData(it.PIXEL_PACK_BUFFER,0,qt),it.deleteBuffer(ye),it.deleteSync(hn),qt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(X,ut=null,xt=0){const St=Math.pow(2,-xt),dt=Math.floor(X.image.width*St),qt=Math.floor(X.image.height*St),Jt=ut!==null?ut.x:0,ee=ut!==null?ut.y:0;Y.setTexture2D(X,0),it.copyTexSubImage2D(it.TEXTURE_2D,xt,0,0,Jt,ee,dt,qt),Nt.unbindTexture()};const ql=it.createFramebuffer(),Ns=it.createFramebuffer();this.copyTextureToTexture=function(X,ut,xt=null,St=null,dt=0,qt=null){qt===null&&(dt!==0?(Q0("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),qt=dt,dt=0):qt=0);let Jt,ee,ce,Re,xe,ye,$e,hn,Yn;const en=X.isCompressedTexture?X.mipmaps[qt]:X.image;if(xt!==null)Jt=xt.max.x-xt.min.x,ee=xt.max.y-xt.min.y,ce=xt.isBox3?xt.max.z-xt.min.z:1,Re=xt.min.x,xe=xt.min.y,ye=xt.isBox3?xt.min.z:0;else{const di=Math.pow(2,-dt);Jt=Math.floor(en.width*di),ee=Math.floor(en.height*di),X.isDataArrayTexture?ce=en.depth:X.isData3DTexture?ce=Math.floor(en.depth*di):ce=1,Re=0,xe=0,ye=0}St!==null?($e=St.x,hn=St.y,Yn=St.z):($e=0,hn=0,Yn=0);const sn=Te.convert(ut.format),Se=Te.convert(ut.type);let Kn;ut.isData3DTexture?(Y.setTexture3D(ut,0),Kn=it.TEXTURE_3D):ut.isDataArrayTexture||ut.isCompressedArrayTexture?(Y.setTexture2DArray(ut,0),Kn=it.TEXTURE_2D_ARRAY):(Y.setTexture2D(ut,0),Kn=it.TEXTURE_2D),it.pixelStorei(it.UNPACK_FLIP_Y_WEBGL,ut.flipY),it.pixelStorei(it.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ut.premultiplyAlpha),it.pixelStorei(it.UNPACK_ALIGNMENT,ut.unpackAlignment);const cn=it.getParameter(it.UNPACK_ROW_LENGTH),Ii=it.getParameter(it.UNPACK_IMAGE_HEIGHT),Js=it.getParameter(it.UNPACK_SKIP_PIXELS),Nn=it.getParameter(it.UNPACK_SKIP_ROWS),$s=it.getParameter(it.UNPACK_SKIP_IMAGES);it.pixelStorei(it.UNPACK_ROW_LENGTH,en.width),it.pixelStorei(it.UNPACK_IMAGE_HEIGHT,en.height),it.pixelStorei(it.UNPACK_SKIP_PIXELS,Re),it.pixelStorei(it.UNPACK_SKIP_ROWS,xe),it.pixelStorei(it.UNPACK_SKIP_IMAGES,ye);const Cn=X.isDataArrayTexture||X.isData3DTexture,Vi=ut.isDataArrayTexture||ut.isData3DTexture;if(X.isDepthTexture){const di=Ot.get(X),Ci=Ot.get(ut),Di=Ot.get(di.__renderTarget),ra=Ot.get(Ci.__renderTarget);Nt.bindFramebuffer(it.READ_FRAMEBUFFER,Di.__webglFramebuffer),Nt.bindFramebuffer(it.DRAW_FRAMEBUFFER,ra.__webglFramebuffer);for(let tr=0;tr<ce;tr++)Cn&&(it.framebufferTextureLayer(it.READ_FRAMEBUFFER,it.COLOR_ATTACHMENT0,Ot.get(X).__webglTexture,dt,ye+tr),it.framebufferTextureLayer(it.DRAW_FRAMEBUFFER,it.COLOR_ATTACHMENT0,Ot.get(ut).__webglTexture,qt,Yn+tr)),it.blitFramebuffer(Re,xe,Jt,ee,$e,hn,Jt,ee,it.DEPTH_BUFFER_BIT,it.NEAREST);Nt.bindFramebuffer(it.READ_FRAMEBUFFER,null),Nt.bindFramebuffer(it.DRAW_FRAMEBUFFER,null)}else if(dt!==0||X.isRenderTargetTexture||Ot.has(X)){const di=Ot.get(X),Ci=Ot.get(ut);Nt.bindFramebuffer(it.READ_FRAMEBUFFER,ql),Nt.bindFramebuffer(it.DRAW_FRAMEBUFFER,Ns);for(let Di=0;Di<ce;Di++)Cn?it.framebufferTextureLayer(it.READ_FRAMEBUFFER,it.COLOR_ATTACHMENT0,di.__webglTexture,dt,ye+Di):it.framebufferTexture2D(it.READ_FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_2D,di.__webglTexture,dt),Vi?it.framebufferTextureLayer(it.DRAW_FRAMEBUFFER,it.COLOR_ATTACHMENT0,Ci.__webglTexture,qt,Yn+Di):it.framebufferTexture2D(it.DRAW_FRAMEBUFFER,it.COLOR_ATTACHMENT0,it.TEXTURE_2D,Ci.__webglTexture,qt),dt!==0?it.blitFramebuffer(Re,xe,Jt,ee,$e,hn,Jt,ee,it.COLOR_BUFFER_BIT,it.NEAREST):Vi?it.copyTexSubImage3D(Kn,qt,$e,hn,Yn+Di,Re,xe,Jt,ee):it.copyTexSubImage2D(Kn,qt,$e,hn,Re,xe,Jt,ee);Nt.bindFramebuffer(it.READ_FRAMEBUFFER,null),Nt.bindFramebuffer(it.DRAW_FRAMEBUFFER,null)}else Vi?X.isDataTexture||X.isData3DTexture?it.texSubImage3D(Kn,qt,$e,hn,Yn,Jt,ee,ce,sn,Se,en.data):ut.isCompressedArrayTexture?it.compressedTexSubImage3D(Kn,qt,$e,hn,Yn,Jt,ee,ce,sn,en.data):it.texSubImage3D(Kn,qt,$e,hn,Yn,Jt,ee,ce,sn,Se,en):X.isDataTexture?it.texSubImage2D(it.TEXTURE_2D,qt,$e,hn,Jt,ee,sn,Se,en.data):X.isCompressedTexture?it.compressedTexSubImage2D(it.TEXTURE_2D,qt,$e,hn,en.width,en.height,sn,en.data):it.texSubImage2D(it.TEXTURE_2D,qt,$e,hn,Jt,ee,sn,Se,en);it.pixelStorei(it.UNPACK_ROW_LENGTH,cn),it.pixelStorei(it.UNPACK_IMAGE_HEIGHT,Ii),it.pixelStorei(it.UNPACK_SKIP_PIXELS,Js),it.pixelStorei(it.UNPACK_SKIP_ROWS,Nn),it.pixelStorei(it.UNPACK_SKIP_IMAGES,$s),qt===0&&ut.generateMipmaps&&it.generateMipmap(Kn),Nt.unbindTexture()},this.copyTextureToTexture3D=function(X,ut,xt=null,St=null,dt=0){return Q0('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(X,ut,xt,St,dt)},this.initRenderTarget=function(X){Ot.get(X).__webglFramebuffer===void 0&&Y.setupRenderTarget(X)},this.initTexture=function(X){X.isCubeTexture?Y.setTextureCube(X,0):X.isData3DTexture?Y.setTexture3D(X,0):X.isDataArrayTexture||X.isCompressedArrayTexture?Y.setTexture2DArray(X,0):Y.setTexture2D(X,0),Nt.unbindTexture()},this.resetState=function(){L=0,H=0,G=null,Nt.reset(),gn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return eo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=mn._getDrawingBufferColorSpace(t),e.unpackColorSpace=mn._getUnpackColorSpace()}}const hV=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:pM,AddEquation:Xu,AddOperation:Qw,AdditiveAnimationBlendMode:TM,AdditiveBlending:Sb,AgXToneMapping:nC,AlphaFormat:_M,AlwaysCompare:yC,AlwaysDepth:fv,AlwaysStencilFunc:Tb,AmbientLight:f2,AnimationAction:x2,AnimationClip:Zm,AnimationLoader:AL,AnimationMixer:eP,AnimationObjectGroup:$L,AnimationUtils:bL,ArcCurve:PC,ArrayCamera:y2,ArrowHelper:EP,AttachedBindMode:Eb,Audio:v2,AudioAnalyser:qL,AudioContext:ZM,AudioListener:HL,AudioLoader:BL,AxesHelper:TP,BackSide:as,BasicDepthPacking:lC,BasicShadowMap:Ow,BatchedMesh:OC,Bone:UM,BooleanKeyframeTrack:Uf,Box2:cP,Box3:ss,Box3Helper:bP,BoxGeometry:Of,BoxHelper:SP,BufferAttribute:On,BufferGeometry:Qe,BufferGeometryLoader:g2,ByteType:gM,Cache:Ul,Camera:y_,CameraHelper:xP,CanvasTexture:kN,CapsuleGeometry:E_,CatmullRomCurve3:zC,CineonToneMapping:tC,CircleGeometry:T_,ClampToEdgeWrapping:br,Clock:KM,Color:fe,ColorKeyframeTrack:jM,ColorManagement:mn,CompressedArrayTexture:qN,CompressedCubeTexture:XN,CompressedTexture:b_,CompressedTextureLoader:RL,ConeGeometry:A_,ConstantAlphaFactor:Ww,ConstantColorFactor:jw,Controls:AP,CubeCamera:EC,CubeReflectionMapping:Il,CubeRefractionMapping:Yu,CubeTexture:cg,CubeTextureLoader:wL,CubeUVReflectionMapping:Ad,CubicBezierCurve:zM,CubicBezierCurve3:BC,CubicInterpolant:i2,CullFaceBack:xb,CullFaceFront:Dw,CullFaceFrontBack:eU,CullFaceNone:Cw,Curve:ao,CurvePath:VC,CustomBlending:Uw,CustomToneMapping:eC,CylinderGeometry:Cd,Cylindrical:uP,Data3DTexture:g_,DataArrayTexture:ug,DataTexture:jo,DataTextureLoader:CL,DataUtils:gN,DecrementStencilOp:mU,DecrementWrapStencilOp:yU,DefaultLoadingManager:r2,DepthFormat:md,DepthStencilFormat:gd,DepthTexture:LM,DetachedBindMode:aC,DirectionalLight:c2,DirectionalLightHelper:_P,DiscreteInterpolant:a2,DodecahedronGeometry:R_,DoubleSide:qo,DstAlphaFactor:Fw,DstColorFactor:qw,DynamicCopyUsage:UU,DynamicDrawUsage:AU,DynamicReadUsage:CU,EdgesGeometry:HC,EllipseCurve:M_,EqualCompare:dC,EqualDepth:dv,EqualStencilFunc:SU,EquirectangularReflectionMapping:Nm,EquirectangularRefractionMapping:Lm,Euler:Qs,EventDispatcher:Jo,ExtrudeGeometry:dg,FileLoader:Qo,Float16BufferAttribute:MN,Float32BufferAttribute:me,FloatType:As,Fog:__,FogExp2:v_,FramebufferTexture:GN,FrontSide:Bl,Frustum:fg,GLBufferAttribute:oP,GLSL1:LU,GLSL3:Ab,GreaterCompare:pC,GreaterDepth:mv,GreaterEqualCompare:gC,GreaterEqualDepth:pv,GreaterEqualStencilFunc:TU,GreaterStencilFunc:MU,GridHelper:yP,Group:sd,HalfFloatType:Rd,HemisphereLight:o2,HemisphereLightHelper:gP,IcosahedronGeometry:w_,ImageBitmapLoader:zL,ImageLoader:Km,ImageUtils:xC,IncrementStencilOp:pU,IncrementWrapStencilOp:gU,InstancedBufferAttribute:xd,InstancedBufferGeometry:m2,InstancedInterleavedBuffer:rP,InstancedMesh:DC,Int16BufferAttribute:SN,Int32BufferAttribute:bN,Int8BufferAttribute:vN,IntType:l_,InterleavedBuffer:x_,InterleavedBufferAttribute:Rf,Interpolant:gg,InterpolateDiscrete:Bm,InterpolateLinear:qv,InterpolateSmooth:K0,InvertStencilOp:vU,KeepStencilOp:cf,KeyframeTrack:Mr,LOD:wC,LatheGeometry:hg,Layers:vd,LessCompare:hC,LessDepth:hv,LessEqualCompare:AM,LessEqualDepth:Af,LessEqualStencilFunc:bU,LessStencilFunc:xU,Light:ec,LightProbe:p2,Line:Zu,Line3:fP,LineBasicMaterial:rs,LineCurve:BM,LineCurve3:IC,LineDashedMaterial:t2,LineLoop:UC,LineSegments:$o,LinearFilter:Wi,LinearInterpolant:kM,LinearMipMapLinearFilter:sU,LinearMipMapNearestFilter:aU,LinearMipmapLinearFilter:Xo,LinearMipmapNearestFilter:_m,LinearSRGBColorSpace:Wu,LinearToneMapping:Jw,LinearTransfer:Vm,Loader:os,LoaderUtils:Ob,LoadingManager:YM,LoopOnce:sC,LoopPingPong:oC,LoopRepeat:rC,LuminanceAlphaFormat:bM,LuminanceFormat:SM,MOUSE:$O,Material:Ia,MaterialLoader:P_,MathUtils:hm,Matrix2:t1,Matrix3:Xe,Matrix4:Le,MaxEquation:zw,Mesh:Bi,MeshBasicMaterial:$u,MeshDepthMaterial:GM,MeshDistanceMaterial:qM,MeshLambertMaterial:JC,MeshMatcapMaterial:$C,MeshNormalMaterial:QC,MeshPhongMaterial:ZC,MeshPhysicalMaterial:WC,MeshStandardMaterial:FM,MeshToonMaterial:KC,MinEquation:Pw,MirroredRepeatWrapping:zm,MixOperation:Kw,MultiplyBlending:Mb,MultiplyOperation:og,NearestFilter:ya,NearestMipMapLinearFilter:iU,NearestMipMapNearestFilter:nU,NearestMipmapLinearFilter:id,NearestMipmapNearestFilter:mM,NeutralToneMapping:iC,NeverCompare:fC,NeverDepth:cv,NeverStencilFunc:_U,NoBlending:Nl,NoColorSpace:Dl,NoToneMapping:ko,NormalAnimationBlendMode:p_,NormalBlending:Sf,NotEqualCompare:mC,NotEqualDepth:gv,NotEqualStencilFunc:EU,NumberKeyframeTrack:Ym,Object3D:Sn,ObjectLoader:LL,ObjectSpaceNormalMap:cC,OctahedronGeometry:pg,OneFactor:Iw,OneMinusConstantAlphaFactor:Zw,OneMinusConstantColorFactor:Yw,OneMinusDstAlphaFactor:Gw,OneMinusDstColorFactor:Xw,OneMinusSrcAlphaFactor:uv,OneMinusSrcColorFactor:Hw,OrthographicCamera:vg,PCFShadowMap:r_,PCFSoftShadowMap:vm,PMREMGenerator:Lb,Path:qm,PerspectiveCamera:aa,Plane:qu,PlaneGeometry:Dd,PlaneHelper:MP,PointLight:u2,PointLightHelper:pP,Points:NC,PointsMaterial:NM,PolarGridHelper:vP,PolyhedronGeometry:tc,PositionalAudio:GL,PropertyBinding:_n,PropertyMixer:_2,QuadraticBezierCurve:IM,QuadraticBezierCurve3:VM,Quaternion:Rs,QuaternionKeyframeTrack:yg,QuaternionLinearInterpolant:s2,RED_GREEN_RGTC2_Format:Fv,RED_RGTC1_Format:EM,REVISION:s_,RGBADepthPacking:uC,RGBAFormat:Pa,RGBAIntegerFormat:d_,RGBA_ASTC_10x10_Format:Pv,RGBA_ASTC_10x5_Format:Uv,RGBA_ASTC_10x6_Format:Nv,RGBA_ASTC_10x8_Format:Lv,RGBA_ASTC_12x10_Format:zv,RGBA_ASTC_12x12_Format:Bv,RGBA_ASTC_4x4_Format:Ev,RGBA_ASTC_5x4_Format:Tv,RGBA_ASTC_5x5_Format:Av,RGBA_ASTC_6x5_Format:Rv,RGBA_ASTC_6x6_Format:wv,RGBA_ASTC_8x5_Format:Cv,RGBA_ASTC_8x6_Format:Dv,RGBA_ASTC_8x8_Format:Ov,RGBA_BPTC_Format:Em,RGBA_ETC2_EAC_Format:Mv,RGBA_PVRTC_2BPPV1_Format:xv,RGBA_PVRTC_4BPPV1_Format:_v,RGBA_S3TC_DXT1_Format:Sm,RGBA_S3TC_DXT3_Format:bm,RGBA_S3TC_DXT5_Format:Mm,RGBDepthPacking:cU,RGBFormat:xM,RGBIntegerFormat:rU,RGB_BPTC_SIGNED_Format:Iv,RGB_BPTC_UNSIGNED_Format:Vv,RGB_ETC1_Format:Sv,RGB_ETC2_Format:bv,RGB_PVRTC_2BPPV1_Format:vv,RGB_PVRTC_4BPPV1_Format:yv,RGB_S3TC_DXT1_Format:xm,RGDepthPacking:fU,RGFormat:MM,RGIntegerFormat:h_,RawShaderMaterial:YC,Ray:wd,Raycaster:S2,RectAreaLight:h2,RedFormat:f_,RedIntegerFormat:lg,ReinhardToneMapping:$w,RenderTarget:m_,RenderTarget3D:nP,RenderTargetArray:iP,RepeatWrapping:Pm,ReplaceStencilOp:dU,ReverseSubtractEquation:Lw,RingGeometry:C_,SIGNED_RED_GREEN_RGTC2_Format:Gv,SIGNED_RED_RGTC1_Format:Hv,SRGBColorSpace:Na,SRGBTransfer:In,Scene:DM,ShaderChunk:Ke,ShaderLib:to,ShaderMaterial:io,ShadowMaterial:jC,Shape:Mf,ShapeGeometry:D_,ShapePath:M2,ShapeUtils:Yo,ShortType:yM,Skeleton:S_,SkeletonHelper:dP,SkinnedMesh:CC,Source:ju,Sphere:Ba,SphereGeometry:mg,Spherical:lP,SphericalHarmonics3:d2,SplineCurve:HM,SpotLight:l2,SpotLightHelper:hP,Sprite:RC,SpriteMaterial:OM,SrcAlphaFactor:lv,SrcAlphaSaturateFactor:kw,SrcColorFactor:Vw,StaticCopyUsage:OU,StaticDrawUsage:Hm,StaticReadUsage:wU,StereoCamera:IL,StreamCopyUsage:NU,StreamDrawUsage:RU,StreamReadUsage:DU,StringKeyframeTrack:Nf,SubtractEquation:Nw,SubtractiveBlending:bb,TOUCH:tU,TangentSpaceNormalMap:Ju,TetrahedronGeometry:O_,Texture:_i,TextureLoader:DL,TextureUtils:OP,TimestampQuery:PU,TorusGeometry:U_,TorusKnotGeometry:N_,Triangle:Ts,TriangleFanDrawMode:uU,TriangleStripDrawMode:lU,TrianglesDrawMode:oU,TubeGeometry:L_,UVMapping:o_,Uint16BufferAttribute:wM,Uint32BufferAttribute:CM,Uint8BufferAttribute:_N,Uint8ClampedBufferAttribute:xN,Uniform:$M,UniformsGroup:sP,UniformsLib:re,UniformsUtils:MC,UnsignedByteType:no,UnsignedInt248Type:pd,UnsignedInt5999Type:vM,UnsignedIntType:Vl,UnsignedShort4444Type:u_,UnsignedShort5551Type:c_,UnsignedShortType:dd,VSMShadowMap:$r,Vector2:Gt,Vector3:K,Vector4:xn,VectorKeyframeTrack:Wm,VideoFrameTexture:FN,VideoTexture:LC,WebGL3DRenderTarget:rN,WebGLArrayRenderTarget:sN,WebGLCoordinateSystem:eo,WebGLCubeRenderTarget:TC,WebGLRenderTarget:Ko,WebGLRenderer:D2,WebGLUtils:C2,WebGPUCoordinateSystem:Fm,WebXRController:J0,WireframeGeometry:kC,WrapAroundEnding:Im,ZeroCurvatureEnding:pf,ZeroFactor:Bw,ZeroSlopeEnding:mf,ZeroStencilOp:hU,createCanvasElement:_C},Symbol.toStringTag,{value:"Module"}));var AS={exports:{}},Cl={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dA;function dV(){return dA||(dA=1,Cl.ConcurrentRoot=1,Cl.ContinuousEventPriority=8,Cl.DefaultEventPriority=32,Cl.DiscreteEventPriority=2,Cl.IdleEventPriority=268435456,Cl.LegacyRoot=0,Cl.NoEventPriority=0),Cl}var pA;function pV(){return pA||(pA=1,AS.exports=dV()),AS.exports}var tv=pV(),RS={exports:{}},wS={},CS={exports:{}},DS={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA;function mV(){if(mA)return DS;mA=1;var n=Fl();function t(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var e=typeof Object.is=="function"?Object.is:t,i=n.useState,a=n.useEffect,r=n.useLayoutEffect,u=n.useDebugValue;function f(v,_){var b=_(),E=i({inst:{value:b,getSnapshot:_}}),R=E[0].inst,T=E[1];return r(function(){R.value=b,R.getSnapshot=_,d(R)&&T({inst:R})},[v,b,_]),a(function(){return d(R)&&T({inst:R}),v(function(){d(R)&&T({inst:R})})},[v]),u(b),b}function d(v){var _=v.getSnapshot;v=v.value;try{var b=_();return!e(v,b)}catch{return!0}}function p(v,_){return _()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:f;return DS.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:y,DS}var gA;function gV(){return gA||(gA=1,CS.exports=mV()),CS.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yA;function yV(){if(yA)return wS;yA=1;var n=Fl(),t=gV();function e(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var i=typeof Object.is=="function"?Object.is:e,a=t.useSyncExternalStore,r=n.useRef,u=n.useEffect,f=n.useMemo,d=n.useDebugValue;return wS.useSyncExternalStoreWithSelector=function(p,y,v,_,b){var E=r(null);if(E.current===null){var R={hasValue:!1,value:null};E.current=R}else R=E.current;E=f(function(){function M(L){if(!C){if(C=!0,D=L,L=_(L),b!==void 0&&R.hasValue){var H=R.value;if(b(H,L))return O=H}return O=L}if(H=O,i(D,L))return H;var G=_(L);return b!==void 0&&b(H,G)?(D=L,H):(D=L,O=G)}var C=!1,D,O,N=v===void 0?null:v;return[function(){return M(y())},N===null?void 0:function(){return M(N())}]},[y,v,_,b]);var T=a(p,E[0],E[1]);return u(function(){R.hasValue=!0,R.value=T},[T]),d(T),T},wS}var vA;function vV(){return vA||(vA=1,RS.exports=yV()),RS.exports}var _V=vV();const xV=rg(_V),_A=n=>{let t;const e=new Set,i=(p,y)=>{const v=typeof p=="function"?p(t):p;if(!Object.is(v,t)){const _=t;t=y??(typeof v!="object"||v===null)?v:Object.assign({},t,v),e.forEach(b=>b(t,_))}},a=()=>t,f={setState:i,getState:a,getInitialState:()=>d,subscribe:p=>(e.add(p),()=>e.delete(p))},d=t=n(i,a,f);return f},SV=n=>n?_A(n):_A,{useSyncExternalStoreWithSelector:bV}=xV,MV=n=>n;function EV(n,t=MV,e){const i=bV(n.subscribe,n.getState,n.getInitialState,t,e);return ww.useDebugValue(i),i}const xA=(n,t)=>{const e=SV(n),i=(a,r=t)=>EV(e,a,r);return Object.assign(i,e),i},TV=(n,t)=>n?xA(n,t):xA;var OS={exports:{}},US={exports:{}},NS={exports:{}},LS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SA;function AV(){return SA||(SA=1,function(n){function t(I,Z){var W=I.length;I.push(Z);t:for(;0<W;){var J=W-1>>>1,F=I[J];if(0<a(F,Z))I[J]=Z,I[W]=F,W=J;else break t}}function e(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var Z=I[0],W=I.pop();if(W!==Z){I[0]=W;t:for(var J=0,F=I.length,$=F>>>1;J<$;){var mt=2*(J+1)-1,Tt=I[mt],st=mt+1,Et=I[st];if(0>a(Tt,W))st<F&&0>a(Et,Tt)?(I[J]=Et,I[st]=W,J=st):(I[J]=Tt,I[mt]=W,J=mt);else if(st<F&&0>a(Et,W))I[J]=Et,I[st]=W,J=st;else break t}}return Z}function a(I,Z){var W=I.sortIndex-Z.sortIndex;return W!==0?W:I.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var d=[],p=[],y=1,v=null,_=3,b=!1,E=!1,R=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(I){for(var Z=e(p);Z!==null;){if(Z.callback===null)i(p);else if(Z.startTime<=I)i(p),Z.sortIndex=Z.expirationTime,t(d,Z);else break;Z=e(p)}}function O(I){if(R=!1,D(I),!E)if(e(d)!==null)E=!0,Q();else{var Z=e(p);Z!==null&&rt(O,Z.startTime-I)}}var N=!1,L=-1,H=5,G=-1;function B(){return!(n.unstable_now()-G<H)}function z(){if(N){var I=n.unstable_now();G=I;var Z=!0;try{t:{E=!1,R&&(R=!1,M(L),L=-1),b=!0;var W=_;try{e:{for(D(I),v=e(d);v!==null&&!(v.expirationTime>I&&B());){var J=v.callback;if(typeof J=="function"){v.callback=null,_=v.priorityLevel;var F=J(v.expirationTime<=I);if(I=n.unstable_now(),typeof F=="function"){v.callback=F,D(I),Z=!0;break e}v===e(d)&&i(d),D(I)}else i(d);v=e(d)}if(v!==null)Z=!0;else{var $=e(p);$!==null&&rt(O,$.startTime-I),Z=!1}}break t}finally{v=null,_=W,b=!1}Z=void 0}}finally{Z?j():N=!1}}}var j;if(typeof C=="function")j=function(){C(z)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,nt=at.port2;at.port1.onmessage=z,j=function(){nt.postMessage(null)}}else j=function(){T(z,0)};function Q(){N||(N=!0,j())}function rt(I,Z){L=T(function(){I(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_continueExecution=function(){E||b||(E=!0,Q())},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return e(d)},n.unstable_next=function(I){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var W=_;_=Z;try{return I()}finally{_=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(I,Z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var W=_;_=I;try{return Z()}finally{_=W}},n.unstable_scheduleCallback=function(I,Z,W){var J=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,I){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=W+F,I={id:y++,callback:Z,priorityLevel:I,startTime:W,expirationTime:F,sortIndex:-1},W>J?(I.sortIndex=W,t(p,I),e(d)===null&&I===e(p)&&(R?(M(L),L=-1):R=!0,rt(O,W-J))):(I.sortIndex=F,t(d,I),E||b||(E=!0,Q())),I},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(I){var Z=_;return function(){var W=_;_=Z;try{return I.apply(this,arguments)}finally{_=W}}}}(LS)),LS}var bA;function RV(){return bA||(bA=1,NS.exports=AV()),NS.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA;function wV(){return MA||(MA=1,function(n){n.exports=function(t){function e(l,c,g,S){return new fp(l,c,g,S)}function i(){}function a(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return l===null||typeof l!="object"?null:(l=Br&&l[Br]||l["@@iterator"],typeof l=="function"?l:null)}function u(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===mp?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case Mo:return"Fragment";case fs:return"Portal";case ah:return"Profiler";case Oc:return"StrictMode";case sh:return"Suspense";case uu:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case zs:return(l.displayName||"Context")+".Provider";case dp:return(l._context.displayName||"Context")+".Consumer";case Nc:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case rh:return c=l.displayName||null,c!==null?c:u(l.type)||"Memo";case hs:c=l._payload,l=l._init;try{return u(l(c))}catch{}}return null}function f(l){if(sr===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);sr=c&&c[1]||"",Ir=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sr+l+Ir}function d(l,c){if(!l||al)return"";al=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(c){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Ie){var le=Ie}Reflect.construct(l,[],se)}else{try{se.call()}catch(Ie){le=Ie}l.call(se.prototype)}}else{try{throw Error()}catch(Ie){le=Ie}(se=l())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Ie){if(Ie&&le&&typeof Ie.stack=="string")return[Ie.stack,le.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=S.DetermineComponentFrameRoot(),k=U[0],et=U[1];if(k&&et){var pt=k.split(`
`),Pt=et.split(`
`);for(w=S=0;S<pt.length&&!pt[S].includes("DetermineComponentFrameRoot");)S++;for(;w<Pt.length&&!Pt[w].includes("DetermineComponentFrameRoot");)w++;if(S===pt.length||w===Pt.length)for(S=pt.length-1,w=Pt.length-1;1<=S&&0<=w&&pt[S]!==Pt[w];)w--;for(;1<=S&&0<=w;S--,w--)if(pt[S]!==Pt[w]){if(S!==1||w!==1)do if(S--,w--,0>w||pt[S]!==Pt[w]){var Wt=`
`+pt[S].replace(" at new "," at ");return l.displayName&&Wt.includes("<anonymous>")&&(Wt=Wt.replace("<anonymous>",l.displayName)),Wt}while(1<=S&&0<=w);break}}}finally{al=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?f(g):""}function p(l){switch(l.tag){case 26:case 27:case 5:return f(l.type);case 16:return f("Lazy");case 13:return f("Suspense");case 19:return f("SuspenseList");case 0:case 15:return l=d(l.type,!1),l;case 11:return l=d(l.type.render,!1),l;case 1:return l=d(l.type,!0),l;default:return""}}function y(l){try{var c="";do c+=p(l),l=l.return;while(l);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function v(l){var c=l,g=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(g=c.return),l=c.return;while(l)}return c.tag===3?g:null}function _(l){if(v(l)!==l)throw Error(a(188))}function b(l){var c=l.alternate;if(!c){if(c=v(l),c===null)throw Error(a(188));return c!==l?null:l}for(var g=l,S=c;;){var w=g.return;if(w===null)break;var U=w.alternate;if(U===null){if(S=w.return,S!==null){g=S;continue}break}if(w.child===U.child){for(U=w.child;U;){if(U===g)return _(w),l;if(U===S)return _(w),c;U=U.sibling}throw Error(a(188))}if(g.return!==S.return)g=w,S=U;else{for(var k=!1,et=w.child;et;){if(et===g){k=!0,g=w,S=U;break}if(et===S){k=!0,S=w,g=U;break}et=et.sibling}if(!k){for(et=U.child;et;){if(et===g){k=!0,g=U,S=w;break}if(et===S){k=!0,S=U,g=w;break}et=et.sibling}if(!k)throw Error(a(189))}}if(g.alternate!==S)throw Error(a(190))}if(g.tag!==3)throw Error(a(188));return g.stateNode.current===g?l:c}function E(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=E(l),c!==null)return c;l=l.sibling}return null}function R(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(l.tag!==4&&(c=R(l),c!==null))return c;l=l.sibling}return null}function T(l){return{current:l}}function M(l){0>Gr||(l.current=si[Gr],si[Gr]=null,Gr--)}function C(l,c){Gr++,si[Gr]=l.current,l.current=c}function D(l){return l>>>=0,l===0?32:31-(Dy(l)/Oy|0)|0}function O(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function N(l,c){var g=l.pendingLanes;if(g===0)return 0;var S=0,w=l.suspendedLanes,U=l.pingedLanes,k=l.warmLanes;l=l.finishedLanes!==0;var et=g&134217727;return et!==0?(g=et&~w,g!==0?S=O(g):(U&=et,U!==0?S=O(U):l||(k=et&~k,k!==0&&(S=O(k))))):(et=g&~w,et!==0?S=O(et):U!==0?S=O(U):l||(k=g&~k,k!==0&&(S=O(k)))),S===0?0:c!==0&&c!==S&&(c&w)===0&&(w=S&-S,k=c&-c,w>=k||w===32&&(k&4194176)!==0)?c:S}function L(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function H(l,c){switch(l){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G(){var l=or;return or<<=1,(or&4194176)===0&&(or=128),l}function B(){var l=ol;return ol<<=1,(ol&62914560)===0&&(ol=4194304),l}function z(l){for(var c=[],g=0;31>g;g++)c.push(l);return c}function j(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function at(l,c,g,S,w,U){var k=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var et=l.entanglements,pt=l.expirationTimes,Pt=l.hiddenUpdates;for(g=k&~g;0<g;){var Wt=31-ha(g),se=1<<Wt;et[Wt]=0,pt[Wt]=-1;var le=Pt[Wt];if(le!==null)for(Pt[Wt]=null,Wt=0;Wt<le.length;Wt++){var Ie=le[Wt];Ie!==null&&(Ie.lane&=-536870913)}g&=~se}S!==0&&nt(l,S,0),U!==0&&w===0&&l.tag!==0&&(l.suspendedLanes|=U&~(k&~c))}function nt(l,c,g){l.pendingLanes|=c,l.suspendedLanes&=~c;var S=31-ha(c);l.entangledLanes|=c,l.entanglements[S]=l.entanglements[S]|1073741824|g&4194218}function Q(l,c){var g=l.entangledLanes|=c;for(l=l.entanglements;g;){var S=31-ha(g),w=1<<S;w&c|l[S]&c&&(l[S]|=c),g&=~w}}function rt(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function I(l){if(Aa&&typeof Aa.onCommitFiberRoot=="function")try{Aa.onCommitFiberRoot(ri,l,void 0,(l.current.flags&128)===128)}catch{}}function Z(l){if(typeof Ly=="function"&&Ni(l),Aa&&typeof Aa.setStrictMode=="function")try{Aa.setStrictMode(ri,l)}catch{}}function W(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}function J(l,c){if(typeof l=="object"&&l!==null){var g=Lp.get(l);return g!==void 0?g:(c={value:l,source:c,stack:y(c)},Lp.set(l,c),c)}return{value:l,source:c,stack:y(c)}}function F(l,c){ll[ul++]=vu,ll[ul++]=cl,cl=l,vu=c}function $(l,c,g){qa[Xa++]=Vs,qa[Xa++]=Hs,qa[Xa++]=Do,Do=l;var S=Vs;l=Hs;var w=32-ha(S)-1;S&=~(1<<w),g+=1;var U=32-ha(c)+w;if(30<U){var k=w-w%5;U=(S&(1<<k)-1).toString(32),S>>=k,w-=k,Vs=1<<32-ha(c)+w|g<<w|S,Hs=U+l}else Vs=1<<U|g<<w|S,Hs=l}function mt(l){l.return!==null&&(F(l,1),$(l,1,0))}function Tt(l){for(;l===cl;)cl=ll[--ul],ll[ul]=null,vu=ll[--ul],ll[ul]=null;for(;l===Do;)Do=qa[--Xa],qa[Xa]=null,Hs=qa[--Xa],qa[Xa]=null,Vs=qa[--Xa],qa[Xa]=null}function st(l,c){C(lr,c),C(_u,l),C(Ei,null),l=Zg(c),M(Ei),C(Ei,l)}function Et(){M(Ei),M(_u),M(lr)}function Bt(l){l.memoizedState!==null&&C(fl,l);var c=Ei.current,g=du(c,l.type);c!==g&&(C(_u,l),C(Ei,g))}function Xt(l){_u.current===l&&(M(Ei),M(_u)),fl.current===l&&(M(fl),ca?Bs._currentValue=To:Bs._currentValue2=To)}function Zt(l){var c=Error(a(418,""));throw ze(J(c,l)),Gc}function Me(l,c){if(!ki)throw Error(a(175));xy(l.stateNode,l.type,l.memoizedProps,c,l)||Zt(l)}function ge(l){for(ji=l.return;ji;)switch(ji.tag){case 3:case 27:Li=!0;return;case 5:case 13:Li=!1;return;default:ji=ji.return}}function ke(l){if(!ki||l!==ji)return!1;if(!fn)return ge(l),fn=!0,!1;var c=!1;if(Ln?l.tag!==3&&l.tag!==27&&(l.tag!==5||mh(l.type)&&!He(l.type,l.memoizedProps))&&(c=!0):l.tag!==3&&(l.tag!==5||mh(l.type)&&!He(l.type,l.memoizedProps))&&(c=!0),c&&Yi&&Zt(l),ge(l),l.tag===13){if(!ki)throw Error(a(316));if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));Yi=by(l)}else Yi=ji?Dp(l.stateNode):null;return!0}function an(){ki&&(Yi=ji=null,fn=!1)}function ze(l){ms===null?ms=[l]:ms.push(l)}function it(){for(var l=hl,c=Fs=hl=0;c<l;){var g=gs[c];gs[c++]=null;var S=gs[c];gs[c++]=null;var w=gs[c];gs[c++]=null;var U=gs[c];if(gs[c++]=null,S!==null&&w!==null){var k=S.pending;k===null?w.next=w:(w.next=k.next,k.next=w),S.pending=w}U!==0&&Nt(g,w,U)}}function Un(l,c,g,S){gs[hl++]=l,gs[hl++]=c,gs[hl++]=g,gs[hl++]=S,Fs|=S,l.lanes|=S,l=l.alternate,l!==null&&(l.lanes|=S)}function Vt(l,c,g,S){return Un(l,c,g,S),Kt(l)}function Ut(l,c){return Un(l,null,null,c),Kt(l)}function Nt(l,c,g){l.lanes|=g;var S=l.alternate;S!==null&&(S.lanes|=g);for(var w=!1,U=l.return;U!==null;)U.childLanes|=g,S=U.alternate,S!==null&&(S.childLanes|=g),U.tag===22&&(l=U.stateNode,l===null||l._visibility&1||(w=!0)),l=U,U=U.return;w&&c!==null&&l.tag===3&&(U=l.stateNode,w=31-ha(g),U=U.hiddenUpdates,l=U[w],l===null?U[w]=[c]:l.push(c),c.lane=g|536870912)}function Kt(l){if(50<wu)throw wu=0,Dh=null,Error(a(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}function Ot(l){l!==qr&&l.next===null&&(qr===null?qc=qr=l:qr=qr.next=l),Vn=!0,dl||(dl=!0,Ct(V))}function Y(l,c){if(!Pp&&Vn){Pp=!0;do for(var g=!1,S=qc;S!==null;){if(l!==0){var w=S.pendingLanes;if(w===0)var U=0;else{var k=S.suspendedLanes,et=S.pingedLanes;U=(1<<31-ha(42|l)+1)-1,U&=w&~(k&~et),U=U&201326677?U&201326677|1:U?U|2:0}U!==0&&(g=!0,Lt(S,U))}else U=rn,U=N(S,S===En?U:0),(U&3)===0||L(S,U)||(g=!0,Lt(S,U));S=S.next}while(g);Pp=!1}}function V(){Vn=dl=!1;var l=0;xu!==0&&($g()&&(l=xu),xu=0);for(var c=ps(),g=null,S=qc;S!==null;){var w=S.next,U=ft(S,c);U===0?(S.next=null,g===null?qc=w:g.next=w,w===null&&(qr=g)):(g=S,(l!==0||(U&3)!==0)&&(Vn=!0)),S=w}Y(l)}function ft(l,c){for(var g=l.suspendedLanes,S=l.pingedLanes,w=l.expirationTimes,U=l.pendingLanes&-62914561;0<U;){var k=31-ha(U),et=1<<k,pt=w[k];pt===-1?((et&g)===0||(et&S)!==0)&&(w[k]=H(et,c)):pt<=c&&(l.expiredLanes|=et),U&=~et}if(c=En,g=rn,g=N(l,l===c?g:0),S=l.callbackNode,g===0||l===c&&Dn===2||l.cancelPendingCommit!==null)return S!==null&&S!==null&&_h(S),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||L(l,g)){if(c=g&-g,c===l.callbackPriority)return c;switch(S!==null&&_h(S),rt(g)){case 2:case 8:g=Ny;break;case 32:g=bh;break;case 268435456:g=ox;break;default:g=bh}return S=wt.bind(null,l),g=Fc(g,S),l.callbackPriority=c,l.callbackNode=g,c}return S!==null&&S!==null&&_h(S),l.callbackPriority=2,l.callbackNode=null,2}function wt(l,c){var g=l.callbackNode;if(Ps()&&l.callbackNode!==g)return null;var S=rn;return S=N(l,l===En?S:0),S===0?null:(vo(l,S,c),ft(l,ps()),l.callbackNode!=null&&l.callbackNode===g?wt.bind(null,l):null)}function Lt(l,c){if(Ps())return null;vo(l,c,!0)}function Ct(l){xp?Fr(function(){(pn&6)!==0?Fc(Sh,l):l()}):Fc(Sh,l)}function $t(){return xu===0&&(xu=G()),xu}function Yt(l,c){if(Su===null){var g=Su=[];pl=0,ka=$t(),ml={status:"pending",value:void 0,then:function(S){g.push(S)}}}return pl++,c.then(Qt,Qt),c}function Qt(){if(--pl===0&&Su!==null){ml!==null&&(ml.status="fulfilled");var l=Su;Su=null,ka=0,ml=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function Je(l,c){var g=[],S={status:"pending",value:null,reason:null,then:function(w){g.push(w)}};return l.then(function(){S.status="fulfilled",S.value=c;for(var w=0;w<g.length;w++)(0,g[w])(c)},function(w){for(S.status="rejected",S.reason=w,w=0;w<g.length;w++)(0,g[w])(void 0)}),S}function kt(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ue(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function de(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function pe(l,c,g){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(pn&2)!==0){var w=S.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),S.pending=c,c=Kt(l),Nt(l,null,g),c}return Un(l,S,c,g),Kt(l)}function te(l,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194176)!==0)){var S=c.lanes;S&=l.pendingLanes,g|=S,c.lanes=g,Q(l,g)}}function Ge(l,c){var g=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var w=null,U=null;if(g=g.firstBaseUpdate,g!==null){do{var k={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};U===null?w=U=k:U=U.next=k,g=g.next}while(g!==null);U===null?w=U=c:U=U.next=c}else w=U=c;g={baseState:S.baseState,firstBaseUpdate:w,lastBaseUpdate:U,shared:S.shared,callbacks:S.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=c:l.next=c,g.lastBaseUpdate=c}function Te(){if(gl){var l=ml;if(l!==null)throw l}}function gn(l,c,g,S){gl=!1;var w=l.updateQueue;Xr=!1;var U=w.firstBaseUpdate,k=w.lastBaseUpdate,et=w.shared.pending;if(et!==null){w.shared.pending=null;var pt=et,Pt=pt.next;pt.next=null,k===null?U=Pt:k.next=Pt,k=pt;var Wt=l.alternate;Wt!==null&&(Wt=Wt.updateQueue,et=Wt.lastBaseUpdate,et!==k&&(et===null?Wt.firstBaseUpdate=Pt:et.next=Pt,Wt.lastBaseUpdate=pt))}if(U!==null){var se=w.baseState;k=0,Wt=Pt=pt=null,et=U;do{var le=et.lane&-536870913,Ie=le!==et.lane;if(Ie?(rn&le)===le:(S&le)===le){le!==0&&le===ka&&(gl=!0),Wt!==null&&(Wt=Wt.next={lane:0,tag:et.tag,payload:et.payload,callback:null,next:null});t:{var $a=l,Vo=et;le=c;var Ho=g;switch(Vo.tag){case 1:if($a=Vo.payload,typeof $a=="function"){se=$a.call(Ho,se,le);break t}se=$a;break t;case 3:$a.flags=$a.flags&-65537|128;case 0:if($a=Vo.payload,le=typeof $a=="function"?$a.call(Ho,se,le):$a,le==null)break t;se=ih({},se,le);break t;case 2:Xr=!0}}le=et.callback,le!==null&&(l.flags|=64,Ie&&(l.flags|=8192),Ie=w.callbacks,Ie===null?w.callbacks=[le]:Ie.push(le))}else Ie={lane:le,tag:et.tag,payload:et.payload,callback:et.callback,next:null},Wt===null?(Pt=Wt=Ie,pt=se):Wt=Wt.next=Ie,k|=le;if(et=et.next,et===null){if(et=w.shared.pending,et===null)break;Ie=et,et=Ie.next,Ie.next=null,w.lastBaseUpdate=Ie,w.shared.pending=null}}while(!0);Wt===null&&(pt=se),w.baseState=pt,w.firstBaseUpdate=Pt,w.lastBaseUpdate=Wt,U===null&&(w.shared.lanes=0),Qa|=k,l.lanes=k,l.memoizedState=se}}function ct(l,c){if(typeof l!="function")throw Error(a(191,l));l.call(c)}function ne(l,c){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)ct(g[l],c)}function Rt(l,c){if(Ra(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var g=Object.keys(l),S=Object.keys(c);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var w=g[S];if(!ur.call(c,w)||!Ra(l[w],c[w]))return!1}return!0}function Ht(l){return l=l.status,l==="fulfilled"||l==="rejected"}function ae(){}function ie(l,c,g){switch(g=l[g],g===void 0?l.push(c):g!==c&&(c.then(ae,ae),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,l===bu?Error(a(483)):l;default:if(typeof c.status=="string")c.then(ae,ae);else{if(l=En,l!==null&&100<l.shellSuspendCounter)throw Error(a(482));l=c,l.status="pending",l.then(function(S){if(c.status==="pending"){var w=c;w.status="fulfilled",w.value=S}},function(S){if(c.status==="pending"){var w=c;w.status="rejected",w.reason=S}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,l===bu?Error(a(483)):l}throw Oo=c,bu}}function Pe(){if(Oo===null)throw Error(a(459));var l=Oo;return Oo=null,l}function An(l){var c=No;return No+=1,Uo===null&&(Uo=[]),ie(Uo,l,c)}function jn(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function ln(l,c){throw c.$$typeof===tx?Error(a(525)):(l=Object.prototype.toString.call(c),Error(a(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function va(l){var c=l._init;return c(l._payload)}function Si(l){function c(vt,ot){if(l){var Mt=vt.deletions;Mt===null?(vt.deletions=[ot],vt.flags|=16):Mt.push(ot)}}function g(vt,ot){if(!l)return null;for(;ot!==null;)c(vt,ot),ot=ot.sibling;return null}function S(vt){for(var ot=new Map;vt!==null;)vt.key!==null?ot.set(vt.key,vt):ot.set(vt.index,vt),vt=vt.sibling;return ot}function w(vt,ot){return vt=cs(vt,ot),vt.index=0,vt.sibling=null,vt}function U(vt,ot,Mt){return vt.index=Mt,l?(Mt=vt.alternate,Mt!==null?(Mt=Mt.index,Mt<ot?(vt.flags|=33554434,ot):Mt):(vt.flags|=33554434,ot)):(vt.flags|=1048576,ot)}function k(vt){return l&&vt.alternate===null&&(vt.flags|=33554434),vt}function et(vt,ot,Mt,jt){return ot===null||ot.tag!==6?(ot=eh(Mt,vt.mode,jt),ot.return=vt,ot):(ot=w(ot,Mt),ot.return=vt,ot)}function pt(vt,ot,Mt,jt){var ve=Mt.type;return ve===Mo?Wt(vt,ot,Mt.props.children,jt,Mt.key):ot!==null&&(ot.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===hs&&va(ve)===ot.type)?(ot=w(ot,Mt.props),jn(ot,Mt),ot.return=vt,ot):(ot=ar(Mt.type,Mt.key,Mt.props,null,vt.mode,jt),jn(ot,Mt),ot.return=vt,ot)}function Pt(vt,ot,Mt,jt){return ot===null||ot.tag!==4||ot.stateNode.containerInfo!==Mt.containerInfo||ot.stateNode.implementation!==Mt.implementation?(ot=hp(Mt,vt.mode,jt),ot.return=vt,ot):(ot=w(ot,Mt.children||[]),ot.return=vt,ot)}function Wt(vt,ot,Mt,jt,ve){return ot===null||ot.tag!==7?(ot=$n(Mt,vt.mode,jt,ve),ot.return=vt,ot):(ot=w(ot,Mt),ot.return=vt,ot)}function se(vt,ot,Mt){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return ot=eh(""+ot,vt.mode,Mt),ot.return=vt,ot;if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case Dc:return Mt=ar(ot.type,ot.key,ot.props,null,vt.mode,Mt),jn(Mt,ot),Mt.return=vt,Mt;case fs:return ot=hp(ot,vt.mode,Mt),ot.return=vt,ot;case hs:var jt=ot._init;return ot=jt(ot._payload),se(vt,ot,Mt)}if(cu(ot)||r(ot))return ot=$n(ot,vt.mode,Mt,null),ot.return=vt,ot;if(typeof ot.then=="function")return se(vt,An(ot),Mt);if(ot.$$typeof===zs)return se(vt,mc(vt,ot),Mt);ln(vt,ot)}return null}function le(vt,ot,Mt,jt){var ve=ot!==null?ot.key:null;if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint")return ve!==null?null:et(vt,ot,""+Mt,jt);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case Dc:return Mt.key===ve?pt(vt,ot,Mt,jt):null;case fs:return Mt.key===ve?Pt(vt,ot,Mt,jt):null;case hs:return ve=Mt._init,Mt=ve(Mt._payload),le(vt,ot,Mt,jt)}if(cu(Mt)||r(Mt))return ve!==null?null:Wt(vt,ot,Mt,jt,null);if(typeof Mt.then=="function")return le(vt,ot,An(Mt),jt);if(Mt.$$typeof===zs)return le(vt,ot,mc(vt,Mt),jt);ln(vt,Mt)}return null}function Ie(vt,ot,Mt,jt,ve){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return vt=vt.get(Mt)||null,et(ot,vt,""+jt,ve);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case Dc:return vt=vt.get(jt.key===null?Mt:jt.key)||null,pt(ot,vt,jt,ve);case fs:return vt=vt.get(jt.key===null?Mt:jt.key)||null,Pt(ot,vt,jt,ve);case hs:var kn=jt._init;return jt=kn(jt._payload),Ie(vt,ot,Mt,jt,ve)}if(cu(jt)||r(jt))return vt=vt.get(Mt)||null,Wt(ot,vt,jt,ve,null);if(typeof jt.then=="function")return Ie(vt,ot,Mt,An(jt),ve);if(jt.$$typeof===zs)return Ie(vt,ot,Mt,mc(ot,jt),ve);ln(ot,jt)}return null}function $a(vt,ot,Mt,jt){for(var ve=null,kn=null,Ue=ot,vn=ot=0,oi=null;Ue!==null&&vn<Mt.length;vn++){Ue.index>vn?(oi=Ue,Ue=null):oi=Ue.sibling;var nn=le(vt,Ue,Mt[vn],jt);if(nn===null){Ue===null&&(Ue=oi);break}l&&Ue&&nn.alternate===null&&c(vt,Ue),ot=U(nn,ot,vn),kn===null?ve=nn:kn.sibling=nn,kn=nn,Ue=oi}if(vn===Mt.length)return g(vt,Ue),fn&&F(vt,vn),ve;if(Ue===null){for(;vn<Mt.length;vn++)Ue=se(vt,Mt[vn],jt),Ue!==null&&(ot=U(Ue,ot,vn),kn===null?ve=Ue:kn.sibling=Ue,kn=Ue);return fn&&F(vt,vn),ve}for(Ue=S(Ue);vn<Mt.length;vn++)oi=Ie(Ue,vt,vn,Mt[vn],jt),oi!==null&&(l&&oi.alternate!==null&&Ue.delete(oi.key===null?vn:oi.key),ot=U(oi,ot,vn),kn===null?ve=oi:kn.sibling=oi,kn=oi);return l&&Ue.forEach(function(yr){return c(vt,yr)}),fn&&F(vt,vn),ve}function Vo(vt,ot,Mt,jt){if(Mt==null)throw Error(a(151));for(var ve=null,kn=null,Ue=ot,vn=ot=0,oi=null,nn=Mt.next();Ue!==null&&!nn.done;vn++,nn=Mt.next()){Ue.index>vn?(oi=Ue,Ue=null):oi=Ue.sibling;var yr=le(vt,Ue,nn.value,jt);if(yr===null){Ue===null&&(Ue=oi);break}l&&Ue&&yr.alternate===null&&c(vt,Ue),ot=U(yr,ot,vn),kn===null?ve=yr:kn.sibling=yr,kn=yr,Ue=oi}if(nn.done)return g(vt,Ue),fn&&F(vt,vn),ve;if(Ue===null){for(;!nn.done;vn++,nn=Mt.next())nn=se(vt,nn.value,jt),nn!==null&&(ot=U(nn,ot,vn),kn===null?ve=nn:kn.sibling=nn,kn=nn);return fn&&F(vt,vn),ve}for(Ue=S(Ue);!nn.done;vn++,nn=Mt.next())nn=Ie(Ue,vt,vn,nn.value,jt),nn!==null&&(l&&nn.alternate!==null&&Ue.delete(nn.key===null?vn:nn.key),ot=U(nn,ot,vn),kn===null?ve=nn:kn.sibling=nn,kn=nn);return l&&Ue.forEach(function(Oh){return c(vt,Oh)}),fn&&F(vt,vn),ve}function Ho(vt,ot,Mt,jt){if(typeof Mt=="object"&&Mt!==null&&Mt.type===Mo&&Mt.key===null&&(Mt=Mt.props.children),typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case Dc:t:{for(var ve=Mt.key;ot!==null;){if(ot.key===ve){if(ve=Mt.type,ve===Mo){if(ot.tag===7){g(vt,ot.sibling),jt=w(ot,Mt.props.children),jt.return=vt,vt=jt;break t}}else if(ot.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===hs&&va(ve)===ot.type){g(vt,ot.sibling),jt=w(ot,Mt.props),jn(jt,Mt),jt.return=vt,vt=jt;break t}g(vt,ot);break}else c(vt,ot);ot=ot.sibling}Mt.type===Mo?(jt=$n(Mt.props.children,vt.mode,jt,Mt.key),jt.return=vt,vt=jt):(jt=ar(Mt.type,Mt.key,Mt.props,null,vt.mode,jt),jn(jt,Mt),jt.return=vt,vt=jt)}return k(vt);case fs:t:{for(ve=Mt.key;ot!==null;){if(ot.key===ve)if(ot.tag===4&&ot.stateNode.containerInfo===Mt.containerInfo&&ot.stateNode.implementation===Mt.implementation){g(vt,ot.sibling),jt=w(ot,Mt.children||[]),jt.return=vt,vt=jt;break t}else{g(vt,ot);break}else c(vt,ot);ot=ot.sibling}jt=hp(Mt,vt.mode,jt),jt.return=vt,vt=jt}return k(vt);case hs:return ve=Mt._init,Mt=ve(Mt._payload),Ho(vt,ot,Mt,jt)}if(cu(Mt))return $a(vt,ot,Mt,jt);if(r(Mt)){if(ve=r(Mt),typeof ve!="function")throw Error(a(150));return Mt=ve.call(Mt),Vo(vt,ot,Mt,jt)}if(typeof Mt.then=="function")return Ho(vt,ot,An(Mt),jt);if(Mt.$$typeof===zs)return Ho(vt,ot,mc(vt,Mt),jt);ln(vt,Mt)}return typeof Mt=="string"&&Mt!==""||typeof Mt=="number"||typeof Mt=="bigint"?(Mt=""+Mt,ot!==null&&ot.tag===6?(g(vt,ot.sibling),jt=w(ot,Mt),jt.return=vt,vt=jt):(g(vt,ot),jt=eh(Mt,vt.mode,jt),jt.return=vt,vt=jt),k(vt)):g(vt,ot)}return function(vt,ot,Mt,jt){try{No=0;var ve=Ho(vt,ot,Mt,jt);return Uo=null,ve}catch(Ue){if(Ue===bu)throw Ue;var kn=e(29,Ue,null,vt.mode);return kn.lanes=jt,kn.return=vt,kn}finally{}}}function fi(l,c){l=ea,C(Mu,l),C(Hn,c),ea=l|c.baseLanes}function bi(){C(Mu,ea),C(Hn,Hn.current)}function Qi(){ea=Mu.current,M(Hn),M(Mu)}function _a(l){var c=l.alternate;C(Ti,Ti.current&1),C(ja,l),Pn===null&&(c===null||Hn.current!==null||c.memoizedState!==null)&&(Pn=l)}function ic(l){if(l.tag===22){if(C(Ti,Ti.current),C(ja,l),Pn===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(Pn=l)}}else Cs()}function Cs(){C(Ti,Ti.current),C(ja,ja.current)}function sa(l){M(ja),Pn===l&&(Pn=null),M(Ti)}function Ds(l){for(var c=l;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||hh(g)||dh(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function wn(){throw Error(a(321))}function Os(l,c){if(c===null)return!1;for(var g=0;g<c.length&&g<l.length;g++)if(!Ra(l[g],c[g]))return!1;return!0}function Us(l,c,g,S,w,U){return kr=U,je=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Oe.H=l===null||l.memoizedState===null?zo:da,Po=!1,U=g(S,w),Po=!1,yl&&(U=Er(c,g,S,w)),ro(l),U}function ro(l){Oe.H=ti;var c=Ee!==null&&Ee.next!==null;if(kr=0,dn=Ee=je=null,ys=!1,vl=0,Pi=null,c)throw Error(a(300));l===null||zn||(l=l.dependencies,l!==null&&pc(l)&&(zn=!0))}function Er(l,c,g,S){je=l;var w=0;do{if(yl&&(Pi=null),vl=0,yl=!1,25<=w)throw Error(a(301));if(w+=1,dn=Ee=null,l.updateQueue!=null){var U=l.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}Oe.H=Ya,U=c(g,S)}while(yl);return U}function hi(){var l=Oe.H,c=l.useState()[0];return c=typeof c.then=="function"?xt(c):c,l=l.useState()[0],(Ee!==null?Ee.memoizedState:null)!==l&&(je.flags|=1024),c}function Gl(){var l=Mh!==0;return Mh=0,l}function ql(l,c,g){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~g}function Ns(l){if(ys){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}ys=!1}kr=0,dn=Ee=je=null,yl=!1,vl=Mh=0,Pi=null}function X(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?je.memoizedState=dn=l:dn=dn.next=l,dn}function ut(){if(Ee===null){var l=je.alternate;l=l!==null?l.memoizedState:null}else l=Ee.next;var c=dn===null?je.memoizedState:dn.next;if(c!==null)dn=c,Ee=l;else{if(l===null)throw je.alternate===null?Error(a(467)):Error(a(310));Ee=l,l={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},dn===null?je.memoizedState=dn=l:dn=dn.next=l}return dn}function xt(l){var c=vl;return vl+=1,Pi===null&&(Pi=[]),l=ie(Pi,l,c),c=je,(dn===null?c.memoizedState:dn.next)===null&&(c=c.alternate,Oe.H=c===null||c.memoizedState===null?zo:da),l}function St(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return xt(l);if(l.$$typeof===zs)return Fi(l)}throw Error(a(438,String(l)))}function dt(l){var c=null,g=je.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var S=je.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(c={data:S.data.map(function(w){return w.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=Eh(),je.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(l),S=0;S<l;S++)g[S]=Wg;return c.index++,g}function qt(l,c){return typeof c=="function"?c(l):c}function Jt(l){var c=ut();return ee(c,Ee,l)}function ee(l,c,g){var S=l.queue;if(S===null)throw Error(a(311));S.lastRenderedReducer=g;var w=l.baseQueue,U=S.pending;if(U!==null){if(w!==null){var k=w.next;w.next=U.next,U.next=k}c.baseQueue=w=U,S.pending=null}if(U=l.baseState,w===null)l.memoizedState=U;else{c=w.next;var et=k=null,pt=null,Pt=c,Wt=!1;do{var se=Pt.lane&-536870913;if(se!==Pt.lane?(rn&se)===se:(kr&se)===se){var le=Pt.revertLane;if(le===0)pt!==null&&(pt=pt.next={lane:0,revertLane:0,action:Pt.action,hasEagerState:Pt.hasEagerState,eagerState:Pt.eagerState,next:null}),se===ka&&(Wt=!0);else if((kr&le)===le){Pt=Pt.next,le===ka&&(Wt=!0);continue}else se={lane:0,revertLane:Pt.revertLane,action:Pt.action,hasEagerState:Pt.hasEagerState,eagerState:Pt.eagerState,next:null},pt===null?(et=pt=se,k=U):pt=pt.next=se,je.lanes|=le,Qa|=le;se=Pt.action,Po&&g(U,se),U=Pt.hasEagerState?Pt.eagerState:g(U,se)}else le={lane:se,revertLane:Pt.revertLane,action:Pt.action,hasEagerState:Pt.hasEagerState,eagerState:Pt.eagerState,next:null},pt===null?(et=pt=le,k=U):pt=pt.next=le,je.lanes|=se,Qa|=se;Pt=Pt.next}while(Pt!==null&&Pt!==c);if(pt===null?k=U:pt.next=et,!Ra(U,l.memoizedState)&&(zn=!0,Wt&&(g=ml,g!==null)))throw g;l.memoizedState=U,l.baseState=k,l.baseQueue=pt,S.lastRenderedState=U}return w===null&&(S.lanes=0),[l.memoizedState,S.dispatch]}function ce(l){var c=ut(),g=c.queue;if(g===null)throw Error(a(311));g.lastRenderedReducer=l;var S=g.dispatch,w=g.pending,U=c.memoizedState;if(w!==null){g.pending=null;var k=w=w.next;do U=l(U,k.action),k=k.next;while(k!==w);Ra(U,c.memoizedState)||(zn=!0),c.memoizedState=U,c.baseQueue===null&&(c.baseState=U),g.lastRenderedState=U}return[U,S]}function Re(l,c,g){var S=je,w=ut(),U=fn;if(U){if(g===void 0)throw Error(a(407));g=g()}else g=c();var k=!Ra((Ee||w).memoizedState,g);if(k&&(w.memoizedState=g,zn=!0),w=w.queue,Bd($e.bind(null,S,w,l),[l]),w.getSnapshot!==c||k||dn!==null&&dn.memoizedState.tag&1){if(S.flags|=2048,ra(9,ye.bind(null,S,w,g,c),{destroy:void 0},null),En===null)throw Error(a(349));U||(kr&60)!==0||xe(S,c,g)}return g}function xe(l,c,g){l.flags|=16384,l={getSnapshot:c,value:g},c=je.updateQueue,c===null?(c=Eh(),je.updateQueue=c,c.stores=[l]):(g=c.stores,g===null?c.stores=[l]:g.push(l))}function ye(l,c,g,S){c.value=g,c.getSnapshot=S,hn(c)&&Yn(l)}function $e(l,c,g){return g(function(){hn(c)&&Yn(l)})}function hn(l){var c=l.getSnapshot;l=l.value;try{var g=c();return!Ra(l,g)}catch{return!0}}function Yn(l){var c=Ut(l,2);c!==null&&Ui(c,l,2)}function en(l){var c=X();if(typeof l=="function"){var g=l;if(l=g(),Po){Z(!0);try{g()}finally{Z(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qt,lastRenderedState:l},c}function sn(l,c,g,S){return l.baseState=g,ee(l,Ee,typeof S=="function"?S:qt)}function Se(l,c,g,S,w){if(uc(l))throw Error(a(485));if(l=c.action,l!==null){var U={payload:w,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){U.listeners.push(k)}};Oe.T!==null?g(!0):U.isTransition=!1,S(U),g=c.pending,g===null?(U.next=c.pending=U,Kn(c,U)):(U.next=g.next,c.pending=g.next=U)}}function Kn(l,c){var g=c.action,S=c.payload,w=l.state;if(c.isTransition){var U=Oe.T,k={};Oe.T=k;try{var et=g(w,S),pt=Oe.S;pt!==null&&pt(k,et),cn(l,c,et)}catch(Pt){Js(l,c,Pt)}finally{Oe.T=U}}else try{U=g(w,S),cn(l,c,U)}catch(Pt){Js(l,c,Pt)}}function cn(l,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){Ii(l,c,S)},function(S){return Js(l,c,S)}):Ii(l,c,g)}function Ii(l,c,g){c.status="fulfilled",c.value=g,Nn(c),l.state=g,c=l.pending,c!==null&&(g=c.next,g===c?l.pending=null:(g=g.next,c.next=g,Kn(l,g)))}function Js(l,c,g){var S=l.pending;if(l.pending=null,S!==null){S=S.next;do c.status="rejected",c.reason=g,Nn(c),c=c.next;while(c!==S)}l.action=null}function Nn(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function $s(l,c){return c}function Cn(l,c){if(fn){var g=En.formState;if(g!==null){t:{var S=je;if(fn){if(Yi){var w=Cp(Yi,Li);if(w){Yi=Dp(w),S=gy(w);break t}}Zt(S)}S=!1}S&&(c=g[0])}}g=X(),g.memoizedState=g.baseState=c,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:c},g.queue=S,g=Fd.bind(null,je,S),S.dispatch=g,S=en(!1);var U=jl.bind(null,je,!1,S.queue);return S=X(),w={state:c,dispatch:null,action:l,pending:null},S.queue=w,g=Se.bind(null,je,w,U,g),w.dispatch=g,S.memoizedState=l,[c,g,!1]}function Vi(l){var c=ut();return di(c,Ee,l)}function di(l,c,g){c=ee(l,c,$s)[0],l=Jt(qt)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?xt(c):c;var S=ut(),w=S.queue,U=w.dispatch;return g!==S.memoizedState&&(je.flags|=2048,ra(9,Ci.bind(null,w,g),{destroy:void 0},null)),[c,U,l]}function Ci(l,c){l.action=c}function Di(l){var c=ut(),g=Ee;if(g!==null)return di(c,g,l);ut(),c=c.memoizedState,g=ut();var S=g.queue.dispatch;return g.memoizedState=l,[c,S,!1]}function ra(l,c,g,S){return l={tag:l,create:c,inst:g,deps:S,next:null},c=je.updateQueue,c===null&&(c=Eh(),je.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=l.next=l:(S=g.next,g.next=l,l.next=S,c.lastEffect=l),l}function tr(){return ut().memoizedState}function ac(l,c,g,S){var w=X();je.flags|=l,w.memoizedState=ra(1|c,g,{destroy:void 0},S===void 0?null:S)}function sc(l,c,g,S){var w=ut();S=S===void 0?null:S;var U=w.memoizedState.inst;Ee!==null&&S!==null&&Os(S,Ee.memoizedState.deps)?w.memoizedState=ra(c,g,U,S):(je.flags|=l,w.memoizedState=ra(1|c,g,U,S))}function Pf(l,c){ac(8390656,8,l,c)}function Bd(l,c){sc(2048,8,l,c)}function Ag(l,c){return sc(4,2,l,c)}function rc(l,c){return sc(4,4,l,c)}function zf(l,c){if(typeof c=="function"){l=l();var g=c(l);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function Bf(l,c,g){g=g!=null?g.concat([l]):null,sc(4,4,zf.bind(null,c,l),g)}function oo(){}function tl(l,c){var g=ut();c=c===void 0?null:c;var S=g.memoizedState;return c!==null&&Os(c,S[1])?S[0]:(g.memoizedState=[l,c],l)}function Id(l,c){var g=ut();c=c===void 0?null:c;var S=g.memoizedState;if(c!==null&&Os(c,S[1]))return S[0];if(S=l(),Po){Z(!0);try{l()}finally{Z(!1)}}return g.memoizedState=[S,c],S}function oc(l,c,g){return g===void 0||(kr&1073741824)!==0?l.memoizedState=c:(l.memoizedState=g,l=rp(),je.lanes|=l,Qa|=l,g)}function Vd(l,c,g,S){return Ra(g,c)?g:Hn.current!==null?(l=oc(l,g,S),Ra(l,c)||(zn=!0),l):(kr&42)===0?(zn=!0,l.memoizedState=g):(l=rp(),je.lanes|=l,Qa|=l,c)}function Xl(l,c,g,S,w){var U=Hr();$i(U!==0&&8>U?U:8);var k=Oe.T,et={};Oe.T=et,jl(l,!1,c,g);try{var pt=w(),Pt=Oe.S;if(Pt!==null&&Pt(et,pt),pt!==null&&typeof pt=="object"&&typeof pt.then=="function"){var Wt=Je(pt,S);lo(l,c,Wt,ii(l))}else lo(l,c,S,ii(l))}catch(se){lo(l,c,{then:function(){},status:"rejected",reason:se},ii())}finally{$i(U),Oe.T=k}}function er(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:To,baseState:To,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qt,lastRenderedState:To},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qt,lastRenderedState:g},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function lc(){return Fi(Bs)}function kl(){return ut().memoizedState}function Tr(){return ut().memoizedState}function Hd(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var g=ii();l=de(g);var S=pe(c,l,g);S!==null&&(Ui(S,c,g),te(S,c,g)),c={cache:ho()},l.payload=c;return}c=c.return}}function If(l,c,g){var S=ii();g={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},uc(l)?oa(c,g):(g=Vt(l,c,g,S),g!==null&&(Ui(g,l,S),uo(g,c,S)))}function Fd(l,c,g){var S=ii();lo(l,c,g,S)}function lo(l,c,g,S){var w={lane:S,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(uc(l))oa(c,w);else{var U=l.alternate;if(l.lanes===0&&(U===null||U.lanes===0)&&(U=c.lastRenderedReducer,U!==null))try{var k=c.lastRenderedState,et=U(k,g);if(w.hasEagerState=!0,w.eagerState=et,Ra(et,k))return Un(l,c,w,0),En===null&&it(),!1}catch{}finally{}if(g=Vt(l,c,w,S),g!==null)return Ui(g,l,S),uo(g,c,S),!0}return!1}function jl(l,c,g,S){if(S={lane:2,revertLane:$t(),action:S,hasEagerState:!1,eagerState:null,next:null},uc(l)){if(c)throw Error(a(479))}else c=Vt(l,g,S,2),c!==null&&Ui(c,l,2)}function uc(l){var c=l.alternate;return l===je||c!==null&&c===je}function oa(l,c){yl=ys=!0;var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}function uo(l,c,g){if((g&4194176)!==0){var S=c.lanes;S&=l.pendingLanes,g|=S,c.lanes=g,Q(l,g)}}function Yl(l,c,g,S){c=l.memoizedState,g=g(S,c),g=g==null?c:ih({},c,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}function Wl(l,c,g,S,w,U,k){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,U,k):c.prototype&&c.prototype.isPureReactComponent?!Rt(g,S)||!Rt(w,U):!0}function Rg(l,c,g,S){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,S),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,S),c.state!==l&&fr.enqueueReplaceState(c,c.state,null)}function Ar(l,c){var g=c;if("ref"in c){g={};for(var S in c)S!=="ref"&&(g[S]=c[S])}if(l=l.defaultProps){g===c&&(g=ih({},g));for(var w in l)g[w]===void 0&&(g[w]=l[w])}return g}function Zl(l,c){try{var g=l.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(S){setTimeout(function(){throw S})}}function Kl(l,c,g){try{var S=l.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function Ql(l,c,g){return g=de(g),g.tag=3,g.payload={element:null},g.callback=function(){Zl(l,c)},g}function Gd(l){return l=de(l),l.tag=3,l}function wg(l,c,g,S){var w=g.type.getDerivedStateFromError;if(typeof w=="function"){var U=S.value;l.payload=function(){return w(U)},l.callback=function(){Kl(c,g,S)}}var k=g.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(l.callback=function(){Kl(c,g,S),typeof w!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var et=S.stack;this.componentDidCatch(S.value,{componentStack:et!==null?et:""})})}function K_(l,c,g,S,w){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(c=g.alternate,c!==null&&dc(c,g,w,!0),g=ja.current,g!==null){switch(g.tag){case 13:return Pn===null?Lr():g.alternate===null&&Bn===0&&(Bn=3),g.flags&=-257,g.flags|=65536,g.lanes=w,S===kc?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([S]):c.add(S),il(l,S,w)),!1;case 22:return g.flags|=65536,S===kc?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([S]):g.add(S)),il(l,S,w)),!1}throw Error(a(435,g.tag))}return il(l,S,w),Lr(),!1}if(fn)return c=ja.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=w,S!==Gc&&(l=Error(a(422),{cause:S}),ze(J(l,g)))):(S!==Gc&&(c=Error(a(423),{cause:S}),ze(J(c,g))),l=l.current.alternate,l.flags|=65536,w&=-w,l.lanes|=w,S=J(S,g),w=Ql(l.stateNode,S,w),Ge(l,w),Bn!==4&&(Bn=2)),!1;var U=Error(a(520),{cause:S});if(U=J(U,g),xl===null?xl=[U]:xl.push(U),Bn!==4&&(Bn=2),c===null)return!0;S=J(S,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,l=w&-w,g.lanes|=l,l=Ql(g.stateNode,S,l),Ge(g,l),!1;case 1:if(c=g.type,U=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Bo===null||!Bo.has(U))))return g.flags|=65536,w&=-w,g.lanes|=w,w=Gd(w),wg(w,l,g,S),Ge(g,w),!1}g=g.return}while(g!==null);return!1}function Hi(l,c,g,S){c.child=l===null?cr(c,null,g,S):Lo(c,l.child,g,S)}function Vf(l,c,g,S,w){g=g.render;var U=c.ref;if("ref"in S){var k={};for(var et in S)et!=="ref"&&(k[et]=S[et])}else k=S;return fo(c),S=Us(l,c,g,k,U,w),et=Gl(),l!==null&&!zn?(ql(l,c,w),Rr(l,c,w)):(fn&&et&&mt(c),c.flags|=1,Hi(l,c,S,w),c.child)}function Cg(l,c,g,S,w){if(l===null){var U=g.type;return typeof U=="function"&&!Ac(U)&&U.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=U,Dg(l,c,U,S,w)):(l=ar(g.type,null,S,c,c.mode,w),l.ref=c.ref,l.return=c,c.child=l)}if(U=l.child,!Yd(l,w)){var k=U.memoizedProps;if(g=g.compare,g=g!==null?g:Rt,g(k,S)&&l.ref===c.ref)return Rr(l,c,w)}return c.flags|=1,l=cs(U,S),l.ref=c.ref,l.return=c,c.child=l}function Dg(l,c,g,S,w){if(l!==null){var U=l.memoizedProps;if(Rt(U,S)&&l.ref===c.ref)if(zn=!1,c.pendingProps=S=U,Yd(l,w))(l.flags&131072)!==0&&(zn=!0);else return c.lanes=l.lanes,Rr(l,c,w)}return Hf(l,c,g,S,w)}function Og(l,c,g){var S=c.pendingProps,w=S.children,U=(c.stateNode._pendingVisibility&2)!==0,k=l!==null?l.memoizedState:null;if(cc(l,c),S.mode==="hidden"||U){if((c.flags&128)!==0){if(S=k!==null?k.baseLanes|g:g,l!==null){for(w=c.child=l.child,U=0;w!==null;)U=U|w.lanes|w.childLanes,w=w.sibling;c.childLanes=U&~S}else c.childLanes=0,c.child=null;return Ug(l,c,S,g)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&Gf(c,k!==null?k.cachePool:null),k!==null?fi(c,k):bi(),ic(c);else return c.lanes=c.childLanes=536870912,Ug(l,c,k!==null?k.baseLanes|g:g,g)}else k!==null?(Gf(c,k.cachePool),fi(c,k),Cs(),c.memoizedState=null):(l!==null&&Gf(c,null),bi(),Cs());return Hi(l,c,w,g),c.child}function Ug(l,c,g,S){var w=Zd();return w=w===null?null:{parent:ca?Fn._currentValue:Fn._currentValue2,pool:w},c.memoizedState={baseLanes:g,cachePool:w},l!==null&&Gf(c,null),bi(),ic(c),l!==null&&dc(l,c,S,!0),null}function cc(l,c){var g=c.ref;if(g===null)l!==null&&l.ref!==null&&(c.flags|=2097664);else{if(typeof g!="function"&&typeof g!="object")throw Error(a(284));(l===null||l.ref!==g)&&(c.flags|=2097664)}}function Hf(l,c,g,S,w){return fo(c),g=Us(l,c,g,S,void 0,w),S=Gl(),l!==null&&!zn?(ql(l,c,w),Rr(l,c,w)):(fn&&S&&mt(c),c.flags|=1,Hi(l,c,g,w),c.child)}function Ng(l,c,g,S,w,U){return fo(c),c.updateQueue=null,g=Er(c,S,g,w),ro(l),S=Gl(),l!==null&&!zn?(ql(l,c,U),Rr(l,c,U)):(fn&&S&&mt(c),c.flags|=1,Hi(l,c,g,U),c.child)}function Lg(l,c,g,S,w){if(fo(c),c.stateNode===null){var U=Co,k=g.contextType;typeof k=="object"&&k!==null&&(U=Fi(k)),U=new g(S,U),c.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=fr,c.stateNode=U,U._reactInternals=c,U=c.stateNode,U.props=S,U.state=c.memoizedState,U.refs={},kt(c),k=g.contextType,U.context=typeof k=="object"&&k!==null?Fi(k):Co,U.state=c.memoizedState,k=g.getDerivedStateFromProps,typeof k=="function"&&(Yl(c,g,k,S),U.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(k=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),k!==U.state&&fr.enqueueReplaceState(U,U.state,null),gn(c,S,U,w),Te(),U.state=c.memoizedState),typeof U.componentDidMount=="function"&&(c.flags|=4194308),S=!0}else if(l===null){U=c.stateNode;var et=c.memoizedProps,pt=Ar(g,et);U.props=pt;var Pt=U.context,Wt=g.contextType;k=Co,typeof Wt=="object"&&Wt!==null&&(k=Fi(Wt));var se=g.getDerivedStateFromProps;Wt=typeof se=="function"||typeof U.getSnapshotBeforeUpdate=="function",et=c.pendingProps!==et,Wt||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(et||Pt!==k)&&Rg(c,U,S,k),Xr=!1;var le=c.memoizedState;U.state=le,gn(c,S,U,w),Te(),Pt=c.memoizedState,et||le!==Pt||Xr?(typeof se=="function"&&(Yl(c,g,se,S),Pt=c.memoizedState),(pt=Xr||Wl(c,g,pt,S,le,Pt,k))?(Wt||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(c.flags|=4194308)):(typeof U.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=S,c.memoizedState=Pt),U.props=S,U.state=Pt,U.context=k,S=pt):(typeof U.componentDidMount=="function"&&(c.flags|=4194308),S=!1)}else{U=c.stateNode,ue(l,c),k=c.memoizedProps,Wt=Ar(g,k),U.props=Wt,se=c.pendingProps,le=U.context,Pt=g.contextType,pt=Co,typeof Pt=="object"&&Pt!==null&&(pt=Fi(Pt)),et=g.getDerivedStateFromProps,(Pt=typeof et=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(k!==se||le!==pt)&&Rg(c,U,S,pt),Xr=!1,le=c.memoizedState,U.state=le,gn(c,S,U,w),Te();var Ie=c.memoizedState;k!==se||le!==Ie||Xr||l!==null&&l.dependencies!==null&&pc(l.dependencies)?(typeof et=="function"&&(Yl(c,g,et,S),Ie=c.memoizedState),(Wt=Xr||Wl(c,g,Wt,S,le,Ie,pt)||l!==null&&l.dependencies!==null&&pc(l.dependencies))?(Pt||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(S,Ie,pt),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(S,Ie,pt)),typeof U.componentDidUpdate=="function"&&(c.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof U.componentDidUpdate!="function"||k===l.memoizedProps&&le===l.memoizedState||(c.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||k===l.memoizedProps&&le===l.memoizedState||(c.flags|=1024),c.memoizedProps=S,c.memoizedState=Ie),U.props=S,U.state=Ie,U.context=pt,S=Wt):(typeof U.componentDidUpdate!="function"||k===l.memoizedProps&&le===l.memoizedState||(c.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||k===l.memoizedProps&&le===l.memoizedState||(c.flags|=1024),S=!1)}return U=S,cc(l,c),S=(c.flags&128)!==0,U||S?(U=c.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:U.render(),c.flags|=1,l!==null&&S?(c.child=Lo(c,l.child,null,w),c.child=Lo(c,null,g,w)):Hi(l,c,g,w),c.memoizedState=U.state,l=c.child):l=Rr(l,c,w),l}function Pg(l,c,g,S){return an(),c.flags|=256,Hi(l,c,g,S),c.child}function qd(l){return{baseLanes:l,cachePool:Kd()}}function fc(l,c,g){return l=l!==null?l.childLanes&~g:0,c&&(l|=Ja),l}function zg(l,c,g){var S=c.pendingProps,w=!1,U=(c.flags&128)!==0,k;if((k=U)||(k=l!==null&&l.memoizedState===null?!1:(Ti.current&2)!==0),k&&(w=!0,c.flags&=-129),k=(c.flags&32)!==0,c.flags&=-33,l===null){if(fn){if(w?_a(c):Cs(),fn){var et=Yi,pt;(pt=et)&&(et=_y(et,Li),et!==null?(c.memoizedState={dehydrated:et,treeContext:Do!==null?{id:Vs,overflow:Hs}:null,retryLane:536870912},pt=e(18,null,null,0),pt.stateNode=et,pt.return=c,c.child=pt,ji=c,Yi=null,pt=!0):pt=!1),pt||Zt(c)}if(et=c.memoizedState,et!==null&&(et=et.dehydrated,et!==null))return dh(et)?c.lanes=16:c.lanes=536870912,null;sa(c)}return et=S.children,S=S.fallback,w?(Cs(),w=c.mode,et=kd({mode:"hidden",children:et},w),S=$n(S,w,g,null),et.return=c,S.return=c,et.sibling=S,c.child=et,w=c.child,w.memoizedState=qd(g),w.childLanes=fc(l,k,g),c.memoizedState=Rh,S):(_a(c),Xd(c,et))}if(pt=l.memoizedState,pt!==null&&(et=pt.dehydrated,et!==null)){if(U)c.flags&256?(_a(c),c.flags&=-257,c=Ff(l,c,g)):c.memoizedState!==null?(Cs(),c.child=l.child,c.flags|=128,c=null):(Cs(),w=S.fallback,et=c.mode,S=kd({mode:"visible",children:S.children},et),w=$n(w,et,g,null),w.flags|=2,S.return=c,w.return=c,S.sibling=w,c.child=S,Lo(c,l.child,null,g),S=c.child,S.memoizedState=qd(g),S.childLanes=fc(l,k,g),c.memoizedState=Rh,c=w);else if(_a(c),dh(et))k=py(et).digest,S=Error(a(419)),S.stack="",S.digest=k,ze({value:S,source:null,stack:null}),c=Ff(l,c,g);else if(zn||dc(l,c,g,!1),k=(g&l.childLanes)!==0,zn||k){if(k=En,k!==null){if(S=g&-g,(S&42)!==0)S=1;else switch(S){case 2:S=1;break;case 8:S=4;break;case 32:S=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:S=64;break;case 268435456:S=134217728;break;default:S=0}if(S=(S&(k.suspendedLanes|g))!==0?0:S,S!==0&&S!==pt.retryLane)throw pt.retryLane=S,Ut(l,S),Ui(k,l,S),Ah}hh(et)||Lr(),c=Ff(l,c,g)}else hh(et)?(c.flags|=128,c.child=l.child,c=Pr.bind(null,l),my(et,c),c=null):(l=pt.treeContext,ki&&(Yi=vy(et),ji=c,fn=!0,ms=null,Li=!1,l!==null&&(qa[Xa++]=Vs,qa[Xa++]=Hs,qa[Xa++]=Do,Vs=l.id,Hs=l.overflow,Do=c)),c=Xd(c,S.children),c.flags|=4096);return c}return w?(Cs(),w=S.fallback,et=c.mode,pt=l.child,U=pt.sibling,S=cs(pt,{mode:"hidden",children:S.children}),S.subtreeFlags=pt.subtreeFlags&31457280,U!==null?w=cs(U,w):(w=$n(w,et,g,null),w.flags|=2),w.return=c,S.return=c,S.sibling=w,c.child=S,S=w,w=c.child,et=l.child.memoizedState,et===null?et=qd(g):(pt=et.cachePool,pt!==null?(U=ca?Fn._currentValue:Fn._currentValue2,pt=pt.parent!==U?{parent:U,pool:U}:pt):pt=Kd(),et={baseLanes:et.baseLanes|g,cachePool:pt}),w.memoizedState=et,w.childLanes=fc(l,k,g),c.memoizedState=Rh,S):(_a(c),g=l.child,l=g.sibling,g=cs(g,{mode:"visible",children:S.children}),g.return=c,g.sibling=null,l!==null&&(k=c.deletions,k===null?(c.deletions=[l],c.flags|=16):k.push(l)),c.child=g,c.memoizedState=null,g)}function Xd(l,c){return c=kd({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function kd(l,c){return wc(l,c,0,null)}function Ff(l,c,g){return Lo(c,l.child,null,g),l=Xd(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function Bg(l,c,g){l.lanes|=c;var S=l.alternate;S!==null&&(S.lanes|=c),hc(l.return,c,g)}function jd(l,c,g,S,w){var U=l.memoizedState;U===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:w}:(U.isBackwards=c,U.rendering=null,U.renderingStartTime=0,U.last=S,U.tail=g,U.tailMode=w)}function Ig(l,c,g){var S=c.pendingProps,w=S.revealOrder,U=S.tail;if(Hi(l,c,S.children,g),S=Ti.current,(S&2)!==0)S=S&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)t:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Bg(l,g,c);else if(l.tag===19)Bg(l,g,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break t;for(;l.sibling===null;){if(l.return===null||l.return===c)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}S&=1}switch(C(Ti,S),w){case"forwards":for(g=c.child,w=null;g!==null;)l=g.alternate,l!==null&&Ds(l)===null&&(w=g),g=g.sibling;g=w,g===null?(w=c.child,c.child=null):(w=g.sibling,g.sibling=null),jd(c,!1,w,g,U);break;case"backwards":for(g=null,w=c.child,c.child=null;w!==null;){if(l=w.alternate,l!==null&&Ds(l)===null){c.child=w;break}l=w.sibling,w.sibling=g,g=w,w=l}jd(c,!0,g,null,U);break;case"together":jd(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Rr(l,c,g){if(l!==null&&(c.dependencies=l.dependencies),Qa|=c.lanes,(g&c.childLanes)===0)if(l!==null){if(dc(l,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(a(153));if(c.child!==null){for(l=c.child,g=cs(l,l.pendingProps),c.child=g,g.return=c;l.sibling!==null;)l=l.sibling,g=g.sibling=cs(l,l.pendingProps),g.return=c;g.sibling=null}return c.child}function Yd(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&pc(l)))}function Q_(l,c,g){switch(c.tag){case 3:st(c,c.stateNode.containerInfo),co(c,Fn,l.memoizedState.cache),an();break;case 27:case 5:Bt(c);break;case 4:st(c,c.stateNode.containerInfo);break;case 10:co(c,c.type,c.memoizedProps.value);break;case 13:var S=c.memoizedState;if(S!==null)return S.dehydrated!==null?(_a(c),c.flags|=128,null):(g&c.child.childLanes)!==0?zg(l,c,g):(_a(c),l=Rr(l,c,g),l!==null?l.sibling:null);_a(c);break;case 19:var w=(l.flags&128)!==0;if(S=(g&c.childLanes)!==0,S||(dc(l,c,g,!1),S=(g&c.childLanes)!==0),w){if(S)return Ig(l,c,g);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),C(Ti,Ti.current),S)break;return null;case 22:case 23:return c.lanes=0,Og(l,c,g);case 24:co(c,Fn,l.memoizedState.cache)}return Rr(l,c,g)}function Vg(l,c,g){if(l!==null)if(l.memoizedProps!==c.pendingProps)zn=!0;else{if(!Yd(l,g)&&(c.flags&128)===0)return zn=!1,Q_(l,c,g);zn=(l.flags&131072)!==0}else zn=!1,fn&&(c.flags&1048576)!==0&&$(c,vu,c.index);switch(c.lanes=0,c.tag){case 16:t:{l=c.pendingProps;var S=c.elementType,w=S._init;if(S=w(S._payload),c.type=S,typeof S=="function")Ac(S)?(l=Ar(S,l),c.tag=1,c=Lg(null,c,S,l,g)):(c.tag=0,c=Hf(null,c,S,l,g));else{if(S!=null){if(w=S.$$typeof,w===Nc){c.tag=11,c=Vf(null,c,S,l,g);break t}else if(w===rh){c.tag=14,c=Cg(null,c,S,l,g);break t}}throw c=u(S)||S,Error(a(306,c,""))}}return c;case 0:return Hf(l,c,c.type,c.pendingProps,g);case 1:return S=c.type,w=Ar(S,c.pendingProps),Lg(l,c,S,w,g);case 3:t:{if(st(c,c.stateNode.containerInfo),l===null)throw Error(a(387));var U=c.pendingProps;w=c.memoizedState,S=w.element,ue(l,c),gn(c,U,null,g);var k=c.memoizedState;if(U=k.cache,co(c,Fn,U),U!==w.cache&&el(c,[Fn],g,!0),Te(),U=k.element,ki&&w.isDehydrated)if(w={element:U,isDehydrated:!1,cache:k.cache},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){c=Pg(l,c,U,g);break t}else if(U!==S){S=J(Error(a(424)),c),ze(S),c=Pg(l,c,U,g);break t}else for(ki&&(Yi=yy(c.stateNode.containerInfo),ji=c,fn=!0,ms=null,Li=!0),g=cr(c,null,U,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(an(),U===S){c=Rr(l,c,g);break t}Hi(l,c,U,g)}c=c.child}return c;case 26:if(Ga)return cc(l,c),l===null?(g=Np(c.type,null,c.pendingProps,null))?c.memoizedState=g:fn||(c.stateNode=vh(c.type,c.pendingProps,lr.current,c)):c.memoizedState=Np(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:if(Ln)return Bt(c),l===null&&Ln&&fn&&(S=c.stateNode=Is(c.type,c.pendingProps,lr.current,Ei.current,!1),ji=c,Li=!0,Yi=ph(S)),S=c.pendingProps.children,l!==null||fn?Hi(l,c,S,g):c.child=Lo(c,null,S,g),cc(l,c),c.child;case 5:return l===null&&fn&&(gh(c.type,c.pendingProps,Ei.current),(w=S=Yi)&&(S=ax(S,c.type,c.pendingProps,Li),S!==null?(c.stateNode=S,ji=c,Yi=ph(S),Li=!1,w=!0):w=!1),w||Zt(c)),Bt(c),w=c.type,U=c.pendingProps,k=l!==null?l.memoizedProps:null,S=U.children,He(w,U)?S=null:k!==null&&He(w,k)&&(c.flags|=32),c.memoizedState!==null&&(w=Us(l,c,hi,null,null,g),ca?Bs._currentValue=w:Bs._currentValue2=w),cc(l,c),Hi(l,c,S,g),c.child;case 6:return l===null&&fn&&(Ey(c.pendingProps,Ei.current),(l=g=Yi)&&(g=Op(g,c.pendingProps,Li),g!==null?(c.stateNode=g,ji=c,Yi=null,l=!0):l=!1),l||Zt(c)),null;case 13:return zg(l,c,g);case 4:return st(c,c.stateNode.containerInfo),S=c.pendingProps,l===null?c.child=Lo(c,null,S,g):Hi(l,c,S,g),c.child;case 11:return Vf(l,c,c.type,c.pendingProps,g);case 7:return Hi(l,c,c.pendingProps,g),c.child;case 8:return Hi(l,c,c.pendingProps.children,g),c.child;case 12:return Hi(l,c,c.pendingProps.children,g),c.child;case 10:return S=c.pendingProps,co(c,c.type,S.value),Hi(l,c,S.children,g),c.child;case 9:return w=c.type._context,S=c.pendingProps.children,fo(c),w=Fi(w),S=S(w),c.flags|=1,Hi(l,c,S,g),c.child;case 14:return Cg(l,c,c.type,c.pendingProps,g);case 15:return Dg(l,c,c.type,c.pendingProps,g);case 19:return Ig(l,c,g);case 22:return Og(l,c,g);case 24:return fo(c),S=Fi(Fn),l===null?(w=Zd(),w===null&&(w=En,U=ho(),w.pooledCache=U,U.refCount++,U!==null&&(w.pooledCacheLanes|=g),w=U),c.memoizedState={parent:S,cache:w},kt(c),co(c,Fn,w)):((l.lanes&g)!==0&&(ue(l,c),gn(c,null,null,g),Te()),w=l.memoizedState,U=c.memoizedState,w.parent!==S?(w={parent:S,cache:S},c.memoizedState=w,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=w),co(c,Fn,S)):(S=U.cache,co(c,Fn,S),S!==w.cache&&el(c,[Fn],g,!0))),Hi(l,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(a(156,c.tag))}function co(l,c,g){ca?(C(jr,c._currentValue),c._currentValue=g):(C(jr,c._currentValue2),c._currentValue2=g)}function wr(l){var c=jr.current;ca?l._currentValue=c:l._currentValue2=c,M(jr)}function hc(l,c,g){for(;l!==null;){var S=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,S!==null&&(S.childLanes|=c)):S!==null&&(S.childLanes&c)!==c&&(S.childLanes|=c),l===g)break;l=l.return}}function el(l,c,g,S){var w=l.child;for(w!==null&&(w.return=l);w!==null;){var U=w.dependencies;if(U!==null){var k=w.child;U=U.firstContext;t:for(;U!==null;){var et=U;U=w;for(var pt=0;pt<c.length;pt++)if(et.context===c[pt]){U.lanes|=g,et=U.alternate,et!==null&&(et.lanes|=g),hc(U.return,g,l),S||(k=null);break t}U=et.next}}else if(w.tag===18){if(k=w.return,k===null)throw Error(a(341));k.lanes|=g,U=k.alternate,U!==null&&(U.lanes|=g),hc(k,g,l),k=null}else k=w.child;if(k!==null)k.return=w;else for(k=w;k!==null;){if(k===l){k=null;break}if(w=k.sibling,w!==null){w.return=k.return,k=w;break}k=k.return}w=k}}function dc(l,c,g,S){l=null;for(var w=c,U=!1;w!==null;){if(!U){if((w.flags&524288)!==0)U=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var k=w.alternate;if(k===null)throw Error(a(387));if(k=k.memoizedProps,k!==null){var et=w.type;Ra(w.pendingProps.value,k.value)||(l!==null?l.push(et):l=[et])}}else if(w===fl.current){if(k=w.alternate,k===null)throw Error(a(387));k.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(l!==null?l.push(Bs):l=[Bs])}w=w.return}l!==null&&el(c,l,g,S),c.flags|=262144}function pc(l){for(l=l.firstContext;l!==null;){var c=l.context;if(!Ra(ca?c._currentValue:c._currentValue2,l.memoizedValue))return!0;l=l.next}return!1}function fo(l){qs=l,Wa=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Fi(l){return Wd(qs,l)}function mc(l,c){return qs===null&&fo(l),Wd(l,c)}function Wd(l,c){var g=ca?c._currentValue:c._currentValue2;if(c={context:c,memoizedValue:g,next:null},Wa===null){if(l===null)throw Error(a(308));Wa=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else Wa=Wa.next=c;return g}function ho(){return{controller:new Eu,data:new Map,refCount:0}}function gc(l){l.refCount--,l.refCount===0&&Py(zy,function(){l.controller.abort()})}function Zd(){var l=hr.current;return l!==null?l:En.pooledCache}function Gf(l,c){c===null?C(hr,hr.current):C(hr,c.pool)}function Kd(){var l=Zd();return l===null?null:{parent:ca?Fn._currentValue:Fn._currentValue2,pool:l}}function xa(l){l.flags|=4}function Jl(l,c){if(l!==null&&l.child===c.child)return!1;if((c.flags&16)!==0)return!0;for(l=c.child;l!==null;){if((l.flags&13878)!==0||(l.subtreeFlags&13878)!==0)return!0;l=l.sibling}return!1}function nl(l,c,g,S){if(Mi)for(g=c.child;g!==null;){if(g.tag===5||g.tag===6)Pc(l,g.stateNode);else if(!(g.tag===4||Ln&&g.tag===27)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else if(ds)for(var w=c.child;w!==null;){if(w.tag===5){var U=w.stateNode;g&&S&&(U=Rp(U,w.type,w.memoizedProps)),Pc(l,U)}else if(w.tag===6)U=w.stateNode,g&&S&&(U=wp(U,w.memoizedProps)),Pc(l,U);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)U=w.child,U!==null&&(U.return=w),nl(l,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===c)break;for(;w.sibling===null;){if(w.return===null||w.return===c)return;w=w.return}w.sibling.return=w.return,w=w.sibling}}function Hg(l,c,g,S){if(ds)for(var w=c.child;w!==null;){if(w.tag===5){var U=w.stateNode;g&&S&&(U=Rp(U,w.type,w.memoizedProps)),Ap(l,U)}else if(w.tag===6)U=w.stateNode,g&&S&&(U=wp(U,w.memoizedProps)),Ap(l,U);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)U=w.child,U!==null&&(U.return=w),Hg(l,w,!(w.memoizedProps!==null&&w.memoizedProps.mode==="manual"),!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===c)break;for(;w.sibling===null;){if(w.return===null||w.return===c)return;w=w.return}w.sibling.return=w.return,w=w.sibling}}function yc(l,c){if(ds&&Jl(l,c)){l=c.stateNode;var g=l.containerInfo,S=zc();Hg(S,c,!1,!1),l.pendingChildren=S,xa(c),fh(g,S)}}function qf(l,c,g,S){if(Mi)l.memoizedProps!==S&&xa(c);else if(ds){var w=l.stateNode,U=l.memoizedProps;if((l=Jl(l,c))||U!==S){var k=Ei.current;U=mu(w,g,U,S,!l,null),U===w?c.stateNode=w:(Vr(U,g,S,k)&&xa(c),c.stateNode=U,l?nl(U,c,!1,!1):xa(c))}else c.stateNode=w}}function Xf(l,c,g){if(vp(c,g)){if(l.flags|=16777216,!uh(c,g))if(_o())l.flags|=8192;else throw Oo=kc,Xc}else l.flags&=-16777217}function kf(l,c){if(Ry(c)){if(l.flags|=16777216,!rl(c))if(_o())l.flags|=8192;else throw Oo=kc,Xc}else l.flags&=-16777217}function $l(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?B():536870912,l.lanes|=c,mr|=c)}function tu(l,c){if(!fn)switch(l.tailMode){case"hidden":c=l.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function Wn(l){var c=l.alternate!==null&&l.alternate.child===l.child,g=0,S=0;if(c)for(var w=l.child;w!==null;)g|=w.lanes|w.childLanes,S|=w.subtreeFlags&31457280,S|=w.flags&31457280,w.return=l,w=w.sibling;else for(w=l.child;w!==null;)g|=w.lanes|w.childLanes,S|=w.subtreeFlags,S|=w.flags,w.return=l,w=w.sibling;return l.subtreeFlags|=S,l.childLanes=g,c}function Fg(l,c,g){var S=c.pendingProps;switch(Tt(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wn(c),null;case 1:return Wn(c),null;case 3:return g=c.stateNode,S=null,l!==null&&(S=l.memoizedState.cache),c.memoizedState.cache!==S&&(c.flags|=2048),wr(Fn),Et(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(ke(c)?xa(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ms!==null&&(Ec(ms),ms=null))),yc(l,c),Wn(c),null;case 26:if(Ga){g=c.type;var w=c.memoizedState;return l===null?(xa(c),w!==null?(Wn(c),kf(c,w)):(Wn(c),Xf(c,g,S))):w?w!==l.memoizedState?(xa(c),Wn(c),kf(c,w)):(Wn(c),c.flags&=-16777217):(Mi?l.memoizedProps!==S&&xa(c):qf(l,c,g,S),Wn(c),Xf(c,g,S)),null}case 27:if(Ln){if(Xt(c),g=lr.current,w=c.type,l!==null&&c.stateNode!=null)Mi?l.memoizedProps!==S&&xa(c):qf(l,c,w,S);else{if(!S){if(c.stateNode===null)throw Error(a(166));return Wn(c),null}l=Ei.current,ke(c)?Me(c,l):(l=Is(w,S,g,l,!0),c.stateNode=l,xa(c))}return Wn(c),null}case 5:if(Xt(c),g=c.type,l!==null&&c.stateNode!=null)qf(l,c,g,S);else{if(!S){if(c.stateNode===null)throw Error(a(166));return Wn(c),null}l=Ei.current,ke(c)?Me(c,l):(w=yp(g,S,lr.current,l,c),nl(w,c,!1,!1),c.stateNode=w,Vr(w,g,S,l)&&xa(c))}return Wn(c),Xf(c,c.type,c.pendingProps),null;case 6:if(l&&c.stateNode!=null)g=l.memoizedProps,Mi?g!==S&&xa(c):ds&&(g!==S?(c.stateNode=Rn(S,lr.current,Ei.current,c),xa(c)):c.stateNode=l.stateNode);else{if(typeof S!="string"&&c.stateNode===null)throw Error(a(166));if(l=lr.current,g=Ei.current,ke(c)){if(!ki)throw Error(a(176));if(l=c.stateNode,g=c.memoizedProps,S=null,w=ji,w!==null)switch(w.tag){case 27:case 5:S=w.memoizedProps}Up(l,g,c,S)||Zt(c)}else c.stateNode=Rn(S,l,g,c)}return Wn(c),null;case 13:if(S=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(w=ke(c),S!==null&&S.dehydrated!==null){if(l===null){if(!w)throw Error(a(318));if(!ki)throw Error(a(344));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(a(317));Sy(w,c)}else an(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Wn(c),w=!1}else ms!==null&&(Ec(ms),ms=null),w=!0;if(!w)return c.flags&256?(sa(c),c):(sa(c),null)}if(sa(c),(c.flags&128)!==0)return c.lanes=g,c;if(g=S!==null,l=l!==null&&l.memoizedState!==null,g){S=c.child,w=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(w=S.alternate.memoizedState.cachePool.pool);var U=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(U=S.memoizedState.cachePool.pool),U!==w&&(S.flags|=2048)}return g!==l&&g&&(c.child.flags|=8192),$l(c,c.updateQueue),Wn(c),null;case 4:return Et(),yc(l,c),l===null&&ai(c.stateNode.containerInfo),Wn(c),null;case 10:return wr(c.type),Wn(c),null;case 19:if(M(Ti),w=c.memoizedState,w===null)return Wn(c),null;if(S=(c.flags&128)!==0,U=w.rendering,U===null)if(S)tu(w,!1);else{if(Bn!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(U=Ds(l),U!==null){for(c.flags|=128,tu(w,!1),l=U.updateQueue,c.updateQueue=l,$l(c,l),c.subtreeFlags=0,l=g,g=c.child;g!==null;)Rc(g,l),g=g.sibling;return C(Ti,Ti.current&1|2),c.child}l=l.sibling}w.tail!==null&&ps()>Ru&&(c.flags|=128,S=!0,tu(w,!1),c.lanes=4194304)}else{if(!S)if(l=Ds(U),l!==null){if(c.flags|=128,S=!0,l=l.updateQueue,c.updateQueue=l,$l(c,l),tu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!U.alternate&&!fn)return Wn(c),null}else 2*ps()-w.renderingStartTime>Ru&&g!==536870912&&(c.flags|=128,S=!0,tu(w,!1),c.lanes=4194304);w.isBackwards?(U.sibling=c.child,c.child=U):(l=w.last,l!==null?l.sibling=U:c.child=U,w.last=U)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=ps(),c.sibling=null,l=Ti.current,C(Ti,S?l&1|2:l&1),c):(Wn(c),null);case 22:case 23:return sa(c),Qi(),S=c.memoizedState!==null,l!==null?l.memoizedState!==null!==S&&(c.flags|=8192):S&&(c.flags|=8192),S?(g&536870912)!==0&&(c.flags&128)===0&&(Wn(c),c.subtreeFlags&6&&(c.flags|=8192)):Wn(c),g=c.updateQueue,g!==null&&$l(c,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),S=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(S=c.memoizedState.cachePool.pool),S!==g&&(c.flags|=2048),l!==null&&M(hr),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),wr(Fn),Wn(c),null;case 25:return null}throw Error(a(156,c.tag))}function J_(l,c){switch(Tt(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return wr(Fn),Et(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return Xt(c),null;case 13:if(sa(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(a(340));an()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return M(Ti),null;case 4:return Et(),null;case 10:return wr(c.type),null;case 22:case 23:return sa(c),Qi(),l!==null&&M(hr),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return wr(Fn),null;case 25:return null;default:return null}}function Gg(l,c){switch(Tt(c),c.tag){case 3:wr(Fn),Et();break;case 26:case 27:case 5:Xt(c);break;case 4:Et();break;case 13:sa(c);break;case 19:M(Ti);break;case 10:wr(c.type);break;case 22:case 23:sa(c),Qi(),l!==null&&M(hr);break;case 24:wr(Fn)}}function vc(l,c){try{var g=c.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var w=S.next;g=w;do{if((g.tag&l)===l){S=void 0;var U=g.create,k=g.inst;S=U(),k.destroy=S}g=g.next}while(g!==w)}}catch(et){bn(c,c.return,et)}}function po(l,c,g){try{var S=c.updateQueue,w=S!==null?S.lastEffect:null;if(w!==null){var U=w.next;S=U;do{if((S.tag&l)===l){var k=S.inst,et=k.destroy;if(et!==void 0){k.destroy=void 0,w=c;var pt=g;try{et()}catch(Pt){bn(w,pt,Pt)}}}S=S.next}while(S!==U)}}catch(Pt){bn(c,c.return,Pt)}}function qg(l){var c=l.updateQueue;if(c!==null){var g=l.stateNode;try{ne(c,g)}catch(S){bn(l,l.return,S)}}}function Sa(l,c,g){g.props=Ar(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(S){bn(l,c,S)}}function Ls(l,c){try{var g=l.ref;if(g!==null){var S=l.stateNode;switch(l.tag){case 26:case 27:case 5:var w=hu(S);break;default:w=S}typeof g=="function"?l.refCleanup=g(w):g.current=w}}catch(U){bn(l,c,U)}}function ba(l,c){var g=l.ref,S=l.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(w){bn(l,c,w)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(w){bn(l,c,w)}else g.current=null}function Qd(l){var c=l.type,g=l.memoizedProps,S=l.stateNode;try{nx(S,c,g,l)}catch(w){bn(l,l.return,w)}}function Jd(l,c,g){try{ry(l.stateNode,l.type,g,c,l)}catch(S){bn(l,l.return,S)}}function $d(l){return l.tag===5||l.tag===3||(Ga?l.tag===26:!1)||(Ln?l.tag===27:!1)||l.tag===4}function _c(l){t:for(;;){for(;l.sibling===null;){if(l.return===null||$d(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&(!Ln||l.tag!==27)&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue t;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function tp(l,c,g){var S=l.tag;if(S===5||S===6)l=l.stateNode,c?ly(g,l,c):Mp(g,l);else if(!(S===4||Ln&&S===27)&&(l=l.child,l!==null))for(tp(l,c,g),l=l.sibling;l!==null;)tp(l,c,g),l=l.sibling}function Cr(l,c,g){var S=l.tag;if(S===5||S===6)l=l.stateNode,c?oy(g,l,c):ay(g,l);else if(!(S===4||Ln&&S===27)&&(l=l.child,l!==null))for(Cr(l,c,g),l=l.sibling;l!==null;)Cr(l,c,g),l=l.sibling}function jf(l,c,g){l=l.containerInfo;try{gu(l,g)}catch(S){bn(c,c.return,S)}}function xc(l,c){for(oh(l.containerInfo),Be=c;Be!==null;)if(l=Be,c=l.child,(l.subtreeFlags&1028)!==0&&c!==null)c.return=l,Be=c;else for(;Be!==null;){l=Be;var g=l.alternate;switch(c=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&g!==null){c=void 0;var S=l,w=g.memoizedProps;g=g.memoizedState;var U=S.stateNode;try{var k=Ar(S.type,w,S.elementType===S.type);c=U.getSnapshotBeforeUpdate(k,g),U.__reactInternalSnapshotBeforeUpdate=c}catch(et){bn(S,S.return,et)}}break;case 3:(c&1024)!==0&&Mi&&dy(l.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(a(163))}if(c=l.sibling,c!==null){c.return=l.return,Be=c;break}Be=l.return}return k=tn,tn=!1,k}function Yf(l,c,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:Or(l,g),S&4&&vc(5,g);break;case 1:if(Or(l,g),S&4)if(l=g.stateNode,c===null)try{l.componentDidMount()}catch(et){bn(g,g.return,et)}else{var w=Ar(g.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(w,c,l.__reactInternalSnapshotBeforeUpdate)}catch(et){bn(g,g.return,et)}}S&64&&qg(g),S&512&&Ls(g,g.return);break;case 3:if(Or(l,g),S&64&&(S=g.updateQueue,S!==null)){if(l=null,g.child!==null)switch(g.child.tag){case 27:case 5:l=hu(g.child.stateNode);break;case 1:l=g.child.stateNode}try{ne(S,l)}catch(et){bn(g,g.return,et)}}break;case 26:if(Ga){Or(l,g),S&512&&Ls(g,g.return);break}case 27:case 5:Or(l,g),c===null&&S&4&&Qd(g),S&512&&Ls(g,g.return);break;case 12:Or(l,g);break;case 13:Or(l,g),S&4&&Wf(l,g);break;case 22:if(w=g.memoizedState!==null||dr,!w){c=c!==null&&c.memoizedState!==null||ei;var U=dr,k=ei;dr=w,(ei=c)&&!k?Ur(l,g,(g.subtreeFlags&8772)!==0):Or(l,g),dr=U,ei=k}S&512&&(g.memoizedProps.mode==="manual"?Ls(g,g.return):ba(g,g.return));break;default:Or(l,g)}}function ep(l){var c=l.alternate;c!==null&&(l.alternate=null,ep(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&ex(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Gi(l,c,g){for(g=g.child;g!==null;)mo(l,c,g),g=g.sibling}function mo(l,c,g){if(Aa&&typeof Aa.onCommitFiberUnmount=="function")try{Aa.onCommitFiberUnmount(ri,g)}catch{}switch(g.tag){case 26:if(Ga){ei||ba(g,c),Gi(l,c,g),g.memoizedState?sl(g.memoizedState):g.stateNode&&yu(g.stateNode);break}case 27:if(Ln){ei||ba(g,c);var S=be,w=qe;be=g.stateNode,Gi(l,c,g),wo(g.stateNode),be=S,qe=w;break}case 5:ei||ba(g,c);case 6:if(Mi){if(S=be,w=qe,be=null,Gi(l,c,g),be=S,qe=w,be!==null)if(qe)try{uy(be,g.stateNode)}catch(U){bn(g,c,U)}else try{Ep(be,g.stateNode)}catch(U){bn(g,c,U)}}else Gi(l,c,g);break;case 18:Mi&&be!==null&&(qe?Bc(be,g.stateNode):My(be,g.stateNode));break;case 4:Mi?(S=be,w=qe,be=g.stateNode.containerInfo,qe=!0,Gi(l,c,g),be=S,qe=w):(ds&&jf(g.stateNode,g,zc()),Gi(l,c,g));break;case 0:case 11:case 14:case 15:ei||po(2,g,c),ei||po(4,g,c),Gi(l,c,g);break;case 1:ei||(ba(g,c),S=g.stateNode,typeof S.componentWillUnmount=="function"&&Sa(g,c,S)),Gi(l,c,g);break;case 21:Gi(l,c,g);break;case 22:ei||ba(g,c),ei=(S=ei)||g.memoizedState!==null,Gi(l,c,g),ei=S;break;default:Gi(l,c,g)}}function Wf(l,c){if(ki&&c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{rx(l)}catch(g){bn(c,c.return,g)}}function Xg(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new Mn),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new Mn),c;default:throw Error(a(435,l.tag))}}function Dr(l,c){var g=Xg(l);c.forEach(function(S){var w=bo.bind(null,l,S);g.has(S)||(g.add(S),S.then(w,w))})}function la(l,c){var g=c.deletions;if(g!==null)for(var S=0;S<g.length;S++){var w=g[S],U=l,k=c;if(Mi){var et=k;t:for(;et!==null;){switch(et.tag){case 27:case 5:be=et.stateNode,qe=!1;break t;case 3:be=et.stateNode.containerInfo,qe=!0;break t;case 4:be=et.stateNode.containerInfo,qe=!0;break t}et=et.return}if(be===null)throw Error(a(160));mo(U,k,w),be=null,qe=!1}else mo(U,k,w);U=w.alternate,U!==null&&(U.return=null),w.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)np(c,l),c=c.sibling}function np(l,c){var g=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:la(c,l),Ma(l),S&4&&(po(3,l,l.return),vc(3,l),po(5,l,l.return));break;case 1:la(c,l),Ma(l),S&512&&(ei||g===null||ba(g,g.return)),S&64&&dr&&(l=l.updateQueue,l!==null&&(S=l.callbacks,S!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:if(Ga){var w=Jn;la(c,l),Ma(l),S&512&&(ei||g===null||ba(g,g.return)),S&4&&(S=g!==null?g.memoizedState:null,c=l.memoizedState,g===null?c===null?l.stateNode===null?l.stateNode=Vc(w,l.type,l.memoizedProps,l):Hc(w,l.type,l.stateNode):l.stateNode=Ty(w,c,l.memoizedProps):S!==c?(S===null?g.stateNode!==null&&yu(g.stateNode):sl(S),c===null?Hc(w,l.type,l.stateNode):Ty(w,c,l.memoizedProps)):c===null&&l.stateNode!==null&&Jd(l,l.memoizedProps,g.memoizedProps));break}case 27:if(Ln&&S&4&&l.alternate===null){w=l.stateNode;var U=l.memoizedProps;try{Ro(w),Cy(l.type,U,w,l)}catch(Wt){bn(l,l.return,Wt)}}case 5:if(la(c,l),Ma(l),S&512&&(ei||g===null||ba(g,g.return)),Mi){if(l.flags&32){c=l.stateNode;try{Tp(c)}catch(Wt){bn(l,l.return,Wt)}}S&4&&l.stateNode!=null&&(c=l.memoizedProps,Jd(l,c,g!==null?g.memoizedProps:c)),S&1024&&(Bp=!0)}break;case 6:if(la(c,l),Ma(l),S&4&&Mi){if(l.stateNode===null)throw Error(a(162));S=l.memoizedProps,g=g!==null?g.memoizedProps:S,c=l.stateNode;try{sy(c,g,S)}catch(Wt){bn(l,l.return,Wt)}}break;case 3:if(Ga?(Ay(),w=Jn,Jn=yh(c.containerInfo),la(c,l),Jn=w):la(c,l),Ma(l),S&4){if(Mi&&ki&&g!==null&&g.memoizedState.isDehydrated)try{sx(c.containerInfo)}catch(Wt){bn(l,l.return,Wt)}if(ds){S=c.containerInfo,g=c.pendingChildren;try{gu(S,g)}catch(Wt){bn(l,l.return,Wt)}}}Bp&&(Bp=!1,kg(l));break;case 4:Ga?(g=Jn,Jn=yh(l.stateNode.containerInfo),la(c,l),Ma(l),Jn=g):(la(c,l),Ma(l)),S&4&&ds&&jf(l.stateNode,l,l.stateNode.pendingChildren);break;case 12:la(c,l),Ma(l);break;case 13:la(c,l),Ma(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(pa=ps()),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Dr(l,S)));break;case 22:S&512&&(ei||g===null||ba(g,g.return)),w=l.memoizedState!==null;var k=g!==null&&g.memoizedState!==null,et=dr,pt=ei;if(dr=et||w,ei=pt||k,la(c,l),ei=pt,dr=et,Ma(l),c=l.stateNode,c._current=l,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,S&8192&&(c._visibility=w?c._visibility&-2:c._visibility|1,w&&(c=dr||ei,g===null||k||c||eu(l)),Mi&&(l.memoizedProps===null||l.memoizedProps.mode!=="manual"))){t:if(g=null,Mi)for(c=l;;){if(c.tag===5||Ga&&c.tag===26||Ln&&c.tag===27){if(g===null){k=g=c;try{U=k.stateNode,w?cy(U):hy(k.stateNode,k.memoizedProps)}catch(Wt){bn(k,k.return,Wt)}}}else if(c.tag===6){if(g===null){k=c;try{var Pt=k.stateNode;w?fy(Pt):ix(Pt,k.memoizedProps)}catch(Wt){bn(k,k.return,Wt)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break t;for(;c.sibling===null;){if(c.return===null||c.return===l)break t;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}}S&4&&(S=l.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,Dr(l,g))));break;case 19:la(c,l),Ma(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Dr(l,S)));break;case 21:break;default:la(c,l),Ma(l)}}function Ma(l){var c=l.flags;if(c&2){try{if(Mi&&(!Ln||l.tag!==27)){t:{for(var g=l.return;g!==null;){if($d(g)){var S=g;break t}g=g.return}throw Error(a(160))}switch(S.tag){case 27:if(Ln){var w=S.stateNode,U=_c(l);Cr(l,U,w);break}case 5:var k=S.stateNode;S.flags&32&&(Tp(k),S.flags&=-33);var et=_c(l);Cr(l,et,k);break;case 3:case 4:var pt=S.stateNode.containerInfo,Pt=_c(l);tp(l,Pt,pt);break;default:throw Error(a(161))}}}catch(Wt){bn(l,l.return,Wt)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function kg(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;kg(c),c.tag===5&&c.flags&1024&&ch(c.stateNode),l=l.sibling}}function Or(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Yf(l,c.alternate,c),c=c.sibling}function eu(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:po(4,c,c.return),eu(c);break;case 1:ba(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&Sa(c,c.return,g),eu(c);break;case 26:case 27:case 5:ba(c,c.return),eu(c);break;case 22:ba(c,c.return),c.memoizedState===null&&eu(c);break;default:eu(c)}l=l.sibling}}function Ur(l,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var S=c.alternate,w=l,U=c,k=U.flags;switch(U.tag){case 0:case 11:case 15:Ur(w,U,g),vc(4,U);break;case 1:if(Ur(w,U,g),S=U,w=S.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(Pt){bn(S,S.return,Pt)}if(S=U,w=S.updateQueue,w!==null){var et=S.stateNode;try{var pt=w.shared.hiddenCallbacks;if(pt!==null)for(w.shared.hiddenCallbacks=null,w=0;w<pt.length;w++)ct(pt[w],et)}catch(Pt){bn(S,S.return,Pt)}}g&&k&64&&qg(U),Ls(U,U.return);break;case 26:case 27:case 5:Ur(w,U,g),g&&S===null&&k&4&&Qd(U),Ls(U,U.return);break;case 12:Ur(w,U,g);break;case 13:Ur(w,U,g),g&&k&4&&Wf(w,U);break;case 22:U.memoizedState===null&&Ur(w,U,g),Ls(U,U.return);break;default:Ur(w,U,g)}c=c.sibling}}function Zf(l,c){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&gc(g))}function Sc(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&gc(l))}function Oi(l,c,g,S){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)ip(l,c,g,S),c=c.sibling}function ip(l,c,g,S){var w=c.flags;switch(c.tag){case 0:case 11:case 15:Oi(l,c,g,S),w&2048&&vc(9,c);break;case 3:Oi(l,c,g,S),w&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&gc(l)));break;case 12:if(w&2048){Oi(l,c,g,S),l=c.stateNode;try{var U=c.memoizedProps,k=U.id,et=U.onPostCommit;typeof et=="function"&&et(k,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(pt){bn(c,c.return,pt)}}else Oi(l,c,g,S);break;case 23:break;case 22:U=c.stateNode,c.memoizedState!==null?U._visibility&4?Oi(l,c,g,S):Ji(l,c):U._visibility&4?Oi(l,c,g,S):(U._visibility|=4,qi(l,c,g,S,(c.subtreeFlags&10256)!==0)),w&2048&&Zf(c.alternate,c);break;case 24:Oi(l,c,g,S),w&2048&&Sc(c.alternate,c);break;default:Oi(l,c,g,S)}}function qi(l,c,g,S,w){for(w=w&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var U=l,k=c,et=g,pt=S,Pt=k.flags;switch(k.tag){case 0:case 11:case 15:qi(U,k,et,pt,w),vc(8,k);break;case 23:break;case 22:var Wt=k.stateNode;k.memoizedState!==null?Wt._visibility&4?qi(U,k,et,pt,w):Ji(U,k):(Wt._visibility|=4,qi(U,k,et,pt,w)),w&&Pt&2048&&Zf(k.alternate,k);break;case 24:qi(U,k,et,pt,w),w&&Pt&2048&&Sc(k.alternate,k);break;default:qi(U,k,et,pt,w)}c=c.sibling}}function Ji(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=l,S=c,w=S.flags;switch(S.tag){case 22:Ji(g,S),w&2048&&Zf(S.alternate,S);break;case 24:Ji(g,S),w&2048&&Sc(S.alternate,S);break;default:Ji(g,S)}c=c.sibling}}function ls(l){if(l.subtreeFlags&Za)for(l=l.child;l!==null;)Kf(l),l=l.sibling}function Kf(l){switch(l.tag){case 26:ls(l),l.flags&Za&&(l.memoizedState!==null?wy(Jn,l.memoizedState,l.memoizedProps):fa(l.type,l.memoizedProps));break;case 5:ls(l),l.flags&Za&&fa(l.type,l.memoizedProps);break;case 3:case 4:if(Ga){var c=Jn;Jn=yh(l.stateNode.containerInfo),ls(l),Jn=c}else ls(l);break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=Za,Za=16777216,ls(l),Za=c):ls(l));break;default:ls(l)}}function bc(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function go(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var S=c[g];Be=S,ap(S,l)}bc(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Qf(l),l=l.sibling}function Qf(l){switch(l.tag){case 0:case 11:case 15:go(l),l.flags&2048&&po(9,l,l.return);break;case 3:go(l);break;case 12:go(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&4&&(l.return===null||l.return.tag!==13)?(c._visibility&=-5,Nr(l)):go(l);break;default:go(l)}}function Nr(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var S=c[g];Be=S,ap(S,l)}bc(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:po(8,c,c.return),Nr(c);break;case 22:g=c.stateNode,g._visibility&4&&(g._visibility&=-5,Nr(c));break;default:Nr(c)}l=l.sibling}}function ap(l,c){for(;Be!==null;){var g=Be;switch(g.tag){case 0:case 11:case 15:po(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:gc(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,Be=S;else t:for(g=l;Be!==null;){S=Be;var w=S.sibling,U=S.return;if(ep(S),S===g){Be=null;break t}if(w!==null){w.return=U,Be=w;break t}Be=U}}}function nu(l){var c=Qg(l);if(c!=null){if(typeof c.memoizedProps["data-testname"]!="string")throw Error(a(364));return c}if(l=Sp(l),l===null)throw Error(a(362));return l.stateNode.current}function yo(l,c){var g=l.tag;switch(c.$$typeof){case Au:if(l.type===c.value)return!0;break;case vs:t:{for(c=c.value,l=[l,0],g=0;g<l.length;){var S=l[g++],w=S.tag,U=l[g++],k=c[U];if(w!==5&&w!==26&&w!==27||!pu(S)){for(;k!=null&&yo(S,k);)U++,k=c[U];if(U===c.length){c=!0;break t}else for(S=S.child;S!==null;)l.push(S,U),S=S.sibling}}c=!1}return c;case Xn:if((g===5||g===26||g===27)&&ey(l.stateNode,c.value))return!0;break;case pr:if((g===5||g===6||g===26||g===27)&&(l=ty(l),l!==null&&0<=l.indexOf(c.value)))return!0;break;case Xs:if((g===5||g===26||g===27)&&(l=l.memoizedProps["data-testname"],typeof l=="string"&&l.toLowerCase()===c.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function sp(l){switch(l.$$typeof){case Au:return"<"+(u(l.value)||"Unknown")+">";case vs:return":has("+(sp(l)||"")+")";case Xn:return'[role="'+l.value+'"]';case pr:return'"'+l.value+'"';case Xs:return'[data-testname="'+l.value+'"]';default:throw Error(a(365))}}function Ea(l,c){var g=[];l=[l,0];for(var S=0;S<l.length;){var w=l[S++],U=w.tag,k=l[S++],et=c[k];if(U!==5&&U!==26&&U!==27||!pu(w)){for(;et!=null&&yo(w,et);)k++,et=c[k];if(k===c.length)g.push(w);else for(w=w.child;w!==null;)l.push(w,k),w=w.sibling}}return g}function Mc(l,c){if(!Ao)throw Error(a(363));l=nu(l),l=Ea(l,c),c=[],l=Array.from(l);for(var g=0;g<l.length;){var S=l[g++],w=S.tag;if(w===5||w===26||w===27)pu(S)||c.push(S.stateNode);else for(S=S.child;S!==null;)l.push(S),S=S.sibling}return c}function ii(){if((pn&2)!==0&&rn!==0)return rn&-rn;if(Oe.T!==null){var l=ka;return l!==0?l:$t()}return Jg()}function rp(){Ja===0&&(Ja=(rn&536870912)===0||fn?G():536870912);var l=ja.current;return l!==null&&(l.flags|=32),Ja}function Ui(l,c,g){(l===En&&Dn===2||l.cancelPendingCommit!==null)&&(Xi(l,0),Ta(l,rn,Ja,!1)),j(l,g),((pn&2)===0||l!==En)&&(l===En&&((pn&2)===0&&(Yr|=g),Bn===4&&Ta(l,rn,Ja,!1)),Ot(l))}function vo(l,c,g){if((pn&6)!==0)throw Error(a(327));var S=!g&&(c&60)===0&&(c&l.expiredLanes)===0||L(l,c),w=S?lp(l,c):$f(l,c,!0),U=S;do{if(w===0){Ka&&!S&&Ta(l,c,0,!1);break}else if(w===6)Ta(l,c,0,!xs);else{if(g=l.current.alternate,U&&!iu(g)){w=$f(l,c,!1),U=!1;continue}if(w===2){if(U=c,l.errorRecoveryDisabledLanes&U)var k=0;else k=l.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){c=k;t:{var et=l;w=xl;var pt=ki&&et.current.memoizedState.isDehydrated;if(pt&&(Xi(et,k).flags|=256),k=$f(et,k,!1),k!==2){if(Ai&&!pt){et.errorRecoveryDisabledLanes|=U,Yr|=U,w=4;break t}U=ni,ni=w,U!==null&&Ec(U)}w=k}if(U=!1,w!==2)continue}}if(w===1){Xi(l,0),Ta(l,c,0,!0);break}t:{switch(S=l,w){case 0:case 1:throw Error(a(345));case 4:if((c&4194176)===c){Ta(S,c,Ja,!xs);break t}break;case 2:ni=null;break;case 3:case 5:break;default:throw Error(a(329))}if(S.finishedWork=g,S.finishedLanes=c,(c&62914560)===c&&(U=pa+300-ps(),10<U)){if(Ta(S,c,Ja,!xs),N(S,0)!==0)break t;S.timeoutHandle=mi(Jf.bind(null,S,g,ni,Yc,wh,c,Ja,Yr,mr,xs,2,-0,0),U);break t}Jf(S,g,ni,Yc,wh,c,Ja,Yr,mr,xs,0,-0,0)}}break}while(!0);Ot(l)}function Ec(l){ni===null?ni=l:ni.push.apply(ni,l)}function Jf(l,c,g,S,w,U,k,et,pt,Pt,Wt,se,le){var Ie=c.subtreeFlags;if((Ie&8192||(Ie&16785408)===16785408)&&(_p(),Kf(c),c=gi(),c!==null)){l.cancelPendingCommit=c(xo.bind(null,l,g,S,w,k,et,pt,1,se,le)),Ta(l,U,k,!Pt);return}xo(l,g,S,w,k,et,pt,Wt,se,le)}function iu(l){for(var c=l;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var w=g[S],U=w.getSnapshot;w=w.value;try{if(!Ra(U(),w))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ta(l,c,g,S){c&=~jc,c&=~Yr,l.suspendedLanes|=c,l.pingedLanes&=~c,S&&(l.warmLanes|=c),S=l.expirationTimes;for(var w=c;0<w;){var U=31-ha(w),k=1<<U;S[U]=-1,w&=~k}g!==0&&nt(l,g,c)}function Tc(){return(pn&6)===0?(Y(0),!1):!0}function au(){if(Ae!==null){if(Dn===0)var l=Ae.return;else l=Ae,Wa=qs=null,Ns(l),Uo=null,No=0,l=Ae;for(;l!==null;)Gg(l.alternate,l),l=l.return;Ae=null}}function Xi(l,c){l.finishedWork=null,l.finishedLanes=0;var g=l.timeoutHandle;g!==Eo&&(l.timeoutHandle=Eo,lh(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),au(),En=l,Ae=g=cs(l.current,null),rn=c,Dn=0,ta=null,xs=!1,Ka=L(l,c),Ai=!1,mr=Ja=jc=Yr=Qa=Bn=0,ni=xl=null,wh=!1,(c&8)!==0&&(c|=c&32);var S=l.entangledLanes;if(S!==0)for(l=l.entanglements,S&=c;0<S;){var w=31-ha(S),U=1<<w;c|=l[w],S&=~U}return ea=c,it(),g}function Va(l,c){je=null,Oe.H=ti,c===bu?(c=Pe(),Dn=3):c===Xc?(c=Pe(),Dn=4):Dn=c===Ah?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ta=c,Ae===null&&(Bn=1,Zl(l,J(c,l.current)))}function _o(){var l=ja.current;return l===null?!0:(rn&4194176)===rn?Pn===null:(rn&62914560)===rn||(rn&536870912)!==0?l===Pn:!1}function nr(){var l=Oe.H;return Oe.H=ti,l===null?ti:l}function ir(){var l=Oe.A;return Oe.A=Tu,l}function Lr(){Bn=4,xs||(rn&4194176)!==rn&&ja.current!==null||(Ka=!0),(Qa&134217727)===0&&(Yr&134217727)===0||En===null||Ta(En,rn,Ja,!1)}function $f(l,c,g){var S=pn;pn|=2;var w=nr(),U=ir();(En!==l||rn!==c)&&(Yc=null,Xi(l,c)),c=!1;var k=Bn;t:do try{if(Dn!==0&&Ae!==null){var et=Ae,pt=ta;switch(Dn){case 8:au(),k=6;break t;case 3:case 2:case 6:ja.current===null&&(c=!0);var Pt=Dn;if(Dn=0,ta=null,us(l,et,pt,Pt),g&&Ka){k=0;break t}break;default:Pt=Dn,Dn=0,ta=null,us(l,et,pt,Pt)}}op(),k=Bn;break}catch(Wt){Va(l,Wt)}while(!0);return c&&l.shellSuspendCounter++,Wa=qs=null,pn=S,Oe.H=w,Oe.A=U,Ae===null&&(En=null,rn=0,it()),k}function op(){for(;Ae!==null;)Qn(Ae)}function lp(l,c){var g=pn;pn|=2;var S=nr(),w=ir();En!==l||rn!==c?(Yc=null,Ru=ps()+500,Xi(l,c)):Ka=L(l,c);t:do try{if(Dn!==0&&Ae!==null){c=Ae;var U=ta;e:switch(Dn){case 1:Dn=0,ta=null,us(l,c,U,1);break;case 2:if(Ht(U)){Dn=0,ta=null,yn(c);break}c=function(){Dn===2&&En===l&&(Dn=7),Ot(l)},U.then(c,c);break t;case 3:Dn=7;break t;case 4:Dn=5;break t;case 7:Ht(U)?(Dn=0,ta=null,yn(c)):(Dn=0,ta=null,us(l,c,U,7));break;case 5:var k=null;switch(Ae.tag){case 26:k=Ae.memoizedState;case 5:case 27:var et=Ae,pt=et.type,Pt=et.pendingProps;if(k?rl(k):uh(pt,Pt)){Dn=0,ta=null;var Wt=et.sibling;if(Wt!==null)Ae=Wt;else{var se=et.return;se!==null?(Ae=se,Ha(se)):Ae=null}break e}}Dn=0,ta=null,us(l,c,U,5);break;case 6:Dn=0,ta=null,us(l,c,U,6);break;case 8:au(),Bn=6;break t;default:throw Error(a(462))}}ua();break}catch(le){Va(l,le)}while(!0);return Wa=qs=null,Oe.H=S,Oe.A=w,pn=g,Ae!==null?0:(En=null,rn=0,it(),Bn)}function ua(){for(;Ae!==null&&!Uy();)Qn(Ae)}function Qn(l){var c=Vg(l.alternate,l,ea);l.memoizedProps=l.pendingProps,c===null?Ha(l):Ae=c}function yn(l){var c=l,g=c.alternate;switch(c.tag){case 15:case 0:c=Ng(g,c,c.pendingProps,c.type,void 0,rn);break;case 11:c=Ng(g,c,c.pendingProps,c.type.render,c.ref,rn);break;case 5:Ns(c);default:Gg(g,c),c=Ae=Rc(c,ea),c=Vg(g,c,ea)}l.memoizedProps=l.pendingProps,c===null?Ha(l):Ae=c}function us(l,c,g,S){Wa=qs=null,Ns(c),Uo=null,No=0;var w=c.return;try{if(K_(l,w,c,g,rn)){Bn=1,Zl(l,J(g,l.current)),Ae=null;return}}catch(U){if(w!==null)throw Ae=w,U;Bn=1,Zl(l,J(g,l.current)),Ae=null;return}c.flags&32768?(fn||S===1?l=!0:Ka||(rn&536870912)!==0?l=!1:(xs=l=!0,(S===2||S===3||S===6)&&(S=ja.current,S!==null&&S.tag===13&&(S.flags|=16384))),th(c,l)):Ha(c)}function Ha(l){var c=l;do{if((c.flags&32768)!==0){th(c,xs);return}l=c.return;var g=Fg(c.alternate,c,ea);if(g!==null){Ae=g;return}if(c=c.sibling,c!==null){Ae=c;return}Ae=c=l}while(c!==null);Bn===0&&(Bn=5)}function th(l,c){do{var g=J_(l.alternate,l);if(g!==null){g.flags&=32767,Ae=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(l=l.sibling,l!==null)){Ae=l;return}Ae=l=g}while(l!==null);Bn=6,Ae=null}function xo(l,c,g,S,w,U,k,et,pt,Pt){var Wt=Oe.T,se=Hr();try{$i(2),Oe.T=null,jg(l,c,g,S,se,w,U,k,et,pt,Pt)}finally{Oe.T=Wt,$i(se)}}function jg(l,c,g,S,w,U,k,et){do Ps();while(gr!==null);if((pn&6)!==0)throw Error(a(327));var pt=l.finishedWork;if(S=l.finishedLanes,pt===null)return null;if(l.finishedWork=null,l.finishedLanes=0,pt===l.current)throw Error(a(177));l.callbackNode=null,l.callbackPriority=0,l.cancelPendingCommit=null;var Pt=pt.lanes|pt.childLanes;if(Pt|=Fs,at(l,S,Pt,U,k,et),l===En&&(Ae=En=null,rn=0),(pt.subtreeFlags&10256)===0&&(pt.flags&10256)===0||ks||(ks=!0,Io=Pt,Ch=g,zr(bh,function(){return Ps(),null})),g=(pt.flags&15990)!==0,(pt.subtreeFlags&15990)!==0||g?(g=Oe.T,Oe.T=null,U=Hr(),$i(2),k=pn,pn|=4,xc(l,pt),np(pt,l),Kg(l.containerInfo),l.current=pt,Yf(l,pt.alternate,pt),xh(),pn=k,$i(U),Oe.T=g):l.current=pt,ks?(ks=!1,gr=l,Sl=S):up(l,Pt),Pt=l.pendingLanes,Pt===0&&(Bo=null),I(pt.stateNode),Ot(l),c!==null)for(w=l.onRecoverableError,pt=0;pt<c.length;pt++)Pt=c[pt],w(Pt.value,{componentStack:Pt.stack});return(Sl&3)!==0&&Ps(),Pt=l.pendingLanes,(S&4194218)!==0&&(Pt&42)!==0?l===Dh?wu++:(wu=0,Dh=l):wu=0,Y(0),null}function up(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,gc(c)))}function Ps(){if(gr!==null){var l=gr,c=Io;Io=0;var g=rt(Sl),S=32>g?32:g;g=Oe.T;var w=Hr();try{if($i(S),Oe.T=null,gr===null)var U=!1;else{S=Ch,Ch=null;var k=gr,et=Sl;if(gr=null,Sl=0,(pn&6)!==0)throw Error(a(331));var pt=pn;if(pn|=4,Qf(k.current),ip(k,k.current,et,S),pn=pt,Y(0,!1),Aa&&typeof Aa.onPostCommitFiberRoot=="function")try{Aa.onPostCommitFiberRoot(ri,k)}catch{}U=!0}return U}finally{$i(w),Oe.T=g,up(l,c)}}return!1}function su(l,c,g){c=J(g,c),c=Ql(l.stateNode,c,2),l=pe(l,c,2),l!==null&&(j(l,2),Ot(l))}function bn(l,c,g){if(l.tag===3)su(l,l,g);else for(;c!==null;){if(c.tag===3){su(c,l,g);break}else if(c.tag===1){var S=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Bo===null||!Bo.has(S))){l=J(g,l),g=Gd(2),S=pe(c,g,2),S!==null&&(wg(g,S,c,l),j(S,2),Ot(S));break}}c=c.return}}function il(l,c,g){var S=l.pingCache;if(S===null){S=l.pingCache=new _s;var w=new Set;S.set(c,w)}else w=S.get(c),w===void 0&&(w=new Set,S.set(c,w));w.has(g)||(Ai=!0,w.add(g),l=cp.bind(null,l,c,g),c.then(l,l))}function cp(l,c,g){var S=l.pingCache;S!==null&&S.delete(c),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,En===l&&(rn&g)===g&&(Bn===4||Bn===3&&(rn&62914560)===rn&&300>ps()-pa?(pn&2)===0&&Xi(l,0):jc|=g,mr===rn&&(mr=0)),Ot(l)}function So(l,c){c===0&&(c=B()),l=Ut(l,c),l!==null&&(j(l,c),Ot(l))}function Pr(l){var c=l.memoizedState,g=0;c!==null&&(g=c.retryLane),So(l,g)}function bo(l,c){var g=0;switch(l.tag){case 13:var S=l.stateNode,w=l.memoizedState;w!==null&&(g=w.retryLane);break;case 19:S=l.stateNode;break;case 22:S=l.stateNode._retryCache;break;default:throw Error(a(314))}S!==null&&S.delete(c),So(l,g)}function zr(l,c){return Fc(l,c)}function fp(l,c,g,S){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(l){return l=l.prototype,!(!l||!l.isReactComponent)}function cs(l,c){var g=l.alternate;return g===null?(g=e(l.tag,c,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=c,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&31457280,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,c=l.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function Rc(l,c){l.flags&=31457282;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,c=g.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function ar(l,c,g,S,w,U){var k=0;if(S=l,typeof l=="function")Ac(l)&&(k=1);else if(typeof l=="string")k=Ga&&Ln?Ic(l,g,Ei.current)?26:rr(l)?27:5:Ga?Ic(l,g,Ei.current)?26:5:Ln&&rr(l)?27:5;else t:switch(l){case Mo:return $n(g.children,w,U,c);case Oc:k=8,w|=24;break;case ah:return l=e(12,g,c,w|2),l.elementType=ah,l.lanes=U,l;case sh:return l=e(13,g,c,w),l.elementType=sh,l.lanes=U,l;case uu:return l=e(19,g,c,w),l.elementType=uu,l.lanes=U,l;case pp:return wc(g,w,U,c);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Uc:case zs:k=10;break t;case dp:k=9;break t;case Nc:k=11;break t;case rh:k=14;break t;case hs:k=16,S=null;break t}k=29,g=Error(a(130,l===null?"null":typeof l,"")),S=null}return c=e(k,g,c,w),c.elementType=l,c.type=S,c.lanes=U,c}function $n(l,c,g,S){return l=e(7,l,S,c),l.lanes=g,l}function wc(l,c,g,S){l=e(22,l,S,c),l.elementType=pp,l.lanes=g;var w={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var U=w._current;if(U===null)throw Error(a(456));if((w._pendingVisibility&2)===0){var k=Ut(U,2);k!==null&&(w._pendingVisibility|=2,Ui(k,U,2))}},attach:function(){var U=w._current;if(U===null)throw Error(a(456));if((w._pendingVisibility&2)!==0){var k=Ut(U,2);k!==null&&(w._pendingVisibility&=-3,Ui(k,U,2))}}};return l.stateNode=w,l}function eh(l,c,g){return l=e(6,l,null,c),l.lanes=g,l}function hp(l,c,g){return c=e(4,l.children!==null?l.children:[],l.key,c),c.lanes=g,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}function $_(l,c,g,S,w,U,k,et){this.tag=1,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Eo,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.hiddenUpdates=z(null),this.identifierPrefix=S,this.onUncaughtError=w,this.onCaughtError=U,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=et,this.incompleteTransitions=new Map}function Yg(l,c,g,S,w,U,k,et,pt,Pt,Wt,se){return l=new $_(l,c,g,k,et,pt,Pt,se),c=1,U===!0&&(c|=24),U=e(3,null,null,c),l.current=U,U.stateNode=l,c=ho(),c.refCount++,l.pooledCache=c,c.refCount++,U.memoizedState={element:S,isDehydrated:g,cache:c},kt(U),l}function pi(l){return l?(l=Co,l):Co}function nh(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(a(188)):(l=Object.keys(l).join(","),Error(a(268,l)));return l=b(c),l=l!==null?E(l):null,l===null?null:hu(l.stateNode)}function ru(l,c,g,S,w,U){w=pi(w),S.context===null?S.context=w:S.pendingContext=w,S=de(c),S.payload={element:g},U=U===void 0?null:U,U!==null&&(S.callback=U),g=pe(l,S,c),g!==null&&(Ui(g,l,c),te(g,l,c))}function ou(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<c?g:c}}function Cc(l,c){ou(l,c),(l=l.alternate)&&ou(l,c)}var Ve={},lu=Fl(),Fa=RV(),ih=Object.assign,tx=Symbol.for("react.element"),Dc=Symbol.for("react.transitional.element"),fs=Symbol.for("react.portal"),Mo=Symbol.for("react.fragment"),Oc=Symbol.for("react.strict_mode"),ah=Symbol.for("react.profiler"),Uc=Symbol.for("react.provider"),dp=Symbol.for("react.consumer"),zs=Symbol.for("react.context"),Nc=Symbol.for("react.forward_ref"),sh=Symbol.for("react.suspense"),uu=Symbol.for("react.suspense_list"),rh=Symbol.for("react.memo"),hs=Symbol.for("react.lazy"),pp=Symbol.for("react.offscreen"),Wg=Symbol.for("react.memo_cache_sentinel"),Br=Symbol.iterator,mp=Symbol.for("react.client.reference"),Oe=lu.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,sr,Ir,al=!1,cu=Array.isArray,gp=t.rendererVersion,Lc=t.rendererPackageName,fu=t.extraDevToolsConfig,hu=t.getPublicInstance,Zg=t.getRootHostContext,du=t.getChildHostContext,oh=t.prepareForCommit,Kg=t.resetAfterCommit,yp=t.createInstance,Pc=t.appendInitialChild,Vr=t.finalizeInitialChildren,He=t.shouldSetTextContent,Rn=t.createTextInstance,mi=t.scheduleTimeout,lh=t.cancelTimeout,Eo=t.noTimeout,ca=t.isPrimaryRenderer;t.warnsIfNotActing;var Mi=t.supportsMutation,ds=t.supportsPersistence,ki=t.supportsHydration,Qg=t.getInstanceFromNode;t.beforeActiveInstanceBlur,t.afterActiveInstanceBlur;var ai=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var $i=t.setCurrentUpdatePriority,Hr=t.getCurrentUpdatePriority,Jg=t.resolveUpdatePriority;t.resolveEventType,t.resolveEventTimeStamp;var $g=t.shouldAttemptEagerTransition,ex=t.detachDeletedInstance;t.requestPostPaintCallback;var vp=t.maySuspendCommit,uh=t.preloadInstance,_p=t.startSuspendingCommit,fa=t.suspendInstance,gi=t.waitForCommitToBeReady,To=t.NotPendingTransition,Bs=t.HostTransitionContext,ch=t.resetFormInstance;t.bindToConsole;var xp=t.supportsMicrotasks,Fr=t.scheduleMicrotask,Ao=t.supportsTestSelectors,Sp=t.findFiberRoot,bp=t.getBoundingRect,ty=t.getTextContent,pu=t.isHiddenSubtree,ey=t.matchAccessibilityRole,ny=t.setFocusIfFocusable,iy=t.setupIntersectionObserver,ay=t.appendChild,Mp=t.appendChildToContainer,sy=t.commitTextUpdate,nx=t.commitMount,ry=t.commitUpdate,oy=t.insertBefore,ly=t.insertInContainerBefore,Ep=t.removeChild,uy=t.removeChildFromContainer,Tp=t.resetTextContent,cy=t.hideInstance,fy=t.hideTextInstance,hy=t.unhideInstance,ix=t.unhideTextInstance,dy=t.clearContainer,mu=t.cloneInstance,zc=t.createContainerChildSet,Ap=t.appendChildToContainerChildSet,fh=t.finalizeContainerChildren,gu=t.replaceContainerChildren,Rp=t.cloneHiddenInstance,wp=t.cloneHiddenTextInstance,hh=t.isSuspenseInstancePending,dh=t.isSuspenseInstanceFallback,py=t.getSuspenseInstanceFallbackErrorDetails,my=t.registerSuspenseInstanceRetry,Cp=t.canHydrateFormStateMarker,gy=t.isFormStateMarkerMatching,Dp=t.getNextHydratableSibling,ph=t.getFirstHydratableChild,yy=t.getFirstHydratableChildWithinContainer,vy=t.getFirstHydratableChildWithinSuspenseInstance,ax=t.canHydrateInstance,Op=t.canHydrateTextInstance,_y=t.canHydrateSuspenseInstance,xy=t.hydrateInstance,Up=t.hydrateTextInstance,Sy=t.hydrateSuspenseInstance,by=t.getNextHydratableInstanceAfterSuspenseInstance,sx=t.commitHydratedContainer,rx=t.commitHydratedSuspenseInstance,My=t.clearSuspenseBoundary,Bc=t.clearSuspenseBoundaryFromContainer,mh=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var gh=t.validateHydratableInstance,Ey=t.validateHydratableTextInstance,Ga=t.supportsResources,Ic=t.isHostHoistableType,yh=t.getHoistableRoot,Np=t.getResource,Ty=t.acquireResource,sl=t.releaseResource,Vc=t.hydrateHoistable,Hc=t.mountHoistable,yu=t.unmountHoistable,vh=t.createHoistableInstance,Ay=t.prepareToCommitHoistables,Ry=t.mayResourceSuspendCommit,rl=t.preloadResource,wy=t.suspendResource,Ln=t.supportsSingletons,Is=t.resolveSingletonInstance,Ro=t.clearSingleton,Cy=t.acquireSingletonInstance,wo=t.releaseSingletonInstance,rr=t.isHostSingletonType,si=[],Gr=-1,Co={},ha=Math.clz32?Math.clz32:D,Dy=Math.log,Oy=Math.LN2,or=128,ol=4194304,Fc=Fa.unstable_scheduleCallback,_h=Fa.unstable_cancelCallback,Uy=Fa.unstable_shouldYield,xh=Fa.unstable_requestPaint,ps=Fa.unstable_now,Sh=Fa.unstable_ImmediatePriority,Ny=Fa.unstable_UserBlockingPriority,bh=Fa.unstable_NormalPriority,ox=Fa.unstable_IdlePriority,Ly=Fa.log,Ni=Fa.unstable_setDisableYieldValue,ri=null,Aa=null,Ra=typeof Object.is=="function"?Object.is:W,Lp=new WeakMap,ll=[],ul=0,cl=null,vu=0,qa=[],Xa=0,Do=null,Vs=1,Hs="",Ei=T(null),_u=T(null),lr=T(null),fl=T(null),ji=null,Yi=null,fn=!1,ms=null,Li=!1,Gc=Error(a(519)),gs=[],hl=0,Fs=0,qc=null,qr=null,dl=!1,Vn=!1,Pp=!1,xu=0,Su=null,pl=0,ka=0,ml=null,Xr=!1,gl=!1,ur=Object.prototype.hasOwnProperty,bu=Error(a(460)),Xc=Error(a(474)),kc={then:function(){}},Oo=null,Uo=null,No=0,Lo=Si(!0),cr=Si(!1),Hn=T(null),Mu=T(0),ja=T(null),Pn=null,Ti=T(0),kr=0,je=null,Ee=null,dn=null,ys=!1,yl=!1,Po=!1,Mh=0,vl=0,Pi=null,Gs=0,Eh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},ti={readContext:Fi,use:St,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useLayoutEffect:wn,useInsertionEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useSyncExternalStore:wn,useId:wn};ti.useCacheRefresh=wn,ti.useMemoCache=wn,ti.useHostTransitionStatus=wn,ti.useFormState=wn,ti.useActionState=wn,ti.useOptimistic=wn;var zo={readContext:Fi,use:St,useCallback:function(l,c){return X().memoizedState=[l,c===void 0?null:c],l},useContext:Fi,useEffect:Pf,useImperativeHandle:function(l,c,g){g=g!=null?g.concat([l]):null,ac(4194308,4,zf.bind(null,c,l),g)},useLayoutEffect:function(l,c){return ac(4194308,4,l,c)},useInsertionEffect:function(l,c){ac(4,2,l,c)},useMemo:function(l,c){var g=X();c=c===void 0?null:c;var S=l();if(Po){Z(!0);try{l()}finally{Z(!1)}}return g.memoizedState=[S,c],S},useReducer:function(l,c,g){var S=X();if(g!==void 0){var w=g(c);if(Po){Z(!0);try{g(c)}finally{Z(!1)}}}else w=c;return S.memoizedState=S.baseState=w,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:w},S.queue=l,l=l.dispatch=If.bind(null,je,l),[S.memoizedState,l]},useRef:function(l){var c=X();return l={current:l},c.memoizedState=l},useState:function(l){l=en(l);var c=l.queue,g=Fd.bind(null,je,c);return c.dispatch=g,[l.memoizedState,g]},useDebugValue:oo,useDeferredValue:function(l,c){var g=X();return oc(g,l,c)},useTransition:function(){var l=en(!1);return l=Xl.bind(null,je,l.queue,!0,!1),X().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,g){var S=je,w=X();if(fn){if(g===void 0)throw Error(a(407));g=g()}else{if(g=c(),En===null)throw Error(a(349));(rn&60)!==0||xe(S,c,g)}w.memoizedState=g;var U={value:g,getSnapshot:c};return w.queue=U,Pf($e.bind(null,S,U,l),[l]),S.flags|=2048,ra(9,ye.bind(null,S,U,g,c),{destroy:void 0},null),g},useId:function(){var l=X(),c=En.identifierPrefix;if(fn){var g=Hs,S=Vs;g=(S&~(1<<32-ha(S)-1)).toString(32)+g,c=":"+c+"R"+g,g=Mh++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=Gs++,c=":"+c+"r"+g.toString(32)+":";return l.memoizedState=c},useCacheRefresh:function(){return X().memoizedState=Hd.bind(null,je)}};zo.useMemoCache=dt,zo.useHostTransitionStatus=lc,zo.useFormState=Cn,zo.useActionState=Cn,zo.useOptimistic=function(l){var c=X();c.memoizedState=c.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=jl.bind(null,je,!0,g),g.dispatch=c,[l,c]};var da={readContext:Fi,use:St,useCallback:tl,useContext:Fi,useEffect:Bd,useImperativeHandle:Bf,useInsertionEffect:Ag,useLayoutEffect:rc,useMemo:Id,useReducer:Jt,useRef:tr,useState:function(){return Jt(qt)},useDebugValue:oo,useDeferredValue:function(l,c){var g=ut();return Vd(g,Ee.memoizedState,l,c)},useTransition:function(){var l=Jt(qt)[0],c=ut().memoizedState;return[typeof l=="boolean"?l:xt(l),c]},useSyncExternalStore:Re,useId:kl};da.useCacheRefresh=Tr,da.useMemoCache=dt,da.useHostTransitionStatus=lc,da.useFormState=Vi,da.useActionState=Vi,da.useOptimistic=function(l,c){var g=ut();return sn(g,Ee,l,c)};var Ya={readContext:Fi,use:St,useCallback:tl,useContext:Fi,useEffect:Bd,useImperativeHandle:Bf,useInsertionEffect:Ag,useLayoutEffect:rc,useMemo:Id,useReducer:ce,useRef:tr,useState:function(){return ce(qt)},useDebugValue:oo,useDeferredValue:function(l,c){var g=ut();return Ee===null?oc(g,l,c):Vd(g,Ee.memoizedState,l,c)},useTransition:function(){var l=ce(qt)[0],c=ut().memoizedState;return[typeof l=="boolean"?l:xt(l),c]},useSyncExternalStore:Re,useId:kl};Ya.useCacheRefresh=Tr,Ya.useMemoCache=dt,Ya.useHostTransitionStatus=lc,Ya.useFormState=Di,Ya.useActionState=Di,Ya.useOptimistic=function(l,c){var g=ut();return Ee!==null?sn(g,Ee,l,c):(g.baseState=l,[l,g.queue.dispatch])};var fr={isMounted:function(l){return(l=l._reactInternals)?v(l)===l:!1},enqueueSetState:function(l,c,g){l=l._reactInternals;var S=ii(),w=de(S);w.payload=c,g!=null&&(w.callback=g),c=pe(l,w,S),c!==null&&(Ui(c,l,S),te(c,l,S))},enqueueReplaceState:function(l,c,g){l=l._reactInternals;var S=ii(),w=de(S);w.tag=1,w.payload=c,g!=null&&(w.callback=g),c=pe(l,w,S),c!==null&&(Ui(c,l,S),te(c,l,S))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var g=ii(),S=de(g);S.tag=2,c!=null&&(S.callback=c),c=pe(l,S,g),c!==null&&(Ui(c,l,g),te(c,l,g))}},Th=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Ah=Error(a(461)),zn=!1,Rh={dehydrated:null,treeContext:null,retryLane:0},jr=T(null),qs=null,Wa=null,Eu=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(g,S){l.push(S)}};this.abort=function(){c.aborted=!0,l.forEach(function(g){return g()})}},Py=Fa.unstable_scheduleCallback,zy=Fa.unstable_NormalPriority,Fn={$$typeof:zs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},zp=Oe.S;Oe.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&Yt(l,c),zp!==null&&zp(l,c)};var hr=T(null),dr=!1,ei=!1,Bp=!1,Mn=typeof WeakSet=="function"?WeakSet:Set,Be=null,tn=!1,be=null,qe=!1,Jn=null,Za=8192,Tu={getCacheForType:function(l){var c=Fi(Fn),g=c.data.get(l);return g===void 0&&(g=l(),c.data.set(l,g)),g}},Au=0,vs=1,Xn=2,Xs=3,pr=4;if(typeof Symbol=="function"&&Symbol.for){var _l=Symbol.for;Au=_l("selector.component"),vs=_l("selector.has_pseudo_class"),Xn=_l("selector.role"),Xs=_l("selector.test_id"),pr=_l("selector.text")}var _s=typeof WeakMap=="function"?WeakMap:Map,pn=0,En=null,Ae=null,rn=0,Dn=0,ta=null,xs=!1,Ka=!1,Ai=!1,ea=0,Bn=0,Qa=0,Yr=0,jc=0,Ja=0,mr=0,xl=null,ni=null,wh=!1,pa=0,Ru=1/0,Yc=null,Bo=null,ks=!1,gr=null,Sl=0,Io=0,Ch=null,wu=0,Dh=null;return Ve.attemptContinuousHydration=function(l){if(l.tag===13){var c=Ut(l,67108864);c!==null&&Ui(c,l,67108864),Cc(l,67108864)}},Ve.attemptHydrationAtCurrentPriority=function(l){if(l.tag===13){var c=ii(),g=Ut(l,c);g!==null&&Ui(g,l,c),Cc(l,c)}},Ve.attemptSynchronousHydration=function(l){switch(l.tag){case 3:if(l=l.stateNode,l.current.memoizedState.isDehydrated){var c=O(l.pendingLanes);if(c!==0){for(l.pendingLanes|=2,l.entangledLanes|=2;c;){var g=1<<31-ha(c);l.entanglements[1]|=g,c&=~g}Ot(l),(pn&6)===0&&(Ru=ps()+500,Y(0))}}break;case 13:c=Ut(l,2),c!==null&&Ui(c,l,2),Tc(),Cc(l,2)}},Ve.batchedUpdates=function(l,c){return l(c)},Ve.createComponentSelector=function(l){return{$$typeof:Au,value:l}},Ve.createContainer=function(l,c,g,S,w,U,k,et,pt,Pt){return Yg(l,c,!1,null,g,S,U,k,et,pt,Pt,null)},Ve.createHasPseudoClassSelector=function(l){return{$$typeof:vs,value:l}},Ve.createHydrationContainer=function(l,c,g,S,w,U,k,et,pt,Pt,Wt,se,le){return l=Yg(g,S,!0,l,w,U,et,pt,Pt,Wt,se,le),l.context=pi(null),g=l.current,S=ii(),w=de(S),w.callback=c??null,pe(g,w,S),l.current.lanes=S,j(l,S),Ot(l),l},Ve.createPortal=function(l,c,g){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fs,key:S==null?null:""+S,children:l,containerInfo:c,implementation:g}},Ve.createRoleSelector=function(l){return{$$typeof:Xn,value:l}},Ve.createTestNameSelector=function(l){return{$$typeof:Xs,value:l}},Ve.createTextSelector=function(l){return{$$typeof:pr,value:l}},Ve.defaultOnCaughtError=function(l){console.error(l)},Ve.defaultOnRecoverableError=function(l){Th(l)},Ve.defaultOnUncaughtError=function(l){Th(l)},Ve.deferredUpdates=function(l){var c=Oe.T,g=Hr();try{return $i(32),Oe.T=null,l()}finally{$i(g),Oe.T=c}},Ve.discreteUpdates=function(l,c,g,S,w){var U=Oe.T,k=Hr();try{return $i(2),Oe.T=null,l(c,g,S,w)}finally{$i(k),Oe.T=U,pn===0&&(Ru=ps()+500)}},Ve.findAllNodes=Mc,Ve.findBoundingRects=function(l,c){if(!Ao)throw Error(a(363));c=Mc(l,c),l=[];for(var g=0;g<c.length;g++)l.push(bp(c[g]));for(c=l.length-1;0<c;c--){g=l[c];for(var S=g.x,w=S+g.width,U=g.y,k=U+g.height,et=c-1;0<=et;et--)if(c!==et){var pt=l[et],Pt=pt.x,Wt=Pt+pt.width,se=pt.y,le=se+pt.height;if(S>=Pt&&U>=se&&w<=Wt&&k<=le){l.splice(c,1);break}else if(S!==Pt||g.width!==pt.width||le<U||se>k){if(!(U!==se||g.height!==pt.height||Wt<S||Pt>w)){Pt>S&&(pt.width+=Pt-S,pt.x=S),Wt<w&&(pt.width=w-Pt),l.splice(c,1);break}}else{se>U&&(pt.height+=se-U,pt.y=U),le<k&&(pt.height=k-se),l.splice(c,1);break}}}return l},Ve.findHostInstance=nh,Ve.findHostInstanceWithNoPortals=function(l){return l=b(l),l=l!==null?R(l):null,l===null?null:hu(l.stateNode)},Ve.findHostInstanceWithWarning=function(l){return nh(l)},Ve.flushPassiveEffects=Ps,Ve.flushSyncFromReconciler=function(l){var c=pn;pn|=1;var g=Oe.T,S=Hr();try{if($i(2),Oe.T=null,l)return l()}finally{$i(S),Oe.T=g,pn=c,(pn&6)===0&&Y(0)}},Ve.flushSyncWork=Tc,Ve.focusWithin=function(l,c){if(!Ao)throw Error(a(363));for(l=nu(l),c=Ea(l,c),c=Array.from(c),l=0;l<c.length;){var g=c[l++],S=g.tag;if(!pu(g)){if((S===5||S===26||S===27)&&ny(g.stateNode))return!0;for(g=g.child;g!==null;)c.push(g),g=g.sibling}}return!1},Ve.getFindAllNodesFailureDescription=function(l,c){if(!Ao)throw Error(a(363));var g=0,S=[];l=[nu(l),0];for(var w=0;w<l.length;){var U=l[w++],k=U.tag,et=l[w++],pt=c[et];if((k!==5&&k!==26&&k!==27||!pu(U))&&(yo(U,pt)&&(S.push(sp(pt)),et++,et>g&&(g=et)),et<c.length))for(U=U.child;U!==null;)l.push(U,et),U=U.sibling}if(g<c.length){for(l=[];g<c.length;g++)l.push(sp(c[g]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+l.join(" > ")}return null},Ve.getPublicRootInstance=function(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 27:case 5:return hu(l.child.stateNode);default:return l.child.stateNode}},Ve.injectIntoDevTools=function(){var l={bundleType:0,version:gp,rendererPackageName:Lc,currentDispatcherRef:Oe,findFiberByHostInstance:Qg,reconcilerVersion:"19.0.0"};if(fu!==null&&(l.rendererConfig=fu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")l=!1;else{var c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(c.isDisabled||!c.supportsFiber)l=!0;else{try{ri=c.inject(l),Aa=c}catch{}l=!!c.checkDCE}}return l},Ve.isAlreadyRendering=function(){return!1},Ve.observeVisibleRects=function(l,c,g,S){if(!Ao)throw Error(a(363));l=Mc(l,c);var w=iy(l,g,S).disconnect;return{disconnect:function(){w()}}},Ve.shouldError=function(){return null},Ve.shouldSuspend=function(){return!1},Ve.startHostTransition=function(l,c,g,S){if(l.tag!==5)throw Error(a(476));var w=er(l).queue;Xl(l,w,c,To,g===null?i:function(){var U=er(l).next.queue;return lo(l,U,{},ii()),g(S)})},Ve.updateContainer=function(l,c,g,S){var w=c.current,U=ii();return ru(w,U,l,c,g,S),U},Ve.updateContainerSync=function(l,c,g,S){return c.tag===0&&Ps(),ru(c.current,2,l,c,g,S),2},Ve},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})}(US)),US.exports}var EA;function CV(){return EA||(EA=1,OS.exports=wV()),OS.exports}var DV=CV();const OV=rg(DV);var PS={exports:{}},zS={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA;function UV(){return TA||(TA=1,function(n){function t(I,Z){var W=I.length;I.push(Z);t:for(;0<W;){var J=W-1>>>1,F=I[J];if(0<a(F,Z))I[J]=Z,I[W]=F,W=J;else break t}}function e(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var Z=I[0],W=I.pop();if(W!==Z){I[0]=W;t:for(var J=0,F=I.length,$=F>>>1;J<$;){var mt=2*(J+1)-1,Tt=I[mt],st=mt+1,Et=I[st];if(0>a(Tt,W))st<F&&0>a(Et,Tt)?(I[J]=Et,I[st]=W,J=st):(I[J]=Tt,I[mt]=W,J=mt);else if(st<F&&0>a(Et,W))I[J]=Et,I[st]=W,J=st;else break t}}return Z}function a(I,Z){var W=I.sortIndex-Z.sortIndex;return W!==0?W:I.id-Z.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var d=[],p=[],y=1,v=null,_=3,b=!1,E=!1,R=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(I){for(var Z=e(p);Z!==null;){if(Z.callback===null)i(p);else if(Z.startTime<=I)i(p),Z.sortIndex=Z.expirationTime,t(d,Z);else break;Z=e(p)}}function O(I){if(R=!1,D(I),!E)if(e(d)!==null)E=!0,Q();else{var Z=e(p);Z!==null&&rt(O,Z.startTime-I)}}var N=!1,L=-1,H=5,G=-1;function B(){return!(n.unstable_now()-G<H)}function z(){if(N){var I=n.unstable_now();G=I;var Z=!0;try{t:{E=!1,R&&(R=!1,M(L),L=-1),b=!0;var W=_;try{e:{for(D(I),v=e(d);v!==null&&!(v.expirationTime>I&&B());){var J=v.callback;if(typeof J=="function"){v.callback=null,_=v.priorityLevel;var F=J(v.expirationTime<=I);if(I=n.unstable_now(),typeof F=="function"){v.callback=F,D(I),Z=!0;break e}v===e(d)&&i(d),D(I)}else i(d);v=e(d)}if(v!==null)Z=!0;else{var $=e(p);$!==null&&rt(O,$.startTime-I),Z=!1}}break t}finally{v=null,_=W,b=!1}Z=void 0}}finally{Z?j():N=!1}}}var j;if(typeof C=="function")j=function(){C(z)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,nt=at.port2;at.port1.onmessage=z,j=function(){nt.postMessage(null)}}else j=function(){T(z,0)};function Q(){N||(N=!0,j())}function rt(I,Z){L=T(function(){I(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(I){I.callback=null},n.unstable_continueExecution=function(){E||b||(E=!0,Q())},n.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<I?Math.floor(1e3/I):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return e(d)},n.unstable_next=function(I){switch(_){case 1:case 2:case 3:var Z=3;break;default:Z=_}var W=_;_=Z;try{return I()}finally{_=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(I,Z){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var W=_;_=I;try{return Z()}finally{_=W}},n.unstable_scheduleCallback=function(I,Z,W){var J=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,I){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=W+F,I={id:y++,callback:Z,priorityLevel:I,startTime:W,expirationTime:F,sortIndex:-1},W>J?(I.sortIndex=W,t(p,I),e(d)===null&&I===e(p)&&(R?(M(L),L=-1):R=!0,rt(O,W-J))):(I.sortIndex=F,t(d,I),E||b||(E=!0,Q())),I},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(I){var Z=_;return function(){var W=_;_=Z;try{return I.apply(this,arguments)}finally{_=W}}}}(zS)),zS}var AA;function NV(){return AA||(AA=1,PS.exports=UV()),PS.exports}var RA=NV();const LV=n=>typeof n=="object"&&typeof n.then=="function",yf=[];function O2(n,t,e=(i,a)=>i===a){if(n===t)return!0;if(!n||!t)return!1;const i=n.length;if(t.length!==i)return!1;for(let a=0;a<i;a++)if(!e(n[a],t[a]))return!1;return!0}function U2(n,t=null,e=!1,i={}){t===null&&(t=[n]);for(const r of yf)if(O2(t,r.keys,r.equal)){if(e)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return i.lifespan&&i.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,i.lifespan)),r.response;if(!e)throw r.promise}const a={keys:t,equal:i.equal,remove:()=>{const r=yf.indexOf(a);r!==-1&&yf.splice(r,1)},promise:(LV(n)?n:n(...t)).then(r=>{a.response=r,i.lifespan&&i.lifespan>0&&(a.timeout=setTimeout(a.remove,i.lifespan))}).catch(r=>a.error=r)};if(yf.push(a),!e)throw a.promise}const PV=(n,t,e)=>U2(n,t,!1,e),zV=(n,t,e)=>void U2(n,t,!0,e),BV=n=>{if(n===void 0||n.length===0)yf.splice(0,yf.length);else{const t=yf.find(e=>O2(n,e.keys,e.equal));t&&t.remove()}};function n1(n,t,e){if(!n)return;if(e(n)===!0)return n;let i=t?n.return:n.child;for(;i;){const a=n1(i,t,e);if(a)return a;i=t?null:i.sibling}}function N2(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const i1=N2(At.createContext(null));class L2 extends At.Component{render(){return At.createElement(i1.Provider,{value:this._reactInternals},this.props.children)}}function P2(){const n=At.useContext(i1);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=At.useId();return At.useMemo(()=>{for(const e of[n,n==null?void 0:n.alternate]){if(!e)continue;const i=n1(e,!1,a=>{let r=a.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(i)return i}},[n,t])}const IV=Symbol.for("react.context"),VV=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===IV;function HV(){const n=P2(),[t]=At.useState(()=>new Map);t.clear();let e=n;for(;e;){const i=e.type;VV(i)&&i!==i1&&!t.has(i)&&t.set(i,At.use(N2(i))),e=e.return}return t}function FV(){const n=HV();return At.useMemo(()=>Array.from(n.keys()).reduce((t,e)=>i=>At.createElement(t,null,At.createElement(e.Provider,{...i,value:n.get(e)})),t=>At.createElement(L2,{...t})),[n])}function z2(n){let t=n.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const B2=n=>n&&n.isOrthographicCamera,GV=n=>n&&n.hasOwnProperty("current"),qV=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),_g=((n,t)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((t=window.navigator)==null?void 0:t.product)==="ReactNative"))()?At.useLayoutEffect:At.useEffect;function I2(n){const t=At.useRef(n);return _g(()=>void(t.current=n),[n]),t}function XV(){const n=P2(),t=FV();return At.useMemo(()=>({children:e})=>{const a=!!n1(n,!0,r=>r.type===At.StrictMode)?At.StrictMode:At.Fragment;return oe.jsx(a,{children:oe.jsx(t,{children:e})})},[n,t])}function kV({set:n}){return _g(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const jV=(n=>(n=class extends At.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function V2(n){var t;const e=typeof window<"u"?(t=window.devicePixelRatio)!=null?t:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}function td(n){var t;return(t=n.__r3f)==null?void 0:t.root.getState()}const li={obj:n=>n===Object(n)&&!li.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,t,{arrays:e="shallow",objects:i="reference",strict:a=!0}={}){if(typeof n!=typeof t||!!n!=!!t)return!1;if(li.str(n)||li.num(n)||li.boo(n))return n===t;const r=li.obj(n);if(r&&i==="reference")return n===t;const u=li.arr(n);if(u&&e==="reference")return n===t;if((u||r)&&n===t)return!0;let f;for(f in n)if(!(f in t))return!1;if(r&&e==="shallow"&&i==="shallow"){for(f in a?t:n)if(!li.equ(n[f],t[f],{strict:a,objects:"reference"}))return!1}else for(f in a?t:n)if(n[f]!==t[f])return!1;if(li.und(f)){if(u&&n.length===0&&t.length===0||r&&Object.keys(n).length===0&&Object.keys(t).length===0)return!0;if(n!==t)return!1}return!0}};function YV(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const t in n){const e=n[t];(e==null?void 0:e.type)!=="Scene"&&(e==null||e.dispose==null||e.dispose())}}const H2=["children","key","ref"];function WV(n){const t={};for(const e in n)H2.includes(e)||(t[e]=n[e]);return t}function Yv(n,t,e,i){const a=n;let r=a==null?void 0:a.__r3f;return r||(r={root:t,type:e,parent:null,children:[],props:WV(i),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=r)),r}function Qm(n,t){let e=n[t];if(!t.includes("-"))return{root:n,key:t,target:e};e=n;for(const a of t.split("-")){var i;t=a,n=e,e=(i=e)==null?void 0:i[t]}return{root:n,key:t,target:e}}const wA=/-\d+$/;function Wv(n,t){if(li.str(t.props.attach)){if(wA.test(t.props.attach)){const a=t.props.attach.replace(wA,""),{root:r,key:u}=Qm(n.object,a);Array.isArray(r[u])||(r[u]=[])}const{root:e,key:i}=Qm(n.object,t.props.attach);t.previousAttach=e[i],e[i]=t.object}else li.fun(t.props.attach)&&(t.previousAttach=t.props.attach(n.object,t.object))}function Zv(n,t){if(li.str(t.props.attach)){const{root:e,key:i}=Qm(n.object,t.props.attach),a=t.previousAttach;a===void 0?delete e[i]:e[i]=a}else t.previousAttach==null||t.previousAttach(n.object,t.object);delete t.previousAttach}const zb=[...H2,"args","dispose","attach","object","onUpdate","dispose"],CA=new Map;function ZV(n){let t=CA.get(n.constructor);try{t||(t=new n.constructor,CA.set(n.constructor,t))}catch{}return t}function KV(n,t){const e={};for(const i in t)if(!zb.includes(i)&&!li.equ(t[i],n.props[i])){e[i]=t[i];for(const a in t)a.startsWith(`${i}-`)&&(e[a]=t[a])}for(const i in n.props){if(zb.includes(i)||t.hasOwnProperty(i))continue;const{root:a,key:r}=Qm(n.object,i);if(a.constructor&&a.constructor.length===0){const u=ZV(a);li.und(u)||(e[r]=u[r])}else e[r]=0}return e}const QV=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],JV=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function ku(n,t){var e;const i=n.__r3f,a=i&&z2(i).getState(),r=i==null?void 0:i.eventCount;for(const f in t){let d=t[f];if(zb.includes(f))continue;if(i&&JV.test(f)){typeof d=="function"?i.handlers[f]=d:delete i.handlers[f],i.eventCount=Object.keys(i.handlers).length;continue}if(d===void 0)continue;let{root:p,key:y,target:v}=Qm(n,f);if(v instanceof vd&&d instanceof vd)v.mask=d.mask;else if(v instanceof fe&&qV(d))v.set(d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof v.copy=="function"&&d!=null&&d.constructor&&v.constructor===d.constructor)v.copy(d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&Array.isArray(d))typeof v.fromArray=="function"?v.fromArray(d):v.set(...d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof d=="number")typeof v.setScalar=="function"?v.setScalar(d):v.set(d);else{var u;p[y]=d,a&&!a.linear&&QV.includes(y)&&(u=p[y])!=null&&u.isTexture&&p[y].format===Pa&&p[y].type===no&&(p[y].colorSpace=Na)}}if(i!=null&&i.parent&&a!=null&&a.internal&&(e=i.object)!=null&&e.isObject3D&&r!==i.eventCount){const f=i.object,d=a.internal.interaction.indexOf(f);d>-1&&a.internal.interaction.splice(d,1),i.eventCount&&f.raycast!==null&&a.internal.interaction.push(f)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&Ud(i),n}function Ud(n){var t;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const e=(t=n.root)==null||t.getState==null?void 0:t.getState();e&&e.internal.frames===0&&e.invalidate()}function $V(n,t){n.manual||(B2(n)?(n.left=t.width/-2,n.right=t.width/2,n.top=t.height/2,n.bottom=t.height/-2):n.aspect=t.width/t.height,n.updateProjectionMatrix())}const Es=n=>n==null?void 0:n.isObject3D;function X0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function F2(n,t,e,i){const a=e.get(t);a&&(e.delete(t),e.size===0&&(n.delete(i),a.target.releasePointerCapture(i)))}function tH(n,t){const{internal:e}=n.getState();e.interaction=e.interaction.filter(i=>i!==t),e.initialHits=e.initialHits.filter(i=>i!==t),e.hovered.forEach((i,a)=>{(i.eventObject===t||i.object===t)&&e.hovered.delete(a)}),e.capturedMap.forEach((i,a)=>{F2(e.capturedMap,t,i,a)})}function eH(n){function t(d){const{internal:p}=n.getState(),y=d.offsetX-p.initialClick[0],v=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(y*y+v*v))}function e(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(y=>{var v;return(v=p.__r3f)==null?void 0:v.handlers["onPointer"+y]}))}function i(d,p){const y=n.getState(),v=new Set,_=[],b=p?p(y.internal.interaction):y.internal.interaction;for(let M=0;M<b.length;M++){const C=td(b[M]);C&&(C.raycaster.camera=void 0)}y.previousRoot||y.events.compute==null||y.events.compute(d,y);function E(M){const C=td(M);if(!C||!C.events.enabled||C.raycaster.camera===null)return[];if(C.raycaster.camera===void 0){var D;C.events.compute==null||C.events.compute(d,C,(D=C.previousRoot)==null?void 0:D.getState()),C.raycaster.camera===void 0&&(C.raycaster.camera=null)}return C.raycaster.camera?C.raycaster.intersectObject(M,!0):[]}let R=b.flatMap(E).sort((M,C)=>{const D=td(M.object),O=td(C.object);return!D||!O?M.distance-C.distance:O.events.priority-D.events.priority||M.distance-C.distance}).filter(M=>{const C=X0(M);return v.has(C)?!1:(v.add(C),!0)});y.events.filter&&(R=y.events.filter(R,y));for(const M of R){let C=M.object;for(;C;){var T;(T=C.__r3f)!=null&&T.eventCount&&_.push({...M,eventObject:C}),C=C.parent}}if("pointerId"in d&&y.internal.capturedMap.has(d.pointerId))for(let M of y.internal.capturedMap.get(d.pointerId).values())v.has(X0(M.intersection))||_.push(M.intersection);return _}function a(d,p,y,v){if(d.length){const _={stopped:!1};for(const b of d){let E=td(b.object);if(E||b.object.traverseAncestors(R=>{const T=td(R);if(T)return E=T,!1}),E){const{raycaster:R,pointer:T,camera:M,internal:C}=E,D=new K(T.x,T.y,0).unproject(M),O=B=>{var z,j;return(z=(j=C.capturedMap.get(B))==null?void 0:j.has(b.eventObject))!=null?z:!1},N=B=>{const z={intersection:b,target:p.target};C.capturedMap.has(B)?C.capturedMap.get(B).set(b.eventObject,z):C.capturedMap.set(B,new Map([[b.eventObject,z]])),p.target.setPointerCapture(B)},L=B=>{const z=C.capturedMap.get(B);z&&F2(C.capturedMap,b.eventObject,z,B)};let H={};for(let B in p){let z=p[B];typeof z!="function"&&(H[B]=z)}let G={...b,...H,pointer:T,intersections:d,stopped:_.stopped,delta:y,unprojectedPoint:D,ray:R.ray,camera:M,stopPropagation(){const B="pointerId"in p&&C.capturedMap.get(p.pointerId);if((!B||B.has(b.eventObject))&&(G.stopped=_.stopped=!0,C.hovered.size&&Array.from(C.hovered.values()).find(z=>z.eventObject===b.eventObject))){const z=d.slice(0,d.indexOf(b));r([...z,b])}},target:{hasPointerCapture:O,setPointerCapture:N,releasePointerCapture:L},currentTarget:{hasPointerCapture:O,setPointerCapture:N,releasePointerCapture:L},nativeEvent:p};if(v(G),_.stopped===!0)break}}}return d}function r(d){const{internal:p}=n.getState();for(const y of p.hovered.values())if(!d.length||!d.find(v=>v.object===y.object&&v.index===y.index&&v.instanceId===y.instanceId)){const _=y.eventObject.__r3f;if(p.hovered.delete(X0(y)),_!=null&&_.eventCount){const b=_.handlers,E={...y,intersections:d};b.onPointerOut==null||b.onPointerOut(E),b.onPointerLeave==null||b.onPointerLeave(E)}}}function u(d,p){for(let y=0;y<p.length;y++){const v=p[y].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(d)}}function f(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return p=>{const{internal:y}=n.getState();"pointerId"in p&&y.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{y.capturedMap.has(p.pointerId)&&(y.capturedMap.delete(p.pointerId),r([]))})}}return function(y){const{onPointerMissed:v,internal:_}=n.getState();_.lastEvent.current=y;const b=d==="onPointerMove",E=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",T=i(y,b?e:void 0),M=E?t(y):0;d==="onPointerDown"&&(_.initialClick=[y.offsetX,y.offsetY],_.initialHits=T.map(D=>D.eventObject)),E&&!T.length&&M<=2&&(u(y,_.interaction),v&&v(y)),b&&r(T);function C(D){const O=D.eventObject,N=O.__r3f;if(!(N!=null&&N.eventCount))return;const L=N.handlers;if(b){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const H=X0(D),G=_.hovered.get(H);G?G.stopped&&D.stopPropagation():(_.hovered.set(H,D),L.onPointerOver==null||L.onPointerOver(D),L.onPointerEnter==null||L.onPointerEnter(D))}L.onPointerMove==null||L.onPointerMove(D)}else{const H=L[d];H?(!E||_.initialHits.includes(O))&&(u(y,_.interaction.filter(G=>!_.initialHits.includes(G))),H(D)):E&&_.initialHits.includes(O)&&u(y,_.interaction.filter(G=>!_.initialHits.includes(G)))}}a(T,y,M,C)}}return{handlePointer:f}}const DA=n=>!!(n!=null&&n.render),G2=At.createContext(null),nH=(n,t)=>{const e=TV((f,d)=>{const p=new K,y=new K,v=new K;function _(M=d().camera,C=y,D=d().size){const{width:O,height:N,top:L,left:H}=D,G=O/N;C.isVector3?v.copy(C):v.set(...C);const B=M.getWorldPosition(p).distanceTo(v);if(B2(M))return{width:O/M.zoom,height:N/M.zoom,top:L,left:H,factor:1,distance:B,aspect:G};{const z=M.fov*Math.PI/180,j=2*Math.tan(z/2)*B,at=j*(O/N);return{width:at,height:j,top:L,left:H,factor:O/at,distance:B,aspect:G}}}let b;const E=M=>f(C=>({performance:{...C.performance,current:M}})),R=new Gt;return{set:f,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>n(d(),M),advance:(M,C)=>t(M,C,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new KM,pointer:R,mouse:R,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();b&&clearTimeout(b),M.performance.current!==M.performance.min&&E(M.performance.min),b=setTimeout(()=>E(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:M=>f(C=>({...C,events:{...C.events,...M}})),setSize:(M,C,D=0,O=0)=>{const N=d().camera,L={width:M,height:C,top:D,left:O};f(H=>({size:L,viewport:{...H.viewport,..._(N,y,L)}}))},setDpr:M=>f(C=>{const D=V2(M);return{viewport:{...C.viewport,dpr:D,initialDpr:C.viewport.initialDpr||D}}}),setFrameloop:(M="always")=>{const C=d().clock;C.stop(),C.elapsedTime=0,M!=="never"&&(C.start(),C.elapsedTime=0),f(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:At.createRef(),active:!1,frames:0,priority:0,subscribe:(M,C,D)=>{const O=d().internal;return O.priority=O.priority+(C>0?1:0),O.subscribers.push({ref:M,priority:C,store:D}),O.subscribers=O.subscribers.sort((N,L)=>N.priority-L.priority),()=>{const N=d().internal;N!=null&&N.subscribers&&(N.priority=N.priority-(C>0?1:0),N.subscribers=N.subscribers.filter(L=>L.ref!==M))}}}}}),i=e.getState();let a=i.size,r=i.viewport.dpr,u=i.camera;return e.subscribe(()=>{const{camera:f,size:d,viewport:p,gl:y,set:v}=e.getState();if(d.width!==a.width||d.height!==a.height||p.dpr!==r){a=d,r=p.dpr,$V(f,d),p.dpr>0&&y.setPixelRatio(p.dpr);const _=typeof HTMLCanvasElement<"u"&&y.domElement instanceof HTMLCanvasElement;y.setSize(d.width,d.height,_)}f!==u&&(u=f,v(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(f)}})))}),e.subscribe(f=>n(f)),e};function iH(){const n=At.useContext(G2);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function q2(n,t=0){const e=iH(),i=e.getState().internal.subscribe,a=I2(n);return _g(()=>i(a,t,e),[t,i,e]),null}function aH(n){const t=OV(n);return t.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:At.version}),t}const X2=0,bd={},sH=/^three(?=[A-Z])/,B_=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let rH=0;const oH=n=>typeof n=="function";function k2(n){if(oH(n)){const t=`${rH++}`;return bd[t]=n,t}else Object.assign(bd,n)}function j2(n,t){const e=B_(n),i=bd[e];if(n!=="primitive"&&!i)throw new Error(`R3F: ${e} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!t.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(t.args!==void 0&&!Array.isArray(t.args))throw new Error("R3F: The args prop must be an array!")}function lH(n,t,e){var i;return n=B_(n)in bd?n:n.replace(sH,""),j2(n,t),n==="primitive"&&(i=t.object)!=null&&i.__r3f&&delete t.object.__r3f,Yv(t.object,e,n,t)}function uH(n){if(!n.isHidden){var t;n.props.attach&&(t=n.parent)!=null&&t.object?Zv(n.parent,n):Es(n.object)&&(n.object.visible=!1),n.isHidden=!0,Ud(n)}}function Y2(n){if(n.isHidden){var t;n.props.attach&&(t=n.parent)!=null&&t.object?Wv(n.parent,n):Es(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,Ud(n)}}function a1(n,t,e){const i=t.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!t.object){var a,r;const u=bd[B_(t.type)];t.object=(a=t.props.object)!=null?a:new u(...(r=t.props.args)!=null?r:[]),t.object.__r3f=t}if(ku(t.object,t.props),t.props.attach)Wv(n,t);else if(Es(t.object)&&Es(n.object)){const u=n.object.children.indexOf(e==null?void 0:e.object);if(e&&u!==-1){const f=n.object.children.indexOf(t.object);if(f!==-1){n.object.children.splice(f,1);const d=f<u?u-1:u;n.object.children.splice(d,0,t.object)}else t.object.parent=n.object,n.object.children.splice(u,0,t.object),t.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:t.object})}else n.object.add(t.object)}for(const u of t.children)a1(t,u);Ud(t)}}function BS(n,t){t&&(t.parent=n,n.children.push(t),a1(n,t))}function OA(n,t,e){if(!t||!e)return;t.parent=n;const i=n.children.indexOf(e);i!==-1?n.children.splice(i,0,t):n.children.push(t),a1(n,t,e)}function W2(n){if(typeof n.dispose=="function"){const t=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?t():RA.unstable_scheduleCallback(RA.unstable_IdlePriority,t)}}function Bb(n,t,e){if(!t)return;t.parent=null;const i=n.children.indexOf(t);i!==-1&&n.children.splice(i,1),t.props.attach?Zv(n,t):Es(t.object)&&Es(n.object)&&(n.object.remove(t.object),tH(z2(t),t.object));const a=t.props.dispose!==null&&e!==!1;for(let r=t.children.length-1;r>=0;r--){const u=t.children[r];Bb(t,u,a)}t.children.length=0,delete t.object.__r3f,a&&t.type!=="primitive"&&t.object.type!=="Scene"&&W2(t.object),e===void 0&&Ud(t)}function cH(n,t){for(const e of[n,n.alternate])if(e!==null)if(typeof e.ref=="function"){e.refCleanup==null||e.refCleanup();const i=e.ref(t);typeof i=="function"&&(e.refCleanup=i)}else e.ref&&(e.ref.current=t)}const ev=[];function fH(){for(const[e]of ev){const i=e.parent;if(i){e.props.attach?Zv(i,e):Es(e.object)&&Es(i.object)&&i.object.remove(e.object);for(const a of e.children)a.props.attach?Zv(e,a):Es(a.object)&&Es(e.object)&&e.object.remove(a.object)}e.isHidden&&Y2(e),e.object.__r3f&&delete e.object.__r3f,e.type!=="primitive"&&W2(e.object)}for(const[e,i,a]of ev){e.props=i;const r=e.parent;if(r){var n,t;const u=bd[B_(e.type)];e.object=(n=e.props.object)!=null?n:new u(...(t=e.props.args)!=null?t:[]),e.object.__r3f=e,cH(a,e.object),ku(e.object,e.props),e.props.attach?Wv(r,e):Es(e.object)&&Es(r.object)&&r.object.add(e.object);for(const f of e.children)f.props.attach?Wv(e,f):Es(f.object)&&Es(e.object)&&e.object.add(f.object);Ud(e)}}ev.length=0}const IS=()=>{},UA={};let k0=X2;const hH=0,dH=4,Ib=aH({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:lH,removeChild:Bb,appendChild:BS,appendInitialChild:BS,insertBefore:OA,appendChildToContainer(n,t){const e=n.getState().scene.__r3f;!t||!e||BS(e,t)},removeChildFromContainer(n,t){const e=n.getState().scene.__r3f;!t||!e||Bb(e,t)},insertInContainerBefore(n,t,e){const i=n.getState().scene.__r3f;!t||!e||!i||OA(i,t,e)},getRootHostContext:()=>UA,getChildHostContext:()=>UA,commitUpdate(n,t,e,i,a){var r,u,f;j2(t,i);let d=!1;if((n.type==="primitive"&&e.object!==i.object||((r=i.args)==null?void 0:r.length)!==((u=e.args)==null?void 0:u.length)||(f=i.args)!=null&&f.some((y,v)=>{var _;return y!==((_=e.args)==null?void 0:_[v])}))&&(d=!0),d)ev.push([n,{...i},a]);else{const y=KV(n,i);Object.keys(y).length&&(Object.assign(n.props,y),ku(n.object,y))}(a.sibling===null||(a.flags&dH)===hH)&&fH()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n==null?void 0:n.object,prepareForCommit:()=>null,preparePortalMount:n=>Yv(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:uH,unhideInstance:Y2,createTextInstance:IS,hideTextInstance:IS,unhideTextInstance:IS,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:At.createContext(null),setCurrentUpdatePriority(n){k0=n},getCurrentUpdatePriority(){return k0},resolveUpdatePriority(){var n;if(k0!==X2)return k0;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return tv.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return tv.ContinuousEventPriority;default:return tv.DefaultEventPriority}},resetFormInstance(){}}),Cf=new Map,ed={objects:"shallow",strict:!1};function pH(n,t){if(!t&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:e,height:i,top:a,left:r}=n.parentElement.getBoundingClientRect();return{width:e,height:i,top:a,left:r}}else if(!t&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...t}}function mH(n){const t=Cf.get(n),e=t==null?void 0:t.fiber,i=t==null?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,r=i||nH(Fb,LA),u=e||Ib.createContainer(r,tv.ConcurrentRoot,null,!1,null,"",a,a,a,null);t||Cf.set(n,{fiber:u,store:r});let f,d,p=!1,y=null;return{async configure(v={}){let _;y=new Promise($=>_=$);let{gl:b,size:E,scene:R,events:T,onCreated:M,shadows:C=!1,linear:D=!1,flat:O=!1,legacy:N=!1,orthographic:L=!1,frameloop:H="always",dpr:G=[1,2],performance:B,raycaster:z,camera:j,onPointerMissed:at}=v,nt=r.getState(),Q=nt.gl;if(!nt.gl){const $={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},mt=typeof b=="function"?await b($):b;DA(mt)?Q=mt:Q=new D2({...$,...b}),nt.set({gl:Q})}let rt=nt.raycaster;rt||nt.set({raycaster:rt=new S2});const{params:I,...Z}=z||{};if(li.equ(Z,rt,ed)||ku(rt,{...Z}),li.equ(I,rt.params,ed)||ku(rt,{params:{...rt.params,...I}}),!nt.camera||nt.camera===d&&!li.equ(d,j,ed)){d=j;const $=j==null?void 0:j.isCamera,mt=$?j:L?new vg(0,0,0,0,.1,1e3):new aa(75,0,.1,1e3);$||(mt.position.z=5,j&&(ku(mt,j),mt.manual||("aspect"in j||"left"in j||"right"in j||"bottom"in j||"top"in j)&&(mt.manual=!0,mt.updateProjectionMatrix())),!nt.camera&&!(j!=null&&j.rotation)&&mt.lookAt(0,0,0)),nt.set({camera:mt}),rt.camera=mt}if(!nt.scene){let $;R!=null&&R.isScene?($=R,Yv($,r,"",{})):($=new DM,Yv($,r,"",{}),R&&ku($,R)),nt.set({scene:$})}T&&!nt.events.handlers&&nt.set({events:T(r)});const W=pH(n,E);if(li.equ(W,nt.size,ed)||nt.setSize(W.width,W.height,W.top,W.left),G&&nt.viewport.dpr!==V2(G)&&nt.setDpr(G),nt.frameloop!==H&&nt.setFrameloop(H),nt.onPointerMissed||nt.set({onPointerMissed:at}),B&&!li.equ(B,nt.performance,ed)&&nt.set($=>({performance:{...$.performance,...B}})),!nt.xr){var J;const $=(st,Et)=>{const Bt=r.getState();Bt.frameloop!=="never"&&LA(st,!0,Bt,Et)},mt=()=>{const st=r.getState();st.gl.xr.enabled=st.gl.xr.isPresenting,st.gl.xr.setAnimationLoop(st.gl.xr.isPresenting?$:null),st.gl.xr.isPresenting||Fb(st)},Tt={connect(){const st=r.getState().gl;st.xr.addEventListener("sessionstart",mt),st.xr.addEventListener("sessionend",mt)},disconnect(){const st=r.getState().gl;st.xr.removeEventListener("sessionstart",mt),st.xr.removeEventListener("sessionend",mt)}};typeof((J=Q.xr)==null?void 0:J.addEventListener)=="function"&&Tt.connect(),nt.set({xr:Tt})}if(Q.shadowMap){const $=Q.shadowMap.enabled,mt=Q.shadowMap.type;if(Q.shadowMap.enabled=!!C,li.boo(C))Q.shadowMap.type=vm;else if(li.str(C)){var F;const Tt={basic:Ow,percentage:r_,soft:vm,variance:$r};Q.shadowMap.type=(F=Tt[C])!=null?F:vm}else li.obj(C)&&Object.assign(Q.shadowMap,C);($!==Q.shadowMap.enabled||mt!==Q.shadowMap.type)&&(Q.shadowMap.needsUpdate=!0)}return mn.enabled=!N,p||(Q.outputColorSpace=D?Wu:Na,Q.toneMapping=O?ko:pM),nt.legacy!==N&&nt.set(()=>({legacy:N})),nt.linear!==D&&nt.set(()=>({linear:D})),nt.flat!==O&&nt.set(()=>({flat:O})),b&&!li.fun(b)&&!DA(b)&&!li.equ(b,Q,ed)&&ku(Q,b),f=M,p=!0,_(),this},render(v){return!p&&!y&&this.configure(),y.then(()=>{Ib.updateContainer(oe.jsx(gH,{store:r,children:v,onCreated:f,rootElement:n}),u,null,()=>{})}),r},unmount(){Z2(n)}}}function gH({store:n,children:t,onCreated:e,rootElement:i}){return _g(()=>{const a=n.getState();a.set(r=>({internal:{...r.internal,active:!0}})),e&&e(a),n.getState().events.connected||a.events.connect==null||a.events.connect(i)},[]),oe.jsx(G2.Provider,{value:n,children:t})}function Z2(n,t){const e=Cf.get(n),i=e==null?void 0:e.fiber;if(i){const a=e==null?void 0:e.store.getState();a&&(a.internal.active=!1),Ib.updateContainer(null,i,null,()=>{a&&setTimeout(()=>{try{var r,u,f,d;a.events.disconnect==null||a.events.disconnect(),(r=a.gl)==null||(u=r.renderLists)==null||u.dispose==null||u.dispose(),(f=a.gl)==null||f.forceContextLoss==null||f.forceContextLoss(),(d=a.gl)!=null&&d.xr&&a.xr.disconnect(),YV(a.scene),Cf.delete(n)}catch{}},500)})}}const yH=new Set,vH=new Set,_H=new Set;function VS(n,t){if(n.size)for(const{callback:e}of n.values())e(t)}function wm(n,t){switch(n){case"before":return VS(yH,t);case"after":return VS(vH,t);case"tail":return VS(_H,t)}}let HS,FS;function Vb(n,t,e){let i=t.clock.getDelta();t.frameloop==="never"&&typeof n=="number"&&(i=n-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=n),HS=t.internal.subscribers;for(let a=0;a<HS.length;a++)FS=HS[a],FS.ref.current(FS.store.getState(),i,e);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),t.frameloop==="always"?1:t.internal.frames}let Kv=!1,Hb=!1,GS,NA,nd;function K2(n){NA=requestAnimationFrame(K2),Kv=!0,GS=0,wm("before",n),Hb=!0;for(const e of Cf.values()){var t;nd=e.store.getState(),nd.internal.active&&(nd.frameloop==="always"||nd.internal.frames>0)&&!((t=nd.gl.xr)!=null&&t.isPresenting)&&(GS+=Vb(n,nd))}if(Hb=!1,wm("after",n),GS===0)return wm("tail",n),Kv=!1,cancelAnimationFrame(NA)}function Fb(n,t=1){var e;if(!n)return Cf.forEach(i=>Fb(i.store.getState(),t));(e=n.gl.xr)!=null&&e.isPresenting||!n.internal.active||n.frameloop==="never"||(t>1?n.internal.frames=Math.min(60,n.internal.frames+t):Hb?n.internal.frames=2:n.internal.frames=1,Kv||(Kv=!0,requestAnimationFrame(K2)))}function LA(n,t=!0,e,i){if(t&&wm("before",n),e)Vb(n,e,i);else for(const a of Cf.values())Vb(n,a.store.getState());t&&wm("after",n)}const qS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function xH(n){const{handlePointer:t}=eH(n);return{priority:1,enabled:!0,compute(e,i,a){i.pointer.set(e.offsetX/i.size.width*2-1,-(e.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(qS).reduce((e,i)=>({...e,[i]:t(i)}),{}),update:()=>{var e;const{events:i,internal:a}=n.getState();(e=a.lastEvent)!=null&&e.current&&i.handlers&&i.handlers.onPointerMove(a.lastEvent.current)},connect:e=>{const{set:i,events:a}=n.getState();if(a.disconnect==null||a.disconnect(),i(r=>({events:{...r.events,connected:e}})),a.handlers)for(const r in a.handlers){const u=a.handlers[r],[f,d]=qS[r];e.addEventListener(f,u,{passive:d})}},disconnect:()=>{const{set:e,events:i}=n.getState();if(i.connected){if(i.handlers)for(const a in i.handlers){const r=i.handlers[a],[u]=qS[a];i.connected.removeEventListener(u,r)}e(a=>({events:{...a.events,connected:void 0}}))}}}}function PA(n,t){let e;return(...i)=>{window.clearTimeout(e),e=window.setTimeout(()=>n(...i),t)}}function SH({debounce:n,scroll:t,polyfill:e,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const a=e||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,u]=At.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),f=At.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),d=n?typeof n=="number"?n:n.scroll:null,p=n?typeof n=="number"?n:n.resize:null,y=At.useRef(!1);At.useEffect(()=>(y.current=!0,()=>void(y.current=!1)));const[v,_,b]=At.useMemo(()=>{const M=()=>{if(!f.current.element)return;const{left:C,top:D,width:O,height:N,bottom:L,right:H,x:G,y:B}=f.current.element.getBoundingClientRect(),z={left:C,top:D,width:O,height:N,bottom:L,right:H,x:G,y:B};f.current.element instanceof HTMLElement&&i&&(z.height=f.current.element.offsetHeight,z.width=f.current.element.offsetWidth),Object.freeze(z),y.current&&!TH(f.current.lastBounds,z)&&u(f.current.lastBounds=z)};return[M,p?PA(M,p):M,d?PA(M,d):M]},[u,i,d,p]);function E(){f.current.scrollContainers&&(f.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",b,!0)),f.current.scrollContainers=null),f.current.resizeObserver&&(f.current.resizeObserver.disconnect(),f.current.resizeObserver=null),f.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",f.current.orientationHandler))}function R(){f.current.element&&(f.current.resizeObserver=new a(b),f.current.resizeObserver.observe(f.current.element),t&&f.current.scrollContainers&&f.current.scrollContainers.forEach(M=>M.addEventListener("scroll",b,{capture:!0,passive:!0})),f.current.orientationHandler=()=>{b()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",f.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",f.current.orientationHandler))}const T=M=>{!M||M===f.current.element||(E(),f.current.element=M,f.current.scrollContainers=Q2(M),R())};return MH(b,!!t),bH(_),At.useEffect(()=>{E(),R()},[t,b,_]),At.useEffect(()=>E,[]),[T,r,v]}function bH(n){At.useEffect(()=>{const t=n;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[n])}function MH(n,t){At.useEffect(()=>{if(t){const e=n;return window.addEventListener("scroll",e,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",e,!0)}},[n,t])}function Q2(n){const t=[];if(!n||n===document.body)return t;const{overflow:e,overflowX:i,overflowY:a}=window.getComputedStyle(n);return[e,i,a].some(r=>r==="auto"||r==="scroll")&&t.push(n),[...t,...Q2(n.parentElement)]}const EH=["x","y","top","bottom","left","right","width","height"],TH=(n,t)=>EH.every(e=>n[e]===t[e]);function AH({ref:n,children:t,fallback:e,resize:i,style:a,gl:r,events:u=xH,eventSource:f,eventPrefix:d,shadows:p,linear:y,flat:v,legacy:_,orthographic:b,frameloop:E,dpr:R,performance:T,raycaster:M,camera:C,scene:D,onPointerMissed:O,onCreated:N,...L}){At.useMemo(()=>k2(hV),[]);const H=XV(),[G,B]=SH({scroll:!0,debounce:{scroll:50,resize:0},...i}),z=At.useRef(null),j=At.useRef(null);At.useImperativeHandle(n,()=>z.current);const at=I2(O),[nt,Q]=At.useState(!1),[rt,I]=At.useState(!1);if(nt)throw nt;if(rt)throw rt;const Z=At.useRef(null);_g(()=>{const J=z.current;if(B.width>0&&B.height>0&&J){Z.current||(Z.current=mH(J));async function F(){await Z.current.configure({gl:r,scene:D,events:u,shadows:p,linear:y,flat:v,legacy:_,orthographic:b,frameloop:E,dpr:R,performance:T,raycaster:M,camera:C,size:B,onPointerMissed:(...$)=>at.current==null?void 0:at.current(...$),onCreated:$=>{$.events.connect==null||$.events.connect(f?GV(f)?f.current:f:j.current),d&&$.setEvents({compute:(mt,Tt)=>{const st=mt[d+"X"],Et=mt[d+"Y"];Tt.pointer.set(st/Tt.size.width*2-1,-(Et/Tt.size.height)*2+1),Tt.raycaster.setFromCamera(Tt.pointer,Tt.camera)}}),N==null||N($)}}),Z.current.render(oe.jsx(H,{children:oe.jsx(jV,{set:I,children:oe.jsx(At.Suspense,{fallback:oe.jsx(kV,{set:Q}),children:t??null})})}))}F()}}),At.useEffect(()=>{const J=z.current;if(J)return()=>Z2(J)},[]);const W=f?"none":"auto";return oe.jsx("div",{ref:j,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...a},...L,children:oe.jsx("div",{ref:G,style:{width:"100%",height:"100%"},children:oe.jsx("canvas",{ref:z,style:{display:"block"},children:e})})})}function RH(n){return oe.jsx(L2,{children:oe.jsx(AH,{...n})})}function Gb(){return Gb=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)({}).hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Gb.apply(null,arguments)}function wH(n,t=1e-4){t=Math.max(t,Number.EPSILON);const e={},i=n.getIndex(),a=n.getAttribute("position"),r=i?i.count:a.count;let u=0;const f=Object.keys(n.attributes),d={},p={},y=[],v=["getX","getY","getZ","getW"];for(let R=0,T=f.length;R<T;R++){const M=f[R];d[M]=[];const C=n.morphAttributes[M];C&&(p[M]=new Array(C.length).fill(0).map(()=>[]))}const _=Math.log10(1/t),b=Math.pow(10,_);for(let R=0;R<r;R++){const T=i?i.getX(R):R;let M="";for(let C=0,D=f.length;C<D;C++){const O=f[C],N=n.getAttribute(O),L=N.itemSize;for(let H=0;H<L;H++)M+=`${~~(N[v[H]](T)*b)},`}if(M in e)y.push(e[M]);else{for(let C=0,D=f.length;C<D;C++){const O=f[C],N=n.getAttribute(O),L=n.morphAttributes[O],H=N.itemSize,G=d[O],B=p[O];for(let z=0;z<H;z++){const j=v[z];if(G.push(N[j](T)),L)for(let at=0,nt=L.length;at<nt;at++)B[at].push(L[at][j](T))}}e[M]=u,y.push(u),u++}}const E=n.clone();for(let R=0,T=f.length;R<T;R++){const M=f[R],C=n.getAttribute(M),D=new C.array.constructor(d[M]),O=new On(D,C.itemSize,C.normalized);if(E.setAttribute(M,O),M in p)for(let N=0;N<p[M].length;N++){const L=n.morphAttributes[M][N],H=new L.array.constructor(p[M][N]),G=new On(H,L.itemSize,L.normalized);E.morphAttributes[M][N]=G}}return E.setIndex(y),E}class CH extends dg{constructor(t,e={}){const{bevelEnabled:i=!1,bevelSize:a=8,bevelThickness:r=10,font:u,height:f=50,size:d=100,lineHeight:p=1,letterSpacing:y=0,...v}=e;if(u===void 0)super();else{const _=u.generateShapes(t,d,{lineHeight:p,letterSpacing:y});super(_,{...v,bevelEnabled:i,bevelSize:a,bevelThickness:r,depth:f})}this.type="TextGeometry"}}var DH=Object.defineProperty,OH=(n,t,e)=>t in n?DH(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,XS=(n,t,e)=>(OH(n,typeof t!="symbol"?t+"":t,e),e);class UH extends os{constructor(t){super(t)}load(t,e,i,a){const r=new Qo(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,u=>{if(typeof u!="string")throw new Error("unsupported data type");const f=JSON.parse(u),d=this.parse(f);e&&e(d)},i,a)}loadAsync(t,e){return super.loadAsync(t,e)}parse(t){return new NH(t)}}class NH{constructor(t){XS(this,"data"),XS(this,"isFont",!0),XS(this,"type","Font"),this.data=t}generateShapes(t,e=100,i){const a=[],r={letterSpacing:0,lineHeight:1,...i},u=LH(t,e,this.data,r);for(let f=0,d=u.length;f<d;f++)Array.prototype.push.apply(a,u[f].toShapes(!1));return a}}function LH(n,t,e,i){const a=Array.from(n),r=t/e.resolution,u=(e.boundingBox.yMax-e.boundingBox.yMin+e.underlineThickness)*r,f=[];let d=0,p=0;for(let y=0;y<a.length;y++){const v=a[y];if(v===`
`)d=0,p-=u*i.lineHeight;else{const _=PH(v,r,d,p,e);_&&(d+=_.offsetX+i.letterSpacing,f.push(_.path))}}return f}function PH(n,t,e,i,a){const r=a.glyphs[n]||a.glyphs["?"];if(!r){console.error('THREE.Font: character "'+n+'" does not exists in font family '+a.familyName+".");return}const u=new M2;let f,d,p,y,v,_,b,E;if(r.o){const R=r._cachedOutline||(r._cachedOutline=r.o.split(" "));for(let T=0,M=R.length;T<M;)switch(R[T++]){case"m":f=parseInt(R[T++])*t+e,d=parseInt(R[T++])*t+i,u.moveTo(f,d);break;case"l":f=parseInt(R[T++])*t+e,d=parseInt(R[T++])*t+i,u.lineTo(f,d);break;case"q":p=parseInt(R[T++])*t+e,y=parseInt(R[T++])*t+i,v=parseInt(R[T++])*t+e,_=parseInt(R[T++])*t+i,u.quadraticCurveTo(v,_,p,y);break;case"b":p=parseInt(R[T++])*t+e,y=parseInt(R[T++])*t+i,v=parseInt(R[T++])*t+e,_=parseInt(R[T++])*t+i,b=parseInt(R[T++])*t+e,E=parseInt(R[T++])*t+i,u.bezierCurveTo(v,_,b,E,p,y);break}}return{offsetX:r.ha*t,path:u}}let kS=null;async function zH(n){return typeof n=="string"?await(await fetch(n)).json():n}function BH(n){return kS||(kS=new UH),kS.parse(n)}async function J2(n){const t=await zH(n);return BH(t)}function s1(n){return PV(J2,[n])}s1.preload=n=>zV(J2,[n]);s1.clear=n=>BV([n]);const IH=["string","number"],VH=n=>{let t="";const e=[];return At.Children.forEach(n,i=>{IH.includes(typeof i)?t+=i+"":e.push(i)}),[t,...e]},HH=At.forwardRef(({font:n,letterSpacing:t=0,lineHeight:e=1,size:i=1,height:a=.2,bevelThickness:r=.1,bevelSize:u=.01,bevelEnabled:f=!1,bevelOffset:d=0,bevelSegments:p=4,curveSegments:y=8,smooth:v,children:_,...b},E)=>{At.useMemo(()=>k2({RenamedTextGeometry:CH}),[]);const R=At.useRef(null),T=s1(n),M=At.useMemo(()=>({font:T,size:i,height:a,bevelThickness:r,bevelSize:u,bevelEnabled:f,bevelSegments:p,bevelOffset:d,curveSegments:y,letterSpacing:t,lineHeight:e}),[T,i,a,r,u,f,p,d,y,t,e]),[C,...D]=At.useMemo(()=>VH(_),[_]),O=At.useMemo(()=>[C,M],[C,M]);return At.useLayoutEffect(()=>{v&&(R.current.geometry=wH(R.current.geometry,v),R.current.geometry.computeVertexNormals())},[O,v]),At.useImperativeHandle(E,()=>R.current,[]),At.createElement("mesh",Gb({},b,{ref:R}),At.createElement("renamedTextGeometry",{args:O}),D)}),FH="modulepreload",GH=function(n){return"/"+n},zA={},Ms=function(t,e,i){let a=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(e.map(d=>{if(d=GH(d),d in zA)return;zA[d]=!0;const p=d.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${y}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":FH,p||(v.as="script"),v.crossOrigin="",v.href=d,f&&v.setAttribute("nonce",f),document.head.appendChild(v),p)return new Promise((_,b)=>{v.addEventListener("load",_),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return a.then(u=>{for(const f of u||[])f.status==="rejected"&&r(f.reason);return t().catch(r)})},r1=At.createContext({});function o1(n){const t=At.useRef(null);return t.current===null&&(t.current=n()),t.current}const l1=typeof window<"u",$2=l1?At.useLayoutEffect:At.useEffect,I_=At.createContext(null),u1=At.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class qH extends At.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent){const i=e.offsetParent,a=i instanceof HTMLElement&&i.offsetWidth||0,r=this.props.sizeRef.current;r.height=e.offsetHeight||0,r.width=e.offsetWidth||0,r.top=e.offsetTop,r.left=e.offsetLeft,r.right=a-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function XH({children:n,isPresent:t,anchorX:e}){const i=At.useId(),a=At.useRef(null),r=At.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:u}=At.useContext(u1);return At.useInsertionEffect(()=>{const{width:f,height:d,top:p,left:y,right:v}=r.current;if(t||!a.current||!f||!d)return;const _=e==="left"?`left: ${y}`:`right: ${v}`;a.current.dataset.motionPopId=i;const b=document.createElement("style");return u&&(b.nonce=u),document.head.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${d}px !important;
            ${_}px !important;
            top: ${p}px !important;
          }
        `),()=>{document.head.removeChild(b)}},[t]),oe.jsx(qH,{isPresent:t,childRef:a,sizeRef:r,children:At.cloneElement(n,{ref:a})})}const kH=({children:n,initial:t,isPresent:e,onExitComplete:i,custom:a,presenceAffectsLayout:r,mode:u,anchorX:f})=>{const d=o1(jH),p=At.useId(),y=At.useCallback(_=>{d.set(_,!0);for(const b of d.values())if(!b)return;i&&i()},[d,i]),v=At.useMemo(()=>({id:p,initial:t,isPresent:e,custom:a,onExitComplete:y,register:_=>(d.set(_,!1),()=>d.delete(_))}),r?[Math.random(),y]:[e,y]);return At.useMemo(()=>{d.forEach((_,b)=>d.set(b,!1))},[e]),At.useEffect(()=>{!e&&!d.size&&i&&i()},[e]),u==="popLayout"&&(n=oe.jsx(XH,{isPresent:e,anchorX:f,children:n})),oe.jsx(I_.Provider,{value:v,children:n})};function jH(){return new Map}function tD(n=!0){const t=At.useContext(I_);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:a}=t,r=At.useId();At.useEffect(()=>{if(n)return a(r)},[n]);const u=At.useCallback(()=>n&&i&&i(r),[r,i,n]);return!e&&i?[!1,u]:[!0]}const j0=n=>n.key||"";function BA(n){const t=[];return At.Children.forEach(n,e=>{At.isValidElement(e)&&t.push(e)}),t}const YH=({children:n,custom:t,initial:e=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:r="sync",propagate:u=!1,anchorX:f="left"})=>{const[d,p]=tD(u),y=At.useMemo(()=>BA(n),[n]),v=u&&!d?[]:y.map(j0),_=At.useRef(!0),b=At.useRef(y),E=o1(()=>new Map),[R,T]=At.useState(y),[M,C]=At.useState(y);$2(()=>{_.current=!1,b.current=y;for(let N=0;N<M.length;N++){const L=j0(M[N]);v.includes(L)?E.delete(L):E.get(L)!==!0&&E.set(L,!1)}},[M,v.length,v.join("-")]);const D=[];if(y!==R){let N=[...y];for(let L=0;L<M.length;L++){const H=M[L],G=j0(H);v.includes(G)||(N.splice(L,0,H),D.push(H))}return r==="wait"&&D.length&&(N=D),C(BA(N)),T(y),null}const{forceRender:O}=At.useContext(r1);return oe.jsx(oe.Fragment,{children:M.map(N=>{const L=j0(N),H=u&&!d?!1:y===M||v.includes(L),G=()=>{if(E.has(L))E.set(L,!0);else return;let B=!0;E.forEach(z=>{z||(B=!1)}),B&&(O==null||O(),C(b.current),u&&(p==null||p()),i&&i())};return oe.jsx(kH,{isPresent:H,initial:!_.current||e?void 0:!1,custom:t,presenceAffectsLayout:a,mode:r,onExitComplete:H?void 0:G,anchorX:f,children:N},L)})})};function c1(n,t){n.indexOf(t)===-1&&n.push(t)}function f1(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const Zs=n=>n;let eD=Zs;const WH={useManualTiming:!1};function h1(n){let t;return()=>(t===void 0&&(t=n()),t)}const Md=(n,t,e)=>{const i=t-n;return i===0?1:(e-n)/i};class d1{constructor(){this.subscriptions=[]}add(t){return c1(this.subscriptions,t),()=>f1(this.subscriptions,t)}notify(t,e,i){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,e,i);else for(let r=0;r<a;r++){const u=this.subscriptions[r];u&&u(t,e,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Pl=n=>n*1e3,zl=n=>n/1e3;function nD(n,t){return t?n*(1e3/t):0}const ZH=h1(()=>window.ScrollTimeline!==void 0);class KH{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,e){for(let i=0;i<this.animations.length;i++)this.animations[i][t]=e}attachTimeline(t,e){const i=this.animations.map(a=>{if(ZH()&&a.attachTimeline)return a.attachTimeline(t);if(typeof e=="function")return e(a)});return()=>{i.forEach((a,r)=>{a&&a(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class QH extends KH{then(t,e){return Promise.all(this.animations).then(t).catch(e)}}function p1(n,t){return n?n[t]||n.default||n:void 0}const qb=2e4;function iD(n){let t=0;const e=50;let i=n.next(t);for(;!i.done&&t<qb;)t+=e,i=n.next(t);return t>=qb?1/0:t}function m1(n){return typeof n=="function"}function IA(n,t){n.timeline=t,n.onfinish=null}const g1=n=>Array.isArray(n)&&typeof n[0]=="number",JH={linearEasing:void 0};function $H(n,t){const e=h1(n);return()=>{var i;return(i=JH[t])!==null&&i!==void 0?i:e()}}const Qv=$H(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),aD=(n,t,e=10)=>{let i="";const a=Math.max(Math.round(t/e),2);for(let r=0;r<a;r++)i+=n(Md(0,a-1,r))+", ";return`linear(${i.substring(0,i.length-2)})`};function sD(n){return!!(typeof n=="function"&&Qv()||!n||typeof n=="string"&&(n in Xb||Qv())||g1(n)||Array.isArray(n)&&n.every(sD))}const gm=([n,t,e,i])=>`cubic-bezier(${n}, ${t}, ${e}, ${i})`,Xb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:gm([0,.65,.55,1]),circOut:gm([.55,0,1,.45]),backIn:gm([.31,.01,.66,-.59]),backOut:gm([.33,1.53,.69,.99])};function rD(n,t){if(n)return typeof n=="function"&&Qv()?aD(n,t):g1(n)?gm(n):Array.isArray(n)?n.map(e=>rD(e,t)||Xb.easeOut):Xb[n]}const Y0=["read","resolveKeyframes","update","preRender","render","postRender"],VA={value:null};function tF(n,t){let e=new Set,i=new Set,a=!1,r=!1;const u=new WeakSet;let f={delta:0,timestamp:0,isProcessing:!1},d=0;function p(v){u.has(v)&&(y.schedule(v),n()),d++,v(f)}const y={schedule:(v,_=!1,b=!1)=>{const R=b&&a?e:i;return _&&u.add(v),R.has(v)||R.add(v),v},cancel:v=>{i.delete(v),u.delete(v)},process:v=>{if(f=v,a){r=!0;return}a=!0,[e,i]=[i,e],e.forEach(p),t&&VA.value&&VA.value.frameloop[t].push(d),d=0,e.clear(),a=!1,r&&(r=!1,y.process(v))}};return y}const eF=40;function oD(n,t){let e=!1,i=!0;const a={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,u=Y0.reduce((M,C)=>(M[C]=tF(r,t?C:void 0),M),{}),{read:f,resolveKeyframes:d,update:p,preRender:y,render:v,postRender:_}=u,b=()=>{const M=performance.now();e=!1,a.delta=i?1e3/60:Math.max(Math.min(M-a.timestamp,eF),1),a.timestamp=M,a.isProcessing=!0,f.process(a),d.process(a),p.process(a),y.process(a),v.process(a),_.process(a),a.isProcessing=!1,e&&t&&(i=!1,n(b))},E=()=>{e=!0,i=!0,a.isProcessing||n(b)};return{schedule:Y0.reduce((M,C)=>{const D=u[C];return M[C]=(O,N=!1,L=!1)=>(e||E(),D.schedule(O,N,L)),M},{}),cancel:M=>{for(let C=0;C<Y0.length;C++)u[Y0[C]].cancel(M)},state:a,steps:u}}const{schedule:Zn,cancel:Ku,state:ga,steps:jS}=oD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zs,!0),{schedule:y1}=oD(queueMicrotask,!1);let nv;function nF(){nv=void 0}const Wo={now:()=>(nv===void 0&&Wo.set(ga.isProcessing||WH.useManualTiming?ga.timestamp:performance.now()),nv),set:n=>{nv=n,queueMicrotask(nF)}},Jr={x:!1,y:!1};function lD(){return Jr.x||Jr.y}function iF(n){return n==="x"||n==="y"?Jr[n]?null:(Jr[n]=!0,()=>{Jr[n]=!1}):Jr.x||Jr.y?null:(Jr.x=Jr.y=!0,()=>{Jr.x=Jr.y=!1})}function aF(n,t,e){var i;if(n instanceof EventTarget)return[n];if(typeof n=="string"){let a=document;const r=(i=void 0)!==null&&i!==void 0?i:a.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}function uD(n,t){const e=aF(n),i=new AbortController,a={passive:!0,...t,signal:i.signal};return[e,a,()=>i.abort()]}function HA(n){return!(n.pointerType==="touch"||lD())}function sF(n,t,e={}){const[i,a,r]=uD(n,e),u=f=>{if(!HA(f))return;const{target:d}=f,p=t(d,f);if(typeof p!="function"||!d)return;const y=v=>{HA(v)&&(p(v),d.removeEventListener("pointerleave",y))};d.addEventListener("pointerleave",y,a)};return i.forEach(f=>{f.addEventListener("pointerenter",u,a)}),r}const cD=(n,t)=>t?n===t?!0:cD(n,t.parentElement):!1,v1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,rF=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oF(n){return rF.has(n.tagName)||n.tabIndex!==-1}const ym=new WeakSet;function FA(n){return t=>{t.key==="Enter"&&n(t)}}function YS(n,t){n.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const lF=(n,t)=>{const e=n.currentTarget;if(!e)return;const i=FA(()=>{if(ym.has(e))return;YS(e,"down");const a=FA(()=>{YS(e,"up")}),r=()=>YS(e,"cancel");e.addEventListener("keyup",a,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",i,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",i),t)};function GA(n){return v1(n)&&!lD()}function uF(n,t,e={}){const[i,a,r]=uD(n,e),u=f=>{const d=f.currentTarget;if(!GA(f)||ym.has(d))return;ym.add(d);const p=t(d,f),y=(b,E)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",_),!(!GA(b)||!ym.has(d))&&(ym.delete(d),typeof p=="function"&&p(b,{success:E}))},v=b=>{y(b,d===window||d===document||e.useGlobalTarget||cD(d,b.target))},_=b=>{y(b,!1)};window.addEventListener("pointerup",v,a),window.addEventListener("pointercancel",_,a)};return i.forEach(f=>{(e.useGlobalTarget?window:f).addEventListener("pointerdown",u,a),f instanceof HTMLElement&&(f.addEventListener("focus",p=>lF(p,a)),!oF(f)&&f.tabIndex===null&&(f.tabIndex=0))}),r}const qA=30,cF=n=>!isNaN(parseFloat(n));class fF{constructor(t,e={}){this.version="12.6.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,a=!0)=>{const r=Wo.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=Wo.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=cF(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new d1);const i=this.events[t].add(e);return t==="change"?()=>{i(),Zn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,i){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Wo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>qA)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,qA);return nD(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Jm(n,t){return new fF(n,t)}const fD=At.createContext({strict:!1}),XA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ed={};for(const n in XA)Ed[n]={isEnabled:t=>XA[n].some(e=>!!t[e])};function hF(n){for(const t in n)Ed[t]={...Ed[t],...n[t]}}const dF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Jv(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||dF.has(n)}let hD=n=>!Jv(n);function pF(n){n&&(hD=t=>t.startsWith("on")?!Jv(t):n(t))}try{pF(require("@emotion/is-prop-valid").default)}catch{}function mF(n,t,e){const i={};for(const a in n)a==="values"&&typeof n.values=="object"||(hD(a)||e===!0&&Jv(a)||!t&&!Jv(a)||n.draggable&&a.startsWith("onDrag"))&&(i[a]=n[a]);return i}function gF(n){if(typeof Proxy>"u")return n;const t=new Map,e=(...i)=>n(...i);return new Proxy(e,{get:(i,a)=>a==="create"?n:(t.has(a)||t.set(a,n(a)),t.get(a))})}const V_=At.createContext({});function H_(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function $m(n){return typeof n=="string"||Array.isArray(n)}const _1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],x1=["initial",..._1];function F_(n){return H_(n.animate)||x1.some(t=>$m(n[t]))}function dD(n){return!!(F_(n)||n.variants)}function yF(n,t){if(F_(n)){const{initial:e,animate:i}=n;return{initial:e===!1||$m(e)?e:void 0,animate:$m(i)?i:void 0}}return n.inherit!==!1?t:{}}function vF(n){const{initial:t,animate:e}=yF(n,At.useContext(V_));return At.useMemo(()=>({initial:t,animate:e}),[kA(t),kA(e)])}function kA(n){return Array.isArray(n)?n.join(" "):n}const _F=Symbol.for("motionComponentSymbol");function od(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function xF(n,t,e){return At.useCallback(i=>{i&&n.onMount&&n.onMount(i),t&&(i?t.mount(i):t.unmount()),e&&(typeof e=="function"?e(i):od(e)&&(e.current=i))},[t])}const S1=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),SF="framerAppearId",pD="data-"+S1(SF),mD=At.createContext({});function bF(n,t,e,i,a){var r,u;const{visualElement:f}=At.useContext(V_),d=At.useContext(fD),p=At.useContext(I_),y=At.useContext(u1).reducedMotion,v=At.useRef(null);i=i||d.renderer,!v.current&&i&&(v.current=i(n,{visualState:t,parent:f,props:e,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:y}));const _=v.current,b=At.useContext(mD);_&&!_.projection&&a&&(_.type==="html"||_.type==="svg")&&MF(v.current,e,a,b);const E=At.useRef(!1);At.useInsertionEffect(()=>{_&&E.current&&_.update(e,p)});const R=e[pD],T=At.useRef(!!R&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,R))&&((u=window.MotionHasOptimisedAnimation)===null||u===void 0?void 0:u.call(window,R)));return $2(()=>{_&&(E.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),y1.render(_.render),T.current&&_.animationState&&_.animationState.animateChanges())}),At.useEffect(()=>{_&&(!T.current&&_.animationState&&_.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)===null||M===void 0||M.call(window,R)}),T.current=!1))}),_}function MF(n,t,e,i){const{layoutId:a,layout:r,drag:u,dragConstraints:f,layoutScroll:d,layoutRoot:p}=t;n.projection=new e(n.latestValues,t["data-framer-portal-id"]?void 0:gD(n.parent)),n.projection.setOptions({layoutId:a,layout:r,alwaysMeasureLayout:!!u||f&&od(f),visualElement:n,animationType:typeof r=="string"?r:"both",initialPromotionConfig:i,layoutScroll:d,layoutRoot:p})}function gD(n){if(n)return n.options.allowProjection!==!1?n.projection:gD(n.parent)}function EF({preloadedFeatures:n,createVisualElement:t,useRender:e,useVisualState:i,Component:a}){var r,u;n&&hF(n);function f(p,y){let v;const _={...At.useContext(u1),...p,layoutId:TF(p)},{isStatic:b}=_,E=vF(p),R=i(p,b);if(!b&&l1){AF();const T=RF(_);v=T.MeasureLayout,E.visualElement=bF(a,R,_,t,T.ProjectionNode)}return oe.jsxs(V_.Provider,{value:E,children:[v&&E.visualElement?oe.jsx(v,{visualElement:E.visualElement,..._}):null,e(a,p,xF(R,E.visualElement,y),R,b,E.visualElement)]})}f.displayName=`motion.${typeof a=="string"?a:`create(${(u=(r=a.displayName)!==null&&r!==void 0?r:a.name)!==null&&u!==void 0?u:""})`}`;const d=At.forwardRef(f);return d[_F]=a,d}function TF({layoutId:n}){const t=At.useContext(r1).id;return t&&n!==void 0?t+"-"+n:n}function AF(n,t){At.useContext(fD).strict}function RF(n){const{drag:t,layout:e}=Ed;if(!t&&!e)return{};const i={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(n)||e!=null&&e.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const yD=n=>t=>typeof t=="string"&&t.startsWith(n),b1=yD("--"),wF=yD("var(--"),M1=n=>wF(n)?CF.test(n.split("/*")[0].trim()):!1,CF=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,tg={};function DF(n){for(const t in n)tg[t]=n[t],b1(t)&&(tg[t].isCSSVariable=!0)}const Nd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lf=new Set(Nd);function vD(n,{layout:t,layoutId:e}){return Lf.has(n)||n.startsWith("origin")||(t||e!==void 0)&&(!!tg[n]||n==="opacity")}const za=n=>!!(n&&n.getVelocity),_D=(n,t)=>t&&typeof n=="number"?t.transform(n):n,Hl=(n,t,e)=>e>t?t:e<n?n:e,Ld={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},eg={...Ld,transform:n=>Hl(0,1,n)},W0={...Ld,default:1},xg=n=>({test:t=>typeof t=="string"&&t.endsWith(n)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${n}`}),Gu=xg("deg"),Zo=xg("%"),De=xg("px"),OF=xg("vh"),UF=xg("vw"),jA={...Zo,parse:n=>Zo.parse(n)/100,transform:n=>Zo.transform(n*100)},NF={borderWidth:De,borderTopWidth:De,borderRightWidth:De,borderBottomWidth:De,borderLeftWidth:De,borderRadius:De,radius:De,borderTopLeftRadius:De,borderTopRightRadius:De,borderBottomRightRadius:De,borderBottomLeftRadius:De,width:De,maxWidth:De,height:De,maxHeight:De,top:De,right:De,bottom:De,left:De,padding:De,paddingTop:De,paddingRight:De,paddingBottom:De,paddingLeft:De,margin:De,marginTop:De,marginRight:De,marginBottom:De,marginLeft:De,backgroundPositionX:De,backgroundPositionY:De},LF={rotate:Gu,rotateX:Gu,rotateY:Gu,rotateZ:Gu,scale:W0,scaleX:W0,scaleY:W0,scaleZ:W0,skew:Gu,skewX:Gu,skewY:Gu,distance:De,translateX:De,translateY:De,translateZ:De,x:De,y:De,z:De,perspective:De,transformPerspective:De,opacity:eg,originX:jA,originY:jA,originZ:De},YA={...Ld,transform:Math.round},E1={...NF,...LF,zIndex:YA,size:De,fillOpacity:eg,strokeOpacity:eg,numOctaves:YA},PF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zF=Nd.length;function BF(n,t,e){let i="",a=!0;for(let r=0;r<zF;r++){const u=Nd[r],f=n[u];if(f===void 0)continue;let d=!0;if(typeof f=="number"?d=f===(u.startsWith("scale")?1:0):d=parseFloat(f)===0,!d||e){const p=_D(f,E1[u]);if(!d){a=!1;const y=PF[u]||u;i+=`${y}(${p}) `}e&&(t[u]=p)}}return i=i.trim(),e?i=e(t,a?"":i):a&&(i="none"),i}function T1(n,t,e){const{style:i,vars:a,transformOrigin:r}=n;let u=!1,f=!1;for(const d in t){const p=t[d];if(Lf.has(d)){u=!0;continue}else if(b1(d)){a[d]=p;continue}else{const y=_D(p,E1[d]);d.startsWith("origin")?(f=!0,r[d]=y):i[d]=y}}if(t.transform||(u||e?i.transform=BF(t,n.transform,e):i.transform&&(i.transform="none")),f){const{originX:d="50%",originY:p="50%",originZ:y=0}=r;i.transformOrigin=`${d} ${p} ${y}`}}const A1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xD(n,t,e){for(const i in t)!za(t[i])&&!vD(i,e)&&(n[i]=t[i])}function IF({transformTemplate:n},t){return At.useMemo(()=>{const e=A1();return T1(e,t,n),Object.assign({},e.vars,e.style)},[t])}function VF(n,t){const e=n.style||{},i={};return xD(i,e,n),Object.assign(i,IF(n,t)),i}function HF(n,t){const e={},i=VF(n,t);return n.drag&&n.dragListener!==!1&&(e.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(e.tabIndex=0),e.style=i,e}const FF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function R1(n){return typeof n!="string"||n.includes("-")?!1:!!(FF.indexOf(n)>-1||/[A-Z]/u.test(n))}const GF={offset:"stroke-dashoffset",array:"stroke-dasharray"},qF={offset:"strokeDashoffset",array:"strokeDasharray"};function XF(n,t,e=1,i=0,a=!0){n.pathLength=1;const r=a?GF:qF;n[r.offset]=De.transform(-i);const u=De.transform(t),f=De.transform(e);n[r.array]=`${u} ${f}`}function WA(n,t,e){return typeof n=="string"?n:De.transform(t+e*n)}function kF(n,t,e){const i=WA(t,n.x,n.width),a=WA(e,n.y,n.height);return`${i} ${a}`}function w1(n,{attrX:t,attrY:e,attrScale:i,originX:a,originY:r,pathLength:u,pathSpacing:f=1,pathOffset:d=0,...p},y,v){if(T1(n,p,v),y){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:_,style:b,dimensions:E}=n;_.transform&&(E&&(b.transform=_.transform),delete _.transform),E&&(a!==void 0||r!==void 0||b.transform)&&(b.transformOrigin=kF(E,a!==void 0?a:.5,r!==void 0?r:.5)),t!==void 0&&(_.x=t),e!==void 0&&(_.y=e),i!==void 0&&(_.scale=i),u!==void 0&&XF(_,u,f,d,!1)}const SD=()=>({...A1(),attrs:{}}),C1=n=>typeof n=="string"&&n.toLowerCase()==="svg";function jF(n,t,e,i){const a=At.useMemo(()=>{const r=SD();return w1(r,t,C1(i),n.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(n.style){const r={};xD(r,n.style,n),a.style={...r,...a.style}}return a}function YF(n=!1){return(e,i,a,{latestValues:r},u)=>{const d=(R1(e)?jF:HF)(i,r,u,e),p=mF(i,typeof e=="string",n),y=e!==At.Fragment?{...p,...d,ref:a}:{},{children:v}=i,_=At.useMemo(()=>za(v)?v.get():v,[v]);return At.createElement(e,{...y,children:_})}}function ZA(n){const t=[{},{}];return n==null||n.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function D1(n,t,e,i){if(typeof t=="function"){const[a,r]=ZA(i);t=t(e!==void 0?e:n.custom,a,r)}if(typeof t=="string"&&(t=n.variants&&n.variants[t]),typeof t=="function"){const[a,r]=ZA(i);t=t(e!==void 0?e:n.custom,a,r)}return t}const kb=n=>Array.isArray(n),WF=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),ZF=n=>kb(n)?n[n.length-1]||0:n;function iv(n){const t=za(n)?n.get():n;return WF(t)?t.toValue():t}function KF({scrapeMotionValuesFromProps:n,createRenderState:t,onUpdate:e},i,a,r){const u={latestValues:QF(i,a,r,n),renderState:t()};return e&&(u.onMount=f=>e({props:i,current:f,...u}),u.onUpdate=f=>e(f)),u}const bD=n=>(t,e)=>{const i=At.useContext(V_),a=At.useContext(I_),r=()=>KF(n,t,i,a);return e?r():o1(r)};function QF(n,t,e,i){const a={},r=i(n,{});for(const _ in r)a[_]=iv(r[_]);let{initial:u,animate:f}=n;const d=F_(n),p=dD(n);t&&p&&!d&&n.inherit!==!1&&(u===void 0&&(u=t.initial),f===void 0&&(f=t.animate));let y=e?e.initial===!1:!1;y=y||u===!1;const v=y?f:u;if(v&&typeof v!="boolean"&&!H_(v)){const _=Array.isArray(v)?v:[v];for(let b=0;b<_.length;b++){const E=D1(n,_[b]);if(E){const{transitionEnd:R,transition:T,...M}=E;for(const C in M){let D=M[C];if(Array.isArray(D)){const O=y?D.length-1:0;D=D[O]}D!==null&&(a[C]=D)}for(const C in R)a[C]=R[C]}}}return a}function O1(n,t,e){var i;const{style:a}=n,r={};for(const u in a)(za(a[u])||t.style&&za(t.style[u])||vD(u,n)||((i=e==null?void 0:e.getValue(u))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(r[u]=a[u]);return r}const JF={useVisualState:bD({scrapeMotionValuesFromProps:O1,createRenderState:A1})};function MD(n,t){try{t.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function ED(n,{style:t,vars:e},i,a){Object.assign(n.style,t,a&&a.getProjectionStyles(i));for(const r in e)n.style.setProperty(r,e[r])}const TD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function AD(n,t,e,i){ED(n,t,void 0,i);for(const a in t.attrs)n.setAttribute(TD.has(a)?a:S1(a),t.attrs[a])}function RD(n,t,e){const i=O1(n,t,e);for(const a in n)if(za(n[a])||za(t[a])){const r=Nd.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;i[r]=n[a]}return i}const KA=["x","y","width","height","cx","cy","r"],$F={useVisualState:bD({scrapeMotionValuesFromProps:RD,createRenderState:SD,onUpdate:({props:n,prevProps:t,current:e,renderState:i,latestValues:a})=>{if(!e)return;let r=!!n.drag;if(!r){for(const f in a)if(Lf.has(f)){r=!0;break}}if(!r)return;let u=!t;if(t)for(let f=0;f<KA.length;f++){const d=KA[f];n[d]!==t[d]&&(u=!0)}u&&Zn.read(()=>{MD(e,i),Zn.render(()=>{w1(i,a,C1(e.tagName),n.transformTemplate),AD(e,i)})})}})};function t5(n,t){return function(i,{forwardMotionProps:a}={forwardMotionProps:!1}){const u={...R1(i)?$F:JF,preloadedFeatures:n,useRender:YF(a),createVisualElement:t,Component:i};return EF(u)}}function ng(n,t,e){const i=n.getProps();return D1(i,t,e!==void 0?e:i.custom,n)}const wD=new Set(["width","height","top","left","right","bottom",...Nd]);function e5(n,t,e){n.hasValue(t)?n.getValue(t).set(e):n.addValue(t,Jm(e))}function n5(n,t){const e=ng(n,t);let{transitionEnd:i={},transition:a={},...r}=e||{};r={...r,...i};for(const u in r){const f=ZF(r[u]);e5(n,u,f)}}function i5(n){return!!(za(n)&&n.add)}function jb(n,t){const e=n.getValue("willChange");if(i5(e))return e.add(t)}function CD(n){return n.props[pD]}const DD=(n,t,e)=>(((1-3*e+3*t)*n+(3*e-6*t))*n+3*t)*n,a5=1e-7,s5=12;function r5(n,t,e,i,a){let r,u,f=0;do u=t+(e-t)/2,r=DD(u,i,a)-n,r>0?e=u:t=u;while(Math.abs(r)>a5&&++f<s5);return u}function Sg(n,t,e,i){if(n===t&&e===i)return Zs;const a=r=>r5(r,0,1,n,e);return r=>r===0||r===1?r:DD(a(r),t,i)}const OD=n=>t=>t<=.5?n(2*t)/2:(2-n(2*(1-t)))/2,UD=n=>t=>1-n(1-t),ND=Sg(.33,1.53,.69,.99),U1=UD(ND),LD=OD(U1),PD=n=>(n*=2)<1?.5*U1(n):.5*(2-Math.pow(2,-10*(n-1))),N1=n=>1-Math.sin(Math.acos(n)),zD=UD(N1),BD=OD(N1),ID=n=>/^0[^.\s]+$/u.test(n);function o5(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||ID(n):!0}const Cm=n=>Math.round(n*1e5)/1e5,L1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function l5(n){return n==null}const u5=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,P1=(n,t)=>e=>!!(typeof e=="string"&&u5.test(e)&&e.startsWith(n)||t&&!l5(e)&&Object.prototype.hasOwnProperty.call(e,t)),VD=(n,t,e)=>i=>{if(typeof i!="string")return i;const[a,r,u,f]=i.match(L1);return{[n]:parseFloat(a),[t]:parseFloat(r),[e]:parseFloat(u),alpha:f!==void 0?parseFloat(f):1}},c5=n=>Hl(0,255,n),WS={...Ld,transform:n=>Math.round(c5(n))},vf={test:P1("rgb","red"),parse:VD("red","green","blue"),transform:({red:n,green:t,blue:e,alpha:i=1})=>"rgba("+WS.transform(n)+", "+WS.transform(t)+", "+WS.transform(e)+", "+Cm(eg.transform(i))+")"};function f5(n){let t="",e="",i="",a="";return n.length>5?(t=n.substring(1,3),e=n.substring(3,5),i=n.substring(5,7),a=n.substring(7,9)):(t=n.substring(1,2),e=n.substring(2,3),i=n.substring(3,4),a=n.substring(4,5),t+=t,e+=e,i+=i,a+=a),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(i,16),alpha:a?parseInt(a,16)/255:1}}const Yb={test:P1("#"),parse:f5,transform:vf.transform},ld={test:P1("hsl","hue"),parse:VD("hue","saturation","lightness"),transform:({hue:n,saturation:t,lightness:e,alpha:i=1})=>"hsla("+Math.round(n)+", "+Zo.transform(Cm(t))+", "+Zo.transform(Cm(e))+", "+Cm(eg.transform(i))+")"},Ua={test:n=>vf.test(n)||Yb.test(n)||ld.test(n),parse:n=>vf.test(n)?vf.parse(n):ld.test(n)?ld.parse(n):Yb.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?vf.transform(n):ld.transform(n)},h5=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function d5(n){var t,e;return isNaN(n)&&typeof n=="string"&&(((t=n.match(L1))===null||t===void 0?void 0:t.length)||0)+(((e=n.match(h5))===null||e===void 0?void 0:e.length)||0)>0}const HD="number",FD="color",p5="var",m5="var(",QA="${}",g5=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ig(n){const t=n.toString(),e=[],i={color:[],number:[],var:[]},a=[];let r=0;const f=t.replace(g5,d=>(Ua.test(d)?(i.color.push(r),a.push(FD),e.push(Ua.parse(d))):d.startsWith(m5)?(i.var.push(r),a.push(p5),e.push(d)):(i.number.push(r),a.push(HD),e.push(parseFloat(d))),++r,QA)).split(QA);return{values:e,split:f,indexes:i,types:a}}function GD(n){return ig(n).values}function qD(n){const{split:t,types:e}=ig(n),i=t.length;return a=>{let r="";for(let u=0;u<i;u++)if(r+=t[u],a[u]!==void 0){const f=e[u];f===HD?r+=Cm(a[u]):f===FD?r+=Ua.transform(a[u]):r+=a[u]}return r}}const y5=n=>typeof n=="number"?0:n;function v5(n){const t=GD(n);return qD(n)(t.map(y5))}const Qu={test:d5,parse:GD,createTransformer:qD,getAnimatableNone:v5},_5=new Set(["brightness","contrast","saturate","opacity"]);function x5(n){const[t,e]=n.slice(0,-1).split("(");if(t==="drop-shadow")return n;const[i]=e.match(L1)||[];if(!i)return n;const a=e.replace(i,"");let r=_5.has(t)?1:0;return i!==e&&(r*=100),t+"("+r+a+")"}const S5=/\b([a-z-]*)\(.*?\)/gu,Wb={...Qu,getAnimatableNone:n=>{const t=n.match(S5);return t?t.map(x5).join(" "):n}},b5={...E1,color:Ua,backgroundColor:Ua,outlineColor:Ua,fill:Ua,stroke:Ua,borderColor:Ua,borderTopColor:Ua,borderRightColor:Ua,borderBottomColor:Ua,borderLeftColor:Ua,filter:Wb,WebkitFilter:Wb},XD=n=>b5[n];function kD(n,t){let e=XD(n);return e!==Wb&&(e=Qu),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const M5=new Set(["auto","none","0"]);function E5(n,t,e){let i=0,a;for(;i<n.length&&!a;){const r=n[i];typeof r=="string"&&!M5.has(r)&&ig(r).values.length&&(a=n[i]),i++}if(a&&e)for(const r of t)n[r]=kD(e,a)}const _f=n=>n*180/Math.PI,Zb=n=>{const t=_f(Math.atan2(n[1],n[0]));return Kb(t)},T5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Zb,rotateZ:Zb,skewX:n=>_f(Math.atan(n[1])),skewY:n=>_f(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Kb=n=>(n=n%360,n<0&&(n+=360),n),JA=Zb,$A=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),tR=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),A5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$A,scaleY:tR,scale:n=>($A(n)+tR(n))/2,rotateX:n=>Kb(_f(Math.atan2(n[6],n[5]))),rotateY:n=>Kb(_f(Math.atan2(-n[2],n[0]))),rotateZ:JA,rotate:JA,skewX:n=>_f(Math.atan(n[4])),skewY:n=>_f(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function eR(n){return n.includes("scale")?1:0}function Qb(n,t){if(!n||n==="none")return eR(t);const e=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,a;if(e)i=A5,a=e;else{const f=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=T5,a=f}if(!a)return eR(t);const r=i[t],u=a[1].split(",").map(w5);return typeof r=="function"?r(u):u[r]}const R5=(n,t)=>{const{transform:e="none"}=getComputedStyle(n);return Qb(e,t)};function w5(n){return parseFloat(n.trim())}const nR=n=>n===Ld||n===De,C5=new Set(["x","y","z"]),D5=Nd.filter(n=>!C5.has(n));function O5(n){const t=[];return D5.forEach(e=>{const i=n.getValue(e);i!==void 0&&(t.push([e,i.get()]),i.set(e.startsWith("scale")?1:0))}),t}const Td={width:({x:n},{paddingLeft:t="0",paddingRight:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),height:({y:n},{paddingTop:t="0",paddingBottom:e="0"})=>n.max-n.min-parseFloat(t)-parseFloat(e),top:(n,{top:t})=>parseFloat(t),left:(n,{left:t})=>parseFloat(t),bottom:({y:n},{top:t})=>parseFloat(t)+(n.max-n.min),right:({x:n},{left:t})=>parseFloat(t)+(n.max-n.min),x:(n,{transform:t})=>Qb(t,"x"),y:(n,{transform:t})=>Qb(t,"y")};Td.translateX=Td.x;Td.translateY=Td.y;const Ef=new Set;let Jb=!1,$b=!1;function jD(){if($b){const n=Array.from(Ef).filter(i=>i.needsMeasurement),t=new Set(n.map(i=>i.element)),e=new Map;t.forEach(i=>{const a=O5(i);a.length&&(e.set(i,a),i.render())}),n.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const a=e.get(i);a&&a.forEach(([r,u])=>{var f;(f=i.getValue(r))===null||f===void 0||f.set(u)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}$b=!1,Jb=!1,Ef.forEach(n=>n.complete()),Ef.clear()}function YD(){Ef.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&($b=!0)})}function U5(){YD(),jD()}class z1{constructor(t,e,i,a,r,u=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=i,this.motionValue=a,this.element=r,this.isAsync=u}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ef.add(this),Jb||(Jb=!0,Zn.read(YD),Zn.resolveKeyframes(jD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:i,motionValue:a}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const u=a==null?void 0:a.get(),f=t[t.length-1];if(u!==void 0)t[0]=u;else if(i&&e){const d=i.readValue(e,f);d!=null&&(t[0]=d)}t[0]===void 0&&(t[0]=f),a&&u===void 0&&a.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ef.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ef.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const WD=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),N5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function L5(n){const t=N5.exec(n);if(!t)return[,];const[,e,i,a]=t;return[`--${e??i}`,a]}function ZD(n,t,e=1){const[i,a]=L5(n);if(!i)return;const r=window.getComputedStyle(t).getPropertyValue(i);if(r){const u=r.trim();return WD(u)?parseFloat(u):u}return M1(a)?ZD(a,t,e+1):a}const KD=n=>t=>t.test(n),P5={test:n=>n==="auto",parse:n=>n},QD=[Ld,De,Zo,Gu,UF,OF,P5],iR=n=>QD.find(KD(n));class JD extends z1{constructor(t,e,i,a,r){super(t,e,i,a,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:i}=this;if(!e||!e.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let p=t[d];if(typeof p=="string"&&(p=p.trim(),M1(p))){const y=ZD(p,e.current);y!==void 0&&(t[d]=y),d===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!wD.has(i)||t.length!==2)return;const[a,r]=t,u=iR(a),f=iR(r);if(u!==f)if(nR(u)&&nR(f))for(let d=0;d<t.length;d++){const p=t[d];typeof p=="string"&&(t[d]=parseFloat(p))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,i=[];for(let a=0;a<t.length;a++)o5(t[a])&&i.push(a);i.length&&E5(t,i,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Td[i](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const a=e[e.length-1];a!==void 0&&t.getValue(i,a).jump(a,!1)}measureEndState(){var t;const{element:e,name:i,unresolvedKeyframes:a}=this;if(!e||!e.current)return;const r=e.getValue(i);r&&r.jump(this.measuredOrigin,!1);const u=a.length-1,f=a[u];a[u]=Td[i](e.measureViewportBox(),window.getComputedStyle(e.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([d,p])=>{e.getValue(d).set(p)}),this.resolveNoneKeyframes()}}const aR=(n,t)=>t==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Qu.test(n)||n==="0")&&!n.startsWith("url("));function z5(n){const t=n[0];if(n.length===1)return!0;for(let e=0;e<n.length;e++)if(n[e]!==t)return!0}function B5(n,t,e,i){const a=n[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const r=n[n.length-1],u=aR(a,t),f=aR(r,t);return!u||!f?!1:z5(n)||(e==="spring"||m1(e))&&i}const I5=n=>n!==null;function G_(n,{repeat:t,repeatType:e="loop"},i){const a=n.filter(I5),r=t&&e!=="loop"&&t%2===1?0:a.length-1;return!r||i===void 0?a[r]:i}const V5=40;class $D{constructor({autoplay:t=!0,delay:e=0,type:i="keyframes",repeat:a=0,repeatDelay:r=0,repeatType:u="loop",...f}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Wo.now(),this.options={autoplay:t,delay:e,type:i,repeat:a,repeatDelay:r,repeatType:u,...f},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>V5?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&U5(),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=Wo.now(),this.hasAttemptedResolve=!0;const{name:i,type:a,velocity:r,delay:u,onComplete:f,onUpdate:d,isGenerator:p}=this.options;if(!p&&!B5(t,i,a,r))if(u)this.options.duration=0;else{d&&d(G_(t,this.options,e)),f&&f(),this.resolveFinishedPromise();return}const y=this.initPlayback(t,e);y!==!1&&(this._resolved={keyframes:t,finalKeyframe:e,...y},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const ci=(n,t,e)=>n+(t-n)*e;function ZS(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*(2/3-e)*6:n}function H5({hue:n,saturation:t,lightness:e,alpha:i}){n/=360,t/=100,e/=100;let a=0,r=0,u=0;if(!t)a=r=u=e;else{const f=e<.5?e*(1+t):e+t-e*t,d=2*e-f;a=ZS(d,f,n+1/3),r=ZS(d,f,n),u=ZS(d,f,n-1/3)}return{red:Math.round(a*255),green:Math.round(r*255),blue:Math.round(u*255),alpha:i}}function $v(n,t){return e=>e>0?t:n}const KS=(n,t,e)=>{const i=n*n,a=e*(t*t-i)+i;return a<0?0:Math.sqrt(a)},F5=[Yb,vf,ld],G5=n=>F5.find(t=>t.test(n));function sR(n){const t=G5(n);if(!t)return!1;let e=t.parse(n);return t===ld&&(e=H5(e)),e}const rR=(n,t)=>{const e=sR(n),i=sR(t);if(!e||!i)return $v(n,t);const a={...e};return r=>(a.red=KS(e.red,i.red,r),a.green=KS(e.green,i.green,r),a.blue=KS(e.blue,i.blue,r),a.alpha=ci(e.alpha,i.alpha,r),vf.transform(a))},q5=(n,t)=>e=>t(n(e)),bg=(...n)=>n.reduce(q5),tM=new Set(["none","hidden"]);function X5(n,t){return tM.has(n)?e=>e<=0?n:t:e=>e>=1?t:n}function k5(n,t){return e=>ci(n,t,e)}function B1(n){return typeof n=="number"?k5:typeof n=="string"?M1(n)?$v:Ua.test(n)?rR:W5:Array.isArray(n)?t3:typeof n=="object"?Ua.test(n)?rR:j5:$v}function t3(n,t){const e=[...n],i=e.length,a=n.map((r,u)=>B1(r)(r,t[u]));return r=>{for(let u=0;u<i;u++)e[u]=a[u](r);return e}}function j5(n,t){const e={...n,...t},i={};for(const a in e)n[a]!==void 0&&t[a]!==void 0&&(i[a]=B1(n[a])(n[a],t[a]));return a=>{for(const r in i)e[r]=i[r](a);return e}}function Y5(n,t){var e;const i=[],a={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const u=t.types[r],f=n.indexes[u][a[u]],d=(e=n.values[f])!==null&&e!==void 0?e:0;i[r]=d,a[u]++}return i}const W5=(n,t)=>{const e=Qu.createTransformer(t),i=ig(n),a=ig(t);return i.indexes.var.length===a.indexes.var.length&&i.indexes.color.length===a.indexes.color.length&&i.indexes.number.length>=a.indexes.number.length?tM.has(n)&&!a.values.length||tM.has(t)&&!i.values.length?X5(n,t):bg(t3(Y5(i,a),a.values),e):$v(n,t)};function e3(n,t,e){return typeof n=="number"&&typeof t=="number"&&typeof e=="number"?ci(n,t,e):B1(n)(n,t)}const Z5=5;function n3(n,t,e){const i=Math.max(t-Z5,0);return nD(e-n(i),t-i)}const vi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},oR=.001;function K5({duration:n=vi.duration,bounce:t=vi.bounce,velocity:e=vi.velocity,mass:i=vi.mass}){let a,r,u=1-t;u=Hl(vi.minDamping,vi.maxDamping,u),n=Hl(vi.minDuration,vi.maxDuration,zl(n)),u<1?(a=p=>{const y=p*u,v=y*n,_=y-e,b=eM(p,u),E=Math.exp(-v);return oR-_/b*E},r=p=>{const v=p*u*n,_=v*e+e,b=Math.pow(u,2)*Math.pow(p,2)*n,E=Math.exp(-v),R=eM(Math.pow(p,2),u);return(-a(p)+oR>0?-1:1)*((_-b)*E)/R}):(a=p=>{const y=Math.exp(-p*n),v=(p-e)*n+1;return-.001+y*v},r=p=>{const y=Math.exp(-p*n),v=(e-p)*(n*n);return y*v});const f=5/n,d=J5(a,r,f);if(n=Pl(n),isNaN(d))return{stiffness:vi.stiffness,damping:vi.damping,duration:n};{const p=Math.pow(d,2)*i;return{stiffness:p,damping:u*2*Math.sqrt(i*p),duration:n}}}const Q5=12;function J5(n,t,e){let i=e;for(let a=1;a<Q5;a++)i=i-n(i)/t(i);return i}function eM(n,t){return n*Math.sqrt(1-t*t)}const $5=["duration","bounce"],t6=["stiffness","damping","mass"];function lR(n,t){return t.some(e=>n[e]!==void 0)}function e6(n){let t={velocity:vi.velocity,stiffness:vi.stiffness,damping:vi.damping,mass:vi.mass,isResolvedFromDuration:!1,...n};if(!lR(n,t6)&&lR(n,$5))if(n.visualDuration){const e=n.visualDuration,i=2*Math.PI/(e*1.2),a=i*i,r=2*Hl(.05,1,1-(n.bounce||0))*Math.sqrt(a);t={...t,mass:vi.mass,stiffness:a,damping:r}}else{const e=K5(n);t={...t,...e,mass:vi.mass},t.isResolvedFromDuration=!0}return t}function i3(n=vi.visualDuration,t=vi.bounce){const e=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:t}:n;let{restSpeed:i,restDelta:a}=e;const r=e.keyframes[0],u=e.keyframes[e.keyframes.length-1],f={done:!1,value:r},{stiffness:d,damping:p,mass:y,duration:v,velocity:_,isResolvedFromDuration:b}=e6({...e,velocity:-zl(e.velocity||0)}),E=_||0,R=p/(2*Math.sqrt(d*y)),T=u-r,M=zl(Math.sqrt(d/y)),C=Math.abs(T)<5;i||(i=C?vi.restSpeed.granular:vi.restSpeed.default),a||(a=C?vi.restDelta.granular:vi.restDelta.default);let D;if(R<1){const N=eM(M,R);D=L=>{const H=Math.exp(-R*M*L);return u-H*((E+R*M*T)/N*Math.sin(N*L)+T*Math.cos(N*L))}}else if(R===1)D=N=>u-Math.exp(-M*N)*(T+(E+M*T)*N);else{const N=M*Math.sqrt(R*R-1);D=L=>{const H=Math.exp(-R*M*L),G=Math.min(N*L,300);return u-H*((E+R*M*T)*Math.sinh(G)+N*T*Math.cosh(G))/N}}const O={calculatedDuration:b&&v||null,next:N=>{const L=D(N);if(b)f.done=N>=v;else{let H=0;R<1&&(H=N===0?Pl(E):n3(D,N,L));const G=Math.abs(H)<=i,B=Math.abs(u-L)<=a;f.done=G&&B}return f.value=f.done?u:L,f},toString:()=>{const N=Math.min(iD(O),qb),L=aD(H=>O.next(N*H).value,N,30);return N+"ms "+L}};return O}function uR({keyframes:n,velocity:t=0,power:e=.8,timeConstant:i=325,bounceDamping:a=10,bounceStiffness:r=500,modifyTarget:u,min:f,max:d,restDelta:p=.5,restSpeed:y}){const v=n[0],_={done:!1,value:v},b=G=>f!==void 0&&G<f||d!==void 0&&G>d,E=G=>f===void 0?d:d===void 0||Math.abs(f-G)<Math.abs(d-G)?f:d;let R=e*t;const T=v+R,M=u===void 0?T:u(T);M!==T&&(R=M-v);const C=G=>-R*Math.exp(-G/i),D=G=>M+C(G),O=G=>{const B=C(G),z=D(G);_.done=Math.abs(B)<=p,_.value=_.done?M:z};let N,L;const H=G=>{b(_.value)&&(N=G,L=i3({keyframes:[_.value,E(_.value)],velocity:n3(D,G,_.value),damping:a,stiffness:r,restDelta:p,restSpeed:y}))};return H(0),{calculatedDuration:null,next:G=>{let B=!1;return!L&&N===void 0&&(B=!0,O(G),H(G)),N!==void 0&&G>=N?L.next(G-N):(!B&&O(G),_)}}}const n6=Sg(.42,0,1,1),i6=Sg(0,0,.58,1),a3=Sg(.42,0,.58,1),a6=n=>Array.isArray(n)&&typeof n[0]!="number",s6={linear:Zs,easeIn:n6,easeInOut:a3,easeOut:i6,circIn:N1,circInOut:BD,circOut:zD,backIn:U1,backInOut:LD,backOut:ND,anticipate:PD},cR=n=>{if(g1(n)){eD(n.length===4);const[t,e,i,a]=n;return Sg(t,e,i,a)}else if(typeof n=="string")return s6[n];return n};function r6(n,t,e){const i=[],a=e||e3,r=n.length-1;for(let u=0;u<r;u++){let f=a(n[u],n[u+1]);if(t){const d=Array.isArray(t)?t[u]||Zs:t;f=bg(d,f)}i.push(f)}return i}function o6(n,t,{clamp:e=!0,ease:i,mixer:a}={}){const r=n.length;if(eD(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const u=n[0]===n[1];n[0]>n[r-1]&&(n=[...n].reverse(),t=[...t].reverse());const f=r6(t,i,a),d=f.length,p=y=>{if(u&&y<n[0])return t[0];let v=0;if(d>1)for(;v<n.length-2&&!(y<n[v+1]);v++);const _=Md(n[v],n[v+1],y);return f[v](_)};return e?y=>p(Hl(n[0],n[r-1],y)):p}function l6(n,t){const e=n[n.length-1];for(let i=1;i<=t;i++){const a=Md(0,t,i);n.push(ci(e,1,a))}}function u6(n){const t=[0];return l6(t,n.length-1),t}function c6(n,t){return n.map(e=>e*t)}function f6(n,t){return n.map(()=>t||a3).splice(0,n.length-1)}function t_({duration:n=300,keyframes:t,times:e,ease:i="easeInOut"}){const a=a6(i)?i.map(cR):cR(i),r={done:!1,value:t[0]},u=c6(e&&e.length===t.length?e:u6(t),n),f=o6(u,t,{ease:Array.isArray(a)?a:f6(t,a)});return{calculatedDuration:n,next:d=>(r.value=f(d),r.done=d>=n,r)}}const h6=n=>{const t=({timestamp:e})=>n(e);return{start:()=>Zn.update(t,!0),stop:()=>Ku(t),now:()=>ga.isProcessing?ga.timestamp:Wo.now()}},d6={decay:uR,inertia:uR,tween:t_,keyframes:t_,spring:i3},p6=n=>n/100;class I1 extends $D{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:e,motionValue:i,element:a,keyframes:r}=this.options,u=(a==null?void 0:a.KeyframeResolver)||z1,f=(d,p)=>this.onKeyframesResolved(d,p);this.resolver=new u(r,f,e,i,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:r,velocity:u=0}=this.options,f=m1(e)?e:d6[e]||t_;let d,p;f!==t_&&typeof t[0]!="number"&&(d=bg(p6,e3(t[0],t[1])),t=[0,100]);const y=f({...this.options,keyframes:t});r==="mirror"&&(p=f({...this.options,keyframes:[...t].reverse(),velocity:-u})),y.calculatedDuration===null&&(y.calculatedDuration=iD(y));const{calculatedDuration:v}=y,_=v+a,b=_*(i+1)-a;return{generator:y,mirroredGenerator:p,mapPercentToKeyframes:d,calculatedDuration:v,resolvedDuration:_,totalDuration:b}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,e=!1){const{resolved:i}=this;if(!i){const{keyframes:G}=this.options;return{done:!0,value:G[G.length-1]}}const{finalKeyframe:a,generator:r,mirroredGenerator:u,mapPercentToKeyframes:f,keyframes:d,calculatedDuration:p,totalDuration:y,resolvedDuration:v}=i;if(this.startTime===null)return r.next(0);const{delay:_,repeat:b,repeatType:E,repeatDelay:R,onUpdate:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-y/this.speed,this.startTime)),e?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const M=this.currentTime-_*(this.speed>=0?1:-1),C=this.speed>=0?M<0:M>y;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let D=this.currentTime,O=r;if(b){const G=Math.min(this.currentTime,y)/v;let B=Math.floor(G),z=G%1;!z&&G>=1&&(z=1),z===1&&B--,B=Math.min(B,b+1),!!(B%2)&&(E==="reverse"?(z=1-z,R&&(z-=R/v)):E==="mirror"&&(O=u)),D=Hl(0,1,z)*v}const N=C?{done:!1,value:d[0]}:O.next(D);f&&(N.value=f(N.value));let{done:L}=N;!C&&p!==null&&(L=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const H=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return H&&a!==void 0&&(N.value=G_(d,this.options,a)),T&&T(N.value),H&&this.finish(),N}get duration(){const{resolved:t}=this;return t?zl(t.calculatedDuration):0}get time(){return zl(this.currentTime)}set time(t){t=Pl(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=zl(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=h6,onPlay:e,startTime:i}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),e&&e();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const m6=new Set(["opacity","clipPath","filter","transform"]);function g6(n,t,e,{delay:i=0,duration:a=300,repeat:r=0,repeatType:u="loop",ease:f="easeInOut",times:d}={}){const p={[t]:e};d&&(p.offset=d);const y=rD(f,a);return Array.isArray(y)&&(p.easing=y),n.animate(p,{delay:i,duration:a,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:r+1,direction:u==="reverse"?"alternate":"normal"})}const y6=h1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),e_=10,v6=2e4;function _6(n){return m1(n.type)||n.type==="spring"||!sD(n.ease)}function x6(n,t){const e=new I1({...t,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const a=[];let r=0;for(;!i.done&&r<v6;)i=e.sample(r),a.push(i.value),r+=e_;return{times:void 0,keyframes:a,duration:r-e_,ease:"linear"}}const s3={anticipate:PD,backInOut:LD,circInOut:BD};function S6(n){return n in s3}class fR extends $D{constructor(t){super(t);const{name:e,motionValue:i,element:a,keyframes:r}=this.options;this.resolver=new JD(r,(u,f)=>this.onKeyframesResolved(u,f),e,i,a),this.resolver.scheduleResolve()}initPlayback(t,e){let{duration:i=300,times:a,ease:r,type:u,motionValue:f,name:d,startTime:p}=this.options;if(!f.owner||!f.owner.current)return!1;if(typeof r=="string"&&Qv()&&S6(r)&&(r=s3[r]),_6(this.options)){const{onComplete:v,onUpdate:_,motionValue:b,element:E,...R}=this.options,T=x6(t,R);t=T.keyframes,t.length===1&&(t[1]=t[0]),i=T.duration,a=T.times,r=T.ease,u="keyframes"}const y=g6(f.owner.current,d,t,{...this.options,duration:i,times:a,ease:r});return y.startTime=p??this.calcStartTime(),this.pendingTimeline?(IA(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:v}=this.options;f.set(G_(t,this.options,e)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:i,times:a,type:u,ease:r,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return zl(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return zl(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.currentTime=Pl(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:e}=this;if(!e)return Zs;const{animation:i}=e;IA(i,t)}return Zs}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.playState==="finished"&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:i,duration:a,type:r,ease:u,times:f}=t;if(e.playState==="idle"||e.playState==="finished")return;if(this.time){const{motionValue:p,onUpdate:y,onComplete:v,element:_,...b}=this.options,E=new I1({...b,keyframes:i,duration:a,type:r,ease:u,times:f,isGenerator:!0}),R=Pl(this.time);p.setWithVelocity(E.sample(R-e_).value,E.sample(R).value,e_)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:i,repeatDelay:a,repeatType:r,damping:u,type:f}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:p}=e.owner.getProps();return y6()&&i&&m6.has(i)&&(i!=="transform"||!p)&&!d&&!a&&r!=="mirror"&&u!==0&&f!=="inertia"}}const b6={type:"spring",stiffness:500,damping:25,restSpeed:10},M6=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),E6={type:"keyframes",duration:.8},T6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},A6=(n,{keyframes:t})=>t.length>2?E6:Lf.has(n)?n.startsWith("scale")?M6(t[1]):b6:T6;function R6({when:n,delay:t,delayChildren:e,staggerChildren:i,staggerDirection:a,repeat:r,repeatType:u,repeatDelay:f,from:d,elapsed:p,...y}){return!!Object.keys(y).length}const V1=(n,t,e,i={},a,r)=>u=>{const f=p1(i,n)||{},d=f.delay||i.delay||0;let{elapsed:p=0}=i;p=p-Pl(d);let y={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...f,delay:-p,onUpdate:_=>{t.set(_),f.onUpdate&&f.onUpdate(_)},onComplete:()=>{u(),f.onComplete&&f.onComplete()},name:n,motionValue:t,element:r?void 0:a};R6(f)||(y={...y,...A6(n,y)}),y.duration&&(y.duration=Pl(y.duration)),y.repeatDelay&&(y.repeatDelay=Pl(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let v=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(v=!0)),y.allowFlatten=!f.type&&!f.ease,v&&!r&&t.get()!==void 0){const _=G_(y.keyframes,f);if(_!==void 0)return Zn.update(()=>{y.onUpdate(_),y.onComplete()}),new QH([])}return!r&&fR.supports(y)?new fR(y):new I1(y)};function w6({protectedKeys:n,needsAnimating:t},e){const i=n.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,i}function r3(n,t,{delay:e=0,transitionOverride:i,type:a}={}){var r;let{transition:u=n.getDefaultTransition(),transitionEnd:f,...d}=t;i&&(u=i);const p=[],y=a&&n.animationState&&n.animationState.getState()[a];for(const v in d){const _=n.getValue(v,(r=n.latestValues[v])!==null&&r!==void 0?r:null),b=d[v];if(b===void 0||y&&w6(y,v))continue;const E={delay:e,...p1(u||{},v)};let R=!1;if(window.MotionHandoffAnimation){const M=CD(n);if(M){const C=window.MotionHandoffAnimation(M,v,Zn);C!==null&&(E.startTime=C,R=!0)}}jb(n,v),_.start(V1(v,_,b,n.shouldReduceMotion&&wD.has(v)?{type:!1}:E,n,R));const T=_.animation;T&&p.push(T)}return f&&Promise.all(p).then(()=>{Zn.update(()=>{f&&n5(n,f)})}),p}function nM(n,t,e={}){var i;const a=ng(n,t,e.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=a||{};e.transitionOverride&&(r=e.transitionOverride);const u=a?()=>Promise.all(r3(n,a,e)):()=>Promise.resolve(),f=n.variantChildren&&n.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:v,staggerDirection:_}=r;return C6(n,t,y+p,v,_,e)}:()=>Promise.resolve(),{when:d}=r;if(d){const[p,y]=d==="beforeChildren"?[u,f]:[f,u];return p().then(()=>y())}else return Promise.all([u(),f(e.delay)])}function C6(n,t,e=0,i=0,a=1,r){const u=[],f=(n.variantChildren.size-1)*i,d=a===1?(p=0)=>p*i:(p=0)=>f-p*i;return Array.from(n.variantChildren).sort(D6).forEach((p,y)=>{p.notify("AnimationStart",t),u.push(nM(p,t,{...r,delay:e+d(y)}).then(()=>p.notify("AnimationComplete",t)))}),Promise.all(u)}function D6(n,t){return n.sortNodePosition(t)}function O6(n,t,e={}){n.notify("AnimationStart",t);let i;if(Array.isArray(t)){const a=t.map(r=>nM(n,r,e));i=Promise.all(a)}else if(typeof t=="string")i=nM(n,t,e);else{const a=typeof t=="function"?ng(n,t,e.custom):t;i=Promise.all(r3(n,a,e))}return i.then(()=>{n.notify("AnimationComplete",t)})}function o3(n,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==n.length)return!1;for(let i=0;i<e;i++)if(t[i]!==n[i])return!1;return!0}const U6=x1.length;function l3(n){if(!n)return;if(!n.isControllingVariants){const e=n.parent?l3(n.parent)||{}:{};return n.props.initial!==void 0&&(e.initial=n.props.initial),e}const t={};for(let e=0;e<U6;e++){const i=x1[e],a=n.props[i];($m(a)||a===!1)&&(t[i]=a)}return t}const N6=[..._1].reverse(),L6=_1.length;function P6(n){return t=>Promise.all(t.map(({animation:e,options:i})=>O6(n,e,i)))}function z6(n){let t=P6(n),e=hR(),i=!0;const a=d=>(p,y)=>{var v;const _=ng(n,y,d==="exit"?(v=n.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(_){const{transition:b,transitionEnd:E,...R}=_;p={...p,...R,...E}}return p};function r(d){t=d(n)}function u(d){const{props:p}=n,y=l3(n.parent)||{},v=[],_=new Set;let b={},E=1/0;for(let T=0;T<L6;T++){const M=N6[T],C=e[M],D=p[M]!==void 0?p[M]:y[M],O=$m(D),N=M===d?C.isActive:null;N===!1&&(E=T);let L=D===y[M]&&D!==p[M]&&O;if(L&&i&&n.manuallyAnimateOnMount&&(L=!1),C.protectedKeys={...b},!C.isActive&&N===null||!D&&!C.prevProp||H_(D)||typeof D=="boolean")continue;const H=B6(C.prevProp,D);let G=H||M===d&&C.isActive&&!L&&O||T>E&&O,B=!1;const z=Array.isArray(D)?D:[D];let j=z.reduce(a(M),{});N===!1&&(j={});const{prevResolvedValues:at={}}=C,nt={...at,...j},Q=Z=>{G=!0,_.has(Z)&&(B=!0,_.delete(Z)),C.needsAnimating[Z]=!0;const W=n.getValue(Z);W&&(W.liveStyle=!1)};for(const Z in nt){const W=j[Z],J=at[Z];if(b.hasOwnProperty(Z))continue;let F=!1;kb(W)&&kb(J)?F=!o3(W,J):F=W!==J,F?W!=null?Q(Z):_.add(Z):W!==void 0&&_.has(Z)?Q(Z):C.protectedKeys[Z]=!0}C.prevProp=D,C.prevResolvedValues=j,C.isActive&&(b={...b,...j}),i&&n.blockInitialAnimation&&(G=!1),G&&(!(L&&H)||B)&&v.push(...z.map(Z=>({animation:Z,options:{type:M}})))}if(_.size){const T={};if(typeof p.initial!="boolean"){const M=ng(n,Array.isArray(p.initial)?p.initial[0]:p.initial);M&&M.transition&&(T.transition=M.transition)}_.forEach(M=>{const C=n.getBaseTarget(M),D=n.getValue(M);D&&(D.liveStyle=!0),T[M]=C??null}),v.push({animation:T})}let R=!!v.length;return i&&(p.initial===!1||p.initial===p.animate)&&!n.manuallyAnimateOnMount&&(R=!1),i=!1,R?t(v):Promise.resolve()}function f(d,p){var y;if(e[d].isActive===p)return Promise.resolve();(y=n.variantChildren)===null||y===void 0||y.forEach(_=>{var b;return(b=_.animationState)===null||b===void 0?void 0:b.setActive(d,p)}),e[d].isActive=p;const v=u(d);for(const _ in e)e[_].protectedKeys={};return v}return{animateChanges:u,setActive:f,setAnimateFunction:r,getState:()=>e,reset:()=>{e=hR(),i=!0}}}function B6(n,t){return typeof t=="string"?t!==n:Array.isArray(t)?!o3(t,n):!1}function uf(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hR(){return{animate:uf(!0),whileInView:uf(),whileHover:uf(),whileTap:uf(),whileDrag:uf(),whileFocus:uf(),exit:uf()}}class nc{constructor(t){this.isMounted=!1,this.node=t}update(){}}class I6 extends nc{constructor(t){super(t),t.animationState||(t.animationState=z6(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();H_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let V6=0;class H6 extends nc{constructor(){super(...arguments),this.id=V6++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const a=this.node.animationState.setActive("exit",!t);e&&!t&&a.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const F6={animation:{Feature:I6},exit:{Feature:H6}};function ag(n,t,e,i={passive:!0}){return n.addEventListener(t,e,i),()=>n.removeEventListener(t,e)}function Mg(n){return{point:{x:n.pageX,y:n.pageY}}}const G6=n=>t=>v1(t)&&n(t,Mg(t));function Dm(n,t,e,i){return ag(n,t,G6(e),i)}function u3({top:n,left:t,right:e,bottom:i}){return{x:{min:t,max:e},y:{min:n,max:i}}}function q6({x:n,y:t}){return{top:t.min,right:n.max,bottom:t.max,left:n.min}}function X6(n,t){if(!t)return n;const e=t({x:n.left,y:n.top}),i=t({x:n.right,y:n.bottom});return{top:e.y,left:e.x,bottom:i.y,right:i.x}}const c3=1e-4,k6=1-c3,j6=1+c3,f3=.01,Y6=0-f3,W6=0+f3;function is(n){return n.max-n.min}function Z6(n,t,e){return Math.abs(n-t)<=e}function dR(n,t,e,i=.5){n.origin=i,n.originPoint=ci(t.min,t.max,n.origin),n.scale=is(e)/is(t),n.translate=ci(e.min,e.max,n.origin)-n.originPoint,(n.scale>=k6&&n.scale<=j6||isNaN(n.scale))&&(n.scale=1),(n.translate>=Y6&&n.translate<=W6||isNaN(n.translate))&&(n.translate=0)}function Om(n,t,e,i){dR(n.x,t.x,e.x,i?i.originX:void 0),dR(n.y,t.y,e.y,i?i.originY:void 0)}function pR(n,t,e){n.min=e.min+t.min,n.max=n.min+is(t)}function K6(n,t,e){pR(n.x,t.x,e.x),pR(n.y,t.y,e.y)}function mR(n,t,e){n.min=t.min-e.min,n.max=n.min+is(t)}function Um(n,t,e){mR(n.x,t.x,e.x),mR(n.y,t.y,e.y)}const gR=()=>({translate:0,scale:1,origin:0,originPoint:0}),ud=()=>({x:gR(),y:gR()}),yR=()=>({min:0,max:0}),wi=()=>({x:yR(),y:yR()});function Sr(n){return[n("x"),n("y")]}function QS(n){return n===void 0||n===1}function iM({scale:n,scaleX:t,scaleY:e}){return!QS(n)||!QS(t)||!QS(e)}function hf(n){return iM(n)||h3(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function h3(n){return vR(n.x)||vR(n.y)}function vR(n){return n&&n!=="0%"}function n_(n,t,e){const i=n-e,a=t*i;return e+a}function _R(n,t,e,i,a){return a!==void 0&&(n=n_(n,a,i)),n_(n,e,i)+t}function aM(n,t=0,e=1,i,a){n.min=_R(n.min,t,e,i,a),n.max=_R(n.max,t,e,i,a)}function d3(n,{x:t,y:e}){aM(n.x,t.translate,t.scale,t.originPoint),aM(n.y,e.translate,e.scale,e.originPoint)}const xR=.999999999999,SR=1.0000000000001;function Q6(n,t,e,i=!1){const a=e.length;if(!a)return;t.x=t.y=1;let r,u;for(let f=0;f<a;f++){r=e[f],u=r.projectionDelta;const{visualElement:d}=r.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&r.options.layoutScroll&&r.scroll&&r!==r.root&&fd(n,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),u&&(t.x*=u.x.scale,t.y*=u.y.scale,d3(n,u)),i&&hf(r.latestValues)&&fd(n,r.latestValues))}t.x<SR&&t.x>xR&&(t.x=1),t.y<SR&&t.y>xR&&(t.y=1)}function cd(n,t){n.min=n.min+t,n.max=n.max+t}function bR(n,t,e,i,a=.5){const r=ci(n.min,n.max,a);aM(n,t,e,r,i)}function fd(n,t){bR(n.x,t.x,t.scaleX,t.scale,t.originX),bR(n.y,t.y,t.scaleY,t.scale,t.originY)}function p3(n,t){return u3(X6(n.getBoundingClientRect(),t))}function J6(n,t,e){const i=p3(n,e),{scroll:a}=t;return a&&(cd(i.x,a.offset.x),cd(i.y,a.offset.y)),i}const m3=({current:n})=>n?n.ownerDocument.defaultView:null,MR=(n,t)=>Math.abs(n-t);function $6(n,t){const e=MR(n.x,t.x),i=MR(n.y,t.y);return Math.sqrt(e**2+i**2)}class g3{constructor(t,e,{transformPagePoint:i,contextWindow:a,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=$S(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,b=$6(v.offset,{x:0,y:0})>=3;if(!_&&!b)return;const{point:E}=v,{timestamp:R}=ga;this.history.push({...E,timestamp:R});const{onStart:T,onMove:M}=this.handlers;_||(T&&T(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,v)},this.handlePointerMove=(v,_)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=JS(_,this.transformPagePoint),Zn.update(this.updatePoint,!0)},this.handlePointerUp=(v,_)=>{this.end();const{onEnd:b,onSessionEnd:E,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=$S(v.type==="pointercancel"?this.lastMoveEventInfo:JS(_,this.transformPagePoint),this.history);this.startEvent&&b&&b(v,T),E&&E(v,T)},!v1(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=i,this.contextWindow=a||window;const u=Mg(t),f=JS(u,this.transformPagePoint),{point:d}=f,{timestamp:p}=ga;this.history=[{...d,timestamp:p}];const{onSessionStart:y}=e;y&&y(t,$S(f,this.history)),this.removeListeners=bg(Dm(this.contextWindow,"pointermove",this.handlePointerMove),Dm(this.contextWindow,"pointerup",this.handlePointerUp),Dm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ku(this.updatePoint)}}function JS(n,t){return t?{point:t(n.point)}:n}function ER(n,t){return{x:n.x-t.x,y:n.y-t.y}}function $S({point:n},t){return{point:n,delta:ER(n,y3(t)),offset:ER(n,t8(t)),velocity:e8(t,.1)}}function t8(n){return n[0]}function y3(n){return n[n.length-1]}function e8(n,t){if(n.length<2)return{x:0,y:0};let e=n.length-1,i=null;const a=y3(n);for(;e>=0&&(i=n[e],!(a.timestamp-i.timestamp>Pl(t)));)e--;if(!i)return{x:0,y:0};const r=zl(a.timestamp-i.timestamp);if(r===0)return{x:0,y:0};const u={x:(a.x-i.x)/r,y:(a.y-i.y)/r};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function n8(n,{min:t,max:e},i){return t!==void 0&&n<t?n=i?ci(t,n,i.min):Math.max(n,t):e!==void 0&&n>e&&(n=i?ci(e,n,i.max):Math.min(n,e)),n}function TR(n,t,e){return{min:t!==void 0?n.min+t:void 0,max:e!==void 0?n.max+e-(n.max-n.min):void 0}}function i8(n,{top:t,left:e,bottom:i,right:a}){return{x:TR(n.x,e,a),y:TR(n.y,t,i)}}function AR(n,t){let e=t.min-n.min,i=t.max-n.max;return t.max-t.min<n.max-n.min&&([e,i]=[i,e]),{min:e,max:i}}function a8(n,t){return{x:AR(n.x,t.x),y:AR(n.y,t.y)}}function s8(n,t){let e=.5;const i=is(n),a=is(t);return a>i?e=Md(t.min,t.max-i,n.min):i>a&&(e=Md(n.min,n.max-a,t.min)),Hl(0,1,e)}function r8(n,t){const e={};return t.min!==void 0&&(e.min=t.min-n.min),t.max!==void 0&&(e.max=t.max-n.min),e}const sM=.35;function o8(n=sM){return n===!1?n=0:n===!0&&(n=sM),{x:RR(n,"left","right"),y:RR(n,"top","bottom")}}function RR(n,t,e){return{min:wR(n,t),max:wR(n,e)}}function wR(n,t){return typeof n=="number"?n:n[t]||0}const l8=new WeakMap;class u8{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wi(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Mg(y).point)},r=(y,v)=>{const{drag:_,dragPropagation:b,onDragStart:E}=this.getProps();if(_&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=iF(_),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sr(T=>{let M=this.getAxisMotionValue(T).get()||0;if(Zo.test(M)){const{projection:C}=this.visualElement;if(C&&C.layout){const D=C.layout.layoutBox[T];D&&(M=is(D)*(parseFloat(M)/100))}}this.originPoint[T]=M}),E&&Zn.postRender(()=>E(y,v)),jb(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},u=(y,v)=>{const{dragPropagation:_,dragDirectionLock:b,onDirectionLock:E,onDrag:R}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:T}=v;if(b&&this.currentDirection===null){this.currentDirection=c8(T),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",v.point,T),this.updateAxis("y",v.point,T),this.visualElement.render(),R&&R(y,v)},f=(y,v)=>this.stop(y,v),d=()=>Sr(y=>{var v;return this.getAnimationState(y)==="paused"&&((v=this.getAxisMotionValue(y).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new g3(t,{onSessionStart:a,onStart:r,onMove:u,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:m3(this.visualElement)})}stop(t,e){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:a}=e;this.startAnimation(a);const{onDragEnd:r}=this.getProps();r&&Zn.postRender(()=>r(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,i){const{drag:a}=this.getProps();if(!i||!Z0(t,a,this.currentDirection))return;const r=this.getAxisMotionValue(t);let u=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(u=n8(u,this.constraints[t],this.elastic[t])),r.set(u)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:i}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,r=this.constraints;e&&od(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&a?this.constraints=i8(a.layoutBox,e):this.constraints=!1,this.elastic=o8(i),r!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&Sr(u=>{this.constraints!==!1&&this.getAxisMotionValue(u)&&(this.constraints[u]=r8(a.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!od(t))return!1;const i=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const r=J6(i,a.root,this.visualElement.getTransformPagePoint());let u=a8(a.layout.layoutBox,r);if(e){const f=e(q6(u));this.hasMutatedConstraints=!!f,f&&(u=u3(f))}return u}startAnimation(t){const{drag:e,dragMomentum:i,dragElastic:a,dragTransition:r,dragSnapToOrigin:u,onDragTransitionEnd:f}=this.getProps(),d=this.constraints||{},p=Sr(y=>{if(!Z0(y,e,this.currentDirection))return;let v=d&&d[y]||{};u&&(v={min:0,max:0});const _=a?200:1e6,b=a?40:1e7,E={type:"inertia",velocity:i?t[y]:0,bounceStiffness:_,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...r,...v};return this.startAxisValueAnimation(y,E)});return Promise.all(p).then(f)}startAxisValueAnimation(t,e){const i=this.getAxisMotionValue(t);return jb(this.visualElement,t),i.start(V1(t,i,0,e,this.visualElement,!1))}stopAnimation(){Sr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Sr(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),a=i[e];return a||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){Sr(e=>{const{drag:i}=this.getProps();if(!Z0(e,i,this.currentDirection))return;const{projection:a}=this.visualElement,r=this.getAxisMotionValue(e);if(a&&a.layout){const{min:u,max:f}=a.layout.layoutBox[e];r.set(t[e]-ci(u,f,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:i}=this.visualElement;if(!od(e)||!i||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Sr(u=>{const f=this.getAxisMotionValue(u);if(f&&this.constraints!==!1){const d=f.get();a[u]=s8({min:d,max:d},this.constraints[u])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Sr(u=>{if(!Z0(u,t,null))return;const f=this.getAxisMotionValue(u),{min:d,max:p}=this.constraints[u];f.set(ci(d,p,a[u]))})}addListeners(){if(!this.visualElement.current)return;l8.set(this.visualElement,this);const t=this.visualElement.current,e=Dm(t,"pointerdown",d=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();od(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,r=a.addEventListener("measure",i);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Zn.read(i);const u=ag(window,"resize",()=>this.scalePositionWithinConstraints()),f=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(Sr(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=d[y].translate,v.set(v.get()+d[y].translate))}),this.visualElement.render())});return()=>{u(),e(),r(),f&&f()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:i=!1,dragPropagation:a=!1,dragConstraints:r=!1,dragElastic:u=sM,dragMomentum:f=!0}=t;return{...t,drag:e,dragDirectionLock:i,dragPropagation:a,dragConstraints:r,dragElastic:u,dragMomentum:f}}}function Z0(n,t,e){return(t===!0||t===n)&&(e===null||e===n)}function c8(n,t=10){let e=null;return Math.abs(n.y)>t?e="y":Math.abs(n.x)>t&&(e="x"),e}class f8 extends nc{constructor(t){super(t),this.removeGroupControls=Zs,this.removeListeners=Zs,this.controls=new u8(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zs}unmount(){this.removeGroupControls(),this.removeListeners()}}const CR=n=>(t,e)=>{n&&Zn.postRender(()=>n(t,e))};class h8 extends nc{constructor(){super(...arguments),this.removePointerDownListener=Zs}onPointerDown(t){this.session=new g3(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:m3(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:i,onPanEnd:a}=this.node.getProps();return{onSessionStart:CR(t),onStart:CR(e),onMove:i,onEnd:(r,u)=>{delete this.session,a&&Zn.postRender(()=>a(r,u))}}}mount(){this.removePointerDownListener=Dm(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const av={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function DR(n,t){return t.max===t.min?0:n/(t.max-t.min)*100}const cm={correct:(n,t)=>{if(!t.target)return n;if(typeof n=="string")if(De.test(n))n=parseFloat(n);else return n;const e=DR(n,t.target.x),i=DR(n,t.target.y);return`${e}% ${i}%`}},d8={correct:(n,{treeScale:t,projectionDelta:e})=>{const i=n,a=Qu.parse(n);if(a.length>5)return i;const r=Qu.createTransformer(n),u=typeof a[0]!="number"?1:0,f=e.x.scale*t.x,d=e.y.scale*t.y;a[0+u]/=f,a[1+u]/=d;const p=ci(f,d,.5);return typeof a[2+u]=="number"&&(a[2+u]/=p),typeof a[3+u]=="number"&&(a[3+u]/=p),r(a)}};class p8 extends At.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i,layoutId:a}=this.props,{projection:r}=t;DF(m8),r&&(e.group&&e.group.add(r),i&&i.register&&a&&i.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),av.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:i,drag:a,isPresent:r}=this.props,u=i.projection;return u&&(u.isPresent=r,a||t.layoutDependency!==e||e===void 0||t.isPresent!==r?u.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?u.promote():u.relegate()||Zn.postRender(()=>{const f=u.getStack();(!f||!f.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),y1.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:i}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(a),i&&i.deregister&&i.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function v3(n){const[t,e]=tD(),i=At.useContext(r1);return oe.jsx(p8,{...n,layoutGroup:i,switchLayoutGroup:At.useContext(mD),isPresent:t,safeToRemove:e})}const m8={borderRadius:{...cm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:cm,borderTopRightRadius:cm,borderBottomLeftRadius:cm,borderBottomRightRadius:cm,boxShadow:d8};function g8(n,t,e){const i=za(n)?n:Jm(n);return i.start(V1("",i,t,e)),i.animation}function y8(n){return n instanceof SVGElement&&n.tagName!=="svg"}const v8=(n,t)=>n.depth-t.depth;class _8{constructor(){this.children=[],this.isDirty=!1}add(t){c1(this.children,t),this.isDirty=!0}remove(t){f1(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(v8),this.isDirty=!1,this.children.forEach(t)}}function x8(n,t){const e=Wo.now(),i=({timestamp:a})=>{const r=a-e;r>=t&&(Ku(i),n(r-t))};return Zn.read(i,!0),()=>Ku(i)}const _3=["TopLeft","TopRight","BottomLeft","BottomRight"],S8=_3.length,OR=n=>typeof n=="string"?parseFloat(n):n,UR=n=>typeof n=="number"||De.test(n);function b8(n,t,e,i,a,r){a?(n.opacity=ci(0,e.opacity!==void 0?e.opacity:1,M8(i)),n.opacityExit=ci(t.opacity!==void 0?t.opacity:1,0,E8(i))):r&&(n.opacity=ci(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,i));for(let u=0;u<S8;u++){const f=`border${_3[u]}Radius`;let d=NR(t,f),p=NR(e,f);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||UR(d)===UR(p)?(n[f]=Math.max(ci(OR(d),OR(p),i),0),(Zo.test(p)||Zo.test(d))&&(n[f]+="%")):n[f]=p}(t.rotate||e.rotate)&&(n.rotate=ci(t.rotate||0,e.rotate||0,i))}function NR(n,t){return n[t]!==void 0?n[t]:n.borderRadius}const M8=x3(0,.5,zD),E8=x3(.5,.95,Zs);function x3(n,t,e){return i=>i<n?0:i>t?1:e(Md(n,t,i))}function LR(n,t){n.min=t.min,n.max=t.max}function xr(n,t){LR(n.x,t.x),LR(n.y,t.y)}function PR(n,t){n.translate=t.translate,n.scale=t.scale,n.originPoint=t.originPoint,n.origin=t.origin}function zR(n,t,e,i,a){return n-=t,n=n_(n,1/e,i),a!==void 0&&(n=n_(n,1/a,i)),n}function T8(n,t=0,e=1,i=.5,a,r=n,u=n){if(Zo.test(t)&&(t=parseFloat(t),t=ci(u.min,u.max,t/100)-u.min),typeof t!="number")return;let f=ci(r.min,r.max,i);n===r&&(f-=t),n.min=zR(n.min,t,e,f,a),n.max=zR(n.max,t,e,f,a)}function BR(n,t,[e,i,a],r,u){T8(n,t[e],t[i],t[a],t.scale,r,u)}const A8=["x","scaleX","originX"],R8=["y","scaleY","originY"];function IR(n,t,e,i){BR(n.x,t,A8,e?e.x:void 0,i?i.x:void 0),BR(n.y,t,R8,e?e.y:void 0,i?i.y:void 0)}function VR(n){return n.translate===0&&n.scale===1}function S3(n){return VR(n.x)&&VR(n.y)}function HR(n,t){return n.min===t.min&&n.max===t.max}function w8(n,t){return HR(n.x,t.x)&&HR(n.y,t.y)}function FR(n,t){return Math.round(n.min)===Math.round(t.min)&&Math.round(n.max)===Math.round(t.max)}function b3(n,t){return FR(n.x,t.x)&&FR(n.y,t.y)}function GR(n){return is(n.x)/is(n.y)}function qR(n,t){return n.translate===t.translate&&n.scale===t.scale&&n.originPoint===t.originPoint}class C8{constructor(){this.members=[]}add(t){c1(this.members,t),t.scheduleRender()}remove(t){if(f1(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(a=>t===a);if(e===0)return!1;let i;for(let a=e;a>=0;a--){const r=this.members[a];if(r.isPresent!==!1){i=r;break}}return i?(this.promote(i),!0):!1}promote(t,e){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,e&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:i}=t;e.onExitComplete&&e.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function D8(n,t,e){let i="";const a=n.x.translate/t.x,r=n.y.translate/t.y,u=(e==null?void 0:e.z)||0;if((a||r||u)&&(i=`translate3d(${a}px, ${r}px, ${u}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:p,rotate:y,rotateX:v,rotateY:_,skewX:b,skewY:E}=e;p&&(i=`perspective(${p}px) ${i}`),y&&(i+=`rotate(${y}deg) `),v&&(i+=`rotateX(${v}deg) `),_&&(i+=`rotateY(${_}deg) `),b&&(i+=`skewX(${b}deg) `),E&&(i+=`skewY(${E}deg) `)}const f=n.x.scale*t.x,d=n.y.scale*t.y;return(f!==1||d!==1)&&(i+=`scale(${f}, ${d})`),i||"none"}const tb=["","X","Y","Z"],O8={visibility:"hidden"},XR=1e3;let U8=0;function eb(n,t,e,i){const{latestValues:a}=t;a[n]&&(e[n]=a[n],t.setStaticValue(n,0),i&&(i[n]=0))}function M3(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:t}=n.options;if(!t)return;const e=CD(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:a,layoutId:r}=n.options;window.MotionCancelOptimisedAnimation(e,"transform",Zn,!(a||r))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&M3(i)}function E3({attachResizeListener:n,defaultParent:t,measureScroll:e,checkIsScrollRoot:i,resetTransform:a}){return class{constructor(u={},f=t==null?void 0:t()){this.id=U8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(P8),this.nodes.forEach(H8),this.nodes.forEach(F8),this.nodes.forEach(z8)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=f?f.root||f:this,this.path=f?[...f.path,f]:[],this.parent=f,this.depth=f?f.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new _8)}addEventListener(u,f){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new d1),this.eventHandlers.get(u).add(f)}notifyListeners(u,...f){const d=this.eventHandlers.get(u);d&&d.notify(...f)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,f=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=y8(u),this.instance=u;const{layoutId:d,layout:p,visualElement:y}=this.options;if(y&&!y.current&&y.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),f&&(p||d)&&(this.isLayoutDirty=!0),n){let v;const _=()=>this.root.updateBlockedByResize=!1;n(u,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=x8(_,250),av.hasAnimatedSinceResize&&(av.hasAnimatedSinceResize=!1,this.nodes.forEach(jR))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&y&&(d||p)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:_,hasRelativeLayoutChanged:b,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||y.getDefaultTransition()||j8,{onLayoutAnimationStart:T,onLayoutAnimationComplete:M}=y.getProps(),C=!this.targetLayout||!b3(this.targetLayout,E),D=!_&&b;if(this.options.layoutRoot||this.resumeFrom||D||_&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,D);const O={...p1(R,"layout"),onPlay:T,onComplete:M};(y.shouldReduceMotion||this.options.layoutRoot)&&(O.delay=0,O.type=!1),this.startAnimation(O)}else _||jR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ku(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(G8),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&M3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const v=this.path[y];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:f,layout:d}=this.options;if(f===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kR);return}this.isUpdating||this.nodes.forEach(I8),this.isUpdating=!1,this.nodes.forEach(V8),this.nodes.forEach(N8),this.nodes.forEach(L8),this.clearAllSnapshots();const f=Wo.now();ga.delta=Hl(0,1e3/60,f-ga.timestamp),ga.timestamp=f,ga.isProcessing=!0,jS.update.process(ga),jS.preRender.process(ga),jS.render.process(ga),ga.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,y1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(B8),this.sharedNodes.forEach(q8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Zn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Zn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!is(this.snapshot.measuredBox.x)&&!is(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:f}=this.options;f&&f.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let f=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(f=!1),f){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:d,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,f=this.projectionDelta&&!S3(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;u&&(f||hf(this.latestValues)||y)&&(a(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const f=this.measurePageBox();let d=this.removeElementScroll(f);return u&&(d=this.removeTransform(d)),Y8(d),{animationId:this.root.animationId,measuredBox:f,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:f}=this.options;if(!f)return wi();const d=f.measureViewportBox();if(!(((u=this.scroll)===null||u===void 0?void 0:u.wasRoot)||this.path.some(W8))){const{scroll:y}=this.root;y&&(cd(d.x,y.offset.x),cd(d.y,y.offset.y))}return d}removeElementScroll(u){var f;const d=wi();if(xr(d,u),!((f=this.scroll)===null||f===void 0)&&f.wasRoot)return d;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:v,options:_}=y;y!==this.root&&v&&_.layoutScroll&&(v.wasRoot&&xr(d,u),cd(d.x,v.offset.x),cd(d.y,v.offset.y))}return d}applyTransform(u,f=!1){const d=wi();xr(d,u);for(let p=0;p<this.path.length;p++){const y=this.path[p];!f&&y.options.layoutScroll&&y.scroll&&y!==y.root&&fd(d,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),hf(y.latestValues)&&fd(d,y.latestValues)}return hf(this.latestValues)&&fd(d,this.latestValues),d}removeTransform(u){const f=wi();xr(f,u);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!hf(p.latestValues))continue;iM(p.latestValues)&&p.updateSnapshot();const y=wi(),v=p.measurePageBox();xr(y,v),IR(f,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return hf(this.latestValues)&&IR(f,this.latestValues),f}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ga.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var f;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==d;if(!(u||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((f=this.parent)===null||f===void 0)&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:_}=this.options;if(!(!this.layout||!(v||_))){if(this.resolvedRelativeTargetAt=ga.timestamp,!this.targetDelta&&!this.relativeTarget){const b=this.getClosestProjectingParent();b&&b.layout&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wi(),this.relativeTargetOrigin=wi(),Um(this.relativeTargetOrigin,this.layout.layoutBox,b.layout.layoutBox),xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wi(),this.targetWithTransforms=wi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),K6(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xr(this.target,this.layout.layoutBox),d3(this.target,this.targetDelta)):xr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const b=this.getClosestProjectingParent();b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?(this.relativeParent=b,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wi(),this.relativeTargetOrigin=wi(),Um(this.relativeTargetOrigin,this.target,b.target),xr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||iM(this.parent.latestValues)||h3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const f=this.getLead(),d=!!this.resumingFrom||this!==f;let p=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(p=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===ga.timestamp&&(p=!1),p)return;const{layout:y,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||v))return;xr(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,b=this.treeScale.y;Q6(this.layoutCorrected,this.treeScale,this.path,d),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=wi());const{target:E}=f;if(!E){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(PR(this.prevProjectionDelta.x,this.projectionDelta.x),PR(this.prevProjectionDelta.y,this.projectionDelta.y)),Om(this.projectionDelta,this.layoutCorrected,E,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==b||!qR(this.projectionDelta.x,this.prevProjectionDelta.x)||!qR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){var f;if((f=this.options.visualElement)===null||f===void 0||f.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ud(),this.projectionDelta=ud(),this.projectionDeltaWithTransform=ud()}setAnimationOrigin(u,f=!1){const d=this.snapshot,p=d?d.latestValues:{},y={...this.latestValues},v=ud();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!f;const _=wi(),b=d?d.source:void 0,E=this.layout?this.layout.source:void 0,R=b!==E,T=this.getStack(),M=!T||T.members.length<=1,C=!!(R&&!M&&this.options.crossfade===!0&&!this.path.some(k8));this.animationProgress=0;let D;this.mixTargetDelta=O=>{const N=O/1e3;YR(v.x,u.x,N),YR(v.y,u.y,N),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Um(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),X8(this.relativeTarget,this.relativeTargetOrigin,_,N),D&&w8(this.relativeTarget,D)&&(this.isProjectionDirty=!1),D||(D=wi()),xr(D,this.relativeTarget)),R&&(this.animationValues=y,b8(y,p,this.latestValues,N,C,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ku(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Zn.update(()=>{av.hasAnimatedSinceResize=!0,this.currentAnimation=g8(0,XR,{...u,onUpdate:f=>{this.mixTargetDelta(f),u.onUpdate&&u.onUpdate(f)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:f,target:d,layout:p,latestValues:y}=u;if(!(!f||!d||!p)){if(this!==u&&this.layout&&p&&T3(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||wi();const v=is(this.layout.layoutBox.x);d.x.min=u.target.x.min,d.x.max=d.x.min+v;const _=is(this.layout.layoutBox.y);d.y.min=u.target.y.min,d.y.max=d.y.min+_}xr(f,d),fd(f,y),Om(this.projectionDeltaWithTransform,this.layoutCorrected,f,y)}}registerSharedNode(u,f){this.sharedNodes.has(u)||this.sharedNodes.set(u,new C8),this.sharedNodes.get(u).add(f);const p=f.options.initialPromotionConfig;f.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(f):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:f}=this.options;return f?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:f}=this.options;return f?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:f,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),u&&(this.projectionDelta=void 0,this.needsReset=!0),f&&this.setOptions({transition:f})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let f=!1;const{latestValues:d}=u;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(f=!0),!f)return;const p={};d.z&&eb("z",u,p,this.animationValues);for(let y=0;y<tb.length;y++)eb(`rotate${tb[y]}`,u,p,this.animationValues),eb(`skew${tb[y]}`,u,p,this.animationValues);u.render();for(const y in p)u.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);u.scheduleRender()}getProjectionStyles(u){var f,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return O8;const p={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=iv(u==null?void 0:u.pointerEvents)||"",p.transform=y?y(this.latestValues,""):"none",p;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const R={};return this.options.layoutId&&(R.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,R.pointerEvents=iv(u==null?void 0:u.pointerEvents)||""),this.hasProjected&&!hf(this.latestValues)&&(R.transform=y?y({},""):"none",this.hasProjected=!1),R}const _=v.animationValues||v.latestValues;this.applyTransformsToTarget(),p.transform=D8(this.projectionDeltaWithTransform,this.treeScale,_),y&&(p.transform=y(_,p.transform));const{x:b,y:E}=this.projectionDelta;p.transformOrigin=`${b.origin*100}% ${E.origin*100}% 0`,v.animationValues?p.opacity=v===this?(d=(f=_.opacity)!==null&&f!==void 0?f:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:p.opacity=v===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const R in tg){if(_[R]===void 0)continue;const{correct:T,applyTo:M,isCSSVariable:C}=tg[R],D=p.transform==="none"?_[R]:T(_[R],v);if(M){const O=M.length;for(let N=0;N<O;N++)p[M[N]]=D}else C?this.options.visualElement.renderState.vars[R]=D:p[R]=D}return this.options.layoutId&&(p.pointerEvents=v===this?iv(u==null?void 0:u.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var f;return(f=u.currentAnimation)===null||f===void 0?void 0:f.stop()}),this.root.nodes.forEach(kR),this.root.sharedNodes.clear()}}}function N8(n){n.updateLayout()}function L8(n){var t;const e=((t=n.resumeFrom)===null||t===void 0?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:a}=n.layout,{animationType:r}=n.options,u=e.source!==n.layout.source;r==="size"?Sr(v=>{const _=u?e.measuredBox[v]:e.layoutBox[v],b=is(_);_.min=i[v].min,_.max=_.min+b}):T3(r,e.layoutBox,i)&&Sr(v=>{const _=u?e.measuredBox[v]:e.layoutBox[v],b=is(i[v]);_.max=_.min+b,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[v].max=n.relativeTarget[v].min+b)});const f=ud();Om(f,i,e.layoutBox);const d=ud();u?Om(d,n.applyTransform(a,!0),e.measuredBox):Om(d,i,e.layoutBox);const p=!S3(f);let y=!1;if(!n.resumeFrom){const v=n.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:_,layout:b}=v;if(_&&b){const E=wi();Um(E,e.layoutBox,_.layoutBox);const R=wi();Um(R,i,b.layoutBox),b3(E,R)||(y=!0),v.options.layoutRoot&&(n.relativeTarget=R,n.relativeTargetOrigin=E,n.relativeParent=v)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:d,layoutDelta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:y})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function P8(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function z8(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function B8(n){n.clearSnapshot()}function kR(n){n.clearMeasurements()}function I8(n){n.isLayoutDirty=!1}function V8(n){const{visualElement:t}=n.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),n.resetTransform()}function jR(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function H8(n){n.resolveTargetDelta()}function F8(n){n.calcProjection()}function G8(n){n.resetSkewAndRotation()}function q8(n){n.removeLeadSnapshot()}function YR(n,t,e){n.translate=ci(t.translate,0,e),n.scale=ci(t.scale,1,e),n.origin=t.origin,n.originPoint=t.originPoint}function WR(n,t,e,i){n.min=ci(t.min,e.min,i),n.max=ci(t.max,e.max,i)}function X8(n,t,e,i){WR(n.x,t.x,e.x,i),WR(n.y,t.y,e.y,i)}function k8(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const j8={duration:.45,ease:[.4,0,.1,1]},ZR=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),KR=ZR("applewebkit/")&&!ZR("chrome/")?Math.round:Zs;function QR(n){n.min=KR(n.min),n.max=KR(n.max)}function Y8(n){QR(n.x),QR(n.y)}function T3(n,t,e){return n==="position"||n==="preserve-aspect"&&!Z6(GR(t),GR(e),.2)}function W8(n){var t;return n!==n.root&&((t=n.scroll)===null||t===void 0?void 0:t.wasRoot)}const Z8=E3({attachResizeListener:(n,t)=>ag(n,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),nb={current:void 0},A3=E3({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!nb.current){const n=new Z8({});n.mount(window),n.setOptions({layoutScroll:!0}),nb.current=n}return nb.current},resetTransform:(n,t)=>{n.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),K8={pan:{Feature:h8},drag:{Feature:f8,ProjectionNode:A3,MeasureLayout:v3}};function JR(n,t,e){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",e==="Start");const a="onHover"+e,r=i[a];r&&Zn.postRender(()=>r(t,Mg(t)))}class Q8 extends nc{mount(){const{current:t}=this.node;t&&(this.unmount=sF(t,(e,i)=>(JR(this.node,i,"Start"),a=>JR(this.node,a,"End"))))}unmount(){}}class J8 extends nc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bg(ag(this.node.current,"focus",()=>this.onFocus()),ag(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $R(n,t,e){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",e==="Start");const a="onTap"+(e==="End"?"":e),r=i[a];r&&Zn.postRender(()=>r(t,Mg(t)))}class $8 extends nc{mount(){const{current:t}=this.node;t&&(this.unmount=uF(t,(e,i)=>($R(this.node,i,"Start"),(a,{success:r})=>$R(this.node,a,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const rM=new WeakMap,ib=new WeakMap,tG=n=>{const t=rM.get(n.target);t&&t(n)},eG=n=>{n.forEach(tG)};function nG({root:n,...t}){const e=n||document;ib.has(e)||ib.set(e,{});const i=ib.get(e),a=JSON.stringify(t);return i[a]||(i[a]=new IntersectionObserver(eG,{root:n,...t})),i[a]}function iG(n,t,e){const i=nG(t);return rM.set(n,e),i.observe(n),()=>{rM.delete(n),i.unobserve(n)}}const aG={some:0,all:1};class sG extends nc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:i,amount:a="some",once:r}=t,u={root:e?e.current:void 0,rootMargin:i,threshold:typeof a=="number"?a:aG[a]},f=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,r&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:v}=this.node.getProps(),_=p?y:v;_&&_(d)};return iG(this.node.current,u,f)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(rG(t,e))&&this.startObserver()}unmount(){}}function rG({viewport:n={}},{viewport:t={}}={}){return e=>n[e]!==t[e]}const oG={inView:{Feature:sG},tap:{Feature:$8},focus:{Feature:J8},hover:{Feature:Q8}},lG={layout:{ProjectionNode:A3,MeasureLayout:v3}},oM={current:null},R3={current:!1};function uG(){if(R3.current=!0,!!l1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),t=()=>oM.current=n.matches;n.addListener(t),t()}else oM.current=!1}const cG=[...QD,Ua,Qu],fG=n=>cG.find(KD(n)),hG=new WeakMap;function dG(n,t,e){for(const i in t){const a=t[i],r=e[i];if(za(a))n.addValue(i,a);else if(za(r))n.addValue(i,Jm(a,{owner:n}));else if(r!==a)if(n.hasValue(i)){const u=n.getValue(i);u.liveStyle===!0?u.jump(a):u.hasAnimated||u.set(a)}else{const u=n.getStaticValue(i);n.addValue(i,Jm(u!==void 0?u:a,{owner:n}))}}for(const i in e)t[i]===void 0&&n.removeValue(i);return t}const tw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pG{scrapeMotionValuesFromProps(t,e,i){return{}}constructor({parent:t,props:e,presenceContext:i,reducedMotionConfig:a,blockInitialAnimation:r,visualState:u},f={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=z1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const b=Wo.now();this.renderScheduledAt<b&&(this.renderScheduledAt=b,Zn.render(this.render,!1,!0))};const{latestValues:d,renderState:p,onUpdate:y}=u;this.onUpdate=y,this.latestValues=d,this.baseTarget={...d},this.initialValues=e.initial?{...d}:{},this.renderState=p,this.parent=t,this.props=e,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=f,this.blockInitialAnimation=!!r,this.isControllingVariants=F_(e),this.isVariantNode=dD(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:v,..._}=this.scrapeMotionValuesFromProps(e,{},this);for(const b in _){const E=_[b];d[b]!==void 0&&za(E)&&E.set(d[b],!1)}}mount(t){this.current=t,hG.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,i)=>this.bindToMotionValue(i,e)),R3.current||uG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:oM.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ku(this.notifyUpdate),Ku(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Lf.has(t);i&&this.onBindTransform&&this.onBindTransform();const a=e.on("change",f=>{this.latestValues[t]=f,this.props.onUpdate&&Zn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),r=e.on("renderRequest",this.scheduleRender);let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{a(),r(),u&&u(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ed){const e=Ed[t];if(!e)continue;const{isEnabled:i,Feature:a}=e;if(!this.features[t]&&a&&i(this.props)&&(this.features[t]=new a(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wi()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let i=0;i<tw.length;i++){const a=tw[i];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const r="on"+a,u=t[r];u&&(this.propEventSubscriptions[a]=this.on(a,u))}this.prevMotionValues=dG(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const i=this.values.get(t);e!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&e!==void 0&&(i=Jm(e===null?void 0:e,{owner:this}),this.addValue(t,i)),i}readValue(t,e){var i;let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(i=this.getBaseTargetFromProps(this.props,t))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(WD(a)||ID(a))?a=parseFloat(a):!fG(a)&&Qu.test(e)&&(a=kD(t,e)),this.setBaseTarget(t,za(a)?a.get():a)),za(a)?a.get():a}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:i}=this.props;let a;if(typeof i=="string"||typeof i=="object"){const u=D1(this.props,i,(e=this.presenceContext)===null||e===void 0?void 0:e.custom);u&&(a=u[t])}if(i&&a!==void 0)return a;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!za(r)?r:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new d1),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class w3 extends pG{constructor(){super(...arguments),this.KeyframeResolver=JD}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:i}){delete e[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;za(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function mG(n){return window.getComputedStyle(n)}class gG extends w3{constructor(){super(...arguments),this.type="html",this.renderInstance=ED}readValueFromInstance(t,e){if(Lf.has(e))return R5(t,e);{const i=mG(t),a=(b1(e)?i.getPropertyValue(e):i[e])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:e}){return p3(t,e)}build(t,e,i){T1(t,e,i.transformTemplate)}scrapeMotionValuesFromProps(t,e,i){return O1(t,e,i)}}class yG extends w3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wi,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&MD(this.current,this.renderState)}}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(Lf.has(e)){const i=XD(e);return i&&i.default||0}return e=TD.has(e)?e:S1(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,i){return RD(t,e,i)}onBindTransform(){this.current&&!this.renderState.dimensions&&Zn.postRender(this.updateDimensions)}build(t,e,i){w1(t,e,this.isSVGTag,i.transformTemplate)}renderInstance(t,e,i,a){AD(t,e,i,a)}mount(t){this.isSVGTag=C1(t.tagName),super.mount(t)}}const vG=(n,t)=>R1(n)?new yG(t):new gG(t,{allowProjection:n!==At.Fragment}),_G=t5({...F6,...oG,...K8,...lG},vG),xG=gF(_G);function SG(){const n=At.useRef();return q2(()=>{n.current.rotation.x+=.001,n.current.rotation.y+=.001}),oe.jsx("gridHelper",{ref:n,args:[50,50,"white","gray"],position:[0,0,-10]})}function bG({char:n,initialPosition:t,finalPosition:e,delay:i}){const a=At.useRef(),[r]=At.useState(performance.now()+i),[u,f]=At.useState(!1);return At.useEffect(()=>{setTimeout(()=>{f(!0)},i)},[i]),q2(()=>{if(u){const d=(performance.now()-r)/1e3,p=1;if(d<=p){const y=d/p;a.current.position.x=hm.lerp(t[0],e[0],y),a.current.position.y=hm.lerp(t[1],e[1],y),a.current.position.z=hm.lerp(t[2],e[2],y),a.current.scale.setScalar(hm.lerp(2,1,y))}else a.current.position.set(...e),a.current.scale.setScalar(1)}else a.current.position.set(...t),a.current.scale.setScalar(2)}),oe.jsxs(HH,{ref:a,font:"https://threejs.org/examples/fonts/helvetiker_bold.typeface.json",size:1.5,height:.3,curveSegments:6,bevelEnabled:!0,bevelSize:.05,bevelThickness:.1,children:[n,oe.jsx("meshStandardMaterial",{color:"#B0E0E6",roughness:.3,metalness:.2})]})}function MG({pageIndex:n,words:t}){const[e,i]=At.useState({});return At.useEffect(()=>{(()=>{const r={};let p=(t.length-1)*2.5/2;t.forEach((y,v)=>{const _=y.split("");let b=-((y.length-1)*2)/2;_.forEach((E,R)=>{const T=`${v}-${R}`;r[T]=[b,p,0],b+=2}),p-=2.5}),i(r)})()},[t]),oe.jsx(xG.div,{initial:{opacity:1,x:0},animate:{opacity:1,x:0},exit:{opacity:0,x:"100%"},transition:{duration:1.5},className:"absolute inset-0 flex flex-col items-center justify-center bg-black",children:oe.jsxs(RH,{style:{width:"100vw",height:"100vh"},camera:{position:[0,0,12],fov:50},children:[oe.jsx("ambientLight",{intensity:1}),oe.jsx("pointLight",{position:[10,10,10],intensity:1.5})," ",oe.jsx("pointLight",{position:[-10,-10,10],intensity:1.2}),oe.jsx(SG,{}),oe.jsx("group",{children:t.map((a,r)=>a.split("").map((u,f)=>{const d=`${r}-${f}`,p=e[d]||[0,0,0],y=[(Math.random()-.5)*20,(Math.random()-.5)*15+p[1],(Math.random()-.5)*10],v=(r*500+f*100)%1e3;return oe.jsx(bG,{char:u,initialPosition:y,finalPosition:p,delay:v},d)}))})]})},n)}function EG(){const n=[["CONTEXTUAL","VIDEO","INSIGHT"],["ANALYSIS","AND","MAPPING"],["SMART","DATA","EXTRACTION"]],[t,e]=At.useState(0);return At.useEffect(()=>{const i=setInterval(()=>{e(a=>(a+1)%n.length)},4e3);return()=>clearInterval(i)},[]),oe.jsx("div",{className:"fixed inset-0 flex items-center justify-center overflow-hidden",children:oe.jsx(YH,{mode:"wait",children:oe.jsx(MG,{pageIndex:t,words:n[t]},t)})})}var ab,ew;function TG(){if(ew)return ab;ew=1,ab=function(a,r,u){var f=document.head||document.getElementsByTagName("head")[0],d=document.createElement("script");typeof r=="function"&&(u=r,r={}),r=r||{},u=u||function(){},d.type=r.type||"text/javascript",d.charset=r.charset||"utf8",d.async="async"in r?!!r.async:!0,d.src=a,r.attrs&&n(d,r.attrs),r.text&&(d.text=""+r.text);var p="onload"in d?t:e;p(d,u),d.onload||t(d,u),f.appendChild(d)};function n(i,a){for(var r in a)i.setAttribute(r,a[r])}function t(i,a){i.onload=function(){this.onerror=this.onload=null,a(null,i)},i.onerror=function(){this.onerror=this.onload=null,a(new Error("Failed to load "+this.src),i)}}function e(i,a){i.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,a(null,i))}}return ab}var sb,nw;function C3(){if(nw)return sb;nw=1;var n=function(C){return t(C)&&!e(C)};function t(M){return!!M&&typeof M=="object"}function e(M){var C=Object.prototype.toString.call(M);return C==="[object RegExp]"||C==="[object Date]"||r(M)}var i=typeof Symbol=="function"&&Symbol.for,a=i?Symbol.for("react.element"):60103;function r(M){return M.$$typeof===a}function u(M){return Array.isArray(M)?[]:{}}function f(M,C){return C.clone!==!1&&C.isMergeableObject(M)?R(u(M),M,C):M}function d(M,C,D){return M.concat(C).map(function(O){return f(O,D)})}function p(M,C){if(!C.customMerge)return R;var D=C.customMerge(M);return typeof D=="function"?D:R}function y(M){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(M).filter(function(C){return Object.propertyIsEnumerable.call(M,C)}):[]}function v(M){return Object.keys(M).concat(y(M))}function _(M,C){try{return C in M}catch{return!1}}function b(M,C){return _(M,C)&&!(Object.hasOwnProperty.call(M,C)&&Object.propertyIsEnumerable.call(M,C))}function E(M,C,D){var O={};return D.isMergeableObject(M)&&v(M).forEach(function(N){O[N]=f(M[N],D)}),v(C).forEach(function(N){b(M,N)||(_(M,N)&&D.isMergeableObject(C[N])?O[N]=p(N,D)(M[N],C[N],D):O[N]=f(C[N],D))}),O}function R(M,C,D){D=D||{},D.arrayMerge=D.arrayMerge||d,D.isMergeableObject=D.isMergeableObject||n,D.cloneUnlessOtherwiseSpecified=f;var O=Array.isArray(C),N=Array.isArray(M),L=O===N;return L?O?D.arrayMerge(M,C,D):E(M,C,D):f(C,D)}R.all=function(C,D){if(!Array.isArray(C))throw new Error("first argument should be an array");return C.reduce(function(O,N){return R(O,N,D)},{})};var T=R;return sb=T,sb}var rb,iw;function q_(){if(iw)return rb;iw=1;var n=Object.create,t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,r=Object.prototype.hasOwnProperty,u=(J,F)=>{for(var $ in F)t(J,$,{get:F[$],enumerable:!0})},f=(J,F,$,mt)=>{if(F&&typeof F=="object"||typeof F=="function")for(let Tt of i(F))!r.call(J,Tt)&&Tt!==$&&t(J,Tt,{get:()=>F[Tt],enumerable:!(mt=e(F,Tt))||mt.enumerable});return J},d=(J,F,$)=>($=J!=null?n(a(J)):{},f(!J||!J.__esModule?t($,"default",{value:J,enumerable:!0}):$,J)),p=J=>f(t({},"__esModule",{value:!0}),J),y={};u(y,{callPlayer:()=>Q,getConfig:()=>at,getSDK:()=>j,isBlobUrl:()=>I,isMediaStream:()=>rt,lazy:()=>E,omit:()=>nt,parseEndTime:()=>L,parseStartTime:()=>N,queryString:()=>G,randomString:()=>H,supportsWebKitPresentationMode:()=>Z}),rb=p(y);var v=d(Fl()),_=d(TG()),b=d(C3());const E=J=>v.default.lazy(async()=>{const F=await J();return typeof F.default=="function"?F:F.default}),R=/[?&#](?:start|t)=([0-9hms]+)/,T=/[?&#]end=([0-9hms]+)/,M=/(\d+)(h|m|s)/g,C=/^\d+$/;function D(J,F){if(J instanceof Array)return;const $=J.match(F);if($){const mt=$[1];if(mt.match(M))return O(mt);if(C.test(mt))return parseInt(mt)}}function O(J){let F=0,$=M.exec(J);for(;$!==null;){const[,mt,Tt]=$;Tt==="h"&&(F+=parseInt(mt,10)*60*60),Tt==="m"&&(F+=parseInt(mt,10)*60),Tt==="s"&&(F+=parseInt(mt,10)),$=M.exec(J)}return F}function N(J){return D(J,R)}function L(J){return D(J,T)}function H(){return Math.random().toString(36).substr(2,5)}function G(J){return Object.keys(J).map(F=>`${F}=${J[F]}`).join("&")}function B(J){return window[J]?window[J]:window.exports&&window.exports[J]?window.exports[J]:window.module&&window.module.exports&&window.module.exports[J]?window.module.exports[J]:null}const z={},j=function(F,$,mt=null,Tt=()=>!0,st=_.default){const Et=B($);return Et&&Tt(Et)?Promise.resolve(Et):new Promise((Bt,Xt)=>{if(z[F]){z[F].push({resolve:Bt,reject:Xt});return}z[F]=[{resolve:Bt,reject:Xt}];const Zt=Me=>{z[F].forEach(ge=>ge.resolve(Me))};if(mt){const Me=window[mt];window[mt]=function(){Me&&Me(),Zt(B($))}}st(F,Me=>{Me?(z[F].forEach(ge=>ge.reject(Me)),z[F]=null):mt||Zt(B($))})})};function at(J,F){return(0,b.default)(F.config,J.config)}function nt(J,...F){const $=[].concat(...F),mt={},Tt=Object.keys(J);for(const st of Tt)$.indexOf(st)===-1&&(mt[st]=J[st]);return mt}function Q(J,...F){if(!this.player||!this.player[J]){let $=`ReactPlayer: ${this.constructor.displayName} player could not call %c${J}%c – `;return this.player?this.player[J]||($+="The method was not available"):$+="The player was not available",console.warn($,"font-weight: bold",""),null}return this.player[J](...F)}function rt(J){return typeof window<"u"&&typeof window.MediaStream<"u"&&J instanceof window.MediaStream}function I(J){return/^blob:/.test(J)}function Z(J=document.createElement("video")){const F=/iPhone|iPod/.test(navigator.userAgent)===!1;return J.webkitSupportsPresentationMode&&typeof J.webkitSetPresentationMode=="function"&&F}function W(J){return J}return rb}var ob,aw;function AG(){if(aw)return ob;aw=1;var n=Object.defineProperty,t=Object.getOwnPropertyDescriptor,e=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a=(Q,rt)=>{for(var I in rt)n(Q,I,{get:rt[I],enumerable:!0})},r=(Q,rt,I,Z)=>{if(rt&&typeof rt=="object"||typeof rt=="function")for(let W of e(rt))!i.call(Q,W)&&W!==I&&n(Q,W,{get:()=>rt[W],enumerable:!(Z=t(rt,W))||Z.enumerable});return Q},u=Q=>r(n({},"__esModule",{value:!0}),Q),f={};a(f,{AUDIO_EXTENSIONS:()=>H,DASH_EXTENSIONS:()=>z,FLV_EXTENSIONS:()=>j,HLS_EXTENSIONS:()=>B,MATCH_URL_DAILYMOTION:()=>D,MATCH_URL_FACEBOOK:()=>b,MATCH_URL_FACEBOOK_WATCH:()=>E,MATCH_URL_KALTURA:()=>L,MATCH_URL_MIXCLOUD:()=>O,MATCH_URL_MUX:()=>_,MATCH_URL_SOUNDCLOUD:()=>y,MATCH_URL_STREAMABLE:()=>R,MATCH_URL_TWITCH_CHANNEL:()=>C,MATCH_URL_TWITCH_VIDEO:()=>M,MATCH_URL_VIDYARD:()=>N,MATCH_URL_VIMEO:()=>v,MATCH_URL_WISTIA:()=>T,MATCH_URL_YOUTUBE:()=>p,VIDEO_EXTENSIONS:()=>G,canPlay:()=>nt}),ob=u(f);var d=q_();const p=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,y=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,v=/vimeo\.com\/(?!progressive_redirect).+/,_=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,b=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,E=/^https?:\/\/fb\.watch\/.+$/,R=/streamable\.com\/([a-z0-9]+)$/,T=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,M=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,C=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,D=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,O=/mixcloud\.com\/([^/]+\/[^/]+)/,N=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,L=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,H=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,G=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,B=/\.(m3u8)($|\?)/i,z=/\.(mpd)($|\?)/i,j=/\.(flv)($|\?)/i,at=Q=>{if(Q instanceof Array){for(const rt of Q)if(typeof rt=="string"&&at(rt)||at(rt.src))return!0;return!1}return(0,d.isMediaStream)(Q)||(0,d.isBlobUrl)(Q)?!0:H.test(Q)||G.test(Q)||B.test(Q)||z.test(Q)||j.test(Q)},nt={youtube:Q=>Q instanceof Array?Q.every(rt=>p.test(rt)):p.test(Q),soundcloud:Q=>y.test(Q)&&!H.test(Q),vimeo:Q=>v.test(Q)&&!G.test(Q)&&!B.test(Q),mux:Q=>_.test(Q),facebook:Q=>b.test(Q)||E.test(Q),streamable:Q=>R.test(Q),wistia:Q=>T.test(Q),twitch:Q=>M.test(Q)||C.test(Q),dailymotion:Q=>D.test(Q),mixcloud:Q=>O.test(Q),vidyard:Q=>N.test(Q),kaltura:Q=>L.test(Q),file:at};return ob}var lb,sw;function RG(){if(sw)return lb;sw=1;var n=Object.defineProperty,t=Object.getOwnPropertyDescriptor,e=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a=(v,_)=>{for(var b in _)n(v,b,{get:_[b],enumerable:!0})},r=(v,_,b,E)=>{if(_&&typeof _=="object"||typeof _=="function")for(let R of e(_))!i.call(v,R)&&R!==b&&n(v,R,{get:()=>_[R],enumerable:!(E=t(_,R))||E.enumerable});return v},u=v=>r(n({},"__esModule",{value:!0}),v),f={};a(f,{default:()=>y}),lb=u(f);var d=q_(),p=AG(),y=[{key:"youtube",name:"YouTube",canPlay:p.canPlay.youtube,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./YouTube-CWs4_RvU.js").then(v=>v.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:p.canPlay.soundcloud,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./SoundCloud-DC-5wNZ-.js").then(v=>v.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:p.canPlay.vimeo,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./Vimeo-BgICLrqJ.js").then(v=>v.V),[]))},{key:"mux",name:"Mux",canPlay:p.canPlay.mux,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./Mux-BKRBpu-E.js").then(v=>v.M),[]))},{key:"facebook",name:"Facebook",canPlay:p.canPlay.facebook,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./Facebook-CEw7zqB7.js").then(v=>v.F),[]))},{key:"streamable",name:"Streamable",canPlay:p.canPlay.streamable,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./Streamable-DlSTzduK.js").then(v=>v.S),[]))},{key:"wistia",name:"Wistia",canPlay:p.canPlay.wistia,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./Wistia-rxrVwp87.js").then(v=>v.W),[]))},{key:"twitch",name:"Twitch",canPlay:p.canPlay.twitch,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./Twitch-_P0ZXhmn.js").then(v=>v.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:p.canPlay.dailymotion,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./DailyMotion-DMurIXtQ.js").then(v=>v.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:p.canPlay.mixcloud,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./Mixcloud-D7T0Qlw6.js").then(v=>v.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:p.canPlay.vidyard,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./Vidyard-4aXnKma6.js").then(v=>v.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:p.canPlay.kaltura,lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./Kaltura-DgyZj6AC.js").then(v=>v.K),[]))},{key:"file",name:"FilePlayer",canPlay:p.canPlay.file,canEnablePIP:v=>p.canPlay.file(v)&&(document.pictureInPictureEnabled||(0,d.supportsWebKitPresentationMode)())&&!p.AUDIO_EXTENSIONS.test(v),lazyPlayer:(0,d.lazy)(()=>Ms(()=>import("./FilePlayer-DftmRVfj.js").then(v=>v.F),[]))}];return lb}var rw=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function wG(n,t){return!!(n===t||rw(n)&&rw(t))}function CG(n,t){if(n.length!==t.length)return!1;for(var e=0;e<n.length;e++)if(!wG(n[e],t[e]))return!1;return!0}function DG(n,t){t===void 0&&(t=CG);var e,i=[],a,r=!1;function u(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];return r&&e===this&&t(f,i)||(a=n.apply(this,f),r=!0,e=this,i=f),a}return u}const OG=Object.freeze(Object.defineProperty({__proto__:null,default:DG},Symbol.toStringTag,{value:"Module"})),UG=FO(OG);var ub,ow;function D3(){if(ow)return ub;ow=1;var n=typeof Element<"u",t=typeof Map=="function",e=typeof Set=="function",i=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function a(r,u){if(r===u)return!0;if(r&&u&&typeof r=="object"&&typeof u=="object"){if(r.constructor!==u.constructor)return!1;var f,d,p;if(Array.isArray(r)){if(f=r.length,f!=u.length)return!1;for(d=f;d--!==0;)if(!a(r[d],u[d]))return!1;return!0}var y;if(t&&r instanceof Map&&u instanceof Map){if(r.size!==u.size)return!1;for(y=r.entries();!(d=y.next()).done;)if(!u.has(d.value[0]))return!1;for(y=r.entries();!(d=y.next()).done;)if(!a(d.value[1],u.get(d.value[0])))return!1;return!0}if(e&&r instanceof Set&&u instanceof Set){if(r.size!==u.size)return!1;for(y=r.entries();!(d=y.next()).done;)if(!u.has(d.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(r)&&ArrayBuffer.isView(u)){if(f=r.length,f!=u.length)return!1;for(d=f;d--!==0;)if(r[d]!==u[d])return!1;return!0}if(r.constructor===RegExp)return r.source===u.source&&r.flags===u.flags;if(r.valueOf!==Object.prototype.valueOf&&typeof r.valueOf=="function"&&typeof u.valueOf=="function")return r.valueOf()===u.valueOf();if(r.toString!==Object.prototype.toString&&typeof r.toString=="function"&&typeof u.toString=="function")return r.toString()===u.toString();if(p=Object.keys(r),f=p.length,f!==Object.keys(u).length)return!1;for(d=f;d--!==0;)if(!Object.prototype.hasOwnProperty.call(u,p[d]))return!1;if(n&&r instanceof Element)return!1;for(d=f;d--!==0;)if(!((p[d]==="_owner"||p[d]==="__v"||p[d]==="__o")&&r.$$typeof)&&!a(r[p[d]],u[p[d]]))return!1;return!0}return r!==r&&u!==u}return ub=function(u,f){try{return a(u,f)}catch(d){if((d.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw d}},ub}var cb={exports:{}},fb,lw;function NG(){if(lw)return fb;lw=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return fb=n,fb}var hb,uw;function LG(){if(uw)return hb;uw=1;var n=NG();function t(){}function e(){}return e.resetWarningCache=t,hb=function(){function i(u,f,d,p,y,v){if(v!==n){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}i.isRequired=i;function a(){return i}var r={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:e,resetWarningCache:t};return r.PropTypes=r,r},hb}var cw;function PG(){return cw||(cw=1,cb.exports=LG()()),cb.exports}var db,fw;function O3(){if(fw)return db;fw=1;var n=Object.create,t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,r=Object.prototype.hasOwnProperty,u=(G,B)=>{for(var z in B)t(G,z,{get:B[z],enumerable:!0})},f=(G,B,z,j)=>{if(B&&typeof B=="object"||typeof B=="function")for(let at of i(B))!r.call(G,at)&&at!==z&&t(G,at,{get:()=>B[at],enumerable:!(j=e(B,at))||j.enumerable});return G},d=(G,B,z)=>(z=G!=null?n(a(G)):{},f(!G||!G.__esModule?t(z,"default",{value:G,enumerable:!0}):z,G)),p=G=>f(t({},"__esModule",{value:!0}),G),y={};u(y,{defaultProps:()=>H,propTypes:()=>N}),db=p(y);var v=d(PG());const{string:_,bool:b,number:E,array:R,oneOfType:T,shape:M,object:C,func:D,node:O}=v.default,N={url:T([_,R,C]),playing:b,loop:b,controls:b,volume:E,muted:b,playbackRate:E,width:T([_,E]),height:T([_,E]),style:C,progressInterval:E,playsinline:b,pip:b,stopOnUnmount:b,light:T([b,_,C]),playIcon:O,previewTabIndex:E,previewAriaLabel:_,fallback:O,oEmbedUrl:_,wrapper:T([_,D,M({render:D.isRequired})]),config:M({soundcloud:M({options:C}),youtube:M({playerVars:C,embedOptions:C,onUnstarted:D}),facebook:M({appId:_,version:_,playerId:_,attributes:C}),dailymotion:M({params:C}),vimeo:M({playerOptions:C,title:_}),mux:M({attributes:C,version:_}),file:M({attributes:C,tracks:R,forceVideo:b,forceAudio:b,forceHLS:b,forceSafariHLS:b,forceDisableHls:b,forceDASH:b,forceFLV:b,hlsOptions:C,hlsVersion:_,dashVersion:_,flvVersion:_}),wistia:M({options:C,playerId:_,customControls:R}),mixcloud:M({options:C}),twitch:M({options:C,playerId:_}),vidyard:M({options:C})}),onReady:D,onStart:D,onPlay:D,onPause:D,onBuffer:D,onBufferEnd:D,onEnded:D,onError:D,onDuration:D,onSeek:D,onPlaybackRateChange:D,onPlaybackQualityChange:D,onProgress:D,onClickPreview:D,onEnablePIP:D,onDisablePIP:D},L=()=>{},H={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:L},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:L,onStart:L,onPlay:L,onPause:L,onBuffer:L,onBufferEnd:L,onEnded:L,onError:L,onDuration:L,onSeek:L,onPlaybackRateChange:L,onPlaybackQualityChange:L,onProgress:L,onClickPreview:L,onEnablePIP:L,onDisablePIP:L};return db}var pb,hw;function zG(){if(hw)return pb;hw=1;var n=Object.create,t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,r=Object.prototype.hasOwnProperty,u=(D,O,N)=>O in D?t(D,O,{enumerable:!0,configurable:!0,writable:!0,value:N}):D[O]=N,f=(D,O)=>{for(var N in O)t(D,N,{get:O[N],enumerable:!0})},d=(D,O,N,L)=>{if(O&&typeof O=="object"||typeof O=="function")for(let H of i(O))!r.call(D,H)&&H!==N&&t(D,H,{get:()=>O[H],enumerable:!(L=e(O,H))||L.enumerable});return D},p=(D,O,N)=>(N=D!=null?n(a(D)):{},d(!D||!D.__esModule?t(N,"default",{value:D,enumerable:!0}):N,D)),y=D=>d(t({},"__esModule",{value:!0}),D),v=(D,O,N)=>(u(D,typeof O!="symbol"?O+"":O,N),N),_={};f(_,{default:()=>C}),pb=y(_);var b=p(Fl()),E=p(D3()),R=O3(),T=q_();const M=5e3;class C extends b.Component{constructor(){super(...arguments),v(this,"mounted",!1),v(this,"isReady",!1),v(this,"isPlaying",!1),v(this,"isLoading",!0),v(this,"loadOnReady",null),v(this,"startOnPlay",!0),v(this,"seekOnPlay",null),v(this,"onDurationCalled",!1),v(this,"handlePlayerMount",O=>{if(this.player){this.progress();return}this.player=O,this.player.load(this.props.url),this.progress()}),v(this,"getInternalPlayer",O=>this.player?this.player[O]:null),v(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const O=this.getCurrentTime()||0,N=this.getSecondsLoaded(),L=this.getDuration();if(L){const H={playedSeconds:O,played:O/L};N!==null&&(H.loadedSeconds=N,H.loaded=N/L),(H.playedSeconds!==this.prevPlayed||H.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(H),this.prevPlayed=H.playedSeconds,this.prevLoaded=H.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),v(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:O,playing:N,volume:L,muted:H}=this.props;O(),!H&&L!==null&&this.player.setVolume(L),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):N&&this.player.play(),this.handleDurationCheck()}),v(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:O,onPlay:N,playbackRate:L}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&L!==1&&this.player.setPlaybackRate(L),O(),this.startOnPlay=!1),N(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),v(this,"handlePause",O=>{this.isPlaying=!1,this.isLoading||this.props.onPause(O)}),v(this,"handleEnded",()=>{const{activePlayer:O,loop:N,onEnded:L}=this.props;O.loopOnEnded&&N&&this.seekTo(0),N||(this.isPlaying=!1,L())}),v(this,"handleError",(...O)=>{this.isLoading=!1,this.props.onError(...O)}),v(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const O=this.getDuration();O?this.onDurationCalled||(this.props.onDuration(O),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),v(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(O){if(!this.player)return;const{url:N,playing:L,volume:H,muted:G,playbackRate:B,pip:z,loop:j,activePlayer:at,disableDeferredLoading:nt}=this.props;if(!(0,E.default)(O.url,N)){if(this.isLoading&&!at.forceLoad&&!nt&&!(0,T.isMediaStream)(N)){console.warn(`ReactPlayer: the attempt to load ${N} is being deferred until the player has loaded`),this.loadOnReady=N;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(N,this.isReady)}!O.playing&&L&&!this.isPlaying&&this.player.play(),O.playing&&!L&&this.isPlaying&&this.player.pause(),!O.pip&&z&&this.player.enablePIP&&this.player.enablePIP(),O.pip&&!z&&this.player.disablePIP&&this.player.disablePIP(),O.volume!==H&&H!==null&&this.player.setVolume(H),O.muted!==G&&(G?this.player.mute():(this.player.unmute(),H!==null&&setTimeout(()=>this.player.setVolume(H)))),O.playbackRate!==B&&this.player.setPlaybackRate&&this.player.setPlaybackRate(B),O.loop!==j&&this.player.setLoop&&this.player.setLoop(j)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(O,N,L){if(!this.isReady){O!==0&&(this.seekOnPlay=O,setTimeout(()=>{this.seekOnPlay=null},M));return}if(N?N==="fraction":O>0&&O<1){const G=this.player.getDuration();if(!G){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(G*O,L);return}this.player.seekTo(O,L)}render(){const O=this.props.activePlayer;return O?b.default.createElement(O,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}return v(C,"displayName","Player"),v(C,"propTypes",R.propTypes),v(C,"defaultProps",R.defaultProps),pb}var mb,dw;function BG(){if(dw)return mb;dw=1;var n=Object.create,t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,r=Object.prototype.hasOwnProperty,u=(j,at,nt)=>at in j?t(j,at,{enumerable:!0,configurable:!0,writable:!0,value:nt}):j[at]=nt,f=(j,at)=>{for(var nt in at)t(j,nt,{get:at[nt],enumerable:!0})},d=(j,at,nt,Q)=>{if(at&&typeof at=="object"||typeof at=="function")for(let rt of i(at))!r.call(j,rt)&&rt!==nt&&t(j,rt,{get:()=>at[rt],enumerable:!(Q=e(at,rt))||Q.enumerable});return j},p=(j,at,nt)=>(nt=j!=null?n(a(j)):{},d(!j||!j.__esModule?t(nt,"default",{value:j,enumerable:!0}):nt,j)),y=j=>d(t({},"__esModule",{value:!0}),j),v=(j,at,nt)=>(u(j,typeof at!="symbol"?at+"":at,nt),nt),_={};f(_,{createReactPlayer:()=>z}),mb=y(_);var b=p(Fl()),E=p(C3()),R=p(UG),T=p(D3()),M=O3(),C=q_(),D=p(zG());const O=(0,C.lazy)(()=>Ms(()=>import("./Preview-Fdc5JNNG.js").then(j=>j.P),[])),N=typeof window<"u"&&window.document&&typeof document<"u",L=typeof Ux<"u"&&Ux.window&&Ux.window.document,H=Object.keys(M.propTypes),G=N||L?b.Suspense:()=>null,B=[],z=(j,at)=>{var nt;return nt=class extends b.Component{constructor(){super(...arguments),v(this,"state",{showPreview:!!this.props.light}),v(this,"references",{wrapper:Q=>{this.wrapper=Q},player:Q=>{this.player=Q}}),v(this,"handleClickPreview",Q=>{this.setState({showPreview:!1}),this.props.onClickPreview(Q)}),v(this,"showPreview",()=>{this.setState({showPreview:!0})}),v(this,"getDuration",()=>this.player?this.player.getDuration():null),v(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),v(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),v(this,"getInternalPlayer",(Q="player")=>this.player?this.player.getInternalPlayer(Q):null),v(this,"seekTo",(Q,rt,I)=>{if(!this.player)return null;this.player.seekTo(Q,rt,I)}),v(this,"handleReady",()=>{this.props.onReady(this)}),v(this,"getActivePlayer",(0,R.default)(Q=>{for(const rt of[...B,...j])if(rt.canPlay(Q))return rt;return at||null})),v(this,"getConfig",(0,R.default)((Q,rt)=>{const{config:I}=this.props;return E.default.all([M.defaultProps.config,M.defaultProps.config[rt]||{},I,I[rt]||{}])})),v(this,"getAttributes",(0,R.default)(Q=>(0,C.omit)(this.props,H))),v(this,"renderActivePlayer",Q=>{if(!Q)return null;const rt=this.getActivePlayer(Q);if(!rt)return null;const I=this.getConfig(Q,rt.key);return b.default.createElement(D.default,{...this.props,key:rt.key,ref:this.references.player,config:I,activePlayer:rt.lazyPlayer||rt,onReady:this.handleReady})})}shouldComponentUpdate(Q,rt){return!(0,T.default)(this.props,Q)||!(0,T.default)(this.state,rt)}componentDidUpdate(Q){const{light:rt}=this.props;!Q.light&&rt&&this.setState({showPreview:!0}),Q.light&&!rt&&this.setState({showPreview:!1})}renderPreview(Q){if(!Q)return null;const{light:rt,playIcon:I,previewTabIndex:Z,oEmbedUrl:W,previewAriaLabel:J}=this.props;return b.default.createElement(O,{url:Q,light:rt,playIcon:I,previewTabIndex:Z,previewAriaLabel:J,oEmbedUrl:W,onClick:this.handleClickPreview})}render(){const{url:Q,style:rt,width:I,height:Z,fallback:W,wrapper:J}=this.props,{showPreview:F}=this.state,$=this.getAttributes(Q),mt=typeof J=="string"?this.references.wrapper:void 0;return b.default.createElement(J,{ref:mt,style:{...rt,width:I,height:Z},...$},b.default.createElement(G,{fallback:W},F?this.renderPreview(Q):this.renderActivePlayer(Q)))}},v(nt,"displayName","ReactPlayer"),v(nt,"propTypes",M.propTypes),v(nt,"defaultProps",M.defaultProps),v(nt,"addCustomPlayer",Q=>{B.push(Q)}),v(nt,"removeCustomPlayers",()=>{B.length=0}),v(nt,"canPlay",Q=>{for(const rt of[...B,...j])if(rt.canPlay(Q))return!0;return!1}),v(nt,"canEnablePIP",Q=>{for(const rt of[...B,...j])if(rt.canEnablePIP&&rt.canEnablePIP(Q))return!0;return!1}),nt};return mb}var gb,pw;function IG(){if(pw)return gb;pw=1;var n=Object.create,t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getPrototypeOf,r=Object.prototype.hasOwnProperty,u=(R,T)=>{for(var M in T)t(R,M,{get:T[M],enumerable:!0})},f=(R,T,M,C)=>{if(T&&typeof T=="object"||typeof T=="function")for(let D of i(T))!r.call(R,D)&&D!==M&&t(R,D,{get:()=>T[D],enumerable:!(C=e(T,D))||C.enumerable});return R},d=(R,T,M)=>(M=R!=null?n(a(R)):{},f(!R||!R.__esModule?t(M,"default",{value:R,enumerable:!0}):M,R)),p=R=>f(t({},"__esModule",{value:!0}),R),y={};u(y,{default:()=>E}),gb=p(y);var v=d(RG()),_=BG();const b=v.default[v.default.length-1];var E=(0,_.createReactPlayer)(v.default,b);return gb}var VG=IG();const HG=rg(VG),FG=At.forwardRef(({videoUrl:n,playing:t,setPlaying:e},i)=>oe.jsx("div",{className:"bg-gray-900 rounded-lg shadow-lg overflow-hidden",children:oe.jsx("div",{className:"relative w-full",style:{paddingBottom:"56.25%"},children:oe.jsx("div",{className:"absolute top-0 left-0 w-full h-full",children:oe.jsx(HG,{ref:i,url:n,width:"100%",height:"100%",controls:!0,playing:t,onError:a=>console.error("Video error:",a),onPlay:()=>e(!0),onPause:()=>e(!1),config:{file:{attributes:{controlsList:"nodownload"}},youtube:{playerVars:{showinfo:0,modestbranding:1}}}})})})}));function U3(n,t){return function(){return n.apply(t,arguments)}}const{toString:GG}=Object.prototype,{getPrototypeOf:H1}=Object,X_=(n=>t=>{const e=GG.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),so=n=>(n=n.toLowerCase(),t=>X_(t)===n),k_=n=>t=>typeof t===n,{isArray:Pd}=Array,sg=k_("undefined");function qG(n){return n!==null&&!sg(n)&&n.constructor!==null&&!sg(n.constructor)&&Ks(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const N3=so("ArrayBuffer");function XG(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&N3(n.buffer),t}const kG=k_("string"),Ks=k_("function"),L3=k_("number"),j_=n=>n!==null&&typeof n=="object",jG=n=>n===!0||n===!1,sv=n=>{if(X_(n)!=="object")return!1;const t=H1(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},YG=so("Date"),WG=so("File"),ZG=so("Blob"),KG=so("FileList"),QG=n=>j_(n)&&Ks(n.pipe),JG=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||Ks(n.append)&&((t=X_(n))==="formdata"||t==="object"&&Ks(n.toString)&&n.toString()==="[object FormData]"))},$G=so("URLSearchParams"),[t7,e7,n7,i7]=["ReadableStream","Request","Response","Headers"].map(so),a7=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Eg(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,a;if(typeof n!="object"&&(n=[n]),Pd(n))for(i=0,a=n.length;i<a;i++)t.call(null,n[i],i,n);else{const r=e?Object.getOwnPropertyNames(n):Object.keys(n),u=r.length;let f;for(i=0;i<u;i++)f=r[i],t.call(null,n[f],f,n)}}function P3(n,t){t=t.toLowerCase();const e=Object.keys(n);let i=e.length,a;for(;i-- >0;)if(a=e[i],t===a.toLowerCase())return a;return null}const xf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,z3=n=>!sg(n)&&n!==xf;function lM(){const{caseless:n}=z3(this)&&this||{},t={},e=(i,a)=>{const r=n&&P3(t,a)||a;sv(t[r])&&sv(i)?t[r]=lM(t[r],i):sv(i)?t[r]=lM({},i):Pd(i)?t[r]=i.slice():t[r]=i};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&Eg(arguments[i],e);return t}const s7=(n,t,e,{allOwnKeys:i}={})=>(Eg(t,(a,r)=>{e&&Ks(a)?n[r]=U3(a,e):n[r]=a},{allOwnKeys:i}),n),r7=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),o7=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},l7=(n,t,e,i)=>{let a,r,u;const f={};if(t=t||{},n==null)return t;do{for(a=Object.getOwnPropertyNames(n),r=a.length;r-- >0;)u=a[r],(!i||i(u,n,t))&&!f[u]&&(t[u]=n[u],f[u]=!0);n=e!==!1&&H1(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},u7=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},c7=n=>{if(!n)return null;if(Pd(n))return n;let t=n.length;if(!L3(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},f7=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&H1(Uint8Array)),h7=(n,t)=>{const i=(n&&n[Symbol.iterator]).call(n);let a;for(;(a=i.next())&&!a.done;){const r=a.value;t.call(n,r[0],r[1])}},d7=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},p7=so("HTMLFormElement"),m7=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,a){return i.toUpperCase()+a}),mw=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),g7=so("RegExp"),B3=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};Eg(e,(a,r)=>{let u;(u=t(a,r,n))!==!1&&(i[r]=u||a)}),Object.defineProperties(n,i)},y7=n=>{B3(n,(t,e)=>{if(Ks(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(Ks(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},v7=(n,t)=>{const e={},i=a=>{a.forEach(r=>{e[r]=!0})};return Pd(n)?i(n):i(String(n).split(t)),e},_7=()=>{},x7=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t;function S7(n){return!!(n&&Ks(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const b7=n=>{const t=new Array(10),e=(i,a)=>{if(j_(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[a]=i;const r=Pd(i)?[]:{};return Eg(i,(u,f)=>{const d=e(u,a+1);!sg(d)&&(r[f]=d)}),t[a]=void 0,r}}return i};return e(n,0)},M7=so("AsyncFunction"),E7=n=>n&&(j_(n)||Ks(n))&&Ks(n.then)&&Ks(n.catch),I3=((n,t)=>n?setImmediate:t?((e,i)=>(xf.addEventListener("message",({source:a,data:r})=>{a===xf&&r===e&&i.length&&i.shift()()},!1),a=>{i.push(a),xf.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Ks(xf.postMessage)),T7=typeof queueMicrotask<"u"?queueMicrotask.bind(xf):typeof process<"u"&&process.nextTick||I3,Dt={isArray:Pd,isArrayBuffer:N3,isBuffer:qG,isFormData:JG,isArrayBufferView:XG,isString:kG,isNumber:L3,isBoolean:jG,isObject:j_,isPlainObject:sv,isReadableStream:t7,isRequest:e7,isResponse:n7,isHeaders:i7,isUndefined:sg,isDate:YG,isFile:WG,isBlob:ZG,isRegExp:g7,isFunction:Ks,isStream:QG,isURLSearchParams:$G,isTypedArray:f7,isFileList:KG,forEach:Eg,merge:lM,extend:s7,trim:a7,stripBOM:r7,inherits:o7,toFlatObject:l7,kindOf:X_,kindOfTest:so,endsWith:u7,toArray:c7,forEachEntry:h7,matchAll:d7,isHTMLForm:p7,hasOwnProperty:mw,hasOwnProp:mw,reduceDescriptors:B3,freezeMethods:y7,toObjectSet:v7,toCamelCase:m7,noop:_7,toFiniteNumber:x7,findKey:P3,global:xf,isContextDefined:z3,isSpecCompliantForm:S7,toJSONObject:b7,isAsyncFn:M7,isThenable:E7,setImmediate:I3,asap:T7};function We(n,t,e,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}Dt.inherits(We,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Dt.toJSONObject(this.config),code:this.code,status:this.status}}});const V3=We.prototype,H3={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{H3[n]={value:n}});Object.defineProperties(We,H3);Object.defineProperty(V3,"isAxiosError",{value:!0});We.from=(n,t,e,i,a,r)=>{const u=Object.create(V3);return Dt.toFlatObject(n,u,function(d){return d!==Error.prototype},f=>f!=="isAxiosError"),We.call(u,n.message,t,e,i,a),u.cause=n,u.name=n.name,r&&Object.assign(u,r),u};const A7=null;function uM(n){return Dt.isPlainObject(n)||Dt.isArray(n)}function F3(n){return Dt.endsWith(n,"[]")?n.slice(0,-2):n}function gw(n,t,e){return n?n.concat(t).map(function(a,r){return a=F3(a),!e&&r?"["+a+"]":a}).join(e?".":""):t}function R7(n){return Dt.isArray(n)&&!n.some(uM)}const w7=Dt.toFlatObject(Dt,{},null,function(t){return/^is[A-Z]/.test(t)});function Y_(n,t,e){if(!Dt.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=Dt.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(R,T){return!Dt.isUndefined(T[R])});const i=e.metaTokens,a=e.visitor||y,r=e.dots,u=e.indexes,d=(e.Blob||typeof Blob<"u"&&Blob)&&Dt.isSpecCompliantForm(t);if(!Dt.isFunction(a))throw new TypeError("visitor must be a function");function p(E){if(E===null)return"";if(Dt.isDate(E))return E.toISOString();if(!d&&Dt.isBlob(E))throw new We("Blob is not supported. Use a Buffer instead.");return Dt.isArrayBuffer(E)||Dt.isTypedArray(E)?d&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function y(E,R,T){let M=E;if(E&&!T&&typeof E=="object"){if(Dt.endsWith(R,"{}"))R=i?R:R.slice(0,-2),E=JSON.stringify(E);else if(Dt.isArray(E)&&R7(E)||(Dt.isFileList(E)||Dt.endsWith(R,"[]"))&&(M=Dt.toArray(E)))return R=F3(R),M.forEach(function(D,O){!(Dt.isUndefined(D)||D===null)&&t.append(u===!0?gw([R],O,r):u===null?R:R+"[]",p(D))}),!1}return uM(E)?!0:(t.append(gw(T,R,r),p(E)),!1)}const v=[],_=Object.assign(w7,{defaultVisitor:y,convertValue:p,isVisitable:uM});function b(E,R){if(!Dt.isUndefined(E)){if(v.indexOf(E)!==-1)throw Error("Circular reference detected in "+R.join("."));v.push(E),Dt.forEach(E,function(M,C){(!(Dt.isUndefined(M)||M===null)&&a.call(t,M,Dt.isString(C)?C.trim():C,R,_))===!0&&b(M,R?R.concat(C):[C])}),v.pop()}}if(!Dt.isObject(n))throw new TypeError("data must be an object");return b(n),t}function yw(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function F1(n,t){this._pairs=[],n&&Y_(n,this,t)}const G3=F1.prototype;G3.append=function(t,e){this._pairs.push([t,e])};G3.toString=function(t){const e=t?function(i){return t.call(this,i,yw)}:yw;return this._pairs.map(function(a){return e(a[0])+"="+e(a[1])},"").join("&")};function C7(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function q3(n,t,e){if(!t)return n;const i=e&&e.encode||C7;Dt.isFunction(e)&&(e={serialize:e});const a=e&&e.serialize;let r;if(a?r=a(t,e):r=Dt.isURLSearchParams(t)?t.toString():new F1(t,e).toString(i),r){const u=n.indexOf("#");u!==-1&&(n=n.slice(0,u)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class vw{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Dt.forEach(this.handlers,function(i){i!==null&&t(i)})}}const X3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},D7=typeof URLSearchParams<"u"?URLSearchParams:F1,O7=typeof FormData<"u"?FormData:null,U7=typeof Blob<"u"?Blob:null,N7={isBrowser:!0,classes:{URLSearchParams:D7,FormData:O7,Blob:U7},protocols:["http","https","file","blob","url","data"]},G1=typeof window<"u"&&typeof document<"u",cM=typeof navigator=="object"&&navigator||void 0,L7=G1&&(!cM||["ReactNative","NativeScript","NS"].indexOf(cM.product)<0),P7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",z7=G1&&window.location.href||"http://localhost",B7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:G1,hasStandardBrowserEnv:L7,hasStandardBrowserWebWorkerEnv:P7,navigator:cM,origin:z7},Symbol.toStringTag,{value:"Module"})),La={...B7,...N7};function I7(n,t){return Y_(n,new La.classes.URLSearchParams,Object.assign({visitor:function(e,i,a,r){return La.isNode&&Dt.isBuffer(e)?(this.append(i,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}function V7(n){return Dt.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function H7(n){const t={},e=Object.keys(n);let i;const a=e.length;let r;for(i=0;i<a;i++)r=e[i],t[r]=n[r];return t}function k3(n){function t(e,i,a,r){let u=e[r++];if(u==="__proto__")return!0;const f=Number.isFinite(+u),d=r>=e.length;return u=!u&&Dt.isArray(a)?a.length:u,d?(Dt.hasOwnProp(a,u)?a[u]=[a[u],i]:a[u]=i,!f):((!a[u]||!Dt.isObject(a[u]))&&(a[u]=[]),t(e,i,a[u],r)&&Dt.isArray(a[u])&&(a[u]=H7(a[u])),!f)}if(Dt.isFormData(n)&&Dt.isFunction(n.entries)){const e={};return Dt.forEachEntry(n,(i,a)=>{t(V7(i),a,e,0)}),e}return null}function F7(n,t,e){if(Dt.isString(n))try{return(t||JSON.parse)(n),Dt.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const Tg={transitional:X3,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",a=i.indexOf("application/json")>-1,r=Dt.isObject(t);if(r&&Dt.isHTMLForm(t)&&(t=new FormData(t)),Dt.isFormData(t))return a?JSON.stringify(k3(t)):t;if(Dt.isArrayBuffer(t)||Dt.isBuffer(t)||Dt.isStream(t)||Dt.isFile(t)||Dt.isBlob(t)||Dt.isReadableStream(t))return t;if(Dt.isArrayBufferView(t))return t.buffer;if(Dt.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let f;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return I7(t,this.formSerializer).toString();if((f=Dt.isFileList(t))||i.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Y_(f?{"files[]":t}:t,d&&new d,this.formSerializer)}}return r||a?(e.setContentType("application/json",!1),F7(t)):t}],transformResponse:[function(t){const e=this.transitional||Tg.transitional,i=e&&e.forcedJSONParsing,a=this.responseType==="json";if(Dt.isResponse(t)||Dt.isReadableStream(t))return t;if(t&&Dt.isString(t)&&(i&&!this.responseType||a)){const u=!(e&&e.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(f){if(u)throw f.name==="SyntaxError"?We.from(f,We.ERR_BAD_RESPONSE,this,null,this.response):f}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:La.classes.FormData,Blob:La.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Dt.forEach(["delete","get","head","post","put","patch"],n=>{Tg.headers[n]={}});const G7=Dt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),q7=n=>{const t={};let e,i,a;return n&&n.split(`
`).forEach(function(u){a=u.indexOf(":"),e=u.substring(0,a).trim().toLowerCase(),i=u.substring(a+1).trim(),!(!e||t[e]&&G7[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},_w=Symbol("internals");function fm(n){return n&&String(n).trim().toLowerCase()}function rv(n){return n===!1||n==null?n:Dt.isArray(n)?n.map(rv):String(n)}function X7(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const k7=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function yb(n,t,e,i,a){if(Dt.isFunction(i))return i.call(this,t,e);if(a&&(t=e),!!Dt.isString(t)){if(Dt.isString(i))return t.indexOf(i)!==-1;if(Dt.isRegExp(i))return i.test(t)}}function j7(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function Y7(n,t){const e=Dt.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(a,r,u){return this[i].call(this,t,a,r,u)},configurable:!0})})}let ws=class{constructor(t){t&&this.set(t)}set(t,e,i){const a=this;function r(f,d,p){const y=fm(d);if(!y)throw new Error("header name must be a non-empty string");const v=Dt.findKey(a,y);(!v||a[v]===void 0||p===!0||p===void 0&&a[v]!==!1)&&(a[v||d]=rv(f))}const u=(f,d)=>Dt.forEach(f,(p,y)=>r(p,y,d));if(Dt.isPlainObject(t)||t instanceof this.constructor)u(t,e);else if(Dt.isString(t)&&(t=t.trim())&&!k7(t))u(q7(t),e);else if(Dt.isHeaders(t))for(const[f,d]of t.entries())r(d,f,i);else t!=null&&r(e,t,i);return this}get(t,e){if(t=fm(t),t){const i=Dt.findKey(this,t);if(i){const a=this[i];if(!e)return a;if(e===!0)return X7(a);if(Dt.isFunction(e))return e.call(this,a,i);if(Dt.isRegExp(e))return e.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=fm(t),t){const i=Dt.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||yb(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let a=!1;function r(u){if(u=fm(u),u){const f=Dt.findKey(i,u);f&&(!e||yb(i,i[f],f,e))&&(delete i[f],a=!0)}}return Dt.isArray(t)?t.forEach(r):r(t),a}clear(t){const e=Object.keys(this);let i=e.length,a=!1;for(;i--;){const r=e[i];(!t||yb(this,this[r],r,t,!0))&&(delete this[r],a=!0)}return a}normalize(t){const e=this,i={};return Dt.forEach(this,(a,r)=>{const u=Dt.findKey(i,r);if(u){e[u]=rv(a),delete e[r];return}const f=t?j7(r):String(r).trim();f!==r&&delete e[r],e[f]=rv(a),i[f]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Dt.forEach(this,(i,a)=>{i!=null&&i!==!1&&(e[a]=t&&Dt.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(a=>i.set(a)),i}static accessor(t){const i=(this[_w]=this[_w]={accessors:{}}).accessors,a=this.prototype;function r(u){const f=fm(u);i[f]||(Y7(a,u),i[f]=!0)}return Dt.isArray(t)?t.forEach(r):r(t),this}};ws.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Dt.reduceDescriptors(ws.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[e]=i}}});Dt.freezeMethods(ws);function vb(n,t){const e=this||Tg,i=t||e,a=ws.from(i.headers);let r=i.data;return Dt.forEach(n,function(f){r=f.call(e,r,a.normalize(),t?t.status:void 0)}),a.normalize(),r}function j3(n){return!!(n&&n.__CANCEL__)}function zd(n,t,e){We.call(this,n??"canceled",We.ERR_CANCELED,t,e),this.name="CanceledError"}Dt.inherits(zd,We,{__CANCEL__:!0});function Y3(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new We("Request failed with status code "+e.status,[We.ERR_BAD_REQUEST,We.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function W7(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function Z7(n,t){n=n||10;const e=new Array(n),i=new Array(n);let a=0,r=0,u;return t=t!==void 0?t:1e3,function(d){const p=Date.now(),y=i[r];u||(u=p),e[a]=d,i[a]=p;let v=r,_=0;for(;v!==a;)_+=e[v++],v=v%n;if(a=(a+1)%n,a===r&&(r=(r+1)%n),p-u<t)return;const b=y&&p-y;return b?Math.round(_*1e3/b):void 0}}function K7(n,t){let e=0,i=1e3/t,a,r;const u=(p,y=Date.now())=>{e=y,a=null,r&&(clearTimeout(r),r=null),n.apply(null,p)};return[(...p)=>{const y=Date.now(),v=y-e;v>=i?u(p,y):(a=p,r||(r=setTimeout(()=>{r=null,u(a)},i-v)))},()=>a&&u(a)]}const i_=(n,t,e=3)=>{let i=0;const a=Z7(50,250);return K7(r=>{const u=r.loaded,f=r.lengthComputable?r.total:void 0,d=u-i,p=a(d),y=u<=f;i=u;const v={loaded:u,total:f,progress:f?u/f:void 0,bytes:d,rate:p||void 0,estimated:p&&f&&y?(f-u)/p:void 0,event:r,lengthComputable:f!=null,[t?"download":"upload"]:!0};n(v)},e)},xw=(n,t)=>{const e=n!=null;return[i=>t[0]({lengthComputable:e,total:n,loaded:i}),t[1]]},Sw=n=>(...t)=>Dt.asap(()=>n(...t)),Q7=La.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,La.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(La.origin),La.navigator&&/(msie|trident)/i.test(La.navigator.userAgent)):()=>!0,J7=La.hasStandardBrowserEnv?{write(n,t,e,i,a,r){const u=[n+"="+encodeURIComponent(t)];Dt.isNumber(e)&&u.push("expires="+new Date(e).toGMTString()),Dt.isString(i)&&u.push("path="+i),Dt.isString(a)&&u.push("domain="+a),r===!0&&u.push("secure"),document.cookie=u.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function $7(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function t9(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function W3(n,t,e){let i=!$7(t);return n&&(i||e==!1)?t9(n,t):t}const bw=n=>n instanceof ws?{...n}:n;function Df(n,t){t=t||{};const e={};function i(p,y,v,_){return Dt.isPlainObject(p)&&Dt.isPlainObject(y)?Dt.merge.call({caseless:_},p,y):Dt.isPlainObject(y)?Dt.merge({},y):Dt.isArray(y)?y.slice():y}function a(p,y,v,_){if(Dt.isUndefined(y)){if(!Dt.isUndefined(p))return i(void 0,p,v,_)}else return i(p,y,v,_)}function r(p,y){if(!Dt.isUndefined(y))return i(void 0,y)}function u(p,y){if(Dt.isUndefined(y)){if(!Dt.isUndefined(p))return i(void 0,p)}else return i(void 0,y)}function f(p,y,v){if(v in t)return i(p,y);if(v in n)return i(void 0,p)}const d={url:r,method:r,data:r,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:f,headers:(p,y,v)=>a(bw(p),bw(y),v,!0)};return Dt.forEach(Object.keys(Object.assign({},n,t)),function(y){const v=d[y]||a,_=v(n[y],t[y],y);Dt.isUndefined(_)&&v!==f||(e[y]=_)}),e}const Z3=n=>{const t=Df({},n);let{data:e,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:r,headers:u,auth:f}=t;t.headers=u=ws.from(u),t.url=q3(W3(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),f&&u.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let d;if(Dt.isFormData(e)){if(La.hasStandardBrowserEnv||La.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((d=u.getContentType())!==!1){const[p,...y]=d?d.split(";").map(v=>v.trim()).filter(Boolean):[];u.setContentType([p||"multipart/form-data",...y].join("; "))}}if(La.hasStandardBrowserEnv&&(i&&Dt.isFunction(i)&&(i=i(t)),i||i!==!1&&Q7(t.url))){const p=a&&r&&J7.read(r);p&&u.set(a,p)}return t},e9=typeof XMLHttpRequest<"u",n9=e9&&function(n){return new Promise(function(e,i){const a=Z3(n);let r=a.data;const u=ws.from(a.headers).normalize();let{responseType:f,onUploadProgress:d,onDownloadProgress:p}=a,y,v,_,b,E;function R(){b&&b(),E&&E(),a.cancelToken&&a.cancelToken.unsubscribe(y),a.signal&&a.signal.removeEventListener("abort",y)}let T=new XMLHttpRequest;T.open(a.method.toUpperCase(),a.url,!0),T.timeout=a.timeout;function M(){if(!T)return;const D=ws.from("getAllResponseHeaders"in T&&T.getAllResponseHeaders()),N={data:!f||f==="text"||f==="json"?T.responseText:T.response,status:T.status,statusText:T.statusText,headers:D,config:n,request:T};Y3(function(H){e(H),R()},function(H){i(H),R()},N),T=null}"onloadend"in T?T.onloadend=M:T.onreadystatechange=function(){!T||T.readyState!==4||T.status===0&&!(T.responseURL&&T.responseURL.indexOf("file:")===0)||setTimeout(M)},T.onabort=function(){T&&(i(new We("Request aborted",We.ECONNABORTED,n,T)),T=null)},T.onerror=function(){i(new We("Network Error",We.ERR_NETWORK,n,T)),T=null},T.ontimeout=function(){let O=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const N=a.transitional||X3;a.timeoutErrorMessage&&(O=a.timeoutErrorMessage),i(new We(O,N.clarifyTimeoutError?We.ETIMEDOUT:We.ECONNABORTED,n,T)),T=null},r===void 0&&u.setContentType(null),"setRequestHeader"in T&&Dt.forEach(u.toJSON(),function(O,N){T.setRequestHeader(N,O)}),Dt.isUndefined(a.withCredentials)||(T.withCredentials=!!a.withCredentials),f&&f!=="json"&&(T.responseType=a.responseType),p&&([_,E]=i_(p,!0),T.addEventListener("progress",_)),d&&T.upload&&([v,b]=i_(d),T.upload.addEventListener("progress",v),T.upload.addEventListener("loadend",b)),(a.cancelToken||a.signal)&&(y=D=>{T&&(i(!D||D.type?new zd(null,n,T):D),T.abort(),T=null)},a.cancelToken&&a.cancelToken.subscribe(y),a.signal&&(a.signal.aborted?y():a.signal.addEventListener("abort",y)));const C=W7(a.url);if(C&&La.protocols.indexOf(C)===-1){i(new We("Unsupported protocol "+C+":",We.ERR_BAD_REQUEST,n));return}T.send(r||null)})},i9=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let i=new AbortController,a;const r=function(p){if(!a){a=!0,f();const y=p instanceof Error?p:this.reason;i.abort(y instanceof We?y:new zd(y instanceof Error?y.message:y))}};let u=t&&setTimeout(()=>{u=null,r(new We(`timeout ${t} of ms exceeded`,We.ETIMEDOUT))},t);const f=()=>{n&&(u&&clearTimeout(u),u=null,n.forEach(p=>{p.unsubscribe?p.unsubscribe(r):p.removeEventListener("abort",r)}),n=null)};n.forEach(p=>p.addEventListener("abort",r));const{signal:d}=i;return d.unsubscribe=()=>Dt.asap(f),d}},a9=function*(n,t){let e=n.byteLength;if(e<t){yield n;return}let i=0,a;for(;i<e;)a=i+t,yield n.slice(i,a),i=a},s9=async function*(n,t){for await(const e of r9(n))yield*a9(e,t)},r9=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},Mw=(n,t,e,i)=>{const a=s9(n,t);let r=0,u,f=d=>{u||(u=!0,i&&i(d))};return new ReadableStream({async pull(d){try{const{done:p,value:y}=await a.next();if(p){f(),d.close();return}let v=y.byteLength;if(e){let _=r+=v;e(_)}d.enqueue(new Uint8Array(y))}catch(p){throw f(p),p}},cancel(d){return f(d),a.return()}},{highWaterMark:2})},W_=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",K3=W_&&typeof ReadableStream=="function",o9=W_&&(typeof TextEncoder=="function"?(n=>t=>n.encode(t))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Q3=(n,...t)=>{try{return!!n(...t)}catch{return!1}},l9=K3&&Q3(()=>{let n=!1;const t=new Request(La.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!t}),Ew=64*1024,fM=K3&&Q3(()=>Dt.isReadableStream(new Response("").body)),a_={stream:fM&&(n=>n.body)};W_&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!a_[t]&&(a_[t]=Dt.isFunction(n[t])?e=>e[t]():(e,i)=>{throw new We(`Response type '${t}' is not supported`,We.ERR_NOT_SUPPORT,i)})})})(new Response);const u9=async n=>{if(n==null)return 0;if(Dt.isBlob(n))return n.size;if(Dt.isSpecCompliantForm(n))return(await new Request(La.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Dt.isArrayBufferView(n)||Dt.isArrayBuffer(n))return n.byteLength;if(Dt.isURLSearchParams(n)&&(n=n+""),Dt.isString(n))return(await o9(n)).byteLength},c9=async(n,t)=>{const e=Dt.toFiniteNumber(n.getContentLength());return e??u9(t)},f9=W_&&(async n=>{let{url:t,method:e,data:i,signal:a,cancelToken:r,timeout:u,onDownloadProgress:f,onUploadProgress:d,responseType:p,headers:y,withCredentials:v="same-origin",fetchOptions:_}=Z3(n);p=p?(p+"").toLowerCase():"text";let b=i9([a,r&&r.toAbortSignal()],u),E;const R=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let T;try{if(d&&l9&&e!=="get"&&e!=="head"&&(T=await c9(y,i))!==0){let N=new Request(t,{method:"POST",body:i,duplex:"half"}),L;if(Dt.isFormData(i)&&(L=N.headers.get("content-type"))&&y.setContentType(L),N.body){const[H,G]=xw(T,i_(Sw(d)));i=Mw(N.body,Ew,H,G)}}Dt.isString(v)||(v=v?"include":"omit");const M="credentials"in Request.prototype;E=new Request(t,{..._,signal:b,method:e.toUpperCase(),headers:y.normalize().toJSON(),body:i,duplex:"half",credentials:M?v:void 0});let C=await fetch(E);const D=fM&&(p==="stream"||p==="response");if(fM&&(f||D&&R)){const N={};["status","statusText","headers"].forEach(B=>{N[B]=C[B]});const L=Dt.toFiniteNumber(C.headers.get("content-length")),[H,G]=f&&xw(L,i_(Sw(f),!0))||[];C=new Response(Mw(C.body,Ew,H,()=>{G&&G(),R&&R()}),N)}p=p||"text";let O=await a_[Dt.findKey(a_,p)||"text"](C,n);return!D&&R&&R(),await new Promise((N,L)=>{Y3(N,L,{data:O,headers:ws.from(C.headers),status:C.status,statusText:C.statusText,config:n,request:E})})}catch(M){throw R&&R(),M&&M.name==="TypeError"&&/fetch/i.test(M.message)?Object.assign(new We("Network Error",We.ERR_NETWORK,n,E),{cause:M.cause||M}):We.from(M,M&&M.code,n,E)}}),hM={http:A7,xhr:n9,fetch:f9};Dt.forEach(hM,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const Tw=n=>`- ${n}`,h9=n=>Dt.isFunction(n)||n===null||n===!1,J3={getAdapter:n=>{n=Dt.isArray(n)?n:[n];const{length:t}=n;let e,i;const a={};for(let r=0;r<t;r++){e=n[r];let u;if(i=e,!h9(e)&&(i=hM[(u=String(e)).toLowerCase()],i===void 0))throw new We(`Unknown adapter '${u}'`);if(i)break;a[u||"#"+r]=i}if(!i){const r=Object.entries(a).map(([f,d])=>`adapter ${f} `+(d===!1?"is not supported by the environment":"is not available in the build"));let u=t?r.length>1?`since :
`+r.map(Tw).join(`
`):" "+Tw(r[0]):"as no adapter specified";throw new We("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i},adapters:hM};function _b(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new zd(null,n)}function Aw(n){return _b(n),n.headers=ws.from(n.headers),n.data=vb.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),J3.getAdapter(n.adapter||Tg.adapter)(n).then(function(i){return _b(n),i.data=vb.call(n,n.transformResponse,i),i.headers=ws.from(i.headers),i},function(i){return j3(i)||(_b(n),i&&i.response&&(i.response.data=vb.call(n,n.transformResponse,i.response),i.response.headers=ws.from(i.response.headers))),Promise.reject(i)})}const $3="1.8.4",Z_={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{Z_[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const Rw={};Z_.transitional=function(t,e,i){function a(r,u){return"[Axios v"+$3+"] Transitional option '"+r+"'"+u+(i?". "+i:"")}return(r,u,f)=>{if(t===!1)throw new We(a(u," has been removed"+(e?" in "+e:"")),We.ERR_DEPRECATED);return e&&!Rw[u]&&(Rw[u]=!0,console.warn(a(u," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(r,u,f):!0}};Z_.spelling=function(t){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function d9(n,t,e){if(typeof n!="object")throw new We("options must be an object",We.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let a=i.length;for(;a-- >0;){const r=i[a],u=t[r];if(u){const f=n[r],d=f===void 0||u(f,r,n);if(d!==!0)throw new We("option "+r+" must be "+d,We.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new We("Unknown option "+r,We.ERR_BAD_OPTION)}}const ov={assertOptions:d9,validators:Z_},Go=ov.validators;let Tf=class{constructor(t){this.defaults=t,this.interceptors={request:new vw,response:new vw}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const r=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Df(this.defaults,e);const{transitional:i,paramsSerializer:a,headers:r}=e;i!==void 0&&ov.assertOptions(i,{silentJSONParsing:Go.transitional(Go.boolean),forcedJSONParsing:Go.transitional(Go.boolean),clarifyTimeoutError:Go.transitional(Go.boolean)},!1),a!=null&&(Dt.isFunction(a)?e.paramsSerializer={serialize:a}:ov.assertOptions(a,{encode:Go.function,serialize:Go.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),ov.assertOptions(e,{baseUrl:Go.spelling("baseURL"),withXsrfToken:Go.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let u=r&&Dt.merge(r.common,r[e.method]);r&&Dt.forEach(["delete","get","head","post","put","patch","common"],E=>{delete r[E]}),e.headers=ws.concat(u,r);const f=[];let d=!0;this.interceptors.request.forEach(function(R){typeof R.runWhen=="function"&&R.runWhen(e)===!1||(d=d&&R.synchronous,f.unshift(R.fulfilled,R.rejected))});const p=[];this.interceptors.response.forEach(function(R){p.push(R.fulfilled,R.rejected)});let y,v=0,_;if(!d){const E=[Aw.bind(this),void 0];for(E.unshift.apply(E,f),E.push.apply(E,p),_=E.length,y=Promise.resolve(e);v<_;)y=y.then(E[v++],E[v++]);return y}_=f.length;let b=e;for(v=0;v<_;){const E=f[v++],R=f[v++];try{b=E(b)}catch(T){R.call(this,T);break}}try{y=Aw.call(this,b)}catch(E){return Promise.reject(E)}for(v=0,_=p.length;v<_;)y=y.then(p[v++],p[v++]);return y}getUri(t){t=Df(this.defaults,t);const e=W3(t.baseURL,t.url,t.allowAbsoluteUrls);return q3(e,t.params,t.paramsSerializer)}};Dt.forEach(["delete","get","head","options"],function(t){Tf.prototype[t]=function(e,i){return this.request(Df(i||{},{method:t,url:e,data:(i||{}).data}))}});Dt.forEach(["post","put","patch"],function(t){function e(i){return function(r,u,f){return this.request(Df(f||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:u}))}}Tf.prototype[t]=e(),Tf.prototype[t+"Form"]=e(!0)});let p9=class tO{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(r){e=r});const i=this;this.promise.then(a=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](a);i._listeners=null}),this.promise.then=a=>{let r;const u=new Promise(f=>{i.subscribe(f),r=f}).then(a);return u.cancel=function(){i.unsubscribe(r)},u},t(function(r,u,f){i.reason||(i.reason=new zd(r,u,f),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=i=>{t.abort(i)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new tO(function(a){t=a}),cancel:t}}};function m9(n){return function(e){return n.apply(null,e)}}function g9(n){return Dt.isObject(n)&&n.isAxiosError===!0}const dM={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(dM).forEach(([n,t])=>{dM[t]=n});function eO(n){const t=new Tf(n),e=U3(Tf.prototype.request,t);return Dt.extend(e,Tf.prototype,t,{allOwnKeys:!0}),Dt.extend(e,t,null,{allOwnKeys:!0}),e.create=function(a){return eO(Df(n,a))},e}const xi=eO(Tg);xi.Axios=Tf;xi.CanceledError=zd;xi.CancelToken=p9;xi.isCancel=j3;xi.VERSION=$3;xi.toFormData=Y_;xi.AxiosError=We;xi.Cancel=xi.CanceledError;xi.all=function(t){return Promise.all(t)};xi.spread=m9;xi.isAxiosError=g9;xi.mergeConfig=Df;xi.AxiosHeaders=ws;xi.formToJSON=n=>k3(Dt.isHTMLForm(n)?new FormData(n):n);xi.getAdapter=J3.getAdapter;xi.HttpStatusCode=dM;xi.default=xi;const{Axios:E9,AxiosError:T9,CanceledError:A9,isCancel:R9,CancelToken:w9,VERSION:C9,all:D9,Cancel:O9,isAxiosError:U9,spread:N9,toFormData:L9,AxiosHeaders:P9,HttpStatusCode:z9,formToJSON:B9,getAdapter:I9,mergeConfig:V9}=xi;function y9({setVideoUrl:n,setMappedData:t,setSummary:e,summary:i,setIsProcessing:a,isProcessing:r}){const[u,f]=At.useState(null),[d,p]=At.useState(""),[y,v]=At.useState(null),[_,b]=At.useState(null),E=M=>{const C=M.target.files[0];if(f(C),p(""),C){const D=URL.createObjectURL(C);n(D)}},R=M=>{p(M.target.value),f(null),n(M.target.value)},T=async()=>{if(!u&&!d){alert("Please upload a file or enter a URL");return}a(!0),v(Date.now());const M=new FormData;u?M.append("file",u):d&&M.append("youtube_url",d);try{const C=await xi.post("http://localhost:8000/api/upload",M,{headers:{"Content-Type":"multipart/form-data"}}),D=C.data.mapped_data,O=C.data.duration||480;b(O/9.5),t(D),n(u?URL.createObjectURL(u):d);const N=await xi.post("http://localhost:8000/api/plaintext_summary",{transcription:D});e(N.data.summary)}catch(C){console.error("Error processing video:",C),alert("Failed to process video")}finally{a(!1),v(null),b(null)}};return oe.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg shadow-lg flex flex-col gap-4",children:[oe.jsxs("div",{children:[oe.jsx("h2",{className:"text-xl font-bold mb-3 text-center",children:"Upload Video"}),oe.jsxs("div",{className:"space-y-3",children:[oe.jsx("input",{type:"file",accept:"video/*",onChange:E,className:"w-full text-sm text-white bg-gray-700 p-2 rounded",disabled:r}),oe.jsx("input",{type:"text",placeholder:"YouTube URL",value:d,onChange:R,className:"w-full p-2 rounded bg-gray-700 text-white placeholder-gray-400 text-sm",disabled:r}),oe.jsx("button",{onClick:T,disabled:r,className:`w-full p-2 rounded text-white font-semibold text-sm ${r?"bg-gray-500 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"}`,children:r?"Processing...":"Process"}),r&&y&&_&&oe.jsxs("div",{className:"text-center text-white",children:["Processing... (",Math.max(0,Math.round(_-(Date.now()-y)/1e3)),"s left)"]})]})]}),i&&oe.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[oe.jsx("h3",{className:"text-lg font-semibold mb-2 text-center",children:"Summary"}),oe.jsx("p",{className:"text-sm text-gray-300",children:i})]})]})}function v9({mappedData:n,videoUrl:t,videoRef:e,setPlaying:i}){const a=(r,u)=>{r.preventDefault();try{const[f,d,p]=u.split(":").map(Number),y=f*3600+d*60+p;e.current?(e.current.seekTo(y),i(!0),console.log(`Seeked to ${y} seconds`)):console.error("Video ref not initialized")}catch(f){console.error("Error seeking or playing video:",f)}};return oe.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg shadow-lg",children:[oe.jsx("h2",{className:"text-xl font-bold mb-3 text-center",children:"Key Insights"}),oe.jsx("div",{className:"overflow-x-auto",children:oe.jsxs("table",{className:"w-full text-left table-auto",children:[oe.jsx("thead",{children:oe.jsxs("tr",{className:"bg-indigo-600",children:[oe.jsx("th",{className:"p-2 text-sm",children:"Timestamp"}),oe.jsx("th",{className:"p-2 text-sm",children:"Insight"})]})}),oe.jsx("tbody",{children:n.map((r,u)=>oe.jsxs("tr",{className:"border-b border-gray-700 hover:bg-gray-700",children:[oe.jsx("td",{className:"p-2",children:oe.jsx("button",{onClick:f=>a(f,r.timestamp),className:"text-indigo-400 hover:text-indigo-200 font-semibold text-sm",children:r.timestamp})}),oe.jsx("td",{className:"p-2",children:oe.jsx("button",{onClick:f=>a(f,r.timestamp),className:"text-white hover:text-gray-300 text-left w-full text-sm",children:r.text})})]},u))})]})})]})}function _9(){const[n,t]=At.useState(!0),[e,i]=At.useState(""),[a,r]=At.useState([]),[u,f]=At.useState(""),[d,p]=At.useState(!1),[y,v]=At.useState(!1),_=At.useRef(null);return At.useEffect(()=>{const b=setTimeout(()=>t(!1),5e3);return()=>clearTimeout(b)},[]),oe.jsx("div",{className:"min-h-screen flex flex-col items-center p-2 md:p-4 bg-gradient-to-br from-blue-900 to-purple-600",children:n?oe.jsx(EG,{}):oe.jsxs("div",{className:"w-full max-w-7xl flex flex-col md:flex-row gap-4",children:[oe.jsxs("div",{className:"w-full md:w-3/4 sticky top-2 md:top-4 z-10",children:[oe.jsx(FG,{ref:_,videoUrl:e,playing:y,setPlaying:v}),a.length>0&&oe.jsx("div",{className:"mt-2 max-h-[50vh] overflow-y-auto",children:oe.jsx(v9,{mappedData:a,videoUrl:e,videoRef:_,setPlaying:v})})]}),oe.jsx("div",{className:"w-full md:w-1/4 sticky top-2 md:top-4 z-10",children:oe.jsx(y9,{setVideoUrl:i,setMappedData:r,setSummary:f,summary:u,setIsProcessing:p,isProcessing:d})})]})})}JO.createRoot(document.getElementById("root")).render(oe.jsx(ww.StrictMode,{children:oe.jsx(_9,{})}));export{Ms as _,q_ as a,AG as b,rg as g,Fl as r};
